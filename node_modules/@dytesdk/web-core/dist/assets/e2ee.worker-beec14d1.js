var od=Object.defineProperty;var cd=(k,x,L)=>x in k?od(k,x,{enumerable:!0,configurable:!0,writable:!0,value:L}):k[x]=L;var h=(k,x,L)=>(cd(k,typeof x!="symbol"?x+"":x,L),L);(function(){var ns;"use strict";var k;(function(e){e.GroupCall="GROUP_CALL",e.Webinar="WEBINAR",e.AudioRoom="AUDIO_ROOM",e.Livestream="LIVESTREAM",e.Chat="CHAT"})(k||(k={}));var x;(function(e){e.Skip="SKIP",e.OnPrivilegedUserEntry="ON_PRIVILEGED_USER_ENTRY",e.SkipOnAccept="SKIP_ON_ACCEPT"})(x||(x={}));var L;(function(e){e.Allowed="ALLOWED",e.NotAllowed="NOT_ALLOWED",e.CanRequest="CAN_REQUEST"})(L||(L={}));var ve;(function(e){e.Allowed="ALLOWED",e.NotAllowed="NOT_ALLOWED"})(ve||(ve={}));var jt;(function(e){e.FULL_ACCESS="FULL_ACCESS",e.VIEW_ONLY="VIEW_ONLY"})(jt||(jt={}));var _e;(function(e){e.skip="SKIP",e.onAccept="ON_ACCEPT",e.skipOnPrivilegedUserEntry="SKIP_ON_PRIVILEGED_USER_ENTRY",e.skipOnAccept="SKIP_ON_ACCEPT"})(_e||(_e={}));var Q;(function(e){e.none="NONE",e.recorder="RECORDER",e.livestreamer="LIVESTREAMER"})(Q||(Q={}));var Ke;(function(e){e.groupCall="GROUP_CALL",e.webinar="WEBINAR",e.audioRoom="AUDIO_ROOM",e.livestream="LIVESTREAM",e.chat="CHAT"})(Ke||(Ke={}));var Ut;(function(e){e.SKIP="skip",e.SKIP_ON_PRIVILEGED_USER_ENTRY="skipOnPrivilegedUserEntry",e.ON_ACCEPT="skipOnAccept",e.SKIP_ON_ACCEPT="skipOnAccept"})(Ut||(Ut={})),Ke.groupCall,_e.skipOnAccept,Q.none;function os(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ve={},cs={get exports(){return Ve},set exports(e){Ve=e}},be={},us={get exports(){return be},set exports(e){be=e}},Kt=function(t,r){return function(){for(var s=new Array(arguments.length),i=0;i<s.length;i++)s[i]=arguments[i];return t.apply(r,s)}},ds=Kt,j=Object.prototype.toString;function qe(e){return Array.isArray(e)}function He(e){return typeof e=="undefined"}function ls(e){return e!==null&&!He(e)&&e.constructor!==null&&!He(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Vt(e){return j.call(e)==="[object ArrayBuffer]"}function fs(e){return j.call(e)==="[object FormData]"}function ps(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Vt(e.buffer),t}function hs(e){return typeof e=="string"}function gs(e){return typeof e=="number"}function qt(e){return e!==null&&typeof e=="object"}function ye(e){if(j.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function ms(e){return j.call(e)==="[object Date]"}function vs(e){return j.call(e)==="[object File]"}function _s(e){return j.call(e)==="[object Blob]"}function Ht(e){return j.call(e)==="[object Function]"}function bs(e){return qt(e)&&Ht(e.pipe)}function ys(e){return j.call(e)==="[object URLSearchParams]"}function ws(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Es(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function We(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),qe(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}function Ge(){var e={};function t(s,i){ye(e[i])&&ye(s)?e[i]=Ge(e[i],s):ye(s)?e[i]=Ge({},s):qe(s)?e[i]=s.slice():e[i]=s}for(var r=0,n=arguments.length;r<n;r++)We(arguments[r],t);return e}function Ss(e,t,r){return We(t,function(s,i){r&&typeof s=="function"?e[i]=ds(s,r):e[i]=s}),e}function As(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var M={isArray:qe,isArrayBuffer:Vt,isBuffer:ls,isFormData:fs,isArrayBufferView:ps,isString:hs,isNumber:gs,isObject:qt,isPlainObject:ye,isUndefined:He,isDate:ms,isFile:vs,isBlob:_s,isFunction:Ht,isStream:bs,isURLSearchParams:ys,isStandardBrowserEnv:Es,forEach:We,merge:Ge,extend:Ss,trim:ws,stripBOM:As},Z=M;function Wt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Gt=function(t,r,n){if(!r)return t;var s;if(n)s=n(r);else if(Z.isURLSearchParams(r))s=r.toString();else{var i=[];Z.forEach(r,function(c,u){c===null||typeof c=="undefined"||(Z.isArray(c)?u=u+"[]":c=[c],Z.forEach(c,function(l){Z.isDate(l)?l=l.toISOString():Z.isObject(l)&&(l=JSON.stringify(l)),i.push(Wt(u)+"="+Wt(l))}))}),s=i.join("&")}if(s){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t},Cs=M;function we(){this.handlers=[]}we.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1},we.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},we.prototype.forEach=function(t){Cs.forEach(this.handlers,function(n){n!==null&&t(n)})};var Os=we,Ts=M,Rs=function(t,r){Ts.forEach(t,function(s,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(t[r]=s,delete t[i])})},zt=function(t,r,n,s,i){return t.config=r,n&&(t.code=n),t.request=s,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},ze,Jt;function Yt(){if(Jt)return ze;Jt=1;var e=zt;return ze=function(r,n,s,i,a){var o=new Error(r);return e(o,n,s,i,a)},ze}var Je,Xt;function Ls(){if(Xt)return Je;Xt=1;var e=Yt();return Je=function(r,n,s){var i=s.config.validateStatus;!s.status||!i||i(s.status)?r(s):n(e("Request failed with status code "+s.status,s.config,null,s.request,s))},Je}var Ye,Qt;function Ms(){if(Qt)return Ye;Qt=1;var e=M;return Ye=e.isStandardBrowserEnv()?function(){return{write:function(n,s,i,a,o,c){var u=[];u.push(n+"="+encodeURIComponent(s)),e.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),e.isString(a)&&u.push("path="+a),e.isString(o)&&u.push("domain="+o),c===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){var s=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Ye}var Xe,Zt;function Is(){return Zt||(Zt=1,Xe=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}),Xe}var Qe,er;function Ns(){return er||(er=1,Qe=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}),Qe}var Ze,tr;function Ps(){if(tr)return Ze;tr=1;var e=Is(),t=Ns();return Ze=function(n,s){return n&&!e(s)?t(n,s):s},Ze}var et,rr;function xs(){if(rr)return et;rr=1;var e=M,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return et=function(n){var s={},i,a,o;return n&&e.forEach(n.split(`
`),function(u){if(o=u.indexOf(":"),i=e.trim(u.substr(0,o)).toLowerCase(),a=e.trim(u.substr(o+1)),i){if(s[i]&&t.indexOf(i)>=0)return;i==="set-cookie"?s[i]=(s[i]?s[i]:[]).concat([a]):s[i]=s[i]?s[i]+", "+a:a}}),s},et}var tt,nr;function Fs(){if(nr)return tt;nr=1;var e=M;return tt=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),s;function i(a){var o=a;return r&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=i(window.location.href),function(o){var c=e.isString(o)?i(o):o;return c.protocol===s.protocol&&c.host===s.host}}():function(){return function(){return!0}}(),tt}var rt,sr;function Ee(){if(sr)return rt;sr=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,rt=e,rt}var nt,ir;function ar(){if(ir)return nt;ir=1;var e=M,t=Ls(),r=Ms(),n=Gt,s=Ps(),i=xs(),a=Fs(),o=Yt(),c=Se(),u=Ee();return nt=function(l){return new Promise(function(E,T){var P=l.data,w=l.headers,C=l.responseType,V;function Ue(){l.cancelToken&&l.cancelToken.unsubscribe(V),l.signal&&l.signal.removeEventListener("abort",V)}e.isFormData(P)&&delete w["Content-Type"];var p=new XMLHttpRequest;if(l.auth){var sd=l.auth.username||"",id=l.auth.password?unescape(encodeURIComponent(l.auth.password)):"";w.Authorization="Basic "+btoa(sd+":"+id)}var ss=s(l.baseURL,l.url);p.open(l.method.toUpperCase(),n(ss,l.params,l.paramsSerializer),!0),p.timeout=l.timeout;function is(){if(p){var F="getAllResponseHeaders"in p?i(p.getAllResponseHeaders()):null,ae=!C||C==="text"||C==="json"?p.responseText:p.response,X={data:ae,status:p.status,statusText:p.statusText,headers:F,config:l,request:p};t(function(Dt){E(Dt),Ue()},function(Dt){T(Dt),Ue()},X),p=null}}if("onloadend"in p?p.onloadend=is:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(is)},p.onabort=function(){p&&(T(o("Request aborted",l,"ECONNABORTED",p)),p=null)},p.onerror=function(){T(o("Network Error",l,null,p)),p=null},p.ontimeout=function(){var ae=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded",X=l.transitional||c.transitional;l.timeoutErrorMessage&&(ae=l.timeoutErrorMessage),T(o(ae,l,X.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},e.isStandardBrowserEnv()){var as=(l.withCredentials||a(ss))&&l.xsrfCookieName?r.read(l.xsrfCookieName):void 0;as&&(w[l.xsrfHeaderName]=as)}"setRequestHeader"in p&&e.forEach(w,function(ae,X){typeof P=="undefined"&&X.toLowerCase()==="content-type"?delete w[X]:p.setRequestHeader(X,ae)}),e.isUndefined(l.withCredentials)||(p.withCredentials=!!l.withCredentials),C&&C!=="json"&&(p.responseType=l.responseType),typeof l.onDownloadProgress=="function"&&p.addEventListener("progress",l.onDownloadProgress),typeof l.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",l.onUploadProgress),(l.cancelToken||l.signal)&&(V=function(F){p&&(T(!F||F&&F.type?new u("canceled"):F),p.abort(),p=null)},l.cancelToken&&l.cancelToken.subscribe(V),l.signal&&(l.signal.aborted?V():l.signal.addEventListener("abort",V))),P||(P=null),p.send(P)})},nt}var st,or;function Se(){if(or)return st;or=1;var e=M,t=Rs,r=zt,n={"Content-Type":"application/x-www-form-urlencoded"};function s(c,u){!e.isUndefined(c)&&e.isUndefined(c["Content-Type"])&&(c["Content-Type"]=u)}function i(){var c;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(c=ar()),c}function a(c,u,f){if(e.isString(c))try{return(u||JSON.parse)(c),e.trim(c)}catch(l){if(l.name!=="SyntaxError")throw l}return(f||JSON.stringify)(c)}var o={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:i(),transformRequest:[function(u,f){return t(f,"Accept"),t(f,"Content-Type"),e.isFormData(u)||e.isArrayBuffer(u)||e.isBuffer(u)||e.isStream(u)||e.isFile(u)||e.isBlob(u)?u:e.isArrayBufferView(u)?u.buffer:e.isURLSearchParams(u)?(s(f,"application/x-www-form-urlencoded;charset=utf-8"),u.toString()):e.isObject(u)||f&&f["Content-Type"]==="application/json"?(s(f,"application/json"),a(u)):u}],transformResponse:[function(u){var f=this.transitional||o.transitional,l=f&&f.silentJSONParsing,b=f&&f.forcedJSONParsing,E=!l&&this.responseType==="json";if(E||b&&e.isString(u)&&u.length)try{return JSON.parse(u)}catch(T){if(E)throw T.name==="SyntaxError"?r(T,this,"E_JSON_PARSE"):T}return u}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(u){return u>=200&&u<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return e.forEach(["delete","get","head"],function(u){o.headers[u]={}}),e.forEach(["post","put","patch"],function(u){o.headers[u]=e.merge(n)}),st=o,st}var ks=M,Bs=Se(),$s=function(t,r,n){var s=this||Bs;return ks.forEach(n,function(a){t=a.call(s,t,r)}),t},it,cr;function ur(){return cr||(cr=1,it=function(t){return!!(t&&t.__CANCEL__)}),it}var dr=M,at=$s,Ds=ur(),js=Se(),Us=Ee();function ot(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Us("canceled")}var Ks=function(t){ot(t),t.headers=t.headers||{},t.data=at.call(t,t.data,t.headers,t.transformRequest),t.headers=dr.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),dr.forEach(["delete","get","head","post","put","patch","common"],function(s){delete t.headers[s]});var r=t.adapter||js.adapter;return r(t).then(function(s){return ot(t),s.data=at.call(t,s.data,s.headers,t.transformResponse),s},function(s){return Ds(s)||(ot(t),s&&s.response&&(s.response.data=at.call(t,s.response.data,s.response.headers,t.transformResponse))),Promise.reject(s)})},N=M,lr=function(t,r){r=r||{};var n={};function s(f,l){return N.isPlainObject(f)&&N.isPlainObject(l)?N.merge(f,l):N.isPlainObject(l)?N.merge({},l):N.isArray(l)?l.slice():l}function i(f){if(N.isUndefined(r[f])){if(!N.isUndefined(t[f]))return s(void 0,t[f])}else return s(t[f],r[f])}function a(f){if(!N.isUndefined(r[f]))return s(void 0,r[f])}function o(f){if(N.isUndefined(r[f])){if(!N.isUndefined(t[f]))return s(void 0,t[f])}else return s(void 0,r[f])}function c(f){if(f in r)return s(t[f],r[f]);if(f in t)return s(void 0,t[f])}var u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c};return N.forEach(Object.keys(t).concat(Object.keys(r)),function(l){var b=u[l]||i,E=b(l);N.isUndefined(E)&&b!==c||(n[l]=E)}),n},ct,fr;function pr(){return fr||(fr=1,ct={version:"0.25.0"}),ct}var Vs=pr().version,ut={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){ut[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var hr={};ut.transitional=function(t,r,n){function s(i,a){return"[Axios v"+Vs+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return function(i,a,o){if(t===!1)throw new Error(s(a," has been removed"+(r?" in "+r:"")));return r&&!hr[a]&&(hr[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,a,o):!0}};function qs(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),s=n.length;s-- >0;){var i=n[s],a=t[i];if(a){var o=e[i],c=o===void 0||a(o,i,e);if(c!==!0)throw new TypeError("option "+i+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+i)}}var Hs={assertOptions:qs,validators:ut},gr=M,Ws=Gt,mr=Os,vr=Ks,Ae=lr,_r=Hs,ee=_r.validators;function oe(e){this.defaults=e,this.interceptors={request:new mr,response:new mr}}oe.prototype.request=function(t,r){if(typeof t=="string"?(r=r||{},r.url=t):r=t||{},!r.url)throw new Error("Provided config url is not valid");r=Ae(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&_r.assertOptions(n,{silentJSONParsing:ee.transitional(ee.boolean),forcedJSONParsing:ee.transitional(ee.boolean),clarifyTimeoutError:ee.transitional(ee.boolean)},!1);var s=[],i=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(r)===!1||(i=i&&E.synchronous,s.unshift(E.fulfilled,E.rejected))});var a=[];this.interceptors.response.forEach(function(E){a.push(E.fulfilled,E.rejected)});var o;if(!i){var c=[vr,void 0];for(Array.prototype.unshift.apply(c,s),c=c.concat(a),o=Promise.resolve(r);c.length;)o=o.then(c.shift(),c.shift());return o}for(var u=r;s.length;){var f=s.shift(),l=s.shift();try{u=f(u)}catch(b){l(b);break}}try{o=vr(u)}catch(b){return Promise.reject(b)}for(;a.length;)o=o.then(a.shift(),a.shift());return o},oe.prototype.getUri=function(t){if(!t.url)throw new Error("Provided config url is not valid");return t=Ae(this.defaults,t),Ws(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},gr.forEach(["delete","get","head","options"],function(t){oe.prototype[t]=function(r,n){return this.request(Ae(n||{},{method:t,url:r,data:(n||{}).data}))}}),gr.forEach(["post","put","patch"],function(t){oe.prototype[t]=function(r,n,s){return this.request(Ae(s||{},{method:t,url:r,data:n}))}});var Gs=oe,dt,br;function zs(){if(br)return dt;br=1;var e=Ee();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(a){n=a});var s=this;this.promise.then(function(i){if(s._listeners){var a,o=s._listeners.length;for(a=0;a<o;a++)s._listeners[a](i);s._listeners=null}}),this.promise.then=function(i){var a,o=new Promise(function(c){s.subscribe(c),a=c}).then(i);return o.cancel=function(){s.unsubscribe(a)},o},r(function(a){s.reason||(s.reason=new e(a),n(s.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},t.prototype.unsubscribe=function(n){if(this._listeners){var s=this._listeners.indexOf(n);s!==-1&&this._listeners.splice(s,1)}},t.source=function(){var n,s=new t(function(a){n=a});return{token:s,cancel:n}},dt=t,dt}var lt,yr;function Js(){return yr||(yr=1,lt=function(t){return function(n){return t.apply(null,n)}}),lt}var ft,wr;function Ys(){if(wr)return ft;wr=1;var e=M;return ft=function(r){return e.isObject(r)&&r.isAxiosError===!0},ft}var Er=M,Xs=Kt,Ce=Gs,Qs=lr,Zs=Se();function Sr(e){var t=new Ce(e),r=Xs(Ce.prototype.request,t);return Er.extend(r,Ce.prototype,t),Er.extend(r,t),r.create=function(s){return Sr(Qs(e,s))},r}var B=Sr(Zs);B.Axios=Ce,B.Cancel=Ee(),B.CancelToken=zs(),B.isCancel=ur(),B.VERSION=pr().version,B.all=function(t){return Promise.all(t)},B.spread=Js(),B.isAxiosError=Ys(),us.exports=B,be.default=B,function(e){e.exports=be}(cs);var Ar=os(Ve);let Cr="hXgU8Wc8pwuGNq9ms5q9Hh";typeof process!="undefined"&&(ns=process==null?void 0:process.env)!=null&&ns.FLAGSMITH_ENVIRONMENT_KEY&&(Cr=process.env.FLAGSMITH_ENVIRONMENT_KEY);function ei(e=[]){const t={};return e.forEach(r=>{t[r.feature.name]={enabled:r.enabled,value:r.feature_state_value}}),t}class ti{constructor(t=Cr){h(this,"flags",{});h(this,"environmentKey",null);this.environmentKey=t,this.identify=this.identify.bind(this),this.getValue=this.getValue.bind(this),this.hasFeature=this.hasFeature.bind(this),this.getAllFlags=this.getAllFlags.bind(this)}async identify(t,r={},n=!1,s=5e3,i="edge.api.flagsmith.com"){const a=JSON.parse(JSON.stringify(r)),o=Object.entries(a).map(c=>({trait_key:c[0],trait_value:c[1]}));try{const c="_"+(Math.random()+1).toString(36).substring(2),u=await Ar.post(`https://${i}/api/v1/identities/`,{identifier:t+(n?c:""),traits:o},{headers:{"Content-Type":"application/json","X-Environment-Key":this.environmentKey},timeout:s});this.flags=ei(u.data.flags||[])}catch(c){}return this.flags}getValue(t){return this.flags&&this.flags[t]&&this.flags[t].value}hasFeature(t){return this.flags&&this.flags[t]&&this.flags[t].enabled}getAllFlags(){return this.flags}}const pt=new ti,Or=[-2,-1,0,1,2],ri=[0,1,2,3,4];function ni(e){e=e.trim();let t="0",r="0",n="0";return e.length==4?(t="0x"+e[1]+e[1],r="0x"+e[2]+e[2],n="0x"+e[3]+e[3]):e.length>6&&(t="0x"+e[1]+e[2],r="0x"+e[3]+e[4],n="0x"+e[5]+e[6]),[+t,+r,+n]}const si=(e,t,r)=>{let n,s,i;if(t==0)n=s=i=r;else{const a=(u,f,l)=>(l<0&&(l+=1),l>1&&(l-=1),l<.16666666666666666?u+(f-u)*6*l:l<.5?f:l<.6666666666666666?u+(f-u)*(.6666666666666666-l)*6:u),o=r<.5?r*(1+t):r+t-r*t,c=2*r-o;n=a(c,o,e+1/3),s=a(c,o,e),i=a(c,o,e-1/3)}return[Math.round(n*255),Math.round(s*255),Math.round(i*255)]},ii=(e,t,r)=>{e/=255,t/=255,r/=255;const n=Math.max(e,t,r),s=Math.min(e,t,r);let i,a;const o=(n+s)/2;if(n==s)i=a=0;else{const c=n-s;switch(a=o>.5?c/(2-n-s):c/(n+s),n){case e:i=(t-r)/c+(t<r?6:0);break;case t:i=(r-e)/c+2;break;case r:i=(e-t)/c+4;break}i/=6}return[i,a,o]},ai=(e,t,r)=>{const n=s=>s.toString(16).padStart(2,"0");return`#${n(e)}${n(t)}${n(r)}`},Tr=(e,t=Or,r=.4)=>{const n=[],[s,i,a]=ni(e),[o,c,u]=ii(s,i,a),f=Math.round(u*100);f>70?r=.8:f>60?r=.9:f<10?r=.075:f<42&&(r=.3);const l=t.findIndex(w=>w===0);if(l===-1)throw new Error("Invalid reducer provided, it must contain atleast one zero");const b=5-l,E=l+1,T=(100-f)/b,P=f/E;for(const w of t){let C;w<0?C=f+w*P*r:w>0?C=f+w*T*r:C=f;const[V,Ue,p]=si(o,c,C/100);n.push(ai(V,Ue,p))}return n},Rr={dark:{background:{1e3:"#252525",900:"#2F2F2F",800:"#323232",700:"#3E3E3E",600:"#4A4A4A"},text:"#F5F5F5","video-bg":"#1C1C1C"},light:{background:{1e3:"#FFFFFF",900:"#F5F5F5",800:"#EBEBEB",700:"#E0E0E0",600:"#D6D6D6"},text:"#111111","text-on-brand":"#ffffff","video-bg":"#DADADA"}},oi=e=>{const[t,r,n,s,i]=Tr(e,Or);return{300:t,400:r,500:n,600:s,700:i}},ci=e=>{if(e==="#FFFFFF")return Rr.light.background;if(e==="#000000")return Rr.dark.background;const[t,r,n,s,i]=Tr(e,ri);return{1e3:t,900:r,800:n,700:s,600:i}};function ui(){this.__data__=[],this.size=0}function Lr(e,t){return e===t||e!==e&&t!==t}function Oe(e,t){for(var r=e.length;r--;)if(Lr(e[r][0],t))return r;return-1}var di=Array.prototype,li=di.splice;function fi(e){var t=this.__data__,r=Oe(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():li.call(t,r,1),--this.size,!0}function pi(e){var t=this.__data__,r=Oe(t,e);return r<0?void 0:t[r][1]}function hi(e){return Oe(this.__data__,e)>-1}function gi(e,t){var r=this.__data__,n=Oe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function D(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}D.prototype.clear=ui,D.prototype.delete=fi,D.prototype.get=pi,D.prototype.has=hi,D.prototype.set=gi;function mi(){this.__data__=new D,this.size=0}function vi(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function _i(e){return this.__data__.get(e)}function bi(e){return this.__data__.has(e)}var yi=typeof global=="object"&&global&&global.Object===Object&&global,Mr=yi,wi=typeof self=="object"&&self&&self.Object===Object&&self,Ei=Mr||wi||Function("return this")(),$=Ei,Si=$.Symbol,te=Si,Ir=Object.prototype,Ai=Ir.hasOwnProperty,Ci=Ir.toString,ce=te?te.toStringTag:void 0;function Oi(e){var t=Ai.call(e,ce),r=e[ce];try{e[ce]=void 0;var n=!0}catch(i){}var s=Ci.call(e);return n&&(t?e[ce]=r:delete e[ce]),s}var Ti=Object.prototype,Ri=Ti.toString;function Li(e){return Ri.call(e)}var Mi="[object Null]",Ii="[object Undefined]",Nr=te?te.toStringTag:void 0;function ue(e){return e==null?e===void 0?Ii:Mi:Nr&&Nr in Object(e)?Oi(e):Li(e)}function de(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Ni="[object AsyncFunction]",Pi="[object Function]",xi="[object GeneratorFunction]",Fi="[object Proxy]";function Pr(e){if(!de(e))return!1;var t=ue(e);return t==Pi||t==xi||t==Ni||t==Fi}var ki=$["__core-js_shared__"],ht=ki,xr=function(){var e=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Bi(e){return!!xr&&xr in e}var $i=Function.prototype,Di=$i.toString;function q(e){if(e!=null){try{return Di.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var ji=/[\\^$.*+?()[\]{}|]/g,Ui=/^\[object .+?Constructor\]$/,Ki=Function.prototype,Vi=Object.prototype,qi=Ki.toString,Hi=Vi.hasOwnProperty,Wi=RegExp("^"+qi.call(Hi).replace(ji,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Gi(e){if(!de(e)||Bi(e))return!1;var t=Pr(e)?Wi:Ui;return t.test(q(e))}function zi(e,t){return e==null?void 0:e[t]}function H(e,t){var r=zi(e,t);return Gi(r)?r:void 0}var Ji=H($,"Map"),le=Ji,Yi=H(Object,"create"),fe=Yi;function Xi(){this.__data__=fe?fe(null):{},this.size=0}function Qi(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Zi="__lodash_hash_undefined__",ea=Object.prototype,ta=ea.hasOwnProperty;function ra(e){var t=this.__data__;if(fe){var r=t[e];return r===Zi?void 0:r}return ta.call(t,e)?t[e]:void 0}var na=Object.prototype,sa=na.hasOwnProperty;function ia(e){var t=this.__data__;return fe?t[e]!==void 0:sa.call(t,e)}var aa="__lodash_hash_undefined__";function oa(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=fe&&t===void 0?aa:t,this}function W(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}W.prototype.clear=Xi,W.prototype.delete=Qi,W.prototype.get=ra,W.prototype.has=ia,W.prototype.set=oa;function ca(){this.size=0,this.__data__={hash:new W,map:new(le||D),string:new W}}function ua(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Te(e,t){var r=e.__data__;return ua(t)?r[typeof t=="string"?"string":"hash"]:r.map}function da(e){var t=Te(this,e).delete(e);return this.size-=t?1:0,t}function la(e){return Te(this,e).get(e)}function fa(e){return Te(this,e).has(e)}function pa(e,t){var r=Te(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function re(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}re.prototype.clear=ca,re.prototype.delete=da,re.prototype.get=la,re.prototype.has=fa,re.prototype.set=pa;var ha=200;function ga(e,t){var r=this.__data__;if(r instanceof D){var n=r.__data__;if(!le||n.length<ha-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new re(n)}return r.set(e,t),this.size=r.size,this}function ne(e){var t=this.__data__=new D(e);this.size=t.size}ne.prototype.clear=mi,ne.prototype.delete=vi,ne.prototype.get=_i,ne.prototype.has=bi,ne.prototype.set=ga;function ma(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var va=function(){try{var e=H(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Fr=va;function kr(e,t,r){t=="__proto__"&&Fr?Fr(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var _a=Object.prototype,ba=_a.hasOwnProperty;function Br(e,t,r){var n=e[t];(!(ba.call(e,t)&&Lr(n,r))||r===void 0&&!(t in e))&&kr(e,t,r)}function Re(e,t,r,n){var s=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var o=t[i],c=n?n(r[o],e[o],o,r,e):void 0;c===void 0&&(c=e[o]),s?kr(r,o,c):Br(r,o,c)}return r}function ya(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function pe(e){return e!=null&&typeof e=="object"}var wa="[object Arguments]";function $r(e){return pe(e)&&ue(e)==wa}var Dr=Object.prototype,Ea=Dr.hasOwnProperty,Sa=Dr.propertyIsEnumerable,Aa=$r(function(){return arguments}())?$r:function(e){return pe(e)&&Ea.call(e,"callee")&&!Sa.call(e,"callee")},jr=Aa,Ca=Array.isArray,Le=Ca;function Oa(){return!1}var Ur=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Kr=Ur&&typeof module=="object"&&module&&!module.nodeType&&module,Ta=Kr&&Kr.exports===Ur,Vr=Ta?$.Buffer:void 0,Ra=Vr?Vr.isBuffer:void 0,La=Ra||Oa,gt=La,Ma=9007199254740991,Ia=/^(?:0|[1-9]\d*)$/;function Na(e,t){var r=typeof e;return t=t==null?Ma:t,!!t&&(r=="number"||r!="symbol"&&Ia.test(e))&&e>-1&&e%1==0&&e<t}var Pa=9007199254740991;function qr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Pa}var xa="[object Arguments]",Fa="[object Array]",ka="[object Boolean]",Ba="[object Date]",$a="[object Error]",Da="[object Function]",ja="[object Map]",Ua="[object Number]",Ka="[object Object]",Va="[object RegExp]",qa="[object Set]",Ha="[object String]",Wa="[object WeakMap]",Ga="[object ArrayBuffer]",za="[object DataView]",Ja="[object Float32Array]",Ya="[object Float64Array]",Xa="[object Int8Array]",Qa="[object Int16Array]",Za="[object Int32Array]",eo="[object Uint8Array]",to="[object Uint8ClampedArray]",ro="[object Uint16Array]",no="[object Uint32Array]",y={};y[Ja]=y[Ya]=y[Xa]=y[Qa]=y[Za]=y[eo]=y[to]=y[ro]=y[no]=!0,y[xa]=y[Fa]=y[Ga]=y[ka]=y[za]=y[Ba]=y[$a]=y[Da]=y[ja]=y[Ua]=y[Ka]=y[Va]=y[qa]=y[Ha]=y[Wa]=!1;function so(e){return pe(e)&&qr(e.length)&&!!y[ue(e)]}function mt(e){return function(t){return e(t)}}var Hr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,he=Hr&&typeof module=="object"&&module&&!module.nodeType&&module,io=he&&he.exports===Hr,vt=io&&Mr.process,ao=function(){try{var e=he&&he.require&&he.require("util").types;return e||vt&&vt.binding&&vt.binding("util")}catch(t){}}(),se=ao,Wr=se&&se.isTypedArray,oo=Wr?mt(Wr):so,Gr=oo,co=Object.prototype,uo=co.hasOwnProperty;function zr(e,t){var r=Le(e),n=!r&&jr(e),s=!r&&!n&&gt(e),i=!r&&!n&&!s&&Gr(e),a=r||n||s||i,o=a?ya(e.length,String):[],c=o.length;for(var u in e)(t||uo.call(e,u))&&!(a&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Na(u,c)))&&o.push(u);return o}var lo=Object.prototype;function Me(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||lo;return e===r}function Jr(e,t){return function(r){return e(t(r))}}var fo=Jr(Object.keys,Object),po=fo,ho=Object.prototype,go=ho.hasOwnProperty;function Yr(e){if(!Me(e))return po(e);var t=[];for(var r in Object(e))go.call(e,r)&&r!="constructor"&&t.push(r);return t}function _t(e){return e!=null&&qr(e.length)&&!Pr(e)}function bt(e){return _t(e)?zr(e):Yr(e)}function mo(e,t){return e&&Re(t,bt(t),e)}function vo(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var _o=Object.prototype,bo=_o.hasOwnProperty;function yo(e){if(!de(e))return vo(e);var t=Me(e),r=[];for(var n in e)n=="constructor"&&(t||!bo.call(e,n))||r.push(n);return r}function yt(e){return _t(e)?zr(e,!0):yo(e)}function wo(e,t){return e&&Re(t,yt(t),e)}var Xr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Qr=Xr&&typeof module=="object"&&module&&!module.nodeType&&module,Eo=Qr&&Qr.exports===Xr,Zr=Eo?$.Buffer:void 0,en=Zr?Zr.allocUnsafe:void 0;function So(e,t){if(t)return e.slice();var r=e.length,n=en?en(r):new e.constructor(r);return e.copy(n),n}function Ao(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function Co(e,t){for(var r=-1,n=e==null?0:e.length,s=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[s++]=a)}return i}function tn(){return[]}var Oo=Object.prototype,To=Oo.propertyIsEnumerable,rn=Object.getOwnPropertySymbols,Ro=rn?function(e){return e==null?[]:(e=Object(e),Co(rn(e),function(t){return To.call(e,t)}))}:tn,wt=Ro;function Lo(e,t){return Re(e,wt(e),t)}function nn(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}var Mo=Jr(Object.getPrototypeOf,Object),sn=Mo,Io=Object.getOwnPropertySymbols,No=Io?function(e){for(var t=[];e;)nn(t,wt(e)),e=sn(e);return t}:tn,an=No;function Po(e,t){return Re(e,an(e),t)}function on(e,t,r){var n=t(e);return Le(e)?n:nn(n,r(e))}function xo(e){return on(e,bt,wt)}function Fo(e){return on(e,yt,an)}var ko=H($,"DataView"),Et=ko,Bo=H($,"Promise"),St=Bo,$o=H($,"Set"),At=$o,Do=H($,"WeakMap"),Ct=Do,cn="[object Map]",jo="[object Object]",un="[object Promise]",dn="[object Set]",ln="[object WeakMap]",fn="[object DataView]",Uo=q(Et),Ko=q(le),Vo=q(St),qo=q(At),Ho=q(Ct),G=ue;(Et&&G(new Et(new ArrayBuffer(1)))!=fn||le&&G(new le)!=cn||St&&G(St.resolve())!=un||At&&G(new At)!=dn||Ct&&G(new Ct)!=ln)&&(G=function(e){var t=ue(e),r=t==jo?e.constructor:void 0,n=r?q(r):"";if(n)switch(n){case Uo:return fn;case Ko:return cn;case Vo:return un;case qo:return dn;case Ho:return ln}return t});var Ie=G,Wo=Object.prototype,Go=Wo.hasOwnProperty;function zo(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Go.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Jo=$.Uint8Array,pn=Jo;function Ot(e){var t=new e.constructor(e.byteLength);return new pn(t).set(new pn(e)),t}function Yo(e,t){var r=t?Ot(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var Xo=/\w*$/;function Qo(e){var t=new e.constructor(e.source,Xo.exec(e));return t.lastIndex=e.lastIndex,t}var hn=te?te.prototype:void 0,gn=hn?hn.valueOf:void 0;function Zo(e){return gn?Object(gn.call(e)):{}}function ec(e,t){var r=t?Ot(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var tc="[object Boolean]",rc="[object Date]",nc="[object Map]",sc="[object Number]",ic="[object RegExp]",ac="[object Set]",oc="[object String]",cc="[object Symbol]",uc="[object ArrayBuffer]",dc="[object DataView]",lc="[object Float32Array]",fc="[object Float64Array]",pc="[object Int8Array]",hc="[object Int16Array]",gc="[object Int32Array]",mc="[object Uint8Array]",vc="[object Uint8ClampedArray]",_c="[object Uint16Array]",bc="[object Uint32Array]";function yc(e,t,r){var n=e.constructor;switch(t){case uc:return Ot(e);case tc:case rc:return new n(+e);case dc:return Yo(e,r);case lc:case fc:case pc:case hc:case gc:case mc:case vc:case _c:case bc:return ec(e,r);case nc:return new n;case sc:case oc:return new n(e);case ic:return Qo(e);case ac:return new n;case cc:return Zo(e)}}var mn=Object.create,wc=function(){function e(){}return function(t){if(!de(t))return{};if(mn)return mn(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Ec=wc;function Sc(e){return typeof e.constructor=="function"&&!Me(e)?Ec(sn(e)):{}}var Ac="[object Map]";function Cc(e){return pe(e)&&Ie(e)==Ac}var vn=se&&se.isMap,Oc=vn?mt(vn):Cc,Tc=Oc,Rc="[object Set]";function Lc(e){return pe(e)&&Ie(e)==Rc}var _n=se&&se.isSet,Mc=_n?mt(_n):Lc,Ic=Mc,Nc=1,Pc=2,xc=4,bn="[object Arguments]",Fc="[object Array]",kc="[object Boolean]",Bc="[object Date]",$c="[object Error]",yn="[object Function]",Dc="[object GeneratorFunction]",jc="[object Map]",Uc="[object Number]",wn="[object Object]",Kc="[object RegExp]",Vc="[object Set]",qc="[object String]",Hc="[object Symbol]",Wc="[object WeakMap]",Gc="[object ArrayBuffer]",zc="[object DataView]",Jc="[object Float32Array]",Yc="[object Float64Array]",Xc="[object Int8Array]",Qc="[object Int16Array]",Zc="[object Int32Array]",eu="[object Uint8Array]",tu="[object Uint8ClampedArray]",ru="[object Uint16Array]",nu="[object Uint32Array]",_={};_[bn]=_[Fc]=_[Gc]=_[zc]=_[kc]=_[Bc]=_[Jc]=_[Yc]=_[Xc]=_[Qc]=_[Zc]=_[jc]=_[Uc]=_[wn]=_[Kc]=_[Vc]=_[qc]=_[Hc]=_[eu]=_[tu]=_[ru]=_[nu]=!0,_[$c]=_[yn]=_[Wc]=!1;function Ne(e,t,r,n,s,i){var a,o=t&Nc,c=t&Pc,u=t&xc;if(r&&(a=s?r(e,n,s,i):r(e)),a!==void 0)return a;if(!de(e))return e;var f=Le(e);if(f){if(a=zo(e),!o)return Ao(e,a)}else{var l=Ie(e),b=l==yn||l==Dc;if(gt(e))return So(e,o);if(l==wn||l==bn||b&&!s){if(a=c||b?{}:Sc(e),!o)return c?Po(e,wo(a,e)):Lo(e,mo(a,e))}else{if(!_[l])return s?e:{};a=yc(e,l,o)}}i||(i=new ne);var E=i.get(e);if(E)return E;i.set(e,a),Ic(e)?e.forEach(function(w){a.add(Ne(w,t,r,w,e,i))}):Tc(e)&&e.forEach(function(w,C){a.set(C,Ne(w,t,r,C,e,i))});var T=u?c?Fo:xo:c?yt:bt,P=f?void 0:T(e);return ma(P||e,function(w,C){P&&(C=w,w=e[C]),Br(a,C,Ne(w,t,r,C,e,i))}),a}var su=1,iu=4;function au(e){return Ne(e,su|iu)}const ou={border_radius:"rounded",border_width:"thin",spacing_base:4,theme:"dark",colors:{brand:oi("#2160FD"),background:ci("#141414"),danger:"#FF2D2D",text:"#EEEEEE",text_on_brand:"#EEEEEE",success:"#62A504",video_bg:"#191919",warning:"#FFCD07"}};function En(){return au(ou)}x.Skip,L.Allowed,ve.Allowed,L.Allowed,L.Allowed,ve.Allowed,Q.none,En(),k.GroupCall,Q.none,_e.skip,x.Skip,L.Allowed,L.Allowed,L.Allowed,Q.none,En(),k.GroupCall;var Pe,cu=new Uint8Array(16);function uu(){if(!Pe&&(Pe=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Pe))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Pe(cu)}var du=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function lu(e){return typeof e=="string"&&du.test(e)}for(var O=[],Tt=0;Tt<256;++Tt)O.push((Tt+256).toString(16).substr(1));function fu(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(O[e[t+0]]+O[e[t+1]]+O[e[t+2]]+O[e[t+3]]+"-"+O[e[t+4]]+O[e[t+5]]+"-"+O[e[t+6]]+O[e[t+7]]+"-"+O[e[t+8]]+O[e[t+9]]+"-"+O[e[t+10]]+O[e[t+11]]+O[e[t+12]]+O[e[t+13]]+O[e[t+14]]+O[e[t+15]]).toLowerCase();if(!lu(r))throw TypeError("Stringified UUID is invalid");return r}function pu(e,t,r){e=e||{};var n=e.random||(e.rng||uu)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(var s=0;s<16;++s)t[r+s]=n[s];return t}return fu(n)}var hu="[object Map]",gu="[object Set]",mu=Object.prototype,vu=mu.hasOwnProperty;function _u(e){if(e==null)return!0;if(_t(e)&&(Le(e)||typeof e=="string"||typeof e.splice=="function"||gt(e)||Gr(e)||jr(e)))return!e.length;var t=Ie(e);if(t==hu||t==gu)return!e.size;if(Me(e))return!Yr(e).length;for(var r in e)if(vu.call(e,r))return!1;return!0}var Sn;(function(e){e.CHROMIUM="chromum",e.FIREFOX="firefox",e.SAFARI="safari"})(Sn||(Sn={}));var An;(function(e){e.AUDIO="AUDIO",e.VIDEO="VIDEO",e.SPEAKER="SPEAKER"})(An||(An={}));var Cn;(function(e){e[e.INIT=0]="INIT",e[e.ACCEPTED=1]="ACCEPTED",e[e.DENIED=2]="DENIED",e[e.SYS_DENIED=3]="SYS_DENIED",e[e.FAILED=4]="FAILED",e[e.NOTFOUND=5]="NOTFOUND",e[e.NOT_APPLICABLE=6]="NOT_APPLICABLE"})(Cn||(Cn={}));const Rt={roomName:void 0,authToken:void 0,peerId:void 0,apiBase:void 0,baseURI:void 0,defaults:{audio:!0,video:!0},modules:void 0,organizationId:void 0,overrides:{},viewType:void 0,env:void 0},bu="VERSION_PLACEHOLDER",yu="web-core";function wu({servicePrefix:e,apiBase:t,baseURI:r}){return r?`${e}.${r}`:t!=null&&t.includes("api.preprod.dyte")?`${e}.preprod.dyte.io`:t!=null&&t.includes("api.devel.dyte")?`${e}.devel.dyte.io`:`${e}.dyte.io`}const Lt={INTERNAL_CALL_STATS:"internal_call_stats",SIMULCAST:"simulcast",CHAT_SOCKET_SERVER:"chat_socket_server",POLL_SOCKET_SERVER:"poll_socket_server",PLUGIN_SOCKET_SERVER:"plugin_socket_server",NR_OTEL_WEB:"nr_otel_web",CONNECTED_MEETINGS:"connected_meetings",ICE_RESTART_ON_FAILED_STATE:"ice_restart_on_failed_state",ICE_RESTART_ON_DISCONNECTED_STATE:"ice_restart_on_disconnected_state",ENABLE_ICE_STATE_LOGGING:"enable_ice_state_logging",REMOVE_OPERATIONAL_MIC:"web_core_remove_operational_mic",SUPPRESS_PEER_MUTE_UNMUTE_EMITS:"web_core_suppress_peer_mute_unmute_emits",SKIP_OTEL_TRACES:"skip_otel_traces",NEW_LOCAL_MEDIA_HANDLER:"new_local_media_handler",CALLSTATS_INGESTION_LAYER:"callstats_ingestion_layer",USE_USERIDS_IN_CHAT:"use_userids_in_chat",CUSTOM_PING_PONG:"custom_ping_pong",ENABLE_HIVE_SIMULCAST:"enable_hive_simulcast",ENABLE_HIVE_TRANSPORT_RECONNECTION_ON_ICE_FAILED:"enable_hive_transport_reconnection_on_ice_failed",ENABLE_HIVE_EXPERIMENTAL_FAIL_RECOVERY:"enable_hive_fail_recovery",ENABLE_HIVE_INFINITE_RETRIES:"enable_hive_infinite_retries",BYPASS_LOG_EXCLUSION_LIST:"bypass_log_exclusion_list",LOG_LEVEL:"log_level",V1_PLUGINS:"v1_plugins",SCREENSHARE_DTX:"screenshare_dtx",SCREENSHARE_PRIORITY:"screenshare_priority",SCREENSHARE_MIN_BITRATE:"screenshare_minbitrate",SCREENSHARE_MAX_DIMENSIONS:"screenshare_maxdimensions",SCREENSHARE_SIMULCAST:"screenshare_simulcast",DISABLE_WEBCAM_LAYERS_ON_SCREENSHARE:"disable_webcam_layers_on_screenshare",SCREENSHARE_FORCE_GOOG_CONFERENCE:"screenshare_force_goog_conference",LIVESTREAM:"feat_livestream",FETCH_RETRY:"fetch_retry",DEVICE_REMOVE_EXP:"device_remove_exp",DISABLE_WEBCAM_SIMULCAST:"webcore_disable_webcam_simulcast",OVERRIDE_WEBCAM_SIMULCAST:"override_webcam_simulcast",SOCKET_POLLING:"socket_polling",NS_NETWORK_SCORE:"ns_network_score",FEAT_PAGINATED_CHAT:"feat_paginated_chat",VAL_MIN_FRAMERATE:"val_min_framerate",EXTENSION_HACK:"extension_hack",VAL_MAX_FRAMERATE_EXT:"val_max_framerate_ext",VAL_MIN_FRAMERATE_EXT:"val_min_framerate_ext",SCREEENSHARE_ERR_HACK:"screenshare_err_hack",TROUBLESHOOTING:"feat_troubleshooting",VIDEO_CONSTRAINTS:"video_constraints",SCREENSHARE_CONSTRAINTS:"screenshare_constraints",FEAT_CHAT_SDK:"feat_chat_sdk",FEAT_CHAT_SDK_SEARCH:"chat_search",OBS_QUALITY:"obs_quality",ALLOW_SAFARI_MEDIA_MIDDLEWARES:"allow_safari_media_middlewares",DYNAMIC_VIDEO_QUALITY:"dynamic_video_quality",EXP_RESHARE:"exp_reshare",LEAVE_STAGE_ON_END:"leave_stage_on_end",SKIP_SETTING_IN_USE_DEVICE:"skip_setting_in_use_device",PRECALL_BANDWIDTH_TEST:"precall_bandwidth_test"};function xe(e){const t={};return typeof(e==null?void 0:e.code)=="number"&&(t.code=e.code),typeof(e==null?void 0:e.code)=="string"&&(t.code=e.code.substring(0,100)),typeof(e==null?void 0:e.name)=="string"&&(t.name=e.name.substring(0,500)),typeof(e==null?void 0:e.message)=="string"&&(t.message=e.message.substring(0,500)),typeof(e==null?void 0:e.reason)=="string"&&(t.reason=e.reason.substring(0,500)),typeof(e==null?void 0:e.stack)=="string"&&(t.stack=e.stack.substring(0,500)),t}function On(){var r,n,s,i;const e=typeof navigator!="undefined"&&!navigator.isReactNative&&typeof window!="undefined"&&((r=window.location.host)==null?void 0:r.includes("devel"))&&((n=window.location.host)==null?void 0:n.includes("dyte.io")),t=!!((i=(s=Rt.modules)==null?void 0:s.devTools)!=null&&i.logs);return e||t}function Eu(e){if(pt.hasFeature(Lt.LOG_LEVEL)){let t=pt.getValue(Lt.LOG_LEVEL)||"all";if(t=t.toLowerCase().trim(),t==="off")return!1;if(t!=="all"){const r=["debug","log","info","warn","error"],n=r.indexOf(e),s=r.indexOf(t);if(n<s)return!1}}return!0}function Tn(e,t,r={}){return Object.getOwnPropertyNames(e).forEach(n=>{var i;if([null,void 0,NaN].includes(e[n])||t&&(((i=t.match(/\./g))==null?void 0:i.length)||0)>=10)return;const s=t?`${t}.${n}`:n;typeof e[n]=="object"?Tn(e[n],s,r):["number","string","boolean"].includes(typeof e[n])&&(r[s]=e[n])}),r}function Rn(e,t={},r=""){const n={};try{const s=JSON.stringify(t),i=JSON.parse(s),a=Tn(i,r),o=JSON.stringify(a);if(o.length>5e3){const c=`Log named: "${e}" is trying to log an flattened object of size ${o.length} chars that is beyond permitted limit of 5000 chars. Please optimize.`;throw On()&&console.error(c,{log:t,flattened:o}),new Error(c)}return JSON.parse(o)}catch(s){const i=xe(s);n[`${r}.error.message`]=i.message||"",n[`${r}.error.stack`]=i.stack||"",n[`${r}.error.reason`]=i.reason||"",n[`${r}.error.source`]="safelyFlattenObjForOpenTelemetry"}return n}const Su={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Ln={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},S={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},R={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},U={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class d{static getFirstMatch(t,r){const n=r.match(t);return n&&n.length>0&&n[1]||""}static getSecondMatch(t,r){const n=r.match(t);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(t,r,n){if(t.test(r))return n}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const r=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),r[0]===10)switch(r[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const r=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),!(r[0]===1&&r[1]<5)){if(r[0]===1&&r[1]<6)return"Cupcake";if(r[0]===1&&r[1]>=6)return"Donut";if(r[0]===2&&r[1]<2)return"Eclair";if(r[0]===2&&r[1]===2)return"Froyo";if(r[0]===2&&r[1]>2)return"Gingerbread";if(r[0]===3)return"Honeycomb";if(r[0]===4&&r[1]<1)return"Ice Cream Sandwich";if(r[0]===4&&r[1]<4)return"Jelly Bean";if(r[0]===4&&r[1]>=4)return"KitKat";if(r[0]===5)return"Lollipop";if(r[0]===6)return"Marshmallow";if(r[0]===7)return"Nougat";if(r[0]===8)return"Oreo";if(r[0]===9)return"Pie"}}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,r,n=!1){const s=d.getVersionPrecision(t),i=d.getVersionPrecision(r);let a=Math.max(s,i),o=0;const c=d.map([t,r],u=>{const f=a-d.getVersionPrecision(u),l=u+new Array(f+1).join(".0");return d.map(l.split("."),b=>new Array(20-b.length).join("0")+b).reverse()});for(n&&(o=a-Math.min(s,i)),a-=1;a>=o;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===o)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}}static map(t,r){const n=[];let s;if(Array.prototype.map)return Array.prototype.map.call(t,r);for(s=0;s<t.length;s+=1)n.push(r(t[s]));return n}static find(t,r){let n,s;if(Array.prototype.find)return Array.prototype.find.call(t,r);for(n=0,s=t.length;n<s;n+=1){const i=t[n];if(r(i,n))return i}}static assign(t,...r){const n=t;let s,i;if(Object.assign)return Object.assign(t,...r);for(s=0,i=r.length;s<i;s+=1){const a=r[s];typeof a=="object"&&a!==null&&Object.keys(a).forEach(c=>{n[c]=a[c]})}return t}static getBrowserAlias(t){return Su[t]}static getBrowserTypeByAlias(t){return Ln[t]||""}}const v=/version\/(\d+(\.?_?\d+)+)/i,Au=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},r=d.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||d.getFirstMatch(v,e);return r&&(t.version=r),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},r=d.getFirstMatch(v,e)||d.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},r=d.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||d.getFirstMatch(v,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},r=d.getFirstMatch(v,e)||d.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},r=d.getFirstMatch(v,e)||d.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},r=d.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||d.getFirstMatch(v,e);return r&&(t.version=r),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},r=d.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||d.getFirstMatch(v,e);return r&&(t.version=r),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},r=d.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||d.getFirstMatch(v,e);return r&&(t.version=r),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},r=d.getFirstMatch(v,e)||d.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},r=d.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||d.getFirstMatch(v,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},r=d.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||d.getFirstMatch(v,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},r=d.getFirstMatch(v,e)||d.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},r=d.getFirstMatch(v,e)||d.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},r=d.getFirstMatch(v,e)||d.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},r=d.getFirstMatch(v,e)||d.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},r=d.getFirstMatch(v,e)||d.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},r=d.getFirstMatch(v,e)||d.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},r=d.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||d.getFirstMatch(v,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=d.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||d.getFirstMatch(v,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},r=d.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},r=d.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},r=d.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},r=d.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},r=d.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},r=d.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},r=d.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},r=d.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},r=d.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},r=d.getFirstMatch(v,e)||d.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},r=d.getFirstMatch(v,e)||d.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},r=d.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},r=d.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||d.getFirstMatch(v,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},r=d.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||d.getFirstMatch(v,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},r=d.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},r=d.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},r=d.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},r=d.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||d.getFirstMatch(v,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},r=d.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},r=d.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t={name:"Android Browser"},r=d.getFirstMatch(v,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},r=d.getFirstMatch(v,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},r=d.getFirstMatch(v,e);return r&&(t.version=r),t}},{test:[/.*/i],describe(e){const t=/^(.*)\/(.*) /,r=/^(.*)\/(.*)[ \t]\((.*)/,s=e.search("\\(")!==-1?r:t;return{name:d.getFirstMatch(s,e),version:d.getSecondMatch(s,e)}}}];var Cu=[{test:[/Roku\/DVP/],describe(e){const t=d.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:R.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=d.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:R.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=d.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=d.getWindowsVersionName(t);return{name:R.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:R.iOS},r=d.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe(e){const t=d.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=d.getMacOSVersionName(t),n={name:R.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=d.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:R.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t=d.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=d.getAndroidVersionName(t),n={name:R.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=d.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:R.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=d.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||d.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||d.getFirstMatch(/\bbb(\d+)/i,e);return{name:R.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=d.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:R.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=d.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:R.Tizen,version:t}}},{test:[/linux/i],describe(){return{name:R.Linux}}},{test:[/CrOS/],describe(){return{name:R.ChromeOS}}},{test:[/PlayStation 4/],describe(e){const t=d.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:R.PlayStation4,version:t}}}],Ou=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(e){const t=d.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:S.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:S.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:S.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:S.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:S.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:S.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:S.tablet}}},{test(e){const t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe(e){const t=d.getFirstMatch(/(ipod|iphone)/i,e);return{type:S.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:S.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:S.mobile}}},{test(e){return e.getBrowserName(!0)==="blackberry"},describe(){return{type:S.mobile,vendor:"BlackBerry"}}},{test(e){return e.getBrowserName(!0)==="bada"},describe(){return{type:S.mobile}}},{test(e){return e.getBrowserName()==="windows phone"},describe(){return{type:S.mobile,vendor:"Microsoft"}}},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe(){return{type:S.tablet}}},{test(e){return e.getOSName(!0)==="android"},describe(){return{type:S.mobile}}},{test(e){return e.getOSName(!0)==="macos"},describe(){return{type:S.desktop,vendor:"Apple"}}},{test(e){return e.getOSName(!0)==="windows"},describe(){return{type:S.desktop}}},{test(e){return e.getOSName(!0)==="linux"},describe(){return{type:S.desktop}}},{test(e){return e.getOSName(!0)==="playstation 4"},describe(){return{type:S.tv}}},{test(e){return e.getOSName(!0)==="roku"},describe(){return{type:S.tv}}}],Tu=[{test(e){return e.getBrowserName(!0)==="microsoft edge"},describe(e){if(/\sedg\//i.test(e))return{name:U.Blink};const r=d.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:U.EdgeHTML,version:r}}},{test:[/trident/i],describe(e){const t={name:U.Trident},r=d.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){return e.test(/presto/i)},describe(e){const t={name:U.Presto},r=d.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe(e){const t={name:U.Gecko},r=d.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:U.Blink}}},{test:[/(apple)?webkit/i],describe(e){const t={name:U.WebKit},r=d.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];class Mn{constructor(t,r=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},r!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=d.find(Au,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=d.find(Cu,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:r}=this.getOS();return t?String(r).toLowerCase()||"":r||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:r}=this.getPlatform();return t?String(r).toLowerCase()||"":r||""}parsePlatform(){this.parsedResult.platform={};const t=d.find(Ou,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=d.find(Tu,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return d.assign({},this.parsedResult)}satisfies(t){const r={};let n=0;const s={};let i=0;if(Object.keys(t).forEach(o=>{const c=t[o];typeof c=="string"?(s[o]=c,i+=1):typeof c=="object"&&(r[o]=c,n+=1)}),n>0){const o=Object.keys(r),c=d.find(o,f=>this.isOS(f));if(c){const f=this.satisfies(r[c]);if(f!==void 0)return f}const u=d.find(o,f=>this.isPlatform(f));if(u){const f=this.satisfies(r[u]);if(f!==void 0)return f}}if(i>0){const o=Object.keys(s),c=d.find(o,u=>this.isBrowser(u,!0));if(c!==void 0)return this.compareVersion(s[c])}}isBrowser(t,r=!1){const n=this.getBrowserName().toLowerCase();let s=t.toLowerCase();const i=d.getBrowserTypeByAlias(s);return r&&i&&(s=i.toLowerCase()),s===n}compareVersion(t){let r=[0],n=t,s=!1;const i=this.getBrowserVersion();if(typeof i=="string")return t[0]===">"||t[0]==="<"?(n=t.substr(1),t[1]==="="?(s=!0,n=t.substr(2)):r=[],t[0]===">"?r.push(1):r.push(-1)):t[0]==="="?n=t.substr(1):t[0]==="~"&&(s=!0,n=t.substr(1)),r.indexOf(d.compareVersions(i,n,s))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,r=!1){return this.isBrowser(t,r)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(r=>this.is(r))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Ru{static getParser(t,r=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new Mn(t,r)}static parse(t){return new Mn(t).getResult()}static get BROWSER_MAP(){return Ln}static get ENGINE_MAP(){return U}static get OS_MAP(){return R}static get PLATFORMS_MAP(){return S}}const ge="chrome",In="opera",Nn="firefox",Pn="iexplorer",xn="safari",Fn="nwjs",kn="electron",Bn="react-native",Mt="unknown",Fe={Chrome:ge,Chromium:ge,Opera:In,Firefox:Nn,"Internet Explorer":Pn,Safari:xn};function Lu(){const{userAgent:e}=navigator,t={name:Mt,version:void 0};if(e.match(/Chrome/)&&!e.match(/Edge/))if(e.match(/Edg(A?)/)){const r=e.match(/Chrome\/([\d.]+)/)[1];Number.parseInt(r,10)>72&&(t.name=ge,t.version=r)}else t.name=ge,t.version=e.match(/Chrome\/([\d.]+)/)[1];return t}function Mu(){const{userAgent:e}=navigator;if(e.match(/Electron/)){const t=e.match(/Electron\/([\d.]+)/)[1];return{name:kn,version:t}}return null}function Iu(){const{userAgent:e}=navigator;if(e.match(/JitsiMeetNW/)){const t=e.match(/JitsiMeetNW\/([\d.]+)/)[1];return{name:Fn,version:t}}}function Nu(){const e=navigator.userAgent.match(/\b(react[ \t_-]*native)(?:\/(\S+))?/i);let t;if(e||navigator.product==="ReactNative")return e&&e.length>2&&(e[1],t=e[2]),t||(t="unknown"),{name:Bn,version:t}}function Pu(e){let t;const r=[Nu,Mu,Iu];for(let s=0;s<r.length;s+=1)if(t=r[s](),t)return t;const n=e.getBrowserName();return n in Fe?{name:Fe[n],version:e.getBrowserVersion()}:(t=Lu(),t||{name:Mt,version:void 0})}class xu{constructor(){h(this,"_bowser");h(this,"_name");h(this,"_version");h(this,"getDeviceInfo",()=>({isMobile:this.isMobile(),browserName:this._bowser.getBrowserName(),osName:this._bowser.getOSName(),browserVersion:this._bowser.getBrowserVersion(),osVersionName:this._bowser.getOSVersion(),engineName:this._bowser.getEngineName()}))}init(t){let r,n;if(this._bowser=Ru.getParser(navigator.userAgent),typeof t=="undefined"){const s=Pu(this._bowser);r=s.name,n=s.version}else t.name in Fe?(r=Fe[t.name],n=t.version):(r=Mt,n=void 0);this._name=r,this._version=n}getName(){return this._name}isChrome(){return this._name===ge}isOpera(){return this._name===In}isFirefox(){return this._name===Nn}isIExplorer(){return this._name===Pn}isSafari(){return this._name===xn}isNWJS(){return this._name===Fn}isElectron(){return this._name===kn}isReactNative(){return this._name===Bn||navigator.isReactNative===!0}getVersion(){return this._version}isMobile(){return this._bowser.getPlatformType()==="mobile"}_checkCondition(t){if(this._version)return this._bowser.satisfies(t)}isVersionGreaterThan(t){return this._checkCondition({[this._name]:`>${t}`})}isVersionLessThan(t){return this._checkCondition({[this._name]:`<${t}`})}isVersionEqualTo(t){return this._checkCondition({[this._name]:`~${t}`})}}const Fu=72;class ku extends xu{doesVideoMuteByStreamRemove(){return this.isChromiumBased()||this.isWebKitBased()}supportsP2P(){return!this.usesUnifiedPlan()}isChromiumBased(){return this.isChrome()||this.isElectron()||this.isNWJS()||this.isOpera()}isWebKitBased(){return this._bowser.isEngine("webkit")&&typeof navigator.mediaDevices!="undefined"&&typeof navigator.mediaDevices.getUserMedia!="undefined"&&typeof window.RTCRtpTransceiver!="undefined"&&Object.keys(RTCRtpTransceiver.prototype).indexOf("currentDirection")>-1}isSupported(){return this.isChromiumBased()&&this._getChromiumBasedVersion()>=Fu||this.isFirefox()||this.isReactNative()||this.isWebKitBased()}isUserInteractionRequiredForUnmute(){return this.isFirefox()&&this.isVersionLessThan("68")}supportsVideoMuteOnConnInterrupted(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}supportsBandwidthStatistics(){return!this.isFirefox()&&!this.isWebKitBased()}supportsCodecPreferences(){return this.usesUnifiedPlan()&&typeof window.RTCRtpTransceiver!="undefined"&&Object.keys(window.RTCRtpTransceiver.prototype).indexOf("setCodecPreferences")>-1&&Object.keys(RTCRtpSender.prototype).indexOf("getCapabilities")>-1&&!this.isWebKitBased()}supportsDeviceChangeEvent(){return navigator.mediaDevices&&typeof navigator.mediaDevices.ondevicechange!="undefined"&&typeof navigator.mediaDevices.addEventListener!="undefined"}supportsLocalCandidateRttStatistics(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}supportsPerformanceObserver(){return typeof window.PerformanceObserver!="undefined"&&PerformanceObserver.supportedEntryTypes.indexOf("longtask")>-1}supportsReceiverStats(){return typeof window.RTCRtpReceiver!="undefined"&&Object.keys(RTCRtpReceiver.prototype).indexOf("getSynchronizationSources")>-1}supportsRTTStatistics(){return!this.isFirefox()}usesPlanB(){return!this.usesUnifiedPlan()}usesSdpMungingForSimulcast(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}usesUnifiedPlan(){return!!(this.isFirefox()||this.isWebKitBased())}usesNewGumFlow(){return!!(this.isChromiumBased()||this.isFirefox()||this.isWebKitBased())}usesAdapter(){return this.usesNewGumFlow()}usesRidsForSimulcast(){return!1}supportsGetDisplayMedia(){return typeof navigator.getDisplayMedia!="undefined"||typeof navigator.mediaDevices!="undefined"&&typeof navigator.mediaDevices.getDisplayMedia!="undefined"}supportsInsertableStreams(){if(!(typeof window.RTCRtpSender!="undefined"&&(window.RTCRtpSender.prototype.createEncodedStreams||window.RTCRtpSender.prototype.createEncodedVideoStreams)))return!1;const t=new ReadableStream;try{return window.postMessage(t,"*",[t]),!0}catch(r){return!1}}supportsAudioRed(){return Boolean(window.RTCRtpSender&&window.RTCRtpSender.getCapabilities&&window.RTCRtpSender.getCapabilities("audio").codecs.some(t=>t.mimeType==="audio/red")&&window.RTCRtpReceiver&&window.RTCRtpReceiver.getCapabilities&&window.RTCRtpReceiver.getCapabilities("audio").codecs.some(t=>t.mimeType==="audio/red"))}supportsSdpSemantics(){return this.isChromiumBased()}_getChromiumBasedVersion(){if(this.isChromiumBased()){if(this.isNWJS())return Number.parseInt(process.versions.chromium,10);const t=navigator.userAgent;if(t.match(/Chrome/))return Number.parseInt(t.match(/Chrome\/([\d.]+)/)[1],10)}return-1}isIOSMobile(){return this.isMobile&&this._bowser.getOSName()==="iOS"}}const Bu=new ku,g=class{static get logsEndpoint(){return`https://${wu({servicePrefix:"api-silos",apiBase:Rt.apiBase,baseURI:Rt.baseURI})}/otel/logs`}static init(t,r){navigator.isReactNative||(g.tracingEnabled=r,g.meetingMetadata.peerId=t,g.meetingMetadata.sdkVersion=bu,g.meetingMetadata.deviceInfo=Bu.getDeviceInfo(),g.meetingMetadata.visitedUrl=!navigator.isReactNative&&typeof window!="undefined"&&window.location.href,document.addEventListener("visibilitychange",g.processCachedLogs),g.logsProcessorTimer=setInterval(g.processCachedLogs,g.logsProcessingInterval),r&&(g.initialized=!0))}static trace(t){return(r,n,s)=>{const i=s.value;return s.value=function(...o){if(!g.initialized||navigator.isReactNative||!g.tracingEnabled||pt.hasFeature(Lt.SKIP_OTEL_TRACES))return i.apply(this,o);g.addLogInCurrentSpan("info",t);const c=performance.now(),u=i.apply(this,o);return Promise.resolve(u).then(()=>{const f=performance.now();g.addLogInCurrentSpan("info",`${t}_timing`,{execTime:f-c})}).catch(()=>{const f=performance.now();g.addLogInCurrentSpan("info",`${t}_timing`,{execTime:f-c})}),u},s}}static injectContext(t){var s;const r=pu().replace(/-/g,"").substring(0,16),n=(s=g.meetingMetadata.peerId)==null?void 0:s.replace(/-/g,"");t.TRACEPARENT=`00-${n}-${r}-01`}static addLogInCurrentSpan(t,r,n={},s=!1){if(n!=null&&n.error&&Object.assign(n,{error:xe(n.error)}),On()&&(_u(n)?console[t]("DyteInternalLogs:: ",t,r):console[t]("DyteInternalLogs:: ",t,r,n)),!!Eu(t))try{const a=Rn(r,n,"metadata"),o=new Date,c={message:r,level:t,...a,loggedAt:o.toISOString(),loggedAtTzOffset:o.getTimezoneOffset()};s?g.sendOtelLogsToNewRelic([c]):g.logsCache.push(c)}catch(a){g.addLogInCurrentSpan("error","opentelemetry::addLogInCurrentSpan_failed",{error:xe(a)})}}static sendOtelLogsToNewRelic(t){Ar.post(g.logsEndpoint,{meetingMetadata:Rn("sendOtelLogsToNewRelic",g.meetingMetadata,"meetingMetadata"),serviceName:yu,logs:t}).catch(r=>{g.addLogInCurrentSpan("error","opentelemetry::sendOtelLogToNewRelic_failed",{error:xe(r)}),g.logsCache.push(...t)})}static processCachedLogs(){const t=g.logsCache.splice(0,25);t!=null&&t.length&&g.sendOtelLogsToNewRelic(t)}static destruct(){clearInterval(g.logsProcessorTimer),g.processCachedLogs(),!navigator.isReactNative&&document.removeEventListener("visibilitychange",g.processCachedLogs)}};let I=g;h(I,"logsCache",[]),h(I,"logsProcessorTimer"),h(I,"tracingEnabled",!0),h(I,"initialized",!1),h(I,"logsProcessingInterval",7e3),h(I,"logExclusionList",["message","websocket/message","roomMessage","websocket/room-message","websocket/room-legacy-mode","chatMessage","websocket/new-chat-message","websocket/no-active-speaker","websocket/selected-peers","websocket/active-speaker","ping","websocket/new-consumer","websocket/producer-score","websocket/consumer-score","websocket/plugin-event","websocket/plugin-data","websocket/plugin-internal-data"]),h(I,"meetingMetadata",{});class A{static info(t,r,n){I.addLogInCurrentSpan("info",t,r,n)}static error(t,r,n){I.addLogInCurrentSpan("error",t,r,n)}static debug(t,r,n){I.addLogInCurrentSpan("debug",t,r,n)}static log(t,r,n){I.addLogInCurrentSpan("log",t,r,n)}static warn(t,r,n){I.addLogInCurrentSpan("warn",t,r,n)}}const ke="AES-GCM",$u=16,It={key:10,delta:3,audio:1,empty:0},$n=12,Du={sharedKey:!1,ratchetSalt:"DyteFrameEncryptionKey",ratchetWindowSize:8},ju={"00":"DyteClient","01":"Controller","02":"RoomNodeClient","03":"HiveNodeClient","04":"SocketService","05":"Chat","06":"Plugin","07":"Polls","08":"Meta","09":"Preset",10:"Recording",11:"Self",12:"Participant",13:"Spotlight",14:"Remote Request",15:"Webinar",16:"LocalMediaHandler",17:"End-End Encryption"},Be={"0000":"Internal exception.","0001":"Failed to initialize.","0002":"Failed to join room.","0003":"Failed to leave room.","0100":"Internal exception","0200":"Internal exception.","0300":"Internal exception","0400":"Internal exception","0500":"Internal exception","0501":"Permission denied.","0502":"Invalid message body.","0510":"Invalid channel name.","0600":"Internal exception","0700":"Internal exception","0800":"Internal exception","0900":"Internal exception",1e3:"Internal exception",1100:"Internal exception",1200:"Internal exception",1300:"Internal exception",1400:"Internal exception",1500:"Internal exception",1600:"Internal exception",1601:"Failed to get audio track",1602:"Failed to get video track",1603:"Incorrect device",1604:"Failed to change device",1701:"Crypto error",9900:"Internal exception"};Object.keys(Be).forEach(e=>{Be[e]=`{${ju[e.slice(0,2)]}} ${Be[e]}`});class Uu extends Error{constructor(r,n,s=!1){super(r);h(this,"code");this.code=n,this.name="DyteError",this.message=`[ERR${this.code}]: ${Be[this.code]}
${this.message}`;try{let i=s;n&&n.endsWith("00")&&(i=!0),i&&A.error("DyteError",{error:{message:this.message,name:this.name,code:n}})}catch(i){}}}var z=(e=>(e[e.InvalidKey=0]="InvalidKey",e[e.MissingKey=1]="MissingKey",e[e.InternalError=2]="InternalError",e))(z||{});class J extends Uu{constructor(r,n=2){super(r,"1701");h(this,"reason");this.reason=n}}var $e={},Ku={get exports(){return $e},set exports(e){$e=e}},ie=typeof Reflect=="object"?Reflect:null,Dn=ie&&typeof ie.apply=="function"?ie.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},De;ie&&typeof ie.ownKeys=="function"?De=ie.ownKeys:Object.getOwnPropertySymbols?De=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:De=function(t){return Object.getOwnPropertyNames(t)};function Vu(e){console&&console.warn&&console.warn(e)}var jn=Number.isNaN||function(t){return t!==t};function m(){m.init.call(this)}Ku.exports=m,$e.once=Gu,m.EventEmitter=m,m.prototype._events=void 0,m.prototype._eventsCount=0,m.prototype._maxListeners=void 0;var Un=10;function je(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(m,"defaultMaxListeners",{enumerable:!0,get:function(){return Un},set:function(e){if(typeof e!="number"||e<0||jn(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Un=e}}),m.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},m.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||jn(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Kn(e){return e._maxListeners===void 0?m.defaultMaxListeners:e._maxListeners}m.prototype.getMaxListeners=function(){return Kn(this)},m.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=t==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var c=i[t];if(c===void 0)return!1;if(typeof c=="function")Dn(c,this,r);else for(var u=c.length,f=Gn(c,u),n=0;n<u;++n)Dn(f[n],this,r);return!0};function Vn(e,t,r,n){var s,i,a;if(je(r),i=e._events,i===void 0?(i=e._events=Object.create(null),e._eventsCount=0):(i.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),a=i[t]),a===void 0)a=i[t]=r,++e._eventsCount;else if(typeof a=="function"?a=i[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),s=Kn(e),s>0&&a.length>s&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=a.length,Vu(o)}return e}m.prototype.addListener=function(t,r){return Vn(this,t,r,!1)},m.prototype.on=m.prototype.addListener,m.prototype.prependListener=function(t,r){return Vn(this,t,r,!0)};function qu(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function qn(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},s=qu.bind(n);return s.listener=r,n.wrapFn=s,s}m.prototype.once=function(t,r){return je(r),this.on(t,qn(this,t,r)),this},m.prototype.prependOnceListener=function(t,r){return je(r),this.prependListener(t,qn(this,t,r)),this},m.prototype.removeListener=function(t,r){var n,s,i,a,o;if(je(r),s=this._events,s===void 0)return this;if(n=s[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===r||n[a].listener===r){o=n[a].listener,i=a;break}if(i<0)return this;i===0?n.shift():Hu(n,i),n.length===1&&(s[t]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",t,o||r)}return this},m.prototype.off=m.prototype.removeListener,m.prototype.removeAllListeners=function(t){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var i=Object.keys(n),a;for(s=0;s<i.length;++s)a=i[s],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(t,r[s]);return this};function Hn(e,t,r){var n=e._events;if(n===void 0)return[];var s=n[t];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?Wu(s):Gn(s,s.length)}m.prototype.listeners=function(t){return Hn(this,t,!0)},m.prototype.rawListeners=function(t){return Hn(this,t,!1)},m.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Wn.call(e,t)},m.prototype.listenerCount=Wn;function Wn(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}m.prototype.eventNames=function(){return this._eventsCount>0?De(this._events):[]};function Gn(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Hu(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Wu(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function Gu(e,t){return new Promise(function(r,n){function s(a){e.removeListener(t,i),n(a)}function i(){typeof e.removeListener=="function"&&e.removeListener("error",s),r([].slice.call(arguments))}zn(e,t,i,{once:!0}),t!=="error"&&zu(e,s,{once:!0})})}function zu(e,t,r){typeof e.on=="function"&&zn(e,"error",t,r)}function zn(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function s(i){n.once&&e.removeEventListener(t,s),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}class Jn extends $e.EventEmitter{constructor(){super(),super.setMaxListeners(25)}emit(t,...r){return super.emit("*",t,...r),super.emit(t,...r)}on(t,r){try{const n=this.listenerCount(t);n>25&&n%25===0&&A.warn("DyteEventEmitter::maxListenersExceeded",{eventListener:{eventName:t.toString(),listenerCount:this.listenerCount(t)}})}catch(n){}return super.on(t,r)}addListener(t,r){try{const n=this.listenerCount(t);n>25&&n%25===0&&A.warn("DyteEventEmitter::maxListenersExceeded",{eventListener:{eventName:t.toString(),listenerCount:this.listenerCount(t)}})}catch(n){}return super.addListener(t,r)}off(t,r){return super.off(t,r)}once(t,r){return super.once(t,r)}prependListener(t,r){return super.prependListener(t,r)}prependOnceListener(t,r){return super.prependOnceListener(t,r)}removeListener(t,r){return super.removeListener(t,r)}removeAllListeners(t){return super.removeAllListeners(t)}listeners(t){return super.listeners(t)}listenerCount(t){return super.listenerCount(t)}}const Nt={Error:"cryptorError"};function Ju(e){return"type"in e}async function Yu(e,t={name:ke},r="encrypt"){return crypto.subtle.importKey("raw",e,t,!1,r==="derive"?["deriveBits","deriveKey"]:["encrypt","decrypt"])}function Yn(e,t){const n=new TextEncoder().encode(t);switch(e){case"HKDF":return{name:"HKDF",salt:n,hash:"SHA-256",info:new ArrayBuffer(128)};case"PBKDF2":return{name:"PBKDF2",salt:n,hash:"SHA-256",iterations:1e5};default:throw new Error(`algorithm ${e} is currently unsupported`)}}async function Xn(e,t){const r=Yn(e.algorithm.name,t),n=await crypto.subtle.deriveKey(r,e,{name:ke,length:128},!1,["encrypt","decrypt"]);return{material:e,encryptionKey:n}}async function Xu(e,t){const r=Yn(e.algorithm.name,t);return crypto.subtle.deriveBits(r,e,256)}class Qu extends Jn{}class Qn extends Qu{constructor(r){var n;super();h(this,"sendCounts");h(this,"isKeyInvalid",!1);h(this,"participantId");h(this,"trackId");h(this,"keys");h(this,"videoCodec");h(this,"rtpMap");h(this,"keyProviderOptions");h(this,"unencryptedFrameByteTrailer");this.sendCounts=new Map,this.keys=r.keys,this.participantId=r.participantId,this.rtpMap=new Map,this.keyProviderOptions=r.keyProviderOptions,this.unencryptedFrameByteTrailer=(n=r.unencryptedFrameBytes)!=null?n:new TextEncoder().encode("LKROCKS")}setParticipant(r,n){this.participantId=r,this.keys=n}unsetParticipant(){this.participantId=void 0}getParticipantId(){return this.participantId}getTrackId(){return this.trackId}setVideoCodec(r){this.videoCodec=r}setRtpMap(r){this.rtpMap=r}setupTransform(r,n,s,i,a){a&&(console.info("setting codec on cryptor to",a),this.videoCodec=a);const o=r==="encode"?this.encodeFunction:this.decodeFunction,c=new TransformStream({transform:o.bind(this)});n.pipeThrough(c).pipeTo(s).catch(u=>{console.error(u),this.emit("cryptorError",u instanceof J?u:new J(u.message))}),this.trackId=i}async encodeFunction(r,n){var a;if(!this.keys.isEnabled()||r.data.byteLength===0)return n.enqueue(r);const{encryptionKey:s}=this.keys.getKeySet(),i=this.keys.getCurrentKeyIndex();if(s){const o=this.makeIV((a=r.getMetadata().synchronizationSource)!=null?a:-1,r.timestamp),c=new Uint8Array(r.data,0,this.getUnencryptedBytes(r)),u=new Uint8Array(2);u[0]=$n,u[1]=i;try{const f=await crypto.subtle.encrypt({name:ke,iv:o,additionalData:new Uint8Array(r.data,0,c.byteLength)},s,new Uint8Array(r.data,this.getUnencryptedBytes(r))),l=new ArrayBuffer(c.byteLength+f.byteLength+o.byteLength+u.byteLength),b=new Uint8Array(l);return b.set(c),b.set(new Uint8Array(f),c.byteLength),b.set(new Uint8Array(o),c.byteLength+f.byteLength),b.set(u,c.byteLength+f.byteLength+o.byteLength),r.data=l,n.enqueue(r)}catch(f){A.error(f)}}else this.emit(Nt.Error,new J("encryption key missing for encoding",z.MissingKey))}async decodeFunction(r,n){if(!this.keys.isEnabled()||r.data.byteLength===0||Zu(r.data,this.unencryptedFrameByteTrailer))return n.enqueue(r);const i=new Uint8Array(r.data)[r.data.byteLength-1];if(this.keys.getKeySet(i))try{const a=await this.decryptFrame(r,i);if(a)return n.enqueue(a);this.isKeyInvalid=!1}catch(a){a instanceof J&&a.reason===z.InvalidKey?this.isKeyInvalid||(A.warn("invalid key"),this.emit(Nt.Error,new J(`invalid key for participant ${this.participantId}`,z.InvalidKey)),this.isKeyInvalid=!0):A.warn("decoding frame failed",{error:a})}else this.emit(Nt.Error,new J(`key missing for participant ${this.participantId}`,z.MissingKey));return n.enqueue(r)}async decryptFrame(r,n,s=void 0,i={ratchetCount:0}){var o;const a=this.keys.getKeySet(n);try{const c=new Uint8Array(r.data,0,this.getUnencryptedBytes(r)),u=new Uint8Array(r.data,r.data.byteLength-2,2),f=u[0],l=new Uint8Array(r.data,r.data.byteLength-f-u.byteLength,f),b=c.byteLength,E=r.data.byteLength-(c.byteLength+f+u.byteLength),T=await crypto.subtle.decrypt({name:ke,iv:l,additionalData:new Uint8Array(r.data,0,c.byteLength)},(o=i.encryptionKey)!=null?o:a.encryptionKey,new Uint8Array(r.data,b,E)),P=new ArrayBuffer(c.byteLength+T.byteLength),w=new Uint8Array(P);return w.set(new Uint8Array(r.data,0,c.byteLength)),w.set(new Uint8Array(T),c.byteLength),r.data=P,r}catch(c){if(this.keyProviderOptions.ratchetWindowSize>0){if(i.ratchetCount<this.keyProviderOptions.ratchetWindowSize){A.debug(`ratcheting key attempt ${i.ratchetCount} of ${this.keyProviderOptions.ratchetWindowSize}, for kind ${r instanceof RTCEncodedAudioFrame?"audio":"video"}`);let u;if(a===this.keys.getKeySet(n)){const l=await this.keys.ratchetKey(n,!1);u=await Xn(l,this.keyProviderOptions.ratchetSalt)}const f=await this.decryptFrame(r,n,s||a,{ratchetCount:i.ratchetCount+1,encryptionKey:u==null?void 0:u.encryptionKey});return f&&u&&(this.keys.setKeySet(u,n,!0),this.keys.setCurrentKeyIndex(n)),f}s&&(A.debug("resetting to initial material"),this.keys.setKeyFromMaterial(s.material,n)),A.warn("maximum ratchet attempts exceeded, resetting key")}else throw new J("Decryption failed, most likely because of an invalid key",z.InvalidKey)}}makeIV(r,n){var o;const s=new ArrayBuffer($n),i=new DataView(s);this.sendCounts.has(r)||this.sendCounts.set(r,Math.floor(Math.random()*65535));const a=(o=this.sendCounts.get(r))!=null?o:0;return i.setUint32(0,r),i.setUint32(4,n),i.setUint32(8,n-a%65535),this.sendCounts.set(r,a+1),s}getUnencryptedBytes(r){var n;if(Ju(r)){const s=(n=this.getVideoCodec(r))!=null?n:this.videoCodec;if(s==="av1"||s==="vp9")throw new Error(`${s} is not yet supported for end to end encryption`);return It[r.type]}return It.audio}getVideoCodec(r){if(this.rtpMap.size===0)return;const{payloadType:n}=r.getMetadata();return n?this.rtpMap.get(n):void 0}}function Zu(e,t){const r=new Uint8Array(e.slice(e.byteLength-t.byteLength));return t.every((n,s)=>n===r[s])}class Zn extends Jn{constructor(r,n,s){super();h(this,"currentKeyIndex");h(this,"cryptoKeyRing");h(this,"enabled");h(this,"keyProviderOptions");h(this,"ratchetPromiseMap");h(this,"participantId");this.currentKeyIndex=0,this.cryptoKeyRing=new Array($u),this.enabled=n,this.keyProviderOptions=s,this.ratchetPromiseMap=new Map,this.participantId=r}setEnabled(r){this.enabled=r}ratchetKey(r,n=!0){const s=r!=null?r:this.getCurrentKeyIndex(),i=s,a=this.ratchetPromiseMap.get(i);if(typeof a!="undefined")return a;const o=new Promise(async(c,u)=>{try{const f=this.getKeySet(i).material,l=await Yu(await Xu(f,this.keyProviderOptions.ratchetSalt),f.algorithm.name,"derive");n&&this.setKeyFromMaterial(l,i,!0),this.emit("keyRatcheted",l,s,this.participantId),c(l)}catch(f){u(f)}finally{this.ratchetPromiseMap.delete(i)}});return this.ratchetPromiseMap.set(i,o),o}async setKeyFromMaterial(r,n=0,s=!1){A.debug("Worker: setting new key"),n>=0&&(this.currentKeyIndex=n%this.cryptoKeyRing.length);const i=await Xn(r,this.keyProviderOptions.ratchetSalt);this.setKeySet(i,this.currentKeyIndex,s)}async setKeySet(r,n,s=!1){this.cryptoKeyRing[n%this.cryptoKeyRing.length]=r,s&&this.emit("keyRatcheted",r.material,n,this.participantId)}async setCurrentKeyIndex(r){this.currentKeyIndex=r%this.cryptoKeyRing.length}isEnabled(){return this.enabled}getCurrentKeyIndex(){return this.currentKeyIndex}getKeySet(r){return this.cryptoKeyRing[r!=null?r:this.currentKeyIndex]}}const Pt=[],xt=new Map,Ft=[];let K,kt=!1,es=!1,Bt,Y=Du;function ed(e,t){postMessage({kind:"ratchetKey",data:{keyIndex:t,material:e}})}function me(e){if(console.log("getting key for participant ",e),!e)return K;let t=xt.get(e);return t||(t=new Zn(e,!0,Y),Bt&&t.setKeyFromMaterial(Bt),xt.set(e,t)),t}function td(e,t){t?me(t).setEnabled(e):(kt=e,K.setEnabled(e))}function ts(e){e.on("cryptorError",t=>{const r={kind:"error",data:{error:new Error(`${z[t.reason]}: ${t.message}`)}};postMessage(r)})}function $t(e,t){let r=Pt.find(n=>n.getTrackId()===t);if(r)e!==r.getParticipantId()&&r.setParticipant(e,me(e));else{if(A.info(`creating new cryptor for ${e}`),!Y)throw Error("Missing keyProvider options");r=new Qn({participantId:e,keys:me(e),keyProviderOptions:Y}),ts(r),Pt.push(r)}return r}function rs(e){let t=Ft.find(r=>r.getTrackId()===e);if(!t){if(!Y)throw console.log("Missing keyProvider options"),new TypeError("Missing keyProvider options");t=new Qn({keys:K,participantId:"publisher",keyProviderOptions:Y}),ts(t),Ft.push(t)}return console.log("returning publish cryptor",t),t}function rd(e){var t;(t=Pt.find(r=>r.getTrackId()===e))==null||t.unsetParticipant()}function nd(e,t){A.debug("setting shared key"),Bt=e,K==null||K.setKeyFromMaterial(e,t);for(const[,r]of xt)r.setKeyFromMaterial(e,t)}onmessage=e=>{const{kind:t,data:r}=e.data;switch(t){case"init":A.info("worker initialized"),Y=r.keyProviderOptions,es=!!r.keyProviderOptions.sharedKey;const n={kind:"enable",data:{enabled:kt}};K=new Zn(void 0,kt,Y),K.on("keyRatcheted",ed),postMessage(n);break;case"enable":td(r.enabled,r.participantId),A.info("updated e2ee enabled status"),postMessage(e.data);break;case"decode":$t(r.participantId,r.trackId).setupTransform(t,r.readableStream,r.writableStream,r.trackId,r.codec);break;case"encode":rs(r.trackId).setupTransform(t,r.readableStream,r.writableStream,r.trackId,r.codec);break;case"setKey":es?(A.debug("set shared key"),nd(r.key,r.keyIndex)):r.participantId?me(r.participantId).setKeyFromMaterial(r.key,r.keyIndex):A.error("no participant Id was provided and shared key usage is disabled");break;case"removeTransform":rd(r.trackId);break;case"updateCodec":$t(r.participantId,r.trackId).setVideoCodec(r.codec);break;case"setRTPMap":Ft.forEach(a=>{a.setRtpMap(r.map)});break;case"ratchetRequest":me(r.participantId).ratchetKey(r.keyIndex);break}},self.RTCTransformEvent&&(A.debug("setup transform event"),self.onrtctransform=e=>{const{transformer:t}=e;A.debug("transformer",t),t.handled=!0;const{kind:r,participantId:n,trackId:s,codec:i}=t.options,a=r==="encode"?rs(s):$t(n,s);A.debug(`transform ${i}`),a.setupTransform(r,t.readable,t.writable,s,i)})})();
