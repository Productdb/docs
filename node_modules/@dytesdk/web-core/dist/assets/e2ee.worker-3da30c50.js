var w=0,k=function(){};return{s:k,n:function(){return w>=l.length?{done:!0}:{done:!1,value:l[w++]}},e:function(j){throw j},f:k}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var F=!0,x=!1,q;return{s:function(){y=y.call(l)},n:function(){var j=y.next();return F=j.done,j},e:function(j){x=!0,q=j},f:function(){try{!F&&y.return!=null&&y.return()}finally{if(x)throw q}}}}function _slicedToArray(l,p){return _arrayWithHoles(l)||_iterableToArrayLimit(l,p)||_unsupportedIterableToArray(l,p)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(l,p){if(l){if(typeof l=="string")return _arrayLikeToArray(l,p);var y=Object.prototype.toString.call(l).slice(8,-1);if(y==="Object"&&l.constructor&&(y=l.constructor.name),y==="Map"||y==="Set")return Array.from(l);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(l,p)}}function _arrayLikeToArray(l,p){(p==null||p>l.length)&&(p=l.length);for(var y=0,w=new Array(p);y<p;y++)w[y]=l[y];return w}function _iterableToArrayLimit(l,p){var y=l==null?null:typeof Symbol!="undefined"&&l[Symbol.iterator]||l["@@iterator"];if(y!=null){var w,k,F,x,q=[],B=!0,j=!1;try{if(F=(y=y.call(l)).next,p===0){if(Object(y)!==y)return;B=!1}else for(;!(B=(w=F.call(y)).done)&&(q.push(w.value),q.length!==p);B=!0);}catch(pe){j=!0,k=pe}finally{try{if(!B&&y.return!=null&&(x=y.return(),Object(x)!==x))return}finally{if(j)throw k}}return q}}function _arrayWithHoles(l){if(Array.isArray(l))return l}function _regeneratorRuntime(){"use strict";function _get(){return typeof Reflect!="undefined"&&Reflect.get?_get=Reflect.get.bind():_get=function(p,y,w){var k=_superPropBase(p,y);if(k){var F=Object.getOwnPropertyDescriptor(k,y);return F.get?F.get.call(arguments.length<3?p:w):F.value}},_get.apply(this,arguments)}function _superPropBase(l,p){for(;!Object.prototype.hasOwnProperty.call(l,p)&&(l=_getPrototypeOf(l),l!==null););return l}function _wrapNativeSuper(l){var p=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(w){if(w===null||!_isNativeFunction(w))return w;if(typeof w!="function")throw new TypeError("Super expression must either be null or a function");if(typeof p!="undefined"){if(p.has(w))return p.get(w);p.set(w,k)}function k(){return _construct(w,arguments,_getPrototypeOf(this).constructor)}return k.prototype=Object.create(w.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(k,w)},_wrapNativeSuper(l)}function _construct(l,p,y){return _isNativeReflectConstruct()?_construct=Reflect.construct.bind():_construct=function(k,F,x){var q=[null];q.push.apply(q,F);var B=Function.bind.apply(k,q),j=new B;return x&&_setPrototypeOf(j,x.prototype),j},_construct.apply(null,arguments)}function _isNativeFunction(l){try{return Function.toString.call(l).indexOf("[native code]")!==-1}catch(p){return typeof l=="function"}}function _toConsumableArray(l){return _arrayWithoutHoles(l)||_iterableToArray(l)||_unsupportedIterableToArray(l)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(l){if(typeof Symbol!="undefined"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}function _arrayWithoutHoles(l){if(Array.isArray(l))return _arrayLikeToArray(l)}function ownKeys(l,p){var y=Object.keys(l);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);p&&(w=w.filter(function(k){return Object.getOwnPropertyDescriptor(l,k).enumerable})),y.push.apply(y,w)}return y}function _objectSpread(l){for(var p=1;p<arguments.length;p++){var y=arguments[p]!=null?arguments[p]:{};p%2?ownKeys(Object(y),!0).forEach(function(w){_defineProperty(l,w,y[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(y)):ownKeys(Object(y)).forEach(function(w){Object.defineProperty(l,w,Object.getOwnPropertyDescriptor(y,w))})}return l}function _defineProperty(l,p,y){return p=_toPropertyKey(p),p in l?Object.defineProperty(l,p,{value:y,enumerable:!0,configurable:!0,writable:!0}):l[p]=y,l}function _inherits(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),p&&_setPrototypeOf(l,p)}function _setPrototypeOf(l,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,k){return w.__proto__=k,w},_setPrototypeOf(l,p)}function _createSuper(l){var p=_isNativeReflectConstruct();return function(){var w=_getPrototypeOf(l),k;if(p){var F=_getPrototypeOf(this).constructor;k=Reflect.construct(w,arguments,F)}else k=w.apply(this,arguments);return _possibleConstructorReturn(this,k)}}function _possibleConstructorReturn(l,p){if(p&&(typeof p=="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(l)}function _assertThisInitialized(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function _isNativeReflectConstruct(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(l){return!1}}function _getPrototypeOf(l){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)},_getPrototypeOf(l)}function _createForOfIteratorHelper(l,p){var y=typeof Symbol!="undefined"&&l[Symbol.iterator]||l["@@iterator"];if(!y){if(Array.isArray(l)||(y=_unsupportedIterableToArray(l))||p&&l&&typeof l.length=="number"){y&&(l=y);/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return p};var l,p={},y=Object.prototype,w=y.hasOwnProperty,k=Object.defineProperty||function(b,h,m){b[h]=m.value},F=typeof Symbol=="function"?Symbol:{},x=F.iterator||"@@iterator",q=F.asyncIterator||"@@asyncIterator",B=F.toStringTag||"@@toStringTag";function j(b,h,m){return Object.defineProperty(b,h,{value:m,enumerable:!0,configurable:!0,writable:!0}),b[h]}try{j({},"")}catch(b){j=function(m,E,O){return m[E]=O}}function pe(b,h,m,E){var O=h&&h.prototype instanceof ye?h:ye,S=Object.create(O.prototype),V=new Pe(E||[]);return k(S,"_invoke",{value:Ie(b,m,V)}),S}function Ue(b,h,m){try{return{type:"normal",arg:b.call(h,m)}}catch(E){return{type:"throw",arg:E}}}p.wrap=pe;var me="suspendedStart",Ot="suspendedYield",Ke="executing",ke="completed",W={};function ye(){}function ve(){}function ue(){}var Re={};j(Re,x,function(){return this});var Ve=Object.getPrototypeOf,Le=Ve&&Ve(Ve(He([])));Le&&Le!==y&&w.call(Le,x)&&(Re=Le);var he=ue.prototype=ye.prototype=Object.create(Re);function rt(b){["next","throw","return"].forEach(function(h){j(b,h,function(m){return this._invoke(h,m)})})}function be(b,h){function m(O,S,V,I){var H=Ue(b[O],b,S);if(H.type!=="throw"){var ne=H.arg,ee=ne.value;return ee&&typeof ee=="object"&&w.call(ee,"__await")?h.resolve(ee.__await).then(function(ce){m("next",ce,V,I)},function(ce){m("throw",ce,V,I)}):h.resolve(ee).then(function(ce){ne.value=ce,V(ne)},function(ce){return m("throw",ce,V,I)})}I(H.arg)}var E;k(this,"_invoke",{value:function(S,V){function I(){return new h(function(H,ne){m(S,V,H,ne)})}return E=E?E.then(I,I):I()}})}function Ie(b,h,m){var E=me;return function(O,S){if(E===Ke)throw new Error("Generator is already running");if(E===ke){if(O==="throw")throw S;return{value:l,done:!0}}for(m.method=O,m.arg=S;;){var V=m.delegate;if(V){var I=nt(V,m);if(I){if(I===W)continue;return I}}if(m.method==="next")m.sent=m._sent=m.arg;else if(m.method==="throw"){if(E===me)throw E=ke,m.arg;m.dispatchException(m.arg)}else m.method==="return"&&m.abrupt("return",m.arg);E=Ke;var H=Ue(b,h,m);if(H.type==="normal"){if(E=m.done?ke:Ot,H.arg===W)continue;return{value:H.arg,done:m.done}}H.type==="throw"&&(E=ke,m.method="throw",m.arg=H.arg)}}}function nt(b,h){var m=h.method,E=b.iterator[m];if(E===l)return h.delegate=null,m==="throw"&&b.iterator.return&&(h.method="return",h.arg=l,nt(b,h),h.method==="throw")||m!=="return"&&(h.method="throw",h.arg=new TypeError("The iterator does not provide a '"+m+"' method")),W;var O=Ue(E,b.iterator,h.arg);if(O.type==="throw")return h.method="throw",h.arg=O.arg,h.delegate=null,W;var S=O.arg;return S?S.done?(h[b.resultName]=S.value,h.next=b.nextLoc,h.method!=="return"&&(h.method="next",h.arg=l),h.delegate=null,W):S:(h.method="throw",h.arg=new TypeError("iterator result is not an object"),h.delegate=null,W)}function At(b){var h={tryLoc:b[0]};1 in b&&(h.catchLoc=b[1]),2 in b&&(h.finallyLoc=b[2],h.afterLoc=b[3]),this.tryEntries.push(h)}function qe(b){var h=b.completion||{};h.type="normal",delete h.arg,b.completion=h}function Pe(b){this.tryEntries=[{tryLoc:"root"}],b.forEach(At,this),this.reset(!0)}function He(b){if(b||b===""){var h=b[x];if(h)return h.call(b);if(typeof b.next=="function")return b;if(!isNaN(b.length)){var m=-1,E=function O(){for(;++m<b.length;)if(w.call(b,m))return O.value=b[m],O.done=!1,O;return O.value=l,O.done=!0,O};return E.next=E}}throw new TypeError(typeof b+" is not iterable")}return ve.prototype=ue,k(he,"constructor",{value:ue,configurable:!0}),k(ue,"constructor",{value:ve,configurable:!0}),ve.displayName=j(ue,B,"GeneratorFunction"),p.isGeneratorFunction=function(b){var h=typeof b=="function"&&b.constructor;return!!h&&(h===ve||(h.displayName||h.name)==="GeneratorFunction")},p.mark=function(b){return Object.setPrototypeOf?Object.setPrototypeOf(b,ue):(b.__proto__=ue,j(b,B,"GeneratorFunction")),b.prototype=Object.create(he),b},p.awrap=function(b){return{__await:b}},rt(be.prototype),j(be.prototype,q,function(){return this}),p.AsyncIterator=be,p.async=function(b,h,m,E,O){O===void 0&&(O=Promise);var S=new be(pe(b,h,m,E),O);return p.isGeneratorFunction(h)?S:S.next().then(function(V){return V.done?V.value:S.next()})},rt(he),j(he,B,"Generator"),j(he,x,function(){return this}),j(he,"toString",function(){return"[object Generator]"}),p.keys=function(b){var h=Object(b),m=[];for(var E in h)m.push(E);return m.reverse(),function O(){for(;m.length;){var S=m.pop();if(S in h)return O.value=S,O.done=!1,O}return O.done=!0,O}},p.values=He,Pe.prototype={constructor:Pe,reset:function(h){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(qe),!h)for(var m in this)m.charAt(0)==="t"&&w.call(this,m)&&!isNaN(+m.slice(1))&&(this[m]=l)},stop:function(){this.done=!0;var h=this.tryEntries[0].completion;if(h.type==="throw")throw h.arg;return this.rval},dispatchException:function(h){if(this.done)throw h;var m=this;function E(ne,ee){return V.type="throw",V.arg=h,m.next=ne,ee&&(m.method="next",m.arg=l),!!ee}for(var O=this.tryEntries.length-1;O>=0;--O){var S=this.tryEntries[O],V=S.completion;if(S.tryLoc==="root")return E("end");if(S.tryLoc<=this.prev){var I=w.call(S,"catchLoc"),H=w.call(S,"finallyLoc");if(I&&H){if(this.prev<S.catchLoc)return E(S.catchLoc,!0);if(this.prev<S.finallyLoc)return E(S.finallyLoc)}else if(I){if(this.prev<S.catchLoc)return E(S.catchLoc,!0)}else{if(!H)throw new Error("try statement without catch or finally");if(this.prev<S.finallyLoc)return E(S.finallyLoc)}}}},abrupt:function(h,m){for(var E=this.tryEntries.length-1;E>=0;--E){var O=this.tryEntries[E];if(O.tryLoc<=this.prev&&w.call(O,"finallyLoc")&&this.prev<O.finallyLoc){var S=O;break}}S&&(h==="break"||h==="continue")&&S.tryLoc<=m&&m<=S.finallyLoc&&(S=null);var V=S?S.completion:{};return V.type=h,V.arg=m,S?(this.method="next",this.next=S.finallyLoc,W):this.complete(V)},complete:function(h,m){if(h.type==="throw")throw h.arg;return h.type==="break"||h.type==="continue"?this.next=h.arg:h.type==="return"?(this.rval=this.arg=h.arg,this.method="return",this.next="end"):h.type==="normal"&&m&&(this.next=m),W},finish:function(h){for(var m=this.tryEntries.length-1;m>=0;--m){var E=this.tryEntries[m];if(E.finallyLoc===h)return this.complete(E.completion,E.afterLoc),qe(E),W}},catch:function(h){for(var m=this.tryEntries.length-1;m>=0;--m){var E=this.tryEntries[m];if(E.tryLoc===h){var O=E.completion;if(O.type==="throw"){var S=O.arg;qe(E)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(h,m,E){return this.delegate={iterator:He(h),resultName:m,nextLoc:E},this.method==="next"&&(this.arg=l),W}},p}function asyncGeneratorStep(l,p,y,w,k,F,x){try{var q=l[F](x),B=q.value}catch(j){y(j);return}q.done?p(B):Promise.resolve(B).then(w,k)}function _asyncToGenerator(l){return function(){var p=this,y=arguments;return new Promise(function(w,k){var F=l.apply(p,y);function x(B){asyncGeneratorStep(F,w,k,x,q,"next",B)}function q(B){asyncGeneratorStep(F,w,k,x,q,"throw",B)}x(void 0)})}}function _classCallCheck(l,p){if(!(l instanceof p))throw new TypeError("Cannot call a class as a function")}function _defineProperties(l,p){for(var y=0;y<p.length;y++){var w=p[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(l,_toPropertyKey(w.key),w)}}function _createClass(l,p,y){return p&&_defineProperties(l.prototype,p),y&&_defineProperties(l,y),Object.defineProperty(l,"prototype",{writable:!1}),l}function _toPropertyKey(l){var p=_toPrimitive(l,"string");return typeof p=="symbol"?p:String(p)}function _toPrimitive(l,p){if(typeof l!="object"||l===null)return l;var y=l[Symbol.toPrimitive];if(y!==void 0){var w=y.call(l,p||"default");if(typeof w!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(l)}(function(){"use strict";var l;(function(e){e.GroupCall="GROUP_CALL",e.Webinar="WEBINAR",e.AudioRoom="AUDIO_ROOM",e.Livestream="LIVESTREAM",e.Chat="CHAT"})(l||(l={}));var p;(function(e){e.Skip="SKIP",e.OnPrivilegedUserEntry="ON_PRIVILEGED_USER_ENTRY",e.SkipOnAccept="SKIP_ON_ACCEPT"})(p||(p={}));var y;(function(e){e.Allowed="ALLOWED",e.NotAllowed="NOT_ALLOWED",e.CanRequest="CAN_REQUEST"})(y||(y={}));var w;(function(e){e.Allowed="ALLOWED",e.NotAllowed="NOT_ALLOWED"})(w||(w={}));var k;(function(e){e.FULL_ACCESS="FULL_ACCESS",e.VIEW_ONLY="VIEW_ONLY"})(k||(k={}));var F;(function(e){e.skip="SKIP",e.onAccept="ON_ACCEPT",e.skipOnPrivilegedUserEntry="SKIP_ON_PRIVILEGED_USER_ENTRY",e.skipOnAccept="SKIP_ON_ACCEPT"})(F||(F={}));var x;(function(e){e.none="NONE",e.recorder="RECORDER",e.livestreamer="LIVESTREAMER"})(x||(x={}));var q;(function(e){e.groupCall="GROUP_CALL",e.webinar="WEBINAR",e.audioRoom="AUDIO_ROOM",e.livestream="LIVESTREAM",e.chat="CHAT"})(q||(q={}));var B;(function(e){e.SKIP="skip",e.SKIP_ON_PRIVILEGED_USER_ENTRY="skipOnPrivilegedUserEntry",e.ON_ACCEPT="skipOnAccept",e.SKIP_ON_ACCEPT="skipOnAccept"})(B||(B={})),q.groupCall,F.skipOnAccept,x.none;function j(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pe={},Ue={get exports(){return pe},set exports(e){pe=e}},me={},Ot={get exports(){return me},set exports(e){me=e}},Ke=function(t,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return t.apply(r,i)}},ke=Ke,W=Object.prototype.toString;function ye(e){return Array.isArray(e)}function ve(e){return typeof e=="undefined"}function ue(e){return e!==null&&!ve(e)&&e.constructor!==null&&!ve(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Re(e){return W.call(e)==="[object ArrayBuffer]"}function Ve(e){return W.call(e)==="[object FormData]"}function Le(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Re(e.buffer),t}function he(e){return typeof e=="string"}function rt(e){return typeof e=="number"}function be(e){return e!==null&&typeof e=="object"}function Ie(e){if(W.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function nt(e){return W.call(e)==="[object Date]"}function At(e){return W.call(e)==="[object File]"}function qe(e){return W.call(e)==="[object Blob]"}function Pe(e){return W.call(e)==="[object Function]"}function He(e){return be(e)&&Pe(e.pipe)}function b(e){return W.call(e)==="[object URLSearchParams]"}function h(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function m(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function E(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),ye(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function O(){var e={};function t(i,a){Ie(e[a])&&Ie(i)?e[a]=O(e[a],i):Ie(i)?e[a]=O({},i):ye(i)?e[a]=i.slice():e[a]=i}for(var r=0,n=arguments.length;r<n;r++)E(arguments[r],t);return e}function S(e,t,r){return E(t,function(i,a){r&&typeof i=="function"?e[a]=ke(i,r):e[a]=i}),e}function V(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var I={isArray:ye,isArrayBuffer:Re,isBuffer:ue,isFormData:Ve,isArrayBufferView:Le,isString:he,isNumber:rt,isObject:be,isPlainObject:Ie,isUndefined:ve,isDate:nt,isFile:At,isBlob:qe,isFunction:Pe,isStream:He,isURLSearchParams:b,isStandardBrowserEnv:m,forEach:E,merge:O,extend:S,trim:h,stripBOM:V},H=I;function ne(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ee=function(t,r,n){if(!r)return t;var i;if(n)i=n(r);else if(H.isURLSearchParams(r))i=r.toString();else{var a=[];H.forEach(r,function(u,c){u===null||typeof u=="undefined"||(H.isArray(u)?c=c+"[]":u=[u],H.forEach(u,function(f){H.isDate(f)?f=f.toISOString():H.isObject(f)&&(f=JSON.stringify(f)),a.push(ne(c)+"="+ne(f))}))}),i=a.join("&")}if(i){var s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t},ce=I;function it(){this.handlers=[]}it.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1},it.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},it.prototype.forEach=function(t){ce.forEach(this.handlers,function(n){n!==null&&t(n)})};var Li=it,Ii=I,Pi=function(t,r){Ii.forEach(t,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(t[r]=i,delete t[a])})},wr=function(t,r,n,i,a){return t.config=r,n&&(t.code=n),t.request=i,t.response=a,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},Tt,Er;function Sr(){if(Er)return Tt;Er=1;var e=wr;return Tt=function(r,n,i,a,s){var o=new Error(r);return e(o,n,i,a,s)},Tt}var Ct,Or;function Mi(){if(Or)return Ct;Or=1;var e=Sr();return Ct=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(e("Request failed with status code "+i.status,i.config,null,i.request,i))},Ct}var kt,Ar;function Ni(){if(Ar)return kt;Ar=1;var e=I;return kt=e.isStandardBrowserEnv()?function(){return{write:function(n,i,a,s,o,u){var c=[];c.push(n+"="+encodeURIComponent(i)),e.isNumber(a)&&c.push("expires="+new Date(a).toGMTString()),e.isString(s)&&c.push("path="+s),e.isString(o)&&c.push("domain="+o),u===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),kt}var Rt,Tr;function Fi(){return Tr||(Tr=1,Rt=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}),Rt}var Lt,Cr;function xi(){return Cr||(Cr=1,Lt=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}),Lt}var It,kr;function Bi(){if(kr)return It;kr=1;var e=Fi(),t=xi();return It=function(n,i){return n&&!e(i)?t(n,i):i},It}var Pt,Rr;function ji(){if(Rr)return Pt;Rr=1;var e=I,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Pt=function(n){var i={},a,s,o;return n&&e.forEach(n.split(`
`),function(c){if(o=c.indexOf(":"),a=e.trim(c.substr(0,o)).toLowerCase(),s=e.trim(c.substr(o+1)),a){if(i[a]&&t.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([s]):i[a]=i[a]?i[a]+", "+s:s}}),i},Pt}var Mt,Lr;function Di(){if(Lr)return Mt;Lr=1;var e=I;return Mt=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(s){var o=s;return r&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(o){var u=e.isString(o)?a(o):o;return u.protocol===i.protocol&&u.host===i.host}}():function(){return function(){return!0}}(),Mt}var Nt,Ir;function at(){if(Ir)return Nt;Ir=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,Nt=e,Nt}var Ft,Pr;function Mr(){if(Pr)return Ft;Pr=1;var e=I,t=Mi(),r=Ni(),n=ee,i=Bi(),a=ji(),s=Di(),o=Sr(),u=st(),c=at();return Ft=function(f){return new Promise(function(_,M){var A=f.data,C=f.headers,P=f.responseType,R;function K(){f.cancelToken&&f.cancelToken.unsubscribe(R),f.signal&&f.signal.removeEventListener("abort",R)}e.isFormData(A)&&delete C["Content-Type"];var T=new XMLHttpRequest;if(f.auth){var se=f.auth.username||"",fe=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";C.Authorization="Basic "+btoa(se+":"+fe)}var oe=i(f.baseURL,f.url);T.open(f.method.toUpperCase(),n(oe,f.params,f.paramsSerializer),!0),T.timeout=f.timeout;function te(){if(T){var Z="getAllResponseHeaders"in T?a(T.getAllResponseHeaders()):null,L=!P||P==="text"||P==="json"?T.responseText:T.response,de={data:L,status:T.status,statusText:T.statusText,headers:Z,config:f,request:T};t(function(Ce){_(Ce),K()},function(Ce){M(Ce),K()},de),T=null}}if("onloadend"in T?T.onloadend=te:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(te)},T.onabort=function(){T&&(M(o("Request aborted",f,"ECONNABORTED",T)),T=null)},T.onerror=function(){M(o("Network Error",f,null,T)),T=null},T.ontimeout=function(){var L=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",de=f.transitional||u.transitional;f.timeoutErrorMessage&&(L=f.timeoutErrorMessage),M(o(L,f,de.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",T)),T=null},e.isStandardBrowserEnv()){var re=(f.withCredentials||s(oe))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;re&&(C[f.xsrfHeaderName]=re)}"setRequestHeader"in T&&e.forEach(C,function(L,de){typeof A=="undefined"&&de.toLowerCase()==="content-type"?delete C[de]:T.setRequestHeader(de,L)}),e.isUndefined(f.withCredentials)||(T.withCredentials=!!f.withCredentials),P&&P!=="json"&&(T.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&T.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&T.upload&&T.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(R=function(L){T&&(M(!L||L&&L.type?new c("canceled"):L),T.abort(),T=null)},f.cancelToken&&f.cancelToken.subscribe(R),f.signal&&(f.signal.aborted?R():f.signal.addEventListener("abort",R))),A||(A=null),T.send(A)})},Ft}var xt,Nr;function st(){if(Nr)return xt;Nr=1;var e=I,t=Pi,r=wr,n={"Content-Type":"application/x-www-form-urlencoded"};function i(u,c){!e.isUndefined(u)&&e.isUndefined(u["Content-Type"])&&(u["Content-Type"]=c)}function a(){var u;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(u=Mr()),u}function s(u,c,v){if(e.isString(u))try{return(c||JSON.parse)(u),e.trim(u)}catch(f){if(f.name!=="SyntaxError")throw f}return(v||JSON.stringify)(u)}var o={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:a(),transformRequest:[function(c,v){return t(v,"Accept"),t(v,"Content-Type"),e.isFormData(c)||e.isArrayBuffer(c)||e.isBuffer(c)||e.isStream(c)||e.isFile(c)||e.isBlob(c)?c:e.isArrayBufferView(c)?c.buffer:e.isURLSearchParams(c)?(i(v,"application/x-www-form-urlencoded;charset=utf-8"),c.toString()):e.isObject(c)||v&&v["Content-Type"]==="application/json"?(i(v,"application/json"),s(c)):c}],transformResponse:[function(c){var v=this.transitional||o.transitional,f=v&&v.silentJSONParsing,g=v&&v.forcedJSONParsing,_=!f&&this.responseType==="json";if(_||g&&e.isString(c)&&c.length)try{return JSON.parse(c)}catch(M){if(_)throw M.name==="SyntaxError"?r(M,this,"E_JSON_PARSE"):M}return c}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(c){return c>=200&&c<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return e.forEach(["delete","get","head"],function(c){o.headers[c]={}}),e.forEach(["post","put","patch"],function(c){o.headers[c]=e.merge(n)}),xt=o,xt}var $i=I,Ui=st(),Ki=function(t,r,n){var i=this||Ui;return $i.forEach(n,function(s){t=s.call(i,t,r)}),t},Bt,Fr;function xr(){return Fr||(Fr=1,Bt=function(t){return!!(t&&t.__CANCEL__)}),Bt}var Br=I,jt=Ki,Vi=xr(),qi=st(),Hi=at();function Dt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Hi("canceled")}var Gi=function(t){Dt(t),t.headers=t.headers||{},t.data=jt.call(t,t.data,t.headers,t.transformRequest),t.headers=Br.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Br.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var r=t.adapter||qi.adapter;return r(t).then(function(i){return Dt(t),i.data=jt.call(t,i.data,i.headers,t.transformResponse),i},function(i){return Vi(i)||(Dt(t),i&&i.response&&(i.response.data=jt.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})},X=I,jr=function(t,r){r=r||{};var n={};function i(v,f){return X.isPlainObject(v)&&X.isPlainObject(f)?X.merge(v,f):X.isPlainObject(f)?X.merge({},f):X.isArray(f)?f.slice():f}function a(v){if(X.isUndefined(r[v])){if(!X.isUndefined(t[v]))return i(void 0,t[v])}else return i(t[v],r[v])}function s(v){if(!X.isUndefined(r[v]))return i(void 0,r[v])}function o(v){if(X.isUndefined(r[v])){if(!X.isUndefined(t[v]))return i(void 0,t[v])}else return i(void 0,r[v])}function u(v){if(v in r)return i(t[v],r[v]);if(v in t)return i(void 0,t[v])}var c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u};return X.forEach(Object.keys(t).concat(Object.keys(r)),function(f){var g=c[f]||a,_=g(f);X.isUndefined(_)&&g!==u||(n[f]=_)}),n},$t,Dr;function $r(){return Dr||(Dr=1,$t={version:"0.25.0"}),$t}var Wi=$r().version,Ut={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Ut[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var Ur={};Ut.transitional=function(t,r,n){function i(a,s){return"[Axios v"+Wi+"] Transitional option '"+a+"'"+s+(n?". "+n:"")}return function(a,s,o){if(t===!1)throw new Error(i(s," has been removed"+(r?" in "+r:"")));return r&&!Ur[s]&&(Ur[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,s,o):!0}};function zi(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),i=n.length;i-- >0;){var a=n[i],s=t[a];if(s){var o=e[a],u=o===void 0||s(o,a,e);if(u!==!0)throw new TypeError("option "+a+" must be "+u);continue}if(r!==!0)throw Error("Unknown option "+a)}}var Ji={assertOptions:zi,validators:Ut},Kr=I,Yi=ee,Vr=Li,qr=Gi,ot=jr,Hr=Ji,Me=Hr.validators;function Ge(e){this.defaults=e,this.interceptors={request:new Vr,response:new Vr}}Ge.prototype.request=function(t,r){if(typeof t=="string"?(r=r||{},r.url=t):r=t||{},!r.url)throw new Error("Provided config url is not valid");r=ot(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Hr.assertOptions(n,{silentJSONParsing:Me.transitional(Me.boolean),forcedJSONParsing:Me.transitional(Me.boolean),clarifyTimeoutError:Me.transitional(Me.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(r)===!1||(a=a&&_.synchronous,i.unshift(_.fulfilled,_.rejected))});var s=[];this.interceptors.response.forEach(function(_){s.push(_.fulfilled,_.rejected)});var o;if(!a){var u=[qr,void 0];for(Array.prototype.unshift.apply(u,i),u=u.concat(s),o=Promise.resolve(r);u.length;)o=o.then(u.shift(),u.shift());return o}for(var c=r;i.length;){var v=i.shift(),f=i.shift();try{c=v(c)}catch(g){f(g);break}}try{o=qr(c)}catch(g){return Promise.reject(g)}for(;s.length;)o=o.then(s.shift(),s.shift());return o},Ge.prototype.getUri=function(t){if(!t.url)throw new Error("Provided config url is not valid");return t=ot(this.defaults,t),Yi(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},Kr.forEach(["delete","get","head","options"],function(t){Ge.prototype[t]=function(r,n){return this.request(ot(n||{},{method:t,url:r,data:(n||{}).data}))}}),Kr.forEach(["post","put","patch"],function(t){Ge.prototype[t]=function(r,n,i){return this.request(ot(i||{},{method:t,url:r,data:n}))}});var Xi=Ge,Kt,Gr;function Qi(){if(Gr)return Kt;Gr=1;var e=at();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(s){n=s});var i=this;this.promise.then(function(a){if(i._listeners){var s,o=i._listeners.length;for(s=0;s<o;s++)i._listeners[s](a);i._listeners=null}}),this.promise.then=function(a){var s,o=new Promise(function(u){i.subscribe(u),s=u}).then(a);return o.cancel=function(){i.unsubscribe(s)},o},r(function(s){i.reason||(i.reason=new e(s),n(i.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},t.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},t.source=function(){var n,i=new t(function(s){n=s});return{token:i,cancel:n}},Kt=t,Kt}var Vt,Wr;function Zi(){return Wr||(Wr=1,Vt=function(t){return function(n){return t.apply(null,n)}}),Vt}var qt,zr;function ea(){if(zr)return qt;zr=1;var e=I;return qt=function(r){return e.isObject(r)&&r.isAxiosError===!0},qt}var Jr=I,ta=Ke,ut=Xi,ra=jr,na=st();function Yr(e){var t=new ut(e),r=ta(ut.prototype.request,t);return Jr.extend(r,ut.prototype,t),Jr.extend(r,t),r.create=function(i){return Yr(ra(e,i))},r}var ie=Yr(na);ie.Axios=ut,ie.Cancel=at(),ie.CancelToken=Qi(),ie.isCancel=xr(),ie.VERSION=$r().version,ie.all=function(t){return Promise.all(t)},ie.spread=Zi(),ie.isAxiosError=ea(),Ot.exports=ie,me.default=ie,function(e){e.exports=me}(Ue);var Xr=j(pe),Qr="hXgU8Wc8pwuGNq9ms5q9Hh";if(typeof process!="undefined"){var Ne;(Ne=process)!==null&&Ne!==void 0&&(Ne=Ne.env)!==null&&Ne!==void 0&&Ne.FLAGSMITH_ENVIRONMENT_KEY&&(Qr=process.env.FLAGSMITH_ENVIRONMENT_KEY)}function ia(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t={};return e.forEach(function(r){t[r.feature.name]={enabled:r.enabled,value:r.feature_state_value}}),t}var aa=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qr;_classCallCheck(this,e),this.flags={},this.environmentKey=null,this.environmentKey=t,this.identify=this.identify.bind(this),this.getValue=this.getValue.bind(this),this.hasFeature=this.hasFeature.bind(this),this.getAllFlags=this.getAllFlags.bind(this)}return _createClass(e,[{key:"identify",value:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark(function n(i){var a,s,o,u,c,v,f,g,_=arguments;return _regeneratorRuntime().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return a=_.length>1&&_[1]!==void 0?_[1]:{},s=_.length>2&&_[2]!==void 0?_[2]:!1,o=_.length>3&&_[3]!==void 0?_[3]:5e3,u=_.length>4&&_[4]!==void 0?_[4]:"edge.api.flagsmith.com",c=JSON.parse(JSON.stringify(a)),v=Object.entries(c).map(function(C){return{trait_key:C[0],trait_value:C[1]}}),A.prev=6,f="_"+(Math.random()+1).toString(36).substring(2),A.next=10,Xr.post("https://".concat(u,"/api/v1/identities/"),{identifier:i+(s?f:""),traits:v},{headers:{"Content-Type":"application/json","X-Environment-Key":this.environmentKey},timeout:o});case 10:g=A.sent,this.flags=ia(g.data.flags||[]),A.next=16;break;case 14:A.prev=14,A.t0=A.catch(6);case 16:return A.abrupt("return",this.flags);case 17:case"end":return A.stop()}},n,this,[[6,14]])}));function r(n){return t.apply(this,arguments)}return r}()},{key:"getValue",value:function(r){return this.flags&&this.flags[r]&&this.flags[r].value}},{key:"hasFeature",value:function(r){return this.flags&&this.flags[r]&&this.flags[r].enabled}},{key:"getAllFlags",value:function(){return this.flags}}]),e}(),Ht=new aa,Zr=[-2,-1,0,1,2],sa=[0,1,2,3,4];function oa(e){e=e.trim();var t="0",r="0",n="0";return e.length==4?(t="0x"+e[1]+e[1],r="0x"+e[2]+e[2],n="0x"+e[3]+e[3]):e.length>6&&(t="0x"+e[1]+e[2],r="0x"+e[3]+e[4],n="0x"+e[5]+e[6]),[+t,+r,+n]}var ua=function(t,r,n){var i,a,s;if(r==0)i=a=s=n;else{var o=function(f,g,_){return _<0&&(_+=1),_>1&&(_-=1),_<.16666666666666666?f+(g-f)*6*_:_<.5?g:_<.6666666666666666?f+(g-f)*(.6666666666666666-_)*6:f},u=n<.5?n*(1+r):n+r-n*r,c=2*n-u;i=o(c,u,t+1/3),a=o(c,u,t),s=o(c,u,t-1/3)}return[Math.round(i*255),Math.round(a*255),Math.round(s*255)]},ca=function(t,r,n){t/=255,r/=255,n/=255;var i=Math.max(t,r,n),a=Math.min(t,r,n),s,o,u=(i+a)/2;if(i==a)s=o=0;else{var c=i-a;switch(o=u>.5?c/(2-i-a):c/(i+a),i){case t:s=(r-n)/c+(r<n?6:0);break;case r:s=(n-t)/c+2;break;case n:s=(t-r)/c+4;break}s/=6}return[s,o,u]},la=function(t,r,n){var i=function(s){return s.toString(16).padStart(2,"0")};return"#".concat(i(t)).concat(i(r)).concat(i(n))},en=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zr,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.4,i=[],a=oa(t),s=_slicedToArray(a,3),o=s[0],u=s[1],c=s[2],v=ca(o,u,c),f=_slicedToArray(v,3),g=f[0],_=f[1],M=f[2],A=Math.round(M*100);A>70?n=.8:A>60?n=.9:A<10?n=.075:A<42&&(n=.3);var C=r.findIndex(function(Ce){return Ce===0});if(C===-1)throw new Error("Invalid reducer provided, it must contain atleast one zero");var P=5-C,R=C+1,K=(100-A)/P,T=A/R,se=_createForOfIteratorHelper(r),fe;try{for(se.s();!(fe=se.n()).done;){var oe=fe.value,te=void 0;oe<0?te=A+oe*T*n:oe>0?te=A+oe*K*n:te=A;var re=ua(g,_,te/100),Z=_slicedToArray(re,3),L=Z[0],de=Z[1],_r=Z[2];i.push(la(L,de,_r))}}catch(Ce){se.e(Ce)}finally{se.f()}return i},tn={dark:{background:{1e3:"#252525",900:"#2F2F2F",800:"#323232",700:"#3E3E3E",600:"#4A4A4A"},text:"#F5F5F5","video-bg":"#1C1C1C"},light:{background:{1e3:"#FFFFFF",900:"#F5F5F5",800:"#EBEBEB",700:"#E0E0E0",600:"#D6D6D6"},text:"#111111","text-on-brand":"#ffffff","video-bg":"#DADADA"}},fa=function(t){var r=en(t,Zr),n=_slicedToArray(r,5),i=n[0],a=n[1],s=n[2],o=n[3],u=n[4];return{300:i,400:a,500:s,600:o,700:u}},da=function(t){if(t==="#FFFFFF")return tn.light.background;if(t==="#000000")return tn.dark.background;var r=en(t,sa),n=_slicedToArray(r,5),i=n[0],a=n[1],s=n[2],o=n[3],u=n[4];return{1e3:i,900:a,800:s,700:o,600:u}};function pa(){this.__data__=[],this.size=0}function rn(e,t){return e===t||e!==e&&t!==t}function ct(e,t){for(var r=e.length;r--;)if(rn(e[r][0],t))return r;return-1}var va=Array.prototype,ha=va.splice;function ga(e){var t=this.__data__,r=ct(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():ha.call(t,r,1),--this.size,!0}function ma(e){var t=this.__data__,r=ct(t,e);return r<0?void 0:t[r][1]}function ya(e){return ct(this.__data__,e)>-1}function ba(e,t){var r=this.__data__,n=ct(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function le(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}le.prototype.clear=pa,le.prototype.delete=ga,le.prototype.get=ma,le.prototype.has=ya,le.prototype.set=ba;function _a(){this.__data__=new le,this.size=0}function wa(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Ea(e){return this.__data__.get(e)}function Sa(e){return this.__data__.has(e)}var Oa=typeof global=="object"&&global&&global.Object===Object&&global,nn=Oa,Aa=typeof self=="object"&&self&&self.Object===Object&&self,Ta=nn||Aa||Function("return this")(),ae=Ta,Ca=ae.Symbol,Fe=Ca,an=Object.prototype,ka=an.hasOwnProperty,Ra=an.toString,We=Fe?Fe.toStringTag:void 0;function La(e){var t=ka.call(e,We),r=e[We];try{e[We]=void 0;var n=!0}catch(a){}var i=Ra.call(e);return n&&(t?e[We]=r:delete e[We]),i}var Ia=Object.prototype,Pa=Ia.toString;function Ma(e){return Pa.call(e)}var Na="[object Null]",Fa="[object Undefined]",sn=Fe?Fe.toStringTag:void 0;function ze(e){return e==null?e===void 0?Fa:Na:sn&&sn in Object(e)?La(e):Ma(e)}function Je(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var xa="[object AsyncFunction]",Ba="[object Function]",ja="[object GeneratorFunction]",Da="[object Proxy]";function on(e){if(!Je(e))return!1;var t=ze(e);return t==Ba||t==ja||t==xa||t==Da}var $a=ae["__core-js_shared__"],Gt=$a,un=function(){var e=/[^.]+$/.exec(Gt&&Gt.keys&&Gt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ua(e){return!!un&&un in e}var Ka=Function.prototype,Va=Ka.toString;function _e(e){if(e!=null){try{return Va.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var qa=/[\\^$.*+?()[\]{}|]/g,Ha=/^\[object .+?Constructor\]$/,Ga=Function.prototype,Wa=Object.prototype,za=Ga.toString,Ja=Wa.hasOwnProperty,Ya=RegExp("^"+za.call(Ja).replace(qa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Xa(e){if(!Je(e)||Ua(e))return!1;var t=on(e)?Ya:Ha;return t.test(_e(e))}function Qa(e,t){return e==null?void 0:e[t]}function we(e,t){var r=Qa(e,t);return Xa(r)?r:void 0}var Za=we(ae,"Map"),Ye=Za,es=we(Object,"create"),Xe=es;function ts(){this.__data__=Xe?Xe(null):{},this.size=0}function rs(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ns="__lodash_hash_undefined__",is=Object.prototype,as=is.hasOwnProperty;function ss(e){var t=this.__data__;if(Xe){var r=t[e];return r===ns?void 0:r}return as.call(t,e)?t[e]:void 0}var os=Object.prototype,us=os.hasOwnProperty;function cs(e){var t=this.__data__;return Xe?t[e]!==void 0:us.call(t,e)}var ls="__lodash_hash_undefined__";function fs(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Xe&&t===void 0?ls:t,this}function Ee(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ee.prototype.clear=ts,Ee.prototype.delete=rs,Ee.prototype.get=ss,Ee.prototype.has=cs,Ee.prototype.set=fs;function ds(){this.size=0,this.__data__={hash:new Ee,map:new(Ye||le),string:new Ee}}function ps(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function lt(e,t){var r=e.__data__;return ps(t)?r[typeof t=="string"?"string":"hash"]:r.map}function vs(e){var t=lt(this,e).delete(e);return this.size-=t?1:0,t}function hs(e){return lt(this,e).get(e)}function gs(e){return lt(this,e).has(e)}function ms(e,t){var r=lt(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function xe(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}xe.prototype.clear=ds,xe.prototype.delete=vs,xe.prototype.get=hs,xe.prototype.has=gs,xe.prototype.set=ms;var ys=200;function bs(e,t){var r=this.__data__;if(r instanceof le){var n=r.__data__;if(!Ye||n.length<ys-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new xe(n)}return r.set(e,t),this.size=r.size,this}function Be(e){var t=this.__data__=new le(e);this.size=t.size}Be.prototype.clear=_a,Be.prototype.delete=wa,Be.prototype.get=Ea,Be.prototype.has=Sa,Be.prototype.set=bs;function _s(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var ws=function(){try{var e=we(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),cn=ws;function ln(e,t,r){t=="__proto__"&&cn?cn(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Es=Object.prototype,Ss=Es.hasOwnProperty;function fn(e,t,r){var n=e[t];(!(Ss.call(e,t)&&rn(n,r))||r===void 0&&!(t in e))&&ln(e,t,r)}function ft(e,t,r,n){var i=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var o=t[a],u=n?n(r[o],e[o],o,r,e):void 0;u===void 0&&(u=e[o]),i?ln(r,o,u):fn(r,o,u)}return r}function Os(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Qe(e){return e!=null&&typeof e=="object"}var As="[object Arguments]";function dn(e){return Qe(e)&&ze(e)==As}var pn=Object.prototype,Ts=pn.hasOwnProperty,Cs=pn.propertyIsEnumerable,ks=dn(function(){return arguments}())?dn:function(e){return Qe(e)&&Ts.call(e,"callee")&&!Cs.call(e,"callee")},vn=ks,Rs=Array.isArray,dt=Rs;function Ls(){return!1}var hn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,gn=hn&&typeof module=="object"&&module&&!module.nodeType&&module,Is=gn&&gn.exports===hn,mn=Is?ae.Buffer:void 0,Ps=mn?mn.isBuffer:void 0,Ms=Ps||Ls,Wt=Ms,Ns=9007199254740991,Fs=/^(?:0|[1-9]\d*)$/;function xs(e,t){var r=typeof e;return t=t==null?Ns:t,!!t&&(r=="number"||r!="symbol"&&Fs.test(e))&&e>-1&&e%1==0&&e<t}var Bs=9007199254740991;function yn(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Bs}var js="[object Arguments]",Ds="[object Array]",$s="[object Boolean]",Us="[object Date]",Ks="[object Error]",Vs="[object Function]",qs="[object Map]",Hs="[object Number]",Gs="[object Object]",Ws="[object RegExp]",zs="[object Set]",Js="[object String]",Ys="[object WeakMap]",Xs="[object ArrayBuffer]",Qs="[object DataView]",Zs="[object Float32Array]",eo="[object Float64Array]",to="[object Int8Array]",ro="[object Int16Array]",no="[object Int32Array]",io="[object Uint8Array]",ao="[object Uint8ClampedArray]",so="[object Uint16Array]",oo="[object Uint32Array]",U={};U[Zs]=U[eo]=U[to]=U[ro]=U[no]=U[io]=U[ao]=U[so]=U[oo]=!0,U[js]=U[Ds]=U[Xs]=U[$s]=U[Qs]=U[Us]=U[Ks]=U[Vs]=U[qs]=U[Hs]=U[Gs]=U[Ws]=U[zs]=U[Js]=U[Ys]=!1;function uo(e){return Qe(e)&&yn(e.length)&&!!U[ze(e)]}function zt(e){return function(t){return e(t)}}var bn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ze=bn&&typeof module=="object"&&module&&!module.nodeType&&module,co=Ze&&Ze.exports===bn,Jt=co&&nn.process,lo=function(){try{var e=Ze&&Ze.require&&Ze.require("util").types;return e||Jt&&Jt.binding&&Jt.binding("util")}catch(t){}}(),je=lo,_n=je&&je.isTypedArray,fo=_n?zt(_n):uo,wn=fo,po=Object.prototype,vo=po.hasOwnProperty;function En(e,t){var r=dt(e),n=!r&&vn(e),i=!r&&!n&&Wt(e),a=!r&&!n&&!i&&wn(e),s=r||n||i||a,o=s?Os(e.length,String):[],u=o.length;for(var c in e)(t||vo.call(e,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||xs(c,u)))&&o.push(c);return o}var ho=Object.prototype;function pt(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||ho;return e===r}function Sn(e,t){return function(r){return e(t(r))}}var go=Sn(Object.keys,Object),mo=go,yo=Object.prototype,bo=yo.hasOwnProperty;function On(e){if(!pt(e))return mo(e);var t=[];for(var r in Object(e))bo.call(e,r)&&r!="constructor"&&t.push(r);return t}function Yt(e){return e!=null&&yn(e.length)&&!on(e)}function Xt(e){return Yt(e)?En(e):On(e)}function _o(e,t){return e&&ft(t,Xt(t),e)}function wo(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Eo=Object.prototype,So=Eo.hasOwnProperty;function Oo(e){if(!Je(e))return wo(e);var t=pt(e),r=[];for(var n in e)n=="constructor"&&(t||!So.call(e,n))||r.push(n);return r}function Qt(e){return Yt(e)?En(e,!0):Oo(e)}function Ao(e,t){return e&&ft(t,Qt(t),e)}var An=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Tn=An&&typeof module=="object"&&module&&!module.nodeType&&module,To=Tn&&Tn.exports===An,Cn=To?ae.Buffer:void 0,kn=Cn?Cn.allocUnsafe:void 0;function Co(e,t){if(t)return e.slice();var r=e.length,n=kn?kn(r):new e.constructor(r);return e.copy(n),n}function ko(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function Ro(e,t){for(var r=-1,n=e==null?0:e.length,i=0,a=[];++r<n;){var s=e[r];t(s,r,e)&&(a[i++]=s)}return a}function Rn(){return[]}var Lo=Object.prototype,Io=Lo.propertyIsEnumerable,Ln=Object.getOwnPropertySymbols,Po=Ln?function(e){return e==null?[]:(e=Object(e),Ro(Ln(e),function(t){return Io.call(e,t)}))}:Rn,Zt=Po;function Mo(e,t){return ft(e,Zt(e),t)}function In(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var No=Sn(Object.getPrototypeOf,Object),Pn=No,Fo=Object.getOwnPropertySymbols,xo=Fo?function(e){for(var t=[];e;)In(t,Zt(e)),e=Pn(e);return t}:Rn,Mn=xo;function Bo(e,t){return ft(e,Mn(e),t)}function Nn(e,t,r){var n=t(e);return dt(e)?n:In(n,r(e))}function jo(e){return Nn(e,Xt,Zt)}function Do(e){return Nn(e,Qt,Mn)}var $o=we(ae,"DataView"),er=$o,Uo=we(ae,"Promise"),tr=Uo,Ko=we(ae,"Set"),rr=Ko,Vo=we(ae,"WeakMap"),nr=Vo,Fn="[object Map]",qo="[object Object]",xn="[object Promise]",Bn="[object Set]",jn="[object WeakMap]",Dn="[object DataView]",Ho=_e(er),Go=_e(Ye),Wo=_e(tr),zo=_e(rr),Jo=_e(nr),Se=ze;(er&&Se(new er(new ArrayBuffer(1)))!=Dn||Ye&&Se(new Ye)!=Fn||tr&&Se(tr.resolve())!=xn||rr&&Se(new rr)!=Bn||nr&&Se(new nr)!=jn)&&(Se=function(t){var r=ze(t),n=r==qo?t.constructor:void 0,i=n?_e(n):"";if(i)switch(i){case Ho:return Dn;case Go:return Fn;case Wo:return xn;case zo:return Bn;case Jo:return jn}return r});var vt=Se,Yo=Object.prototype,Xo=Yo.hasOwnProperty;function Qo(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Xo.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Zo=ae.Uint8Array,$n=Zo;function ir(e){var t=new e.constructor(e.byteLength);return new $n(t).set(new $n(e)),t}function eu(e,t){var r=t?ir(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var tu=/\w*$/;function ru(e){var t=new e.constructor(e.source,tu.exec(e));return t.lastIndex=e.lastIndex,t}var Un=Fe?Fe.prototype:void 0,Kn=Un?Un.valueOf:void 0;function nu(e){return Kn?Object(Kn.call(e)):{}}function iu(e,t){var r=t?ir(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var au="[object Boolean]",su="[object Date]",ou="[object Map]",uu="[object Number]",cu="[object RegExp]",lu="[object Set]",fu="[object String]",du="[object Symbol]",pu="[object ArrayBuffer]",vu="[object DataView]",hu="[object Float32Array]",gu="[object Float64Array]",mu="[object Int8Array]",yu="[object Int16Array]",bu="[object Int32Array]",_u="[object Uint8Array]",wu="[object Uint8ClampedArray]",Eu="[object Uint16Array]",Su="[object Uint32Array]";function Ou(e,t,r){var n=e.constructor;switch(t){case pu:return ir(e);case au:case su:return new n(+e);case vu:return eu(e,r);case hu:case gu:case mu:case yu:case bu:case _u:case wu:case Eu:case Su:return iu(e,r);case ou:return new n;case uu:case fu:return new n(e);case cu:return ru(e);case lu:return new n;case du:return nu(e)}}var Vn=Object.create,Au=function(){function e(){}return function(t){if(!Je(t))return{};if(Vn)return Vn(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Tu=Au;function Cu(e){return typeof e.constructor=="function"&&!pt(e)?Tu(Pn(e)):{}}var ku="[object Map]";function Ru(e){return Qe(e)&&vt(e)==ku}var qn=je&&je.isMap,Lu=qn?zt(qn):Ru,Iu=Lu,Pu="[object Set]";function Mu(e){return Qe(e)&&vt(e)==Pu}var Hn=je&&je.isSet,Nu=Hn?zt(Hn):Mu,Fu=Nu,xu=1,Bu=2,ju=4,Gn="[object Arguments]",Du="[object Array]",$u="[object Boolean]",Uu="[object Date]",Ku="[object Error]",Wn="[object Function]",Vu="[object GeneratorFunction]",qu="[object Map]",Hu="[object Number]",zn="[object Object]",Gu="[object RegExp]",Wu="[object Set]",zu="[object String]",Ju="[object Symbol]",Yu="[object WeakMap]",Xu="[object ArrayBuffer]",Qu="[object DataView]",Zu="[object Float32Array]",ec="[object Float64Array]",tc="[object Int8Array]",rc="[object Int16Array]",nc="[object Int32Array]",ic="[object Uint8Array]",ac="[object Uint8ClampedArray]",sc="[object Uint16Array]",oc="[object Uint32Array]",$={};$[Gn]=$[Du]=$[Xu]=$[Qu]=$[$u]=$[Uu]=$[Zu]=$[ec]=$[tc]=$[rc]=$[nc]=$[qu]=$[Hu]=$[zn]=$[Gu]=$[Wu]=$[zu]=$[Ju]=$[ic]=$[ac]=$[sc]=$[oc]=!0,$[Ku]=$[Wn]=$[Yu]=!1;function ht(e,t,r,n,i,a){var s,o=t&xu,u=t&Bu,c=t&ju;if(r&&(s=i?r(e,n,i,a):r(e)),s!==void 0)return s;if(!Je(e))return e;var v=dt(e);if(v){if(s=Qo(e),!o)return ko(e,s)}else{var f=vt(e),g=f==Wn||f==Vu;if(Wt(e))return Co(e,o);if(f==zn||f==Gn||g&&!i){if(s=u||g?{}:Cu(e),!o)return u?Bo(e,Ao(s,e)):Mo(e,_o(s,e))}else{if(!$[f])return i?e:{};s=Ou(e,f,o)}}a||(a=new Be);var _=a.get(e);if(_)return _;a.set(e,s),Fu(e)?e.forEach(function(C){s.add(ht(C,t,r,C,e,a))}):Iu(e)&&e.forEach(function(C,P){s.set(P,ht(C,t,r,P,e,a))});var M=c?u?Do:jo:u?Qt:Xt,A=v?void 0:M(e);return _s(A||e,function(C,P){A&&(P=C,C=e[P]),fn(s,P,ht(C,t,r,P,e,a))}),s}var uc=1,cc=4;function lc(e){return ht(e,uc|cc)}var fc={border_radius:"rounded",border_width:"thin",spacing_base:4,theme:"dark",colors:{brand:fa("#2160FD"),background:da("#141414"),danger:"#FF2D2D",text:"#EEEEEE",text_on_brand:"#EEEEEE",success:"#62A504",video_bg:"#191919",warning:"#FFCD07"}};function Jn(){return lc(fc)}p.Skip,y.Allowed,w.Allowed,y.Allowed,y.Allowed,w.Allowed,x.none,Jn(),l.GroupCall,x.none,F.skip,p.Skip,y.Allowed,y.Allowed,y.Allowed,x.none,Jn(),l.GroupCall;var gt,dc=new Uint8Array(16);function pc(){if(!gt&&(gt=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!gt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gt(dc)}var vc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function hc(e){return typeof e=="string"&&vc.test(e)}for(var J=[],ar=0;ar<256;++ar)J.push((ar+256).toString(16).substr(1));function gc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(J[e[t+0]]+J[e[t+1]]+J[e[t+2]]+J[e[t+3]]+"-"+J[e[t+4]]+J[e[t+5]]+"-"+J[e[t+6]]+J[e[t+7]]+"-"+J[e[t+8]]+J[e[t+9]]+"-"+J[e[t+10]]+J[e[t+11]]+J[e[t+12]]+J[e[t+13]]+J[e[t+14]]+J[e[t+15]]).toLowerCase();if(!hc(r))throw TypeError("Stringified UUID is invalid");return r}function mc(e,t,r){e=e||{};var n=e.random||(e.rng||pc)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return gc(n)}var yc="[object Map]",bc="[object Set]",_c=Object.prototype,wc=_c.hasOwnProperty;function Ec(e){if(e==null)return!0;if(Yt(e)&&(dt(e)||typeof e=="string"||typeof e.splice=="function"||Wt(e)||wn(e)||vn(e)))return!e.length;var t=vt(e);if(t==yc||t==bc)return!e.size;if(pt(e))return!On(e).length;for(var r in e)if(wc.call(e,r))return!1;return!0}var Yn;(function(e){e.CHROMIUM="chromum",e.FIREFOX="firefox",e.SAFARI="safari"})(Yn||(Yn={}));var Xn;(function(e){e.AUDIO="AUDIO",e.VIDEO="VIDEO",e.SPEAKER="SPEAKER"})(Xn||(Xn={}));var Qn;(function(e){e[e.INIT=0]="INIT",e[e.ACCEPTED=1]="ACCEPTED",e[e.DENIED=2]="DENIED",e[e.SYS_DENIED=3]="SYS_DENIED",e[e.FAILED=4]="FAILED",e[e.NOTFOUND=5]="NOTFOUND",e[e.NOT_APPLICABLE=6]="NOT_APPLICABLE"})(Qn||(Qn={}));var sr={roomName:void 0,authToken:void 0,peerId:void 0,apiBase:void 0,baseURI:void 0,defaults:{audio:!0,video:!0},modules:void 0,organizationId:void 0,overrides:{},viewType:void 0,env:void 0},Sc="VERSION_PLACEHOLDER",Oc="web-core";function Ac(e){var t=e.servicePrefix,r=e.apiBase,n=e.baseURI;return n?"".concat(t,".").concat(n):r!=null&&r.includes("api.preprod.dyte")?"".concat(t,".preprod.dyte.io"):r!=null&&r.includes("api.devel.dyte")?"".concat(t,".devel.dyte.io"):"".concat(t,".dyte.io")}var or={INTERNAL_CALL_STATS:"internal_call_stats",SIMULCAST:"simulcast",CHAT_SOCKET_SERVER:"chat_socket_server",POLL_SOCKET_SERVER:"poll_socket_server",PLUGIN_SOCKET_SERVER:"plugin_socket_server",NR_OTEL_WEB:"nr_otel_web",CONNECTED_MEETINGS:"connected_meetings",ICE_RESTART_ON_FAILED_STATE:"ice_restart_on_failed_state",ICE_RESTART_ON_DISCONNECTED_STATE:"ice_restart_on_disconnected_state",ENABLE_ICE_STATE_LOGGING:"enable_ice_state_logging",REMOVE_OPERATIONAL_MIC:"web_core_remove_operational_mic",SUPPRESS_PEER_MUTE_UNMUTE_EMITS:"web_core_suppress_peer_mute_unmute_emits",SKIP_OTEL_TRACES:"skip_otel_traces",NEW_LOCAL_MEDIA_HANDLER:"new_local_media_handler",CALLSTATS_INGESTION_LAYER:"callstats_ingestion_layer",USE_USERIDS_IN_CHAT:"use_userids_in_chat",CUSTOM_PING_PONG:"custom_ping_pong",ENABLE_HIVE_SIMULCAST:"enable_hive_simulcast",ENABLE_HIVE_TRANSPORT_RECONNECTION_ON_ICE_FAILED:"enable_hive_transport_reconnection_on_ice_failed",ENABLE_HIVE_EXPERIMENTAL_FAIL_RECOVERY:"enable_hive_fail_recovery",ENABLE_HIVE_INFINITE_RETRIES:"enable_hive_infinite_retries",BYPASS_LOG_EXCLUSION_LIST:"bypass_log_exclusion_list",LOG_LEVEL:"log_level",V1_PLUGINS:"v1_plugins",SCREENSHARE_DTX:"screenshare_dtx",SCREENSHARE_PRIORITY:"screenshare_priority",SCREENSHARE_MIN_BITRATE:"screenshare_minbitrate",SCREENSHARE_MAX_DIMENSIONS:"screenshare_maxdimensions",SCREENSHARE_SIMULCAST:"screenshare_simulcast",DISABLE_WEBCAM_LAYERS_ON_SCREENSHARE:"disable_webcam_layers_on_screenshare",SCREENSHARE_FORCE_GOOG_CONFERENCE:"screenshare_force_goog_conference",LIVESTREAM:"feat_livestream",FETCH_RETRY:"fetch_retry",DEVICE_REMOVE_EXP:"device_remove_exp",DISABLE_WEBCAM_SIMULCAST:"webcore_disable_webcam_simulcast",OVERRIDE_WEBCAM_SIMULCAST:"override_webcam_simulcast",SOCKET_POLLING:"socket_polling",NS_NETWORK_SCORE:"ns_network_score",FEAT_PAGINATED_CHAT:"feat_paginated_chat",VAL_MIN_FRAMERATE:"val_min_framerate",EXTENSION_HACK:"extension_hack",VAL_MAX_FRAMERATE_EXT:"val_max_framerate_ext",VAL_MIN_FRAMERATE_EXT:"val_min_framerate_ext",SCREEENSHARE_ERR_HACK:"screenshare_err_hack",TROUBLESHOOTING:"feat_troubleshooting",VIDEO_CONSTRAINTS:"video_constraints",SCREENSHARE_CONSTRAINTS:"screenshare_constraints",FEAT_CHAT_SDK:"feat_chat_sdk",FEAT_CHAT_SDK_SEARCH:"chat_search",OBS_QUALITY:"obs_quality",ALLOW_SAFARI_MEDIA_MIDDLEWARES:"allow_safari_media_middlewares",DYNAMIC_VIDEO_QUALITY:"dynamic_video_quality",EXP_RESHARE:"exp_reshare",LEAVE_STAGE_ON_END:"leave_stage_on_end",SKIP_SETTING_IN_USE_DEVICE:"skip_setting_in_use_device",PRECALL_BANDWIDTH_TEST:"precall_bandwidth_test"};function mt(e){var t={};return typeof(e==null?void 0:e.code)=="number"&&(t.code=e.code),typeof(e==null?void 0:e.code)=="string"&&(t.code=e.code.substring(0,100)),typeof(e==null?void 0:e.name)=="string"&&(t.name=e.name.substring(0,500)),typeof(e==null?void 0:e.message)=="string"&&(t.message=e.message.substring(0,500)),typeof(e==null?void 0:e.reason)=="string"&&(t.reason=e.reason.substring(0,500)),typeof(e==null?void 0:e.stack)=="string"&&(t.stack=e.stack.substring(0,500)),t}function Zn(){var e,t,r,n=typeof navigator!="undefined"&&!navigator.isReactNative&&typeof window!="undefined"&&((e=window.location.host)===null||e===void 0?void 0:e.includes("devel"))&&((t=window.location.host)===null||t===void 0?void 0:t.includes("dyte.io")),i=!!((r=sr.modules)!==null&&r!==void 0&&(r=r.devTools)!==null&&r!==void 0&&r.logs);return n||i}function Tc(e){if(Ht.hasFeature(or.LOG_LEVEL)){var t=Ht.getValue(or.LOG_LEVEL)||"all";if(t=t.toLowerCase().trim(),t==="off")return!1;if(t!=="all"){var r=["debug","log","info","warn","error"],n=r.indexOf(e),i=r.indexOf(t);if(n<i)return!1}}return!0}function ei(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.getOwnPropertyNames(e).forEach(function(n){var i;if(![null,void 0,NaN].includes(e[n])&&!(t&&(((i=t.match(/\./g))===null||i===void 0?void 0:i.length)||0)>=10)){var a=t?"".concat(t,".").concat(n):n;typeof e[n]=="object"?ei(e[n],a,r):["number","string","boolean"].includes(typeof e[n])&&(r[a]=e[n])}}),r}function ti(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",n={};try{var i=JSON.stringify(t),a=JSON.parse(i),s=ei(a,r),o=JSON.stringify(s);if(o.length>5e3){var u='Log named: "'.concat(e,'" is trying to log an flattened object of size ').concat(o.length," chars that is beyond permitted limit of 5000 chars. Please optimize."),c=Zn();throw c&&console.error(u,{log:t,flattened:o}),new Error(u)}return JSON.parse(o)}catch(f){var v=mt(f);n["".concat(r,".error.message")]=v.message||"",n["".concat(r,".error.stack")]=v.stack||"",n["".concat(r,".error.reason")]=v.reason||"",n["".concat(r,".error.source")]="safelyFlattenObjForOpenTelemetry"}return n}var Cc={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},ri={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},G={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Y={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},ge={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"},d=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getFirstMatch",value:function(r,n){var i=n.match(r);return i&&i.length>0&&i[1]||""}},{key:"getSecondMatch",value:function(r,n){var i=n.match(r);return i&&i.length>1&&i[2]||""}},{key:"matchAndReturnConst",value:function(r,n,i){if(r.test(n))return i}},{key:"getWindowsVersionName",value:function(r){switch(r){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}},{key:"getMacOSVersionName",value:function(r){var n=r.split(".").splice(0,2).map(function(i){return parseInt(i,10)||0});if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}},{key:"getAndroidVersionName",value:function(r){var n=r.split(".").splice(0,2).map(function(i){return parseInt(i,10)||0});if(n.push(0),!(n[0]===1&&n[1]<5)){if(n[0]===1&&n[1]<6)return"Cupcake";if(n[0]===1&&n[1]>=6)return"Donut";if(n[0]===2&&n[1]<2)return"Eclair";if(n[0]===2&&n[1]===2)return"Froyo";if(n[0]===2&&n[1]>2)return"Gingerbread";if(n[0]===3)return"Honeycomb";if(n[0]===4&&n[1]<1)return"Ice Cream Sandwich";if(n[0]===4&&n[1]<4)return"Jelly Bean";if(n[0]===4&&n[1]>=4)return"KitKat";if(n[0]===5)return"Lollipop";if(n[0]===6)return"Marshmallow";if(n[0]===7)return"Nougat";if(n[0]===8)return"Oreo";if(n[0]===9)return"Pie"}}},{key:"getVersionPrecision",value:function(r){return r.split(".").length}},{key:"compareVersions",value:function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=e.getVersionPrecision(r),s=e.getVersionPrecision(n),o=Math.max(a,s),u=0,c=e.map([r,n],function(v){var f=o-e.getVersionPrecision(v),g=v+new Array(f+1).join(".0");return e.map(g.split("."),function(_){return new Array(20-_.length).join("0")+_}).reverse()});for(i&&(u=o-Math.min(a,s)),o-=1;o>=u;){if(c[0][o]>c[1][o])return 1;if(c[0][o]===c[1][o]){if(o===u)return 0;o-=1}else if(c[0][o]<c[1][o])return-1}}},{key:"map",value:function(r,n){var i=[],a;if(Array.prototype.map)return Array.prototype.map.call(r,n);for(a=0;a<r.length;a+=1)i.push(n(r[a]));return i}},{key:"find",value:function(r,n){var i,a;if(Array.prototype.find)return Array.prototype.find.call(r,n);for(i=0,a=r.length;i<a;i+=1){var s=r[i];if(n(s,i))return s}}},{key:"assign",value:function(r){for(var n=r,i,a,s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];if(Object.assign)return Object.assign.apply(Object,[r].concat(o));var c=function(){var f=o[i];if(typeof f=="object"&&f!==null){var g=Object.keys(f);g.forEach(function(_){n[_]=f[_]})}};for(i=0,a=o.length;i<a;i+=1)c();return r}},{key:"getBrowserAlias",value:function(r){return Cc[r]}},{key:"getBrowserTypeByAlias",value:function(r){return ri[r]||""}}]),e}(),D=/version\/(\d+(\.?_?\d+)+)/i,kc=[{test:[/googlebot/i],describe(e){var t={name:"Googlebot"},r=d.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||d.getFirstMatch(D,e);return r&&(t.version=r),t}},{test:[/opera/i],describe(e){var t={name:"Opera"},r=d.getFirstMatch(D,e)||d.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe(e){var t={name:"Opera"},r=d.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||d.getFirstMatch(D,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe(e){var t={name:"Samsung Internet for Android"},r=d.getFirstMatch(D,e)||d.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe(e){var t={name:"NAVER Whale Browser"},r=d.getFirstMatch(D,e)||d.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe(e){var t={name:"MZ Browser"},r=d.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||d.getFirstMatch(D,e);return r&&(t.version=r),t}},{test:[/focus/i],describe(e){var t={name:"Focus"},r=d.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||d.getFirstMatch(D,e);return r&&(t.version=r),t}},{test:[/swing/i],describe(e){var t={name:"Swing"},r=d.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||d.getFirstMatch(D,e);return r&&(t.version=r),t}},{test:[/coast/i],describe(e){var t={name:"Opera Coast"},r=d.getFirstMatch(D,e)||d.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){var t={name:"Opera Touch"},r=d.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||d.getFirstMatch(D,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe(e){var t={name:"Yandex Browser"},r=d.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||d.getFirstMatch(D,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe(e){var t={name:"UC Browser"},r=d.getFirstMatch(D,e)||d.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe(e){var t={name:"Maxthon"},r=d.getFirstMatch(D,e)||d.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe(e){var t={name:"Epiphany"},r=d.getFirstMatch(D,e)||d.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe(e){var t={name:"Puffin"},r=d.getFirstMatch(D,e)||d.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe(e){var t={name:"Sleipnir"},r=d.getFirstMatch(D,e)||d.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe(e){var t={name:"K-Meleon"},r=d.getFirstMatch(D,e)||d.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe(e){var t={name:"WeChat"},r=d.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||d.getFirstMatch(D,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=d.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||d.getFirstMatch(D,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe(e){var t={name:"Internet Explorer"},r=d.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe(e){var t={name:"Microsoft Edge"},r=d.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe(e){var t={name:"Microsoft Edge"},r=d.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe(e){var t={name:"Vivaldi"},r=d.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe(e){var t={name:"SeaMonkey"},r=d.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe(e){var t={name:"Sailfish"},r=d.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe(e){var t={name:"Amazon Silk"},r=d.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe(e){var t={name:"PhantomJS"},r=d.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe(e){var t={name:"SlimerJS"},r=d.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){var t={name:"BlackBerry"},r=d.getFirstMatch(D,e)||d.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe(e){var t={name:"WebOS Browser"},r=d.getFirstMatch(D,e)||d.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe(e){var t={name:"Bada"},r=d.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe(e){var t={name:"Tizen"},r=d.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||d.getFirstMatch(D,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe(e){var t={name:"QupZilla"},r=d.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||d.getFirstMatch(D,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){var t={name:"Firefox"},r=d.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe(e){var t={name:"Electron"},r=d.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe(e){var t={name:"Miui"},r=d.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe(e){var t={name:"Chromium"},r=d.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||d.getFirstMatch(D,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe(e){var t={name:"Chrome"},r=d.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe(e){var t={name:"Google Search"},r=d.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){var t={name:"Android Browser"},r=d.getFirstMatch(D,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe(e){var t={name:"PlayStation 4"},r=d.getFirstMatch(D,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe(e){var t={name:"Safari"},r=d.getFirstMatch(D,e);return r&&(t.version=r),t}},{test:[/.*/i],describe(e){var t=/^(.*)\/(.*) /,r=/^(.*)\/(.*)[ \t]\((.*)/,n=e.search("\\(")!==-1,i=n?r:t;return{name:d.getFirstMatch(i,e),version:d.getSecondMatch(i,e)}}}],Rc=[{test:[/Roku\/DVP/],describe(e){var t=d.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:Y.Roku,version:t}}},{test:[/windows phone/i],describe(e){var t=d.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:Y.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){var t=d.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=d.getWindowsVersionName(t);return{name:Y.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){var t={name:Y.iOS},r=d.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe(e){var t=d.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=d.getMacOSVersionName(t),n={name:Y.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe(e){var t=d.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:Y.iOS,version:t}}},{test(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){var t=d.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=d.getAndroidVersionName(t),n={name:Y.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe(e){var t=d.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:Y.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){var t=d.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||d.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||d.getFirstMatch(/\bbb(\d+)/i,e);return{name:Y.BlackBerry,version:t}}},{test:[/bada/i],describe(e){var t=d.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:Y.Bada,version:t}}},{test:[/tizen/i],describe(e){var t=d.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:Y.Tizen,version:t}}},{test:[/linux/i],describe(){return{name:Y.Linux}}},{test:[/CrOS/],describe(){return{name:Y.ChromeOS}}},{test:[/PlayStation 4/],describe(e){var t=d.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:Y.PlayStation4,version:t}}}],Lc=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(e){var t=d.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:G.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:G.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:G.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:G.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:G.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:G.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:G.tablet}}},{test(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe(e){var t=d.getFirstMatch(/(ipod|iphone)/i,e);return{type:G.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:G.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:G.mobile}}},{test(e){return e.getBrowserName(!0)==="blackberry"},describe(){return{type:G.mobile,vendor:"BlackBerry"}}},{test(e){return e.getBrowserName(!0)==="bada"},describe(){return{type:G.mobile}}},{test(e){return e.getBrowserName()==="windows phone"},describe(){return{type:G.mobile,vendor:"Microsoft"}}},{test(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe(){return{type:G.tablet}}},{test(e){return e.getOSName(!0)==="android"},describe(){return{type:G.mobile}}},{test(e){return e.getOSName(!0)==="macos"},describe(){return{type:G.desktop,vendor:"Apple"}}},{test(e){return e.getOSName(!0)==="windows"},describe(){return{type:G.desktop}}},{test(e){return e.getOSName(!0)==="linux"},describe(){return{type:G.desktop}}},{test(e){return e.getOSName(!0)==="playstation 4"},describe(){return{type:G.tv}}},{test(e){return e.getOSName(!0)==="roku"},describe(){return{type:G.tv}}}],Ic=[{test(e){return e.getBrowserName(!0)==="microsoft edge"},describe(e){var t=/\sedg\//i.test(e);if(t)return{name:ge.Blink};var r=d.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:ge.EdgeHTML,version:r}}},{test:[/trident/i],describe(e){var t={name:ge.Trident},r=d.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){return e.test(/presto/i)},describe(e){var t={name:ge.Presto},r=d.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe(e){var t={name:ge.Gecko},r=d.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:ge.Blink}}},{test:[/(apple)?webkit/i],describe(e){var t={name:ge.WebKit},r=d.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}],ni=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(_classCallCheck(this,e),t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},r!==!0&&this.parse()}return _createClass(e,[{key:"getUA",value:function(){return this._ua}},{key:"test",value:function(r){return r.test(this._ua)}},{key:"parseBrowser",value:function(){var r=this;this.parsedResult.browser={};var n=d.find(kc,function(i){if(typeof i.test=="function")return i.test(r);if(i.test instanceof Array)return i.test.some(function(a){return r.test(a)});throw new Error("Browser's test function is not valid")});return n&&(this.parsedResult.browser=n.describe(this.getUA())),this.parsedResult.browser}},{key:"getBrowser",value:function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}},{key:"getBrowserName",value:function(r){return r?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}},{key:"getBrowserVersion",value:function(){return this.getBrowser().version}},{key:"getOS",value:function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}},{key:"parseOS",value:function(){var r=this;this.parsedResult.os={};var n=d.find(Rc,function(i){if(typeof i.test=="function")return i.test(r);if(i.test instanceof Array)return i.test.some(function(a){return r.test(a)});throw new Error("Browser's test function is not valid")});return n&&(this.parsedResult.os=n.describe(this.getUA())),this.parsedResult.os}},{key:"getOSName",value:function(r){var n=this.getOS(),i=n.name;return r?String(i).toLowerCase()||"":i||""}},{key:"getOSVersion",value:function(){return this.getOS().version}},{key:"getPlatform",value:function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}},{key:"getPlatformType",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.getPlatform(),i=n.type;return r?String(i).toLowerCase()||"":i||""}},{key:"parsePlatform",value:function(){var r=this;this.parsedResult.platform={};var n=d.find(Lc,function(i){if(typeof i.test=="function")return i.test(r);if(i.test instanceof Array)return i.test.some(function(a){return r.test(a)});throw new Error("Browser's test function is not valid")});return n&&(this.parsedResult.platform=n.describe(this.getUA())),this.parsedResult.platform}},{key:"getEngine",value:function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}},{key:"getEngineName",value:function(r){return r?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}},{key:"parseEngine",value:function(){var r=this;this.parsedResult.engine={};var n=d.find(Ic,function(i){if(typeof i.test=="function")return i.test(r);if(i.test instanceof Array)return i.test.some(function(a){return r.test(a)});throw new Error("Browser's test function is not valid")});return n&&(this.parsedResult.engine=n.describe(this.getUA())),this.parsedResult.engine}},{key:"parse",value:function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}},{key:"getResult",value:function(){return d.assign({},this.parsedResult)}},{key:"satisfies",value:function(r){var n=this,i={},a=0,s={},o=0,u=Object.keys(r);if(u.forEach(function(C){var P=r[C];typeof P=="string"?(s[C]=P,o+=1):typeof P=="object"&&(i[C]=P,a+=1)}),a>0){var c=Object.keys(i),v=d.find(c,function(C){return n.isOS(C)});if(v){var f=this.satisfies(i[v]);if(f!==void 0)return f}var g=d.find(c,function(C){return n.isPlatform(C)});if(g){var _=this.satisfies(i[g]);if(_!==void 0)return _}}if(o>0){var M=Object.keys(s),A=d.find(M,function(C){return n.isBrowser(C,!0)});if(A!==void 0)return this.compareVersion(s[A])}}},{key:"isBrowser",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.getBrowserName().toLowerCase(),a=r.toLowerCase(),s=d.getBrowserTypeByAlias(a);return n&&s&&(a=s.toLowerCase()),a===i}},{key:"compareVersion",value:function(r){var n=[0],i=r,a=!1,s=this.getBrowserVersion();if(typeof s=="string")return r[0]===">"||r[0]==="<"?(i=r.substr(1),r[1]==="="?(a=!0,i=r.substr(2)):n=[],r[0]===">"?n.push(1):n.push(-1)):r[0]==="="?i=r.substr(1):r[0]==="~"&&(a=!0,i=r.substr(1)),n.indexOf(d.compareVersions(s,i,a))>-1}},{key:"isOS",value:function(r){return this.getOSName(!0)===String(r).toLowerCase()}},{key:"isPlatform",value:function(r){return this.getPlatformType(!0)===String(r).toLowerCase()}},{key:"isEngine",value:function(r){return this.getEngineName(!0)===String(r).toLowerCase()}},{key:"is",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.isBrowser(r,n)||this.isOS(r)||this.isPlatform(r)}},{key:"some",value:function(){var r=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return n.some(function(i){return r.is(i)})}}]),e}();/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */var Pc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getParser",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(typeof r!="string")throw new Error("UserAgent should be a string");return new ni(r,n)}},{key:"parse",value:function(r){return new ni(r).getResult()}},{key:"BROWSER_MAP",get:function(){return ri}},{key:"ENGINE_MAP",get:function(){return ge}},{key:"OS_MAP",get:function(){return Y}},{key:"PLATFORMS_MAP",get:function(){return G}}]),e}(),et="chrome",ii="opera",ai="firefox",si="iexplorer",oi="safari",ui="nwjs",ci="electron",li="react-native",ur="unknown",yt={Chrome:et,Chromium:et,Opera:ii,Firefox:ai,"Internet Explorer":si,Safari:oi};function Mc(){var e=navigator,t=e.userAgent,r={name:ur,version:void 0};if(t.match(/Chrome/)&&!t.match(/Edge/))if(t.match(/Edg(A?)/)){var n=t.match(/Chrome\/([\d.]+)/)[1];Number.parseInt(n,10)>72&&(r.name=et,r.version=n)}else r.name=et,r.version=t.match(/Chrome\/([\d.]+)/)[1];return r}function Nc(){var e=navigator,t=e.userAgent;if(t.match(/Electron/)){var r=t.match(/Electron\/([\d.]+)/)[1];return{name:ci,version:r}}return null}function Fc(){var e=navigator,t=e.userAgent;if(t.match(/JitsiMeetNW/)){var r=t.match(/JitsiMeetNW\/([\d.]+)/)[1];return{name:ui,version:r}}}function xc(){var e=navigator.userAgent.match(/\b(react[ \t_-]*native)(?:\/(\S+))?/i),t;if(e||navigator.product==="ReactNative")return e&&e.length>2&&(e[1],t=e[2]),t||(t="unknown"),{name:li,version:t}}function Bc(e){for(var t,r=[xc,Nc,Fc],n=0;n<r.length;n+=1)if(t=r[n](),t)return t;var i=e.getBrowserName();return i in yt?{name:yt[i],version:e.getBrowserVersion()}:(t=Mc(),t||{name:ur,version:void 0})}var jc=function(){function e(){var t=this;_classCallCheck(this,e),this._bowser=void 0,this._name=void 0,this._version=void 0,this.getDeviceInfo=function(){return{isMobile:t.isMobile(),browserName:t._bowser.getBrowserName(),osName:t._bowser.getOSName(),browserVersion:t._bowser.getBrowserVersion(),osVersionName:t._bowser.getOSVersion(),engineName:t._bowser.getEngineName()}}}return _createClass(e,[{key:"init",value:function(r){var n,i;if(this._bowser=Pc.getParser(navigator.userAgent),typeof r=="undefined"){var a=Bc(this._bowser);n=a.name,i=a.version}else r.name in yt?(n=yt[r.name],i=r.version):(n=ur,i=void 0);this._name=n,this._version=i}},{key:"getName",value:function(){return this._name}},{key:"isChrome",value:function(){return this._name===et}},{key:"isOpera",value:function(){return this._name===ii}},{key:"isFirefox",value:function(){return this._name===ai}},{key:"isIExplorer",value:function(){return this._name===si}},{key:"isSafari",value:function(){return this._name===oi}},{key:"isNWJS",value:function(){return this._name===ui}},{key:"isElectron",value:function(){return this._name===ci}},{key:"isReactNative",value:function(){return this._name===li||navigator.isReactNative===!0}},{key:"getVersion",value:function(){return this._version}},{key:"isMobile",value:function(){return this._bowser.getPlatformType()==="mobile"}},{key:"_checkCondition",value:function(r){if(this._version)return this._bowser.satisfies(r)}},{key:"isVersionGreaterThan",value:function(r){return this._checkCondition({[this._name]:">".concat(r)})}},{key:"isVersionLessThan",value:function(r){return this._checkCondition({[this._name]:"<".concat(r)})}},{key:"isVersionEqualTo",value:function(r){return this._checkCondition({[this._name]:"~".concat(r)})}}]),e}(),Dc=72,$c=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:"doesVideoMuteByStreamRemove",value:function(){return this.isChromiumBased()||this.isWebKitBased()}},{key:"supportsP2P",value:function(){return!this.usesUnifiedPlan()}},{key:"isChromiumBased",value:function(){return this.isChrome()||this.isElectron()||this.isNWJS()||this.isOpera()}},{key:"isWebKitBased",value:function(){return this._bowser.isEngine("webkit")&&typeof navigator.mediaDevices!="undefined"&&typeof navigator.mediaDevices.getUserMedia!="undefined"&&typeof window.RTCRtpTransceiver!="undefined"&&Object.keys(RTCRtpTransceiver.prototype).indexOf("currentDirection")>-1}},{key:"isSupported",value:function(){return this.isChromiumBased()&&this._getChromiumBasedVersion()>=Dc||this.isFirefox()||this.isReactNative()||this.isWebKitBased()}},{key:"isUserInteractionRequiredForUnmute",value:function(){return this.isFirefox()&&this.isVersionLessThan("68")}},{key:"supportsVideoMuteOnConnInterrupted",value:function(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}},{key:"supportsBandwidthStatistics",value:function(){return!this.isFirefox()&&!this.isWebKitBased()}},{key:"supportsCodecPreferences",value:function(){return this.usesUnifiedPlan()&&typeof window.RTCRtpTransceiver!="undefined"&&Object.keys(window.RTCRtpTransceiver.prototype).indexOf("setCodecPreferences")>-1&&Object.keys(RTCRtpSender.prototype).indexOf("getCapabilities")>-1&&!this.isWebKitBased()}},{key:"supportsDeviceChangeEvent",value:function(){return navigator.mediaDevices&&typeof navigator.mediaDevices.ondevicechange!="undefined"&&typeof navigator.mediaDevices.addEventListener!="undefined"}},{key:"supportsLocalCandidateRttStatistics",value:function(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}},{key:"supportsPerformanceObserver",value:function(){return typeof window.PerformanceObserver!="undefined"&&PerformanceObserver.supportedEntryTypes.indexOf("longtask")>-1}},{key:"supportsReceiverStats",value:function(){return typeof window.RTCRtpReceiver!="undefined"&&Object.keys(RTCRtpReceiver.prototype).indexOf("getSynchronizationSources")>-1}},{key:"supportsRTTStatistics",value:function(){return!this.isFirefox()}},{key:"usesPlanB",value:function(){return!this.usesUnifiedPlan()}},{key:"usesSdpMungingForSimulcast",value:function(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}},{key:"usesUnifiedPlan",value:function(){return!!(this.isFirefox()||this.isWebKitBased())}},{key:"usesNewGumFlow",value:function(){return!!(this.isChromiumBased()||this.isFirefox()||this.isWebKitBased())}},{key:"usesAdapter",value:function(){return this.usesNewGumFlow()}},{key:"usesRidsForSimulcast",value:function(){return!1}},{key:"supportsGetDisplayMedia",value:function(){return typeof navigator.getDisplayMedia!="undefined"||typeof navigator.mediaDevices!="undefined"&&typeof navigator.mediaDevices.getDisplayMedia!="undefined"}},{key:"supportsInsertableStreams",value:function(){if(!(typeof window.RTCRtpSender!="undefined"&&(window.RTCRtpSender.prototype.createEncodedStreams||window.RTCRtpSender.prototype.createEncodedVideoStreams)))return!1;var i=new ReadableStream;try{return window.postMessage(i,"*",[i]),!0}catch(a){return!1}}},{key:"supportsAudioRed",value:function(){return Boolean(window.RTCRtpSender&&window.RTCRtpSender.getCapabilities&&window.RTCRtpSender.getCapabilities("audio").codecs.some(function(i){return i.mimeType==="audio/red"})&&window.RTCRtpReceiver&&window.RTCRtpReceiver.getCapabilities&&window.RTCRtpReceiver.getCapabilities("audio").codecs.some(function(i){return i.mimeType==="audio/red"}))}},{key:"supportsSdpSemantics",value:function(){return this.isChromiumBased()}},{key:"_getChromiumBasedVersion",value:function(){if(this.isChromiumBased()){if(this.isNWJS())return Number.parseInt(process.versions.chromium,10);var i=navigator.userAgent;if(i.match(/Chrome/)){var a=Number.parseInt(i.match(/Chrome\/([\d.]+)/)[1],10);return a}}return-1}},{key:"isIOSMobile",value:function(){return this.isMobile&&this._bowser.getOSName()==="iOS"}}]),r}(jc),Uc=new $c,Q=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"logsEndpoint",get:function(){var r=Ac({servicePrefix:"api-silos",apiBase:sr.apiBase,baseURI:sr.baseURI});return"https://".concat(r,"/otel/logs")}},{key:"init",value:function(r,n){navigator.isReactNative||(e.tracingEnabled=n,e.meetingMetadata.peerId=r,e.meetingMetadata.sdkVersion=Sc,e.meetingMetadata.deviceInfo=Uc.getDeviceInfo(),e.meetingMetadata.visitedUrl=!navigator.isReactNative&&typeof window!="undefined"&&window.location.href,document.addEventListener("visibilitychange",e.processCachedLogs),e.logsProcessorTimer=setInterval(e.processCachedLogs,e.logsProcessingInterval),n&&(e.initialized=!0))}},{key:"trace",value:function(r){return function(n,i,a){var s=a.value;return a.value=function(){for(var u=arguments.length,c=new Array(u),v=0;v<u;v++)c[v]=arguments[v];if(!e.initialized||navigator.isReactNative||!e.tracingEnabled||Ht.hasFeature(or.SKIP_OTEL_TRACES))return s.apply(this,c);e.addLogInCurrentSpan("info",r);var f=performance.now(),g=s.apply(this,c);return Promise.resolve(g).then(function(){var _=performance.now();e.addLogInCurrentSpan("info","".concat(r,"_timing"),{execTime:_-f})}).catch(function(){var _=performance.now();e.addLogInCurrentSpan("info","".concat(r,"_timing"),{execTime:_-f})}),g},a}}},{key:"injectContext",value:function(r){var n,i=mc().replace(/-/g,"").substring(0,16),a=(n=e.meetingMetadata.peerId)===null||n===void 0?void 0:n.replace(/-/g,"");r.TRACEPARENT="00-".concat(a,"-").concat(i,"-01")}},{key:"addLogInCurrentSpan",value:function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;i!=null&&i.error&&Object.assign(i,{error:mt(i.error)}),Zn()&&(Ec(i)?console[r]("DyteInternalLogs:: ",r,n):console[r]("DyteInternalLogs:: ",r,n,i));var s=Tc(r);if(s)try{var o=ti(n,i,"metadata"),u=new Date,c=_objectSpread(_objectSpread({message:n,level:r},o),{},{loggedAt:u.toISOString(),loggedAtTzOffset:u.getTimezoneOffset()});a?e.sendOtelLogsToNewRelic([c]):e.logsCache.push(c)}catch(v){e.addLogInCurrentSpan("error","opentelemetry::addLogInCurrentSpan_failed",{error:mt(v)})}}},{key:"sendOtelLogsToNewRelic",value:function(r){Xr.post(e.logsEndpoint,{meetingMetadata:ti("sendOtelLogsToNewRelic",e.meetingMetadata,"meetingMetadata"),serviceName:Oc,logs:r}).catch(function(n){var i;e.addLogInCurrentSpan("error","opentelemetry::sendOtelLogToNewRelic_failed",{error:mt(n)}),(i=e.logsCache).push.apply(i,_toConsumableArray(r))})}},{key:"processCachedLogs",value:function(){var r=e.logsCache.splice(0,25);r!=null&&r.length&&e.sendOtelLogsToNewRelic(r)}},{key:"destruct",value:function(){clearInterval(e.logsProcessorTimer),e.processCachedLogs(),!navigator.isReactNative&&document.removeEventListener("visibilitychange",e.processCachedLogs)}}]),e}();Q.logsCache=[],Q.logsProcessorTimer=void 0,Q.tracingEnabled=!0,Q.initialized=!1,Q.logsProcessingInterval=7e3,Q.logExclusionList=["message","websocket/message","roomMessage","websocket/room-message","websocket/room-legacy-mode","chatMessage","websocket/new-chat-message","websocket/no-active-speaker","websocket/selected-peers","websocket/active-speaker","ping","websocket/new-consumer","websocket/producer-score","websocket/consumer-score","websocket/plugin-event","websocket/plugin-data","websocket/plugin-internal-data"],Q.meetingMetadata={};var z=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"info",value:function(r,n,i){Q.addLogInCurrentSpan("info",r,n,i)}},{key:"error",value:function(r,n,i){Q.addLogInCurrentSpan("error",r,n,i)}},{key:"debug",value:function(r,n,i){Q.addLogInCurrentSpan("debug",r,n,i)}},{key:"log",value:function(r,n,i){Q.addLogInCurrentSpan("log",r,n,i)}},{key:"warn",value:function(r,n,i){Q.addLogInCurrentSpan("warn",r,n,i)}}]),e}(),bt="AES-GCM",Kc=16,cr={key:10,delta:3,audio:1,empty:0},fi=12,Vc="DyteFrameEncryptionKey",qc={sharedKey:!1,ratchetSalt:Vc,ratchetWindowSize:8},Hc={"00":"DyteClient","01":"Controller","02":"RoomNodeClient","03":"HiveNodeClient","04":"SocketService","05":"Chat","06":"Plugin","07":"Polls","08":"Meta","09":"Preset",10:"Recording",11:"Self",12:"Participant",13:"Spotlight",14:"Remote Request",15:"Webinar",16:"LocalMediaHandler",17:"End-End Encryption"},_t={"0000":"Internal exception.","0001":"Failed to initialize.","0002":"Failed to join room.","0003":"Failed to leave room.","0100":"Internal exception","0200":"Internal exception.","0300":"Internal exception","0400":"Internal exception","0500":"Internal exception","0501":"Permission denied.","0502":"Invalid message body.","0510":"Invalid channel name.","0600":"Internal exception","0700":"Internal exception","0800":"Internal exception","0900":"Internal exception",1e3:"Internal exception",1100:"Internal exception",1200:"Internal exception",1300:"Internal exception",1400:"Internal exception",1500:"Internal exception",1600:"Internal exception",1601:"Failed to get audio track",1602:"Failed to get video track",1603:"Incorrect device",1604:"Failed to change device",1701:"Crypto error",9900:"Internal exception"};Object.keys(_t).forEach(function(e){_t[e]="{".concat(Hc[e.slice(0,2)],"} ").concat(_t[e])});var Gc=function(e){_inherits(r,e);var t=_createSuper(r);function r(n,i){var a,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;_classCallCheck(this,r),a=t.call(this,n),a.code=void 0,a.code=i,a.name="DyteError",a.message="[ERR".concat(a.code,"]: ").concat(_t[a.code],`
`).concat(a.message);try{var o=s;i&&i.endsWith("00")&&(o=!0),o&&z.error("DyteError",{error:{message:a.message,name:a.name,code:i}})}catch(u){}return a}return _createClass(r)}(_wrapNativeSuper(Error)),Oe=function(e){return e[e.InvalidKey=0]="InvalidKey",e[e.MissingKey=1]="MissingKey",e[e.InternalError=2]="InternalError",e}(Oe||{}),Ae=function(e){_inherits(r,e);var t=_createSuper(r);function r(n){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return _classCallCheck(this,r),i=t.call(this,n,"1701"),i.reason=void 0,i.reason=a,i}return _createClass(r)}(Gc),wt={},Wc={get exports(){return wt},set exports(e){wt=e}},De=typeof Reflect=="object"?Reflect:null,di=De&&typeof De.apply=="function"?De.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},Et;De&&typeof De.ownKeys=="function"?Et=De.ownKeys:Object.getOwnPropertySymbols?Et=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Et=function(t){return Object.getOwnPropertyNames(t)};function zc(e){console&&console.warn&&console.warn(e)}var pi=Number.isNaN||function(t){return t!==t};function N(){N.init.call(this)}Wc.exports=N,wt.once=Qc,N.EventEmitter=N,N.prototype._events=void 0,N.prototype._eventsCount=0,N.prototype._maxListeners=void 0;var vi=10;function St(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(N,"defaultMaxListeners",{enumerable:!0,get:function(){return vi},set:function(t){if(typeof t!="number"||t<0||pi(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");vi=t}}),N.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},N.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||pi(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function hi(e){return e._maxListeners===void 0?N.defaultMaxListeners:e._maxListeners}N.prototype.getMaxListeners=function(){return hi(this)},N.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=t==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var u=a[t];if(u===void 0)return!1;if(typeof u=="function")di(u,this,r);else for(var c=u.length,v=_i(u,c),n=0;n<c;++n)di(v[n],this,r);return!0};function gi(e,t,r,n){var i,a,s;if(St(r),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),s=a[t]),s===void 0)s=a[t]=r,++e._eventsCount;else if(typeof s=="function"?s=a[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=hi(e),i>0&&s.length>i&&!s.warned){s.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=s.length,zc(o)}return e}N.prototype.addListener=function(t,r){return gi(this,t,r,!1)},N.prototype.on=N.prototype.addListener,N.prototype.prependListener=function(t,r){return gi(this,t,r,!0)};function Jc(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function mi(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=Jc.bind(n);return i.listener=r,n.wrapFn=i,i}N.prototype.once=function(t,r){return St(r),this.on(t,mi(this,t,r)),this},N.prototype.prependOnceListener=function(t,r){return St(r),this.prependListener(t,mi(this,t,r)),this},N.prototype.removeListener=function(t,r){var n,i,a,s,o;if(St(r),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(a=-1,s=n.length-1;s>=0;s--)if(n[s]===r||n[s].listener===r){o=n[s].listener,a=s;break}if(a<0)return this;a===0?n.shift():Yc(n,a),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,o||r)}return this},N.prototype.off=N.prototype.removeListener,N.prototype.removeAllListeners=function(t){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var a=Object.keys(n),s;for(i=0;i<a.length;++i)s=a[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(t,r[i]);return this};function yi(e,t,r){var n=e._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Xc(i):_i(i,i.length)}N.prototype.listeners=function(t){return yi(this,t,!0)},N.prototype.rawListeners=function(t){return yi(this,t,!1)},N.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):bi.call(e,t)},N.prototype.listenerCount=bi;function bi(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}N.prototype.eventNames=function(){return this._eventsCount>0?Et(this._events):[]};function _i(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Yc(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Xc(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function Qc(e,t){return new Promise(function(r,n){function i(s){e.removeListener(t,a),n(s)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",i),r([].slice.call(arguments))}wi(e,t,a,{once:!0}),t!=="error"&&Zc(e,i,{once:!0})})}function Zc(e,t,r){typeof e.on=="function"&&wi(e,"error",t,r)}function wi(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(a){n.once&&e.removeEventListener(t,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Ei=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var n,i;return _classCallCheck(this,r),i=t.call(this),_get((n=_assertThisInitialized(i),_getPrototypeOf(r.prototype)),"setMaxListeners",n).call(n,25),i}return _createClass(r,[{key:"emit",value:function(i){for(var a,s,o=arguments.length,u=new Array(o>1?o-1:0),c=1;c<o;c++)u[c-1]=arguments[c];return(a=_get(_getPrototypeOf(r.prototype),"emit",this)).call.apply(a,[this,"*",i].concat(u)),(s=_get(_getPrototypeOf(r.prototype),"emit",this)).call.apply(s,[this,i].concat(u))}},{key:"on",value:function(i,a){try{var s=this.listenerCount(i);s>25&&s%25===0&&z.warn("DyteEventEmitter::maxListenersExceeded",{eventListener:{eventName:i.toString(),listenerCount:this.listenerCount(i)}})}catch(o){}return _get(_getPrototypeOf(r.prototype),"on",this).call(this,i,a)}},{key:"addListener",value:function(i,a){try{var s=this.listenerCount(i);s>25&&s%25===0&&z.warn("DyteEventEmitter::maxListenersExceeded",{eventListener:{eventName:i.toString(),listenerCount:this.listenerCount(i)}})}catch(o){}return _get(_getPrototypeOf(r.prototype),"addListener",this).call(this,i,a)}},{key:"off",value:function(i,a){return _get(_getPrototypeOf(r.prototype),"off",this).call(this,i,a)}},{key:"once",value:function(i,a){return _get(_getPrototypeOf(r.prototype),"once",this).call(this,i,a)}},{key:"prependListener",value:function(i,a){return _get(_getPrototypeOf(r.prototype),"prependListener",this).call(this,i,a)}},{key:"prependOnceListener",value:function(i,a){return _get(_getPrototypeOf(r.prototype),"prependOnceListener",this).call(this,i,a)}},{key:"removeListener",value:function(i,a){return _get(_getPrototypeOf(r.prototype),"removeListener",this).call(this,i,a)}},{key:"removeAllListeners",value:function(i){return _get(_getPrototypeOf(r.prototype),"removeAllListeners",this).call(this,i)}},{key:"listeners",value:function(i){return _get(_getPrototypeOf(r.prototype),"listeners",this).call(this,i)}},{key:"listenerCount",value:function(i){return _get(_getPrototypeOf(r.prototype),"listenerCount",this).call(this,i)}}]),r}(wt.EventEmitter),lr={Error:"cryptorError"};function el(e){return"type"in e}function tl(e){return fr.apply(this,arguments)}function fr(){return fr=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){var r,n,i=arguments;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r=i.length>1&&i[1]!==void 0?i[1]:{name:bt},n=i.length>2&&i[2]!==void 0?i[2]:"encrypt",s.abrupt("return",crypto.subtle.importKey("raw",t,r,!1,n==="derive"?["deriveBits","deriveKey"]:["encrypt","decrypt"]));case 3:case"end":return s.stop()}},e)})),fr.apply(this,arguments)}function Si(e,t){var r=new TextEncoder,n=r.encode(t);switch(e){case"HKDF":return{name:"HKDF",salt:n,hash:"SHA-256",info:new ArrayBuffer(128)};case"PBKDF2":return{name:"PBKDF2",salt:n,hash:"SHA-256",iterations:1e5};default:throw new Error("algorithm ".concat(e," is currently unsupported"))}}function Oi(e,t){return dr.apply(this,arguments)}function dr(){return dr=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,r){var n,i;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=Si(t.algorithm.name,r),s.next=3,crypto.subtle.deriveKey(n,t,{name:bt,length:128},!1,["encrypt","decrypt"]);case 3:return i=s.sent,s.abrupt("return",{material:t,encryptionKey:i});case 5:case"end":return s.stop()}},e)})),dr.apply(this,arguments)}function rl(e,t){return pr.apply(this,arguments)}function pr(){return pr=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,r){var n;return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=Si(t.algorithm.name,r),a.abrupt("return",crypto.subtle.deriveBits(n,t,256));case 2:case"end":return a.stop()}},e)})),pr.apply(this,arguments)}var nl=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r)}(Ei),Ai=function(e){_inherits(r,e);var t=_createSuper(r);function r(n){var i,a;return _classCallCheck(this,r),a=t.call(this),a.sendCounts=void 0,a.isKeyInvalid=!1,a.participantId=void 0,a.trackId=void 0,a.keys=void 0,a.videoCodec=void 0,a.rtpMap=void 0,a.keyProviderOptions=void 0,a.unencryptedFrameByteTrailer=void 0,a.sendCounts=new Map,a.keys=n.keys,a.participantId=n.participantId,a.rtpMap=new Map,a.keyProviderOptions=n.keyProviderOptions,a.unencryptedFrameByteTrailer=(i=n.unencryptedFrameBytes)!==null&&i!==void 0?i:new TextEncoder().encode("LKROCKS"),a}return _createClass(r,[{key:"setParticipant",value:function(i,a){this.participantId=i,this.keys=a}},{key:"unsetParticipant",value:function(){this.participantId=void 0}},{key:"getParticipantId",value:function(){return this.participantId}},{key:"getTrackId",value:function(){return this.trackId}},{key:"setVideoCodec",value:function(i){this.videoCodec=i}},{key:"setRtpMap",value:function(i){this.rtpMap=i}},{key:"setupTransform",value:function(i,a,s,o,u){var c=this;u&&(console.info("setting codec on cryptor to",u),this.videoCodec=u);var v=i==="encode"?this.encodeFunction:this.decodeFunction,f=new TransformStream({transform:v.bind(this)});a.pipeThrough(f).pipeTo(s).catch(function(g){console.error(g),c.emit("cryptorError",g instanceof Ae?g:new Ae(g.message))}),this.trackId=o}},{key:"encodeFunction",value:function(){var n=_asyncToGenerator(_regeneratorRuntime().mark(function a(s,o){var u,c,v,f,g,_,M,A,C,P;return _regeneratorRuntime().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!(!this.keys.isEnabled()||s.data.byteLength===0)){K.next=2;break}return K.abrupt("return",o.enqueue(s));case 2:if(u=this.keys.getKeySet(),c=u.encryptionKey,v=this.keys.getCurrentKeyIndex(),!c){K.next=29;break}return g=this.makeIV((f=s.getMetadata().synchronizationSource)!==null&&f!==void 0?f:-1,s.timestamp),_=new Uint8Array(s.data,0,this.getUnencryptedBytes(s)),M=new Uint8Array(2),M[0]=fi,M[1]=v,K.prev=10,K.next=13,crypto.subtle.encrypt({name:bt,iv:g,additionalData:new Uint8Array(s.data,0,_.byteLength)},c,new Uint8Array(s.data,this.getUnencryptedBytes(s)));case 13:return A=K.sent,C=new ArrayBuffer(_.byteLength+A.byteLength+g.byteLength+M.byteLength),P=new Uint8Array(C),P.set(_),P.set(new Uint8Array(A),_.byteLength),P.set(new Uint8Array(g),_.byteLength+A.byteLength),P.set(M,_.byteLength+A.byteLength+g.byteLength),s.data=C,K.abrupt("return",o.enqueue(s));case 24:K.prev=24,K.t0=K.catch(10),z.error(K.t0);case 27:K.next=30;break;case 29:this.emit(lr.Error,new Ae("encryption key missing for encoding",Oe.MissingKey));case 30:case"end":return K.stop()}},a,this,[[10,24]])}));function i(a,s){return n.apply(this,arguments)}return i}()},{key:"decodeFunction",value:function(){var n=_asyncToGenerator(_regeneratorRuntime().mark(function a(s,o){var u,c,v;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(!this.keys.isEnabled()||s.data.byteLength===0||il(s.data,this.unencryptedFrameByteTrailer))){g.next=2;break}return g.abrupt("return",o.enqueue(s));case 2:if(u=new Uint8Array(s.data),c=u[s.data.byteLength-1],!this.keys.getKeySet(c)){g.next=19;break}return g.prev=5,g.next=8,this.decryptFrame(s,c);case 8:if(v=g.sent,!v){g.next=11;break}return g.abrupt("return",o.enqueue(v));case 11:this.isKeyInvalid=!1,g.next=17;break;case 14:g.prev=14,g.t0=g.catch(5),g.t0 instanceof Ae&&g.t0.reason===Oe.InvalidKey?this.isKeyInvalid||(z.warn("invalid key"),this.emit(lr.Error,new Ae("invalid key for participant ".concat(this.participantId),Oe.InvalidKey)),this.isKeyInvalid=!0):z.warn("decoding frame failed",{error:g.t0});case 17:g.next=20;break;case 19:this.emit(lr.Error,new Ae("key missing for participant ".concat(this.participantId),Oe.MissingKey));case 20:return g.abrupt("return",o.enqueue(s));case 21:case"end":return g.stop()}},a,this,[[5,14]])}));function i(a,s){return n.apply(this,arguments)}return i}()},{key:"decryptFrame",value:function(){var n=_asyncToGenerator(_regeneratorRuntime().mark(function a(s,o){var u,c,v,f,g,_,M,A,C,P,R,K,T,se,fe,oe,te,re=arguments;return _regeneratorRuntime().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return u=re.length>2&&re[2]!==void 0?re[2]:void 0,c=re.length>3&&re[3]!==void 0?re[3]:{ratchetCount:0},v=this.keys.getKeySet(o),L.prev=3,g=new Uint8Array(s.data,0,this.getUnencryptedBytes(s)),_=new Uint8Array(s.data,s.data.byteLength-2,2),M=_[0],A=new Uint8Array(s.data,s.data.byteLength-M-_.byteLength,M),C=g.byteLength,P=s.data.byteLength-(g.byteLength+M+_.byteLength),L.next=12,crypto.subtle.decrypt({name:bt,iv:A,additionalData:new Uint8Array(s.data,0,g.byteLength)},(f=c.encryptionKey)!==null&&f!==void 0?f:v.encryptionKey,new Uint8Array(s.data,C,P));case 12:return R=L.sent,K=new ArrayBuffer(g.byteLength+R.byteLength),T=new Uint8Array(K),T.set(new Uint8Array(s.data,0,g.byteLength)),T.set(new Uint8Array(R),g.byteLength),s.data=K,L.abrupt("return",s);case 21:if(L.prev=21,L.t0=L.catch(3),!(this.keyProviderOptions.ratchetWindowSize>0)){L.next=42;break}if(!(c.ratchetCount<this.keyProviderOptions.ratchetWindowSize)){L.next=38;break}if(z.debug("ratcheting key attempt ".concat(c.ratchetCount," of ").concat(this.keyProviderOptions.ratchetWindowSize,", for kind ").concat(s instanceof RTCEncodedAudioFrame?"audio":"video")),v!==this.keys.getKeySet(o)){L.next=33;break}return L.next=29,this.keys.ratchetKey(o,!1);case 29:return oe=L.sent,L.next=32,Oi(oe,this.keyProviderOptions.ratchetSalt);case 32:fe=L.sent;case 33:return L.next=35,this.decryptFrame(s,o,u||v,{ratchetCount:c.ratchetCount+1,encryptionKey:(se=fe)===null||se===void 0?void 0:se.encryptionKey});case 35:return te=L.sent,te&&fe&&(this.keys.setKeySet(fe,o,!0),this.keys.setCurrentKeyIndex(o)),L.abrupt("return",te);case 38:u&&(z.debug("resetting to initial material"),this.keys.setKeyFromMaterial(u.material,o)),z.warn("maximum ratchet attempts exceeded, resetting key"),L.next=43;break;case 42:throw new Ae("Decryption failed, most likely because of an invalid key",Oe.InvalidKey);case 43:case"end":return L.stop()}},a,this,[[3,21]])}));function i(a,s){return n.apply(this,arguments)}return i}()},{key:"makeIV",value:function(i,a){var s,o=new ArrayBuffer(fi),u=new DataView(o);this.sendCounts.has(i)||this.sendCounts.set(i,Math.floor(Math.random()*65535));var c=(s=this.sendCounts.get(i))!==null&&s!==void 0?s:0;return u.setUint32(0,i),u.setUint32(4,a),u.setUint32(8,a-c%65535),this.sendCounts.set(i,c+1),o}},{key:"getUnencryptedBytes",value:function(i){if(el(i)){var a,s=(a=this.getVideoCodec(i))!==null&&a!==void 0?a:this.videoCodec;if(s==="av1"||s==="vp9")throw new Error("".concat(s," is not yet supported for end to end encryption"));return cr[i.type]}return cr.audio}},{key:"getVideoCodec",value:function(i){if(this.rtpMap.size!==0){var a=i.getMetadata(),s=a.payloadType,o=s?this.rtpMap.get(s):void 0;return o}}}]),r}(nl);function il(e,t){var r=new Uint8Array(e.slice(e.byteLength-t.byteLength));return t.every(function(n,i){return n===r[i]})}var Ti=function(e){_inherits(r,e);var t=_createSuper(r);function r(n,i,a){var s;return _classCallCheck(this,r),s=t.call(this),s.currentKeyIndex=void 0,s.cryptoKeyRing=void 0,s.enabled=void 0,s.keyProviderOptions=void 0,s.ratchetPromiseMap=void 0,s.participantId=void 0,s.currentKeyIndex=0,s.cryptoKeyRing=new Array(Kc),s.enabled=i,s.keyProviderOptions=a,s.ratchetPromiseMap=new Map,s.participantId=n,s}return _createClass(r,[{key:"setEnabled",value:function(i){this.enabled=i}},{key:"ratchetKey",value:function(i){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=i!=null?i:this.getCurrentKeyIndex(),u=o,c=this.ratchetPromiseMap.get(u);if(typeof c!="undefined")return c;var v=new Promise(function(){var f=_asyncToGenerator(_regeneratorRuntime().mark(function g(_,M){var A,C;return _regeneratorRuntime().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.prev=0,A=a.getKeySet(u).material,R.t0=tl,R.next=5,rl(A,a.keyProviderOptions.ratchetSalt);case 5:return R.t1=R.sent,R.t2=A.algorithm.name,R.next=9,(0,R.t0)(R.t1,R.t2,"derive");case 9:C=R.sent,s&&a.setKeyFromMaterial(C,u,!0),a.emit("keyRatcheted",C,o,a.participantId),_(C),R.next=18;break;case 15:R.prev=15,R.t3=R.catch(0),M(R.t3);case 18:return R.prev=18,a.ratchetPromiseMap.delete(u),R.finish(18);case 21:case"end":return R.stop()}},g,null,[[0,15,18,21]])}));return function(g,_){return f.apply(this,arguments)}}());return this.ratchetPromiseMap.set(u,v),v}},{key:"setKeyFromMaterial",value:function(){var n=_asyncToGenerator(_regeneratorRuntime().mark(function a(s){var o,u,c,v=arguments;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return o=v.length>1&&v[1]!==void 0?v[1]:0,u=v.length>2&&v[2]!==void 0?v[2]:!1,z.debug("Worker: setting new key"),o>=0&&(this.currentKeyIndex=o%this.cryptoKeyRing.length),g.next=6,Oi(s,this.keyProviderOptions.ratchetSalt);case 6:c=g.sent,this.setKeySet(c,this.currentKeyIndex,u);case 8:case"end":return g.stop()}},a,this)}));function i(a){return n.apply(this,arguments)}return i}()},{key:"setKeySet",value:function(){var n=_asyncToGenerator(_regeneratorRuntime().mark(function a(s,o){var u,c=arguments;return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:u=c.length>2&&c[2]!==void 0?c[2]:!1,this.cryptoKeyRing[o%this.cryptoKeyRing.length]=s,u&&this.emit("keyRatcheted",s.material,o,this.participantId);case 3:case"end":return f.stop()}},a,this)}));function i(a,s){return n.apply(this,arguments)}return i}()},{key:"setCurrentKeyIndex",value:function(){var n=_asyncToGenerator(_regeneratorRuntime().mark(function a(s){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:this.currentKeyIndex=s%this.cryptoKeyRing.length;case 1:case"end":return u.stop()}},a,this)}));function i(a){return n.apply(this,arguments)}return i}()},{key:"isEnabled",value:function(){return this.enabled}},{key:"getCurrentKeyIndex",value:function(){return this.currentKeyIndex}},{key:"getKeySet",value:function(i){return this.cryptoKeyRing[i!=null?i:this.currentKeyIndex]}}]),r}(Ei),vr=[],hr=new Map,gr=[],$e,mr=!1,Ci=!1,yr,Te=qc;function al(e,t){var r={kind:"ratchetKey",data:{keyIndex:t,material:e}};postMessage(r)}function tt(e){if(!e)return $e;var t=hr.get(e);return t||(t=new Ti(e,!0,Te),yr&&t.setKeyFromMaterial(yr),hr.set(e,t)),t}function sl(e,t){t?tt(t).setEnabled(e):(mr=e,$e.setEnabled(e))}function ki(e){e.on("cryptorError",function(t){var r={kind:"error",data:{error:new Error("".concat(Oe[t.reason],": ").concat(t.message))}};postMessage(r)})}function br(e,t){var r=vr.find(function(n){return n.getTrackId()===t});if(r)e!==r.getParticipantId()&&r.setParticipant(e,tt(e));else{if(z.info("creating new cryptor for ".concat(e)),!Te)throw Error("Missing keyProvider options");r=new Ai({participantId:e,keys:tt(e),keyProviderOptions:Te}),ki(r),vr.push(r)}return r}function Ri(e){var t=gr.find(function(r){return r.getTrackId()===e});if(!t){if(!Te)throw new TypeError("Missing keyProvider options");t=new Ai({keys:$e,participantId:"publisher",keyProviderOptions:Te}),ki(t),gr.push(t)}return t}function ol(e){var t;(t=vr.find(function(r){return r.getTrackId()===e}))===null||t===void 0||t.unsetParticipant()}function ul(e,t){var r;z.debug("setting shared key"),yr=e,(r=$e)===null||r===void 0||r.setKeyFromMaterial(e,t);var n=_createForOfIteratorHelper(hr),i;try{for(n.s();!(i=n.n()).done;){var a=_slicedToArray(i.value,2),s=a[1];s.setKeyFromMaterial(e,t)}}catch(o){n.e(o)}finally{n.f()}}onmessage=function(t){var r=t.data,n=r.kind,i=r.data;switch(n){case"init":z.info("worker initialized"),Te=i.keyProviderOptions,Ci=!!i.keyProviderOptions.sharedKey;var a={kind:"enable",data:{enabled:mr}};$e=new Ti(void 0,mr,Te),$e.on("keyRatcheted",al),postMessage(a);break;case"enable":sl(i.enabled,i.participantId),z.info("updated e2ee enabled status"),postMessage(t.data);break;case"decode":var s=br(i.participantId,i.trackId);s.setupTransform(n,i.readableStream,i.writableStream,i.trackId,i.codec);break;case"encode":var o=Ri(i.trackId);o.setupTransform(n,i.readableStream,i.writableStream,i.trackId,i.codec);break;case"setKey":Ci?(z.debug("set shared key"),ul(i.key,i.keyIndex)):i.participantId?tt(i.participantId).setKeyFromMaterial(i.key,i.keyIndex):z.error("no participant Id was provided and shared key usage is disabled");break;case"removeTransform":ol(i.trackId);break;case"updateCodec":br(i.participantId,i.trackId).setVideoCodec(i.codec);break;case"setRTPMap":gr.forEach(function(u){u.setRtpMap(i.map)});break;case"ratchetRequest":tt(i.participantId).ratchetKey(i.keyIndex);break}},self.RTCTransformEvent&&(z.debug("setup transform event"),self.onrtctransform=function(e){var t=e.transformer;z.debug("transformer",t),t.handled=!0;var r=t.options,n=r.kind,i=r.participantId,a=r.trackId,s=r.codec,o=n==="encode"?Ri(a):br(i,a);z.debug("transform ".concat(s)),o.setupTransform(n,t.readable,t.writable,a,s)})})();
