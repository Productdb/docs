var fd=Object.defineProperty,pd=Object.defineProperties;var hd=Object.getOwnPropertyDescriptors;var ds=Object.getOwnPropertySymbols;var gd=Object.prototype.hasOwnProperty,md=Object.prototype.propertyIsEnumerable;var qt=(R,A,_)=>A in R?fd(R,A,{enumerable:!0,configurable:!0,writable:!0,value:_}):R[A]=_,ls=(R,A)=>{for(var _ in A||(A={}))gd.call(A,_)&&qt(R,_,A[_]);if(ds)for(var _ of ds(A))md.call(A,_)&&qt(R,_,A[_]);return R},fs=(R,A)=>pd(R,hd(A));var g=(R,A,_)=>(qt(R,typeof A!="symbol"?A+"":A,_),_);var k=(R,A,_)=>new Promise((re,fe)=>{var ne=D=>{try{G(_.next(D))}catch(pe){fe(pe)}},V=D=>{try{G(_.throw(D))}catch(pe){fe(pe)}},G=D=>D.done?re(D.value):Promise.resolve(D.value).then(ne,V);G((_=_.apply(R,A)).next())});(function(){var as;"use strict";var R;(function(e){e.GroupCall="GROUP_CALL",e.Webinar="WEBINAR",e.AudioRoom="AUDIO_ROOM",e.Livestream="LIVESTREAM",e.Chat="CHAT"})(R||(R={}));var A;(function(e){e.Skip="SKIP",e.OnPrivilegedUserEntry="ON_PRIVILEGED_USER_ENTRY",e.SkipOnAccept="SKIP_ON_ACCEPT"})(A||(A={}));var _;(function(e){e.Allowed="ALLOWED",e.NotAllowed="NOT_ALLOWED",e.CanRequest="CAN_REQUEST"})(_||(_={}));var re;(function(e){e.Allowed="ALLOWED",e.NotAllowed="NOT_ALLOWED"})(re||(re={}));var fe;(function(e){e.FULL_ACCESS="FULL_ACCESS",e.VIEW_ONLY="VIEW_ONLY"})(fe||(fe={}));var ne;(function(e){e.skip="SKIP",e.onAccept="ON_ACCEPT",e.skipOnPrivilegedUserEntry="SKIP_ON_PRIVILEGED_USER_ENTRY",e.skipOnAccept="SKIP_ON_ACCEPT"})(ne||(ne={}));var V;(function(e){e.none="NONE",e.recorder="RECORDER",e.livestreamer="LIVESTREAMER"})(V||(V={}));var G;(function(e){e.groupCall="GROUP_CALL",e.webinar="WEBINAR",e.audioRoom="AUDIO_ROOM",e.livestream="LIVESTREAM",e.chat="CHAT"})(G||(G={}));var D;(function(e){e.SKIP="skip",e.SKIP_ON_PRIVILEGED_USER_ENTRY="skipOnPrivilegedUserEntry",e.ON_ACCEPT="skipOnAccept",e.SKIP_ON_ACCEPT="skipOnAccept"})(D||(D={})),G.groupCall,ne.skipOnAccept,V.none;function pe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ge={},ps={get exports(){return Ge},set exports(e){Ge=e}},Ae={},hs={get exports(){return Ae},set exports(e){Ae=e}},Ht=function(t,r){return function(){for(var s=new Array(arguments.length),i=0;i<s.length;i++)s[i]=arguments[i];return t.apply(r,s)}},gs=Ht,q=Object.prototype.toString;function ze(e){return Array.isArray(e)}function Je(e){return typeof e=="undefined"}function ms(e){return e!==null&&!Je(e)&&e.constructor!==null&&!Je(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Wt(e){return q.call(e)==="[object ArrayBuffer]"}function vs(e){return q.call(e)==="[object FormData]"}function _s(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Wt(e.buffer),t}function bs(e){return typeof e=="string"}function ys(e){return typeof e=="number"}function Gt(e){return e!==null&&typeof e=="object"}function Ce(e){if(q.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function ws(e){return q.call(e)==="[object Date]"}function Es(e){return q.call(e)==="[object File]"}function Ss(e){return q.call(e)==="[object Blob]"}function zt(e){return q.call(e)==="[object Function]"}function As(e){return Gt(e)&&zt(e.pipe)}function Cs(e){return q.call(e)==="[object URLSearchParams]"}function Os(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Ts(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Ye(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),ze(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}function Xe(){var e={};function t(s,i){Ce(e[i])&&Ce(s)?e[i]=Xe(e[i],s):Ce(s)?e[i]=Xe({},s):ze(s)?e[i]=s.slice():e[i]=s}for(var r=0,n=arguments.length;r<n;r++)Ye(arguments[r],t);return e}function Rs(e,t,r){return Ye(t,function(s,i){r&&typeof s=="function"?e[i]=gs(s,r):e[i]=s}),e}function Ls(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var N={isArray:ze,isArrayBuffer:Wt,isBuffer:ms,isFormData:vs,isArrayBufferView:_s,isString:bs,isNumber:ys,isObject:Gt,isPlainObject:Ce,isUndefined:Je,isDate:ws,isFile:Es,isBlob:Ss,isFunction:zt,isStream:As,isURLSearchParams:Cs,isStandardBrowserEnv:Ts,forEach:Ye,merge:Xe,extend:Rs,trim:Os,stripBOM:Ls},se=N;function Jt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Yt=function(t,r,n){if(!r)return t;var s;if(n)s=n(r);else if(se.isURLSearchParams(r))s=r.toString();else{var i=[];se.forEach(r,function(c,d){c===null||typeof c=="undefined"||(se.isArray(c)?d=d+"[]":c=[c],se.forEach(c,function(u){se.isDate(u)?u=u.toISOString():se.isObject(u)&&(u=JSON.stringify(u)),i.push(Jt(d)+"="+Jt(u))}))}),s=i.join("&")}if(s){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t},Is=N;function Oe(){this.handlers=[]}Oe.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1},Oe.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},Oe.prototype.forEach=function(t){Is.forEach(this.handlers,function(n){n!==null&&t(n)})};var Ms=Oe,Ns=N,Ps=function(t,r){Ns.forEach(t,function(s,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(t[r]=s,delete t[i])})},Xt=function(t,r,n,s,i){return t.config=r,n&&(t.code=n),t.request=s,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},Qe,Qt;function Zt(){if(Qt)return Qe;Qt=1;var e=Xt;return Qe=function(r,n,s,i,a){var o=new Error(r);return e(o,n,s,i,a)},Qe}var Ze,er;function xs(){if(er)return Ze;er=1;var e=Zt();return Ze=function(r,n,s){var i=s.config.validateStatus;!s.status||!i||i(s.status)?r(s):n(e("Request failed with status code "+s.status,s.config,null,s.request,s))},Ze}var et,tr;function Fs(){if(tr)return et;tr=1;var e=N;return et=e.isStandardBrowserEnv()?function(){return{write:function(n,s,i,a,o,c){var d=[];d.push(n+"="+encodeURIComponent(s)),e.isNumber(i)&&d.push("expires="+new Date(i).toGMTString()),e.isString(a)&&d.push("path="+a),e.isString(o)&&d.push("domain="+o),c===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(n){var s=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),et}var tt,rr;function ks(){return rr||(rr=1,tt=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}),tt}var rt,nr;function Bs(){return nr||(nr=1,rt=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}),rt}var nt,sr;function $s(){if(sr)return nt;sr=1;var e=ks(),t=Bs();return nt=function(n,s){return n&&!e(s)?t(n,s):s},nt}var st,ir;function Ds(){if(ir)return st;ir=1;var e=N,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return st=function(n){var s={},i,a,o;return n&&e.forEach(n.split(`
`),function(d){if(o=d.indexOf(":"),i=e.trim(d.substr(0,o)).toLowerCase(),a=e.trim(d.substr(o+1)),i){if(s[i]&&t.indexOf(i)>=0)return;i==="set-cookie"?s[i]=(s[i]?s[i]:[]).concat([a]):s[i]=s[i]?s[i]+", "+a:a}}),s},st}var it,ar;function js(){if(ar)return it;ar=1;var e=N;return it=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),s;function i(a){var o=a;return r&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=i(window.location.href),function(o){var c=e.isString(o)?i(o):o;return c.protocol===s.protocol&&c.host===s.host}}():function(){return function(){return!0}}(),it}var at,or;function Te(){if(or)return at;or=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,at=e,at}var ot,cr;function ur(){if(cr)return ot;cr=1;var e=N,t=xs(),r=Fs(),n=Yt,s=$s(),i=Ds(),a=js(),o=Zt(),c=Re(),d=Te();return ot=function(u){return new Promise(function(E,M){var F=u.data,S=u.headers,O=u.responseType,B;function We(){u.cancelToken&&u.cancelToken.unsubscribe(B),u.signal&&u.signal.removeEventListener("abort",B)}e.isFormData(F)&&delete S["Content-Type"];var p=new XMLHttpRequest;if(u.auth){var ud=u.auth.username||"",dd=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";S.Authorization="Basic "+btoa(ud+":"+dd)}var os=s(u.baseURL,u.url);p.open(u.method.toUpperCase(),n(os,u.params,u.paramsSerializer),!0),p.timeout=u.timeout;function cs(){if(p){var $="getAllResponseHeaders"in p?i(p.getAllResponseHeaders()):null,le=!O||O==="text"||O==="json"?p.responseText:p.response,te={data:le,status:p.status,statusText:p.statusText,headers:$,config:u,request:p};t(function(Vt){E(Vt),We()},function(Vt){M(Vt),We()},te),p=null}}if("onloadend"in p?p.onloadend=cs:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(cs)},p.onabort=function(){p&&(M(o("Request aborted",u,"ECONNABORTED",p)),p=null)},p.onerror=function(){M(o("Network Error",u,null,p)),p=null},p.ontimeout=function(){var le=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded",te=u.transitional||c.transitional;u.timeoutErrorMessage&&(le=u.timeoutErrorMessage),M(o(le,u,te.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},e.isStandardBrowserEnv()){var us=(u.withCredentials||a(os))&&u.xsrfCookieName?r.read(u.xsrfCookieName):void 0;us&&(S[u.xsrfHeaderName]=us)}"setRequestHeader"in p&&e.forEach(S,function(le,te){typeof F=="undefined"&&te.toLowerCase()==="content-type"?delete S[te]:p.setRequestHeader(te,le)}),e.isUndefined(u.withCredentials)||(p.withCredentials=!!u.withCredentials),O&&O!=="json"&&(p.responseType=u.responseType),typeof u.onDownloadProgress=="function"&&p.addEventListener("progress",u.onDownloadProgress),typeof u.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",u.onUploadProgress),(u.cancelToken||u.signal)&&(B=function($){p&&(M(!$||$&&$.type?new d("canceled"):$),p.abort(),p=null)},u.cancelToken&&u.cancelToken.subscribe(B),u.signal&&(u.signal.aborted?B():u.signal.addEventListener("abort",B))),F||(F=null),p.send(F)})},ot}var ct,dr;function Re(){if(dr)return ct;dr=1;var e=N,t=Ps,r=Xt,n={"Content-Type":"application/x-www-form-urlencoded"};function s(c,d){!e.isUndefined(c)&&e.isUndefined(c["Content-Type"])&&(c["Content-Type"]=d)}function i(){var c;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(c=ur()),c}function a(c,d,f){if(e.isString(c))try{return(d||JSON.parse)(c),e.trim(c)}catch(u){if(u.name!=="SyntaxError")throw u}return(f||JSON.stringify)(c)}var o={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:i(),transformRequest:[function(d,f){return t(f,"Accept"),t(f,"Content-Type"),e.isFormData(d)||e.isArrayBuffer(d)||e.isBuffer(d)||e.isStream(d)||e.isFile(d)||e.isBlob(d)?d:e.isArrayBufferView(d)?d.buffer:e.isURLSearchParams(d)?(s(f,"application/x-www-form-urlencoded;charset=utf-8"),d.toString()):e.isObject(d)||f&&f["Content-Type"]==="application/json"?(s(f,"application/json"),a(d)):d}],transformResponse:[function(d){var f=this.transitional||o.transitional,u=f&&f.silentJSONParsing,h=f&&f.forcedJSONParsing,E=!u&&this.responseType==="json";if(E||h&&e.isString(d)&&d.length)try{return JSON.parse(d)}catch(M){if(E)throw M.name==="SyntaxError"?r(M,this,"E_JSON_PARSE"):M}return d}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(d){return d>=200&&d<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return e.forEach(["delete","get","head"],function(d){o.headers[d]={}}),e.forEach(["post","put","patch"],function(d){o.headers[d]=e.merge(n)}),ct=o,ct}var Us=N,Ks=Re(),Vs=function(t,r,n){var s=this||Ks;return Us.forEach(n,function(a){t=a.call(s,t,r)}),t},ut,lr;function fr(){return lr||(lr=1,ut=function(t){return!!(t&&t.__CANCEL__)}),ut}var pr=N,dt=Vs,qs=fr(),Hs=Re(),Ws=Te();function lt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ws("canceled")}var Gs=function(t){lt(t),t.headers=t.headers||{},t.data=dt.call(t,t.data,t.headers,t.transformRequest),t.headers=pr.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),pr.forEach(["delete","get","head","post","put","patch","common"],function(s){delete t.headers[s]});var r=t.adapter||Hs.adapter;return r(t).then(function(s){return lt(t),s.data=dt.call(t,s.data,s.headers,t.transformResponse),s},function(s){return qs(s)||(lt(t),s&&s.response&&(s.response.data=dt.call(t,s.response.data,s.response.headers,t.transformResponse))),Promise.reject(s)})},x=N,hr=function(t,r){r=r||{};var n={};function s(f,u){return x.isPlainObject(f)&&x.isPlainObject(u)?x.merge(f,u):x.isPlainObject(u)?x.merge({},u):x.isArray(u)?u.slice():u}function i(f){if(x.isUndefined(r[f])){if(!x.isUndefined(t[f]))return s(void 0,t[f])}else return s(t[f],r[f])}function a(f){if(!x.isUndefined(r[f]))return s(void 0,r[f])}function o(f){if(x.isUndefined(r[f])){if(!x.isUndefined(t[f]))return s(void 0,t[f])}else return s(void 0,r[f])}function c(f){if(f in r)return s(t[f],r[f]);if(f in t)return s(void 0,t[f])}var d={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c};return x.forEach(Object.keys(t).concat(Object.keys(r)),function(u){var h=d[u]||i,E=h(u);x.isUndefined(E)&&h!==c||(n[u]=E)}),n},ft,gr;function mr(){return gr||(gr=1,ft={version:"0.25.0"}),ft}var zs=mr().version,pt={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){pt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var vr={};pt.transitional=function(t,r,n){function s(i,a){return"[Axios v"+zs+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return function(i,a,o){if(t===!1)throw new Error(s(a," has been removed"+(r?" in "+r:"")));return r&&!vr[a]&&(vr[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,a,o):!0}};function Js(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),s=n.length;s-- >0;){var i=n[s],a=t[i];if(a){var o=e[i],c=o===void 0||a(o,i,e);if(c!==!0)throw new TypeError("option "+i+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+i)}}var Ys={assertOptions:Js,validators:pt},_r=N,Xs=Yt,br=Ms,yr=Gs,Le=hr,wr=Ys,ie=wr.validators;function he(e){this.defaults=e,this.interceptors={request:new br,response:new br}}he.prototype.request=function(t,r){if(typeof t=="string"?(r=r||{},r.url=t):r=t||{},!r.url)throw new Error("Provided config url is not valid");r=Le(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&wr.assertOptions(n,{silentJSONParsing:ie.transitional(ie.boolean),forcedJSONParsing:ie.transitional(ie.boolean),clarifyTimeoutError:ie.transitional(ie.boolean)},!1);var s=[],i=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(r)===!1||(i=i&&E.synchronous,s.unshift(E.fulfilled,E.rejected))});var a=[];this.interceptors.response.forEach(function(E){a.push(E.fulfilled,E.rejected)});var o;if(!i){var c=[yr,void 0];for(Array.prototype.unshift.apply(c,s),c=c.concat(a),o=Promise.resolve(r);c.length;)o=o.then(c.shift(),c.shift());return o}for(var d=r;s.length;){var f=s.shift(),u=s.shift();try{d=f(d)}catch(h){u(h);break}}try{o=yr(d)}catch(h){return Promise.reject(h)}for(;a.length;)o=o.then(a.shift(),a.shift());return o},he.prototype.getUri=function(t){if(!t.url)throw new Error("Provided config url is not valid");return t=Le(this.defaults,t),Xs(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},_r.forEach(["delete","get","head","options"],function(t){he.prototype[t]=function(r,n){return this.request(Le(n||{},{method:t,url:r,data:(n||{}).data}))}}),_r.forEach(["post","put","patch"],function(t){he.prototype[t]=function(r,n,s){return this.request(Le(s||{},{method:t,url:r,data:n}))}});var Qs=he,ht,Er;function Zs(){if(Er)return ht;Er=1;var e=Te();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(a){n=a});var s=this;this.promise.then(function(i){if(s._listeners){var a,o=s._listeners.length;for(a=0;a<o;a++)s._listeners[a](i);s._listeners=null}}),this.promise.then=function(i){var a,o=new Promise(function(c){s.subscribe(c),a=c}).then(i);return o.cancel=function(){s.unsubscribe(a)},o},r(function(a){s.reason||(s.reason=new e(a),n(s.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},t.prototype.unsubscribe=function(n){if(this._listeners){var s=this._listeners.indexOf(n);s!==-1&&this._listeners.splice(s,1)}},t.source=function(){var n,s=new t(function(a){n=a});return{token:s,cancel:n}},ht=t,ht}var gt,Sr;function ei(){return Sr||(Sr=1,gt=function(t){return function(n){return t.apply(null,n)}}),gt}var mt,Ar;function ti(){if(Ar)return mt;Ar=1;var e=N;return mt=function(r){return e.isObject(r)&&r.isAxiosError===!0},mt}var Cr=N,ri=Ht,Ie=Qs,ni=hr,si=Re();function Or(e){var t=new Ie(e),r=ri(Ie.prototype.request,t);return Cr.extend(r,Ie.prototype,t),Cr.extend(r,t),r.create=function(s){return Or(ni(e,s))},r}var j=Or(si);j.Axios=Ie,j.Cancel=Te(),j.CancelToken=Zs(),j.isCancel=fr(),j.VERSION=mr().version,j.all=function(t){return Promise.all(t)},j.spread=ei(),j.isAxiosError=ti(),hs.exports=j,Ae.default=j,function(e){e.exports=Ae}(ps);var Tr=pe(Ge);let Rr="hXgU8Wc8pwuGNq9ms5q9Hh";typeof process!="undefined"&&(as=process==null?void 0:process.env)!=null&&as.FLAGSMITH_ENVIRONMENT_KEY&&(Rr=process.env.FLAGSMITH_ENVIRONMENT_KEY);function ii(e=[]){const t={};return e.forEach(r=>{t[r.feature.name]={enabled:r.enabled,value:r.feature_state_value}}),t}class ai{constructor(t=Rr){g(this,"flags",{});g(this,"environmentKey",null);this.environmentKey=t,this.identify=this.identify.bind(this),this.getValue=this.getValue.bind(this),this.hasFeature=this.hasFeature.bind(this),this.getAllFlags=this.getAllFlags.bind(this)}identify(a){return k(this,arguments,function*(t,r={},n=!1,s=5e3,i="edge.api.flagsmith.com"){const o=JSON.parse(JSON.stringify(r)),c=Object.entries(o).map(d=>({trait_key:d[0],trait_value:d[1]}));try{const d="_"+(Math.random()+1).toString(36).substring(2),f=yield Tr.post(`https://${i}/api/v1/identities/`,{identifier:t+(n?d:""),traits:c},{headers:{"Content-Type":"application/json","X-Environment-Key":this.environmentKey},timeout:s});this.flags=ii(f.data.flags||[])}catch(d){}return this.flags})}getValue(t){return this.flags&&this.flags[t]&&this.flags[t].value}hasFeature(t){return this.flags&&this.flags[t]&&this.flags[t].enabled}getAllFlags(){return this.flags}}const vt=new ai,Lr=[-2,-1,0,1,2],oi=[0,1,2,3,4];function ci(e){e=e.trim();let t="0",r="0",n="0";return e.length==4?(t="0x"+e[1]+e[1],r="0x"+e[2]+e[2],n="0x"+e[3]+e[3]):e.length>6&&(t="0x"+e[1]+e[2],r="0x"+e[3]+e[4],n="0x"+e[5]+e[6]),[+t,+r,+n]}const ui=(e,t,r)=>{let n,s,i;if(t==0)n=s=i=r;else{const a=(d,f,u)=>(u<0&&(u+=1),u>1&&(u-=1),u<.16666666666666666?d+(f-d)*6*u:u<.5?f:u<.6666666666666666?d+(f-d)*(.6666666666666666-u)*6:d),o=r<.5?r*(1+t):r+t-r*t,c=2*r-o;n=a(c,o,e+1/3),s=a(c,o,e),i=a(c,o,e-1/3)}return[Math.round(n*255),Math.round(s*255),Math.round(i*255)]},di=(e,t,r)=>{e/=255,t/=255,r/=255;const n=Math.max(e,t,r),s=Math.min(e,t,r);let i,a;const o=(n+s)/2;if(n==s)i=a=0;else{const c=n-s;switch(a=o>.5?c/(2-n-s):c/(n+s),n){case e:i=(t-r)/c+(t<r?6:0);break;case t:i=(r-e)/c+2;break;case r:i=(e-t)/c+4;break}i/=6}return[i,a,o]},li=(e,t,r)=>{const n=s=>s.toString(16).padStart(2,"0");return`#${n(e)}${n(t)}${n(r)}`},Ir=(e,t=Lr,r=.4)=>{const n=[],[s,i,a]=ci(e),[o,c,d]=di(s,i,a),f=Math.round(d*100);f>70?r=.8:f>60?r=.9:f<10?r=.075:f<42&&(r=.3);const u=t.findIndex(S=>S===0);if(u===-1)throw new Error("Invalid reducer provided, it must contain atleast one zero");const h=5-u,E=u+1,M=(100-f)/h,F=f/E;for(const S of t){let O;S<0?O=f+S*F*r:S>0?O=f+S*M*r:O=f;const[B,We,p]=ui(o,c,O/100);n.push(li(B,We,p))}return n},Mr={dark:{background:{1e3:"#252525",900:"#2F2F2F",800:"#323232",700:"#3E3E3E",600:"#4A4A4A"},text:"#F5F5F5","video-bg":"#1C1C1C"},light:{background:{1e3:"#FFFFFF",900:"#F5F5F5",800:"#EBEBEB",700:"#E0E0E0",600:"#D6D6D6"},text:"#111111","text-on-brand":"#ffffff","video-bg":"#DADADA"}},fi=e=>{const[t,r,n,s,i]=Ir(e,Lr);return{300:t,400:r,500:n,600:s,700:i}},pi=e=>{if(e==="#FFFFFF")return Mr.light.background;if(e==="#000000")return Mr.dark.background;const[t,r,n,s,i]=Ir(e,oi);return{1e3:t,900:r,800:n,700:s,600:i}};function hi(){this.__data__=[],this.size=0}function Nr(e,t){return e===t||e!==e&&t!==t}function Me(e,t){for(var r=e.length;r--;)if(Nr(e[r][0],t))return r;return-1}var gi=Array.prototype,mi=gi.splice;function vi(e){var t=this.__data__,r=Me(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():mi.call(t,r,1),--this.size,!0}function _i(e){var t=this.__data__,r=Me(t,e);return r<0?void 0:t[r][1]}function bi(e){return Me(this.__data__,e)>-1}function yi(e,t){var r=this.__data__,n=Me(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function K(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}K.prototype.clear=hi,K.prototype.delete=vi,K.prototype.get=_i,K.prototype.has=bi,K.prototype.set=yi;function wi(){this.__data__=new K,this.size=0}function Ei(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Si(e){return this.__data__.get(e)}function Ai(e){return this.__data__.has(e)}var Ci=typeof global=="object"&&global&&global.Object===Object&&global,Pr=Ci,Oi=typeof self=="object"&&self&&self.Object===Object&&self,Ti=Pr||Oi||Function("return this")(),U=Ti,Ri=U.Symbol,ae=Ri,xr=Object.prototype,Li=xr.hasOwnProperty,Ii=xr.toString,ge=ae?ae.toStringTag:void 0;function Mi(e){var t=Li.call(e,ge),r=e[ge];try{e[ge]=void 0;var n=!0}catch(i){}var s=Ii.call(e);return n&&(t?e[ge]=r:delete e[ge]),s}var Ni=Object.prototype,Pi=Ni.toString;function xi(e){return Pi.call(e)}var Fi="[object Null]",ki="[object Undefined]",Fr=ae?ae.toStringTag:void 0;function me(e){return e==null?e===void 0?ki:Fi:Fr&&Fr in Object(e)?Mi(e):xi(e)}function ve(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Bi="[object AsyncFunction]",$i="[object Function]",Di="[object GeneratorFunction]",ji="[object Proxy]";function kr(e){if(!ve(e))return!1;var t=me(e);return t==$i||t==Di||t==Bi||t==ji}var Ui=U["__core-js_shared__"],_t=Ui,Br=function(){var e=/[^.]+$/.exec(_t&&_t.keys&&_t.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ki(e){return!!Br&&Br in e}var Vi=Function.prototype,qi=Vi.toString;function z(e){if(e!=null){try{return qi.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var Hi=/[\\^$.*+?()[\]{}|]/g,Wi=/^\[object .+?Constructor\]$/,Gi=Function.prototype,zi=Object.prototype,Ji=Gi.toString,Yi=zi.hasOwnProperty,Xi=RegExp("^"+Ji.call(Yi).replace(Hi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Qi(e){if(!ve(e)||Ki(e))return!1;var t=kr(e)?Xi:Wi;return t.test(z(e))}function Zi(e,t){return e==null?void 0:e[t]}function J(e,t){var r=Zi(e,t);return Qi(r)?r:void 0}var ea=J(U,"Map"),_e=ea,ta=J(Object,"create"),be=ta;function ra(){this.__data__=be?be(null):{},this.size=0}function na(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var sa="__lodash_hash_undefined__",ia=Object.prototype,aa=ia.hasOwnProperty;function oa(e){var t=this.__data__;if(be){var r=t[e];return r===sa?void 0:r}return aa.call(t,e)?t[e]:void 0}var ca=Object.prototype,ua=ca.hasOwnProperty;function da(e){var t=this.__data__;return be?t[e]!==void 0:ua.call(t,e)}var la="__lodash_hash_undefined__";function fa(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=be&&t===void 0?la:t,this}function Y(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Y.prototype.clear=ra,Y.prototype.delete=na,Y.prototype.get=oa,Y.prototype.has=da,Y.prototype.set=fa;function pa(){this.size=0,this.__data__={hash:new Y,map:new(_e||K),string:new Y}}function ha(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Ne(e,t){var r=e.__data__;return ha(t)?r[typeof t=="string"?"string":"hash"]:r.map}function ga(e){var t=Ne(this,e).delete(e);return this.size-=t?1:0,t}function ma(e){return Ne(this,e).get(e)}function va(e){return Ne(this,e).has(e)}function _a(e,t){var r=Ne(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function oe(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}oe.prototype.clear=pa,oe.prototype.delete=ga,oe.prototype.get=ma,oe.prototype.has=va,oe.prototype.set=_a;var ba=200;function ya(e,t){var r=this.__data__;if(r instanceof K){var n=r.__data__;if(!_e||n.length<ba-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new oe(n)}return r.set(e,t),this.size=r.size,this}function ce(e){var t=this.__data__=new K(e);this.size=t.size}ce.prototype.clear=wi,ce.prototype.delete=Ei,ce.prototype.get=Si,ce.prototype.has=Ai,ce.prototype.set=ya;function wa(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Ea=function(){try{var e=J(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),$r=Ea;function Dr(e,t,r){t=="__proto__"&&$r?$r(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Sa=Object.prototype,Aa=Sa.hasOwnProperty;function jr(e,t,r){var n=e[t];(!(Aa.call(e,t)&&Nr(n,r))||r===void 0&&!(t in e))&&Dr(e,t,r)}function Pe(e,t,r,n){var s=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var o=t[i],c=n?n(r[o],e[o],o,r,e):void 0;c===void 0&&(c=e[o]),s?Dr(r,o,c):jr(r,o,c)}return r}function Ca(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function ye(e){return e!=null&&typeof e=="object"}var Oa="[object Arguments]";function Ur(e){return ye(e)&&me(e)==Oa}var Kr=Object.prototype,Ta=Kr.hasOwnProperty,Ra=Kr.propertyIsEnumerable,La=Ur(function(){return arguments}())?Ur:function(e){return ye(e)&&Ta.call(e,"callee")&&!Ra.call(e,"callee")},Vr=La,Ia=Array.isArray,xe=Ia;function Ma(){return!1}var qr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Hr=qr&&typeof module=="object"&&module&&!module.nodeType&&module,Na=Hr&&Hr.exports===qr,Wr=Na?U.Buffer:void 0,Pa=Wr?Wr.isBuffer:void 0,xa=Pa||Ma,bt=xa,Fa=9007199254740991,ka=/^(?:0|[1-9]\d*)$/;function Ba(e,t){var r=typeof e;return t=t==null?Fa:t,!!t&&(r=="number"||r!="symbol"&&ka.test(e))&&e>-1&&e%1==0&&e<t}var $a=9007199254740991;function Gr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=$a}var Da="[object Arguments]",ja="[object Array]",Ua="[object Boolean]",Ka="[object Date]",Va="[object Error]",qa="[object Function]",Ha="[object Map]",Wa="[object Number]",Ga="[object Object]",za="[object RegExp]",Ja="[object Set]",Ya="[object String]",Xa="[object WeakMap]",Qa="[object ArrayBuffer]",Za="[object DataView]",eo="[object Float32Array]",to="[object Float64Array]",ro="[object Int8Array]",no="[object Int16Array]",so="[object Int32Array]",io="[object Uint8Array]",ao="[object Uint8ClampedArray]",oo="[object Uint16Array]",co="[object Uint32Array]",w={};w[eo]=w[to]=w[ro]=w[no]=w[so]=w[io]=w[ao]=w[oo]=w[co]=!0,w[Da]=w[ja]=w[Qa]=w[Ua]=w[Za]=w[Ka]=w[Va]=w[qa]=w[Ha]=w[Wa]=w[Ga]=w[za]=w[Ja]=w[Ya]=w[Xa]=!1;function uo(e){return ye(e)&&Gr(e.length)&&!!w[me(e)]}function yt(e){return function(t){return e(t)}}var zr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,we=zr&&typeof module=="object"&&module&&!module.nodeType&&module,lo=we&&we.exports===zr,wt=lo&&Pr.process,fo=function(){try{var e=we&&we.require&&we.require("util").types;return e||wt&&wt.binding&&wt.binding("util")}catch(t){}}(),ue=fo,Jr=ue&&ue.isTypedArray,po=Jr?yt(Jr):uo,Yr=po,ho=Object.prototype,go=ho.hasOwnProperty;function Xr(e,t){var r=xe(e),n=!r&&Vr(e),s=!r&&!n&&bt(e),i=!r&&!n&&!s&&Yr(e),a=r||n||s||i,o=a?Ca(e.length,String):[],c=o.length;for(var d in e)(t||go.call(e,d))&&!(a&&(d=="length"||s&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Ba(d,c)))&&o.push(d);return o}var mo=Object.prototype;function Fe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||mo;return e===r}function Qr(e,t){return function(r){return e(t(r))}}var vo=Qr(Object.keys,Object),_o=vo,bo=Object.prototype,yo=bo.hasOwnProperty;function Zr(e){if(!Fe(e))return _o(e);var t=[];for(var r in Object(e))yo.call(e,r)&&r!="constructor"&&t.push(r);return t}function Et(e){return e!=null&&Gr(e.length)&&!kr(e)}function St(e){return Et(e)?Xr(e):Zr(e)}function wo(e,t){return e&&Pe(t,St(t),e)}function Eo(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var So=Object.prototype,Ao=So.hasOwnProperty;function Co(e){if(!ve(e))return Eo(e);var t=Fe(e),r=[];for(var n in e)n=="constructor"&&(t||!Ao.call(e,n))||r.push(n);return r}function At(e){return Et(e)?Xr(e,!0):Co(e)}function Oo(e,t){return e&&Pe(t,At(t),e)}var en=typeof exports=="object"&&exports&&!exports.nodeType&&exports,tn=en&&typeof module=="object"&&module&&!module.nodeType&&module,To=tn&&tn.exports===en,rn=To?U.Buffer:void 0,nn=rn?rn.allocUnsafe:void 0;function Ro(e,t){if(t)return e.slice();var r=e.length,n=nn?nn(r):new e.constructor(r);return e.copy(n),n}function Lo(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function Io(e,t){for(var r=-1,n=e==null?0:e.length,s=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[s++]=a)}return i}function sn(){return[]}var Mo=Object.prototype,No=Mo.propertyIsEnumerable,an=Object.getOwnPropertySymbols,Po=an?function(e){return e==null?[]:(e=Object(e),Io(an(e),function(t){return No.call(e,t)}))}:sn,Ct=Po;function xo(e,t){return Pe(e,Ct(e),t)}function on(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}var Fo=Qr(Object.getPrototypeOf,Object),cn=Fo,ko=Object.getOwnPropertySymbols,Bo=ko?function(e){for(var t=[];e;)on(t,Ct(e)),e=cn(e);return t}:sn,un=Bo;function $o(e,t){return Pe(e,un(e),t)}function dn(e,t,r){var n=t(e);return xe(e)?n:on(n,r(e))}function Do(e){return dn(e,St,Ct)}function jo(e){return dn(e,At,un)}var Uo=J(U,"DataView"),Ot=Uo,Ko=J(U,"Promise"),Tt=Ko,Vo=J(U,"Set"),Rt=Vo,qo=J(U,"WeakMap"),Lt=qo,ln="[object Map]",Ho="[object Object]",fn="[object Promise]",pn="[object Set]",hn="[object WeakMap]",gn="[object DataView]",Wo=z(Ot),Go=z(_e),zo=z(Tt),Jo=z(Rt),Yo=z(Lt),X=me;(Ot&&X(new Ot(new ArrayBuffer(1)))!=gn||_e&&X(new _e)!=ln||Tt&&X(Tt.resolve())!=fn||Rt&&X(new Rt)!=pn||Lt&&X(new Lt)!=hn)&&(X=function(e){var t=me(e),r=t==Ho?e.constructor:void 0,n=r?z(r):"";if(n)switch(n){case Wo:return gn;case Go:return ln;case zo:return fn;case Jo:return pn;case Yo:return hn}return t});var ke=X,Xo=Object.prototype,Qo=Xo.hasOwnProperty;function Zo(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Qo.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var ec=U.Uint8Array,mn=ec;function It(e){var t=new e.constructor(e.byteLength);return new mn(t).set(new mn(e)),t}function tc(e,t){var r=t?It(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var rc=/\w*$/;function nc(e){var t=new e.constructor(e.source,rc.exec(e));return t.lastIndex=e.lastIndex,t}var vn=ae?ae.prototype:void 0,_n=vn?vn.valueOf:void 0;function sc(e){return _n?Object(_n.call(e)):{}}function ic(e,t){var r=t?It(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var ac="[object Boolean]",oc="[object Date]",cc="[object Map]",uc="[object Number]",dc="[object RegExp]",lc="[object Set]",fc="[object String]",pc="[object Symbol]",hc="[object ArrayBuffer]",gc="[object DataView]",mc="[object Float32Array]",vc="[object Float64Array]",_c="[object Int8Array]",bc="[object Int16Array]",yc="[object Int32Array]",wc="[object Uint8Array]",Ec="[object Uint8ClampedArray]",Sc="[object Uint16Array]",Ac="[object Uint32Array]";function Cc(e,t,r){var n=e.constructor;switch(t){case hc:return It(e);case ac:case oc:return new n(+e);case gc:return tc(e,r);case mc:case vc:case _c:case bc:case yc:case wc:case Ec:case Sc:case Ac:return ic(e,r);case cc:return new n;case uc:case fc:return new n(e);case dc:return nc(e);case lc:return new n;case pc:return sc(e)}}var bn=Object.create,Oc=function(){function e(){}return function(t){if(!ve(t))return{};if(bn)return bn(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Tc=Oc;function Rc(e){return typeof e.constructor=="function"&&!Fe(e)?Tc(cn(e)):{}}var Lc="[object Map]";function Ic(e){return ye(e)&&ke(e)==Lc}var yn=ue&&ue.isMap,Mc=yn?yt(yn):Ic,Nc=Mc,Pc="[object Set]";function xc(e){return ye(e)&&ke(e)==Pc}var wn=ue&&ue.isSet,Fc=wn?yt(wn):xc,kc=Fc,Bc=1,$c=2,Dc=4,En="[object Arguments]",jc="[object Array]",Uc="[object Boolean]",Kc="[object Date]",Vc="[object Error]",Sn="[object Function]",qc="[object GeneratorFunction]",Hc="[object Map]",Wc="[object Number]",An="[object Object]",Gc="[object RegExp]",zc="[object Set]",Jc="[object String]",Yc="[object Symbol]",Xc="[object WeakMap]",Qc="[object ArrayBuffer]",Zc="[object DataView]",eu="[object Float32Array]",tu="[object Float64Array]",ru="[object Int8Array]",nu="[object Int16Array]",su="[object Int32Array]",iu="[object Uint8Array]",au="[object Uint8ClampedArray]",ou="[object Uint16Array]",cu="[object Uint32Array]",y={};y[En]=y[jc]=y[Qc]=y[Zc]=y[Uc]=y[Kc]=y[eu]=y[tu]=y[ru]=y[nu]=y[su]=y[Hc]=y[Wc]=y[An]=y[Gc]=y[zc]=y[Jc]=y[Yc]=y[iu]=y[au]=y[ou]=y[cu]=!0,y[Vc]=y[Sn]=y[Xc]=!1;function Be(e,t,r,n,s,i){var a,o=t&Bc,c=t&$c,d=t&Dc;if(r&&(a=s?r(e,n,s,i):r(e)),a!==void 0)return a;if(!ve(e))return e;var f=xe(e);if(f){if(a=Zo(e),!o)return Lo(e,a)}else{var u=ke(e),h=u==Sn||u==qc;if(bt(e))return Ro(e,o);if(u==An||u==En||h&&!s){if(a=c||h?{}:Rc(e),!o)return c?$o(e,Oo(a,e)):xo(e,wo(a,e))}else{if(!y[u])return s?e:{};a=Cc(e,u,o)}}i||(i=new ce);var E=i.get(e);if(E)return E;i.set(e,a),kc(e)?e.forEach(function(S){a.add(Be(S,t,r,S,e,i))}):Nc(e)&&e.forEach(function(S,O){a.set(O,Be(S,t,r,O,e,i))});var M=d?c?jo:Do:c?At:St,F=f?void 0:M(e);return wa(F||e,function(S,O){F&&(O=S,S=e[O]),jr(a,O,Be(S,t,r,O,e,i))}),a}var uu=1,du=4;function lu(e){return Be(e,uu|du)}const fu={border_radius:"rounded",border_width:"thin",spacing_base:4,theme:"dark",colors:{brand:fi("#2160FD"),background:pi("#141414"),danger:"#FF2D2D",text:"#EEEEEE",text_on_brand:"#EEEEEE",success:"#62A504",video_bg:"#191919",warning:"#FFCD07"}};function Cn(){return lu(fu)}A.Skip,_.Allowed,re.Allowed,_.Allowed,_.Allowed,re.Allowed,V.none,Cn(),R.GroupCall,V.none,ne.skip,A.Skip,_.Allowed,_.Allowed,_.Allowed,V.none,Cn(),R.GroupCall;var $e,pu=new Uint8Array(16);function hu(){if(!$e&&($e=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!$e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $e(pu)}var gu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function mu(e){return typeof e=="string"&&gu.test(e)}for(var L=[],Mt=0;Mt<256;++Mt)L.push((Mt+256).toString(16).substr(1));function vu(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(L[e[t+0]]+L[e[t+1]]+L[e[t+2]]+L[e[t+3]]+"-"+L[e[t+4]]+L[e[t+5]]+"-"+L[e[t+6]]+L[e[t+7]]+"-"+L[e[t+8]]+L[e[t+9]]+"-"+L[e[t+10]]+L[e[t+11]]+L[e[t+12]]+L[e[t+13]]+L[e[t+14]]+L[e[t+15]]).toLowerCase();if(!mu(r))throw TypeError("Stringified UUID is invalid");return r}function _u(e,t,r){e=e||{};var n=e.random||(e.rng||hu)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(var s=0;s<16;++s)t[r+s]=n[s];return t}return vu(n)}var bu="[object Map]",yu="[object Set]",wu=Object.prototype,Eu=wu.hasOwnProperty;function Su(e){if(e==null)return!0;if(Et(e)&&(xe(e)||typeof e=="string"||typeof e.splice=="function"||bt(e)||Yr(e)||Vr(e)))return!e.length;var t=ke(e);if(t==bu||t==yu)return!e.size;if(Fe(e))return!Zr(e).length;for(var r in e)if(Eu.call(e,r))return!1;return!0}var On;(function(e){e.CHROMIUM="chromum",e.FIREFOX="firefox",e.SAFARI="safari"})(On||(On={}));var Tn;(function(e){e.AUDIO="AUDIO",e.VIDEO="VIDEO",e.SPEAKER="SPEAKER"})(Tn||(Tn={}));var Rn;(function(e){e[e.INIT=0]="INIT",e[e.ACCEPTED=1]="ACCEPTED",e[e.DENIED=2]="DENIED",e[e.SYS_DENIED=3]="SYS_DENIED",e[e.FAILED=4]="FAILED",e[e.NOTFOUND=5]="NOTFOUND",e[e.NOT_APPLICABLE=6]="NOT_APPLICABLE"})(Rn||(Rn={}));const Nt={roomName:void 0,authToken:void 0,peerId:void 0,apiBase:void 0,baseURI:void 0,defaults:{audio:!0,video:!0},modules:void 0,organizationId:void 0,overrides:{},viewType:void 0,env:void 0},Au="VERSION_PLACEHOLDER",Cu="web-core";function Ou({servicePrefix:e,apiBase:t,baseURI:r}){return r?`${e}.${r}`:t!=null&&t.includes("api.preprod.dyte")?`${e}.preprod.dyte.io`:t!=null&&t.includes("api.devel.dyte")?`${e}.devel.dyte.io`:`${e}.dyte.io`}const Pt={INTERNAL_CALL_STATS:"internal_call_stats",SIMULCAST:"simulcast",CHAT_SOCKET_SERVER:"chat_socket_server",POLL_SOCKET_SERVER:"poll_socket_server",PLUGIN_SOCKET_SERVER:"plugin_socket_server",NR_OTEL_WEB:"nr_otel_web",CONNECTED_MEETINGS:"connected_meetings",ICE_RESTART_ON_FAILED_STATE:"ice_restart_on_failed_state",ICE_RESTART_ON_DISCONNECTED_STATE:"ice_restart_on_disconnected_state",ENABLE_ICE_STATE_LOGGING:"enable_ice_state_logging",REMOVE_OPERATIONAL_MIC:"web_core_remove_operational_mic",SUPPRESS_PEER_MUTE_UNMUTE_EMITS:"web_core_suppress_peer_mute_unmute_emits",SKIP_OTEL_TRACES:"skip_otel_traces",NEW_LOCAL_MEDIA_HANDLER:"new_local_media_handler",CALLSTATS_INGESTION_LAYER:"callstats_ingestion_layer",USE_USERIDS_IN_CHAT:"use_userids_in_chat",CUSTOM_PING_PONG:"custom_ping_pong",ENABLE_HIVE_SIMULCAST:"enable_hive_simulcast",ENABLE_HIVE_TRANSPORT_RECONNECTION_ON_ICE_FAILED:"enable_hive_transport_reconnection_on_ice_failed",ENABLE_HIVE_EXPERIMENTAL_FAIL_RECOVERY:"enable_hive_fail_recovery",ENABLE_HIVE_INFINITE_RETRIES:"enable_hive_infinite_retries",BYPASS_LOG_EXCLUSION_LIST:"bypass_log_exclusion_list",LOG_LEVEL:"log_level",V1_PLUGINS:"v1_plugins",SCREENSHARE_DTX:"screenshare_dtx",SCREENSHARE_PRIORITY:"screenshare_priority",SCREENSHARE_MIN_BITRATE:"screenshare_minbitrate",SCREENSHARE_MAX_DIMENSIONS:"screenshare_maxdimensions",SCREENSHARE_SIMULCAST:"screenshare_simulcast",DISABLE_WEBCAM_LAYERS_ON_SCREENSHARE:"disable_webcam_layers_on_screenshare",SCREENSHARE_FORCE_GOOG_CONFERENCE:"screenshare_force_goog_conference",LIVESTREAM:"feat_livestream",FETCH_RETRY:"fetch_retry",DEVICE_REMOVE_EXP:"device_remove_exp",DISABLE_WEBCAM_SIMULCAST:"webcore_disable_webcam_simulcast",OVERRIDE_WEBCAM_SIMULCAST:"override_webcam_simulcast",SOCKET_POLLING:"socket_polling",NS_NETWORK_SCORE:"ns_network_score",FEAT_PAGINATED_CHAT:"feat_paginated_chat",VAL_MIN_FRAMERATE:"val_min_framerate",EXTENSION_HACK:"extension_hack",VAL_MAX_FRAMERATE_EXT:"val_max_framerate_ext",VAL_MIN_FRAMERATE_EXT:"val_min_framerate_ext",SCREEENSHARE_ERR_HACK:"screenshare_err_hack",TROUBLESHOOTING:"feat_troubleshooting",VIDEO_CONSTRAINTS:"video_constraints",SCREENSHARE_CONSTRAINTS:"screenshare_constraints",FEAT_CHAT_SDK:"feat_chat_sdk",FEAT_CHAT_SDK_SEARCH:"chat_search",OBS_QUALITY:"obs_quality",ALLOW_SAFARI_MEDIA_MIDDLEWARES:"allow_safari_media_middlewares",DYNAMIC_VIDEO_QUALITY:"dynamic_video_quality",EXP_RESHARE:"exp_reshare",LEAVE_STAGE_ON_END:"leave_stage_on_end",SKIP_SETTING_IN_USE_DEVICE:"skip_setting_in_use_device",PRECALL_BANDWIDTH_TEST:"precall_bandwidth_test"};function De(e){const t={};return typeof(e==null?void 0:e.code)=="number"&&(t.code=e.code),typeof(e==null?void 0:e.code)=="string"&&(t.code=e.code.substring(0,100)),typeof(e==null?void 0:e.name)=="string"&&(t.name=e.name.substring(0,500)),typeof(e==null?void 0:e.message)=="string"&&(t.message=e.message.substring(0,500)),typeof(e==null?void 0:e.reason)=="string"&&(t.reason=e.reason.substring(0,500)),typeof(e==null?void 0:e.stack)=="string"&&(t.stack=e.stack.substring(0,500)),t}function Ln(){var r,n,s,i;const e=typeof navigator!="undefined"&&!navigator.isReactNative&&typeof window!="undefined"&&((r=window.location.host)==null?void 0:r.includes("devel"))&&((n=window.location.host)==null?void 0:n.includes("dyte.io")),t=!!((i=(s=Nt.modules)==null?void 0:s.devTools)!=null&&i.logs);return e||t}function Tu(e){if(vt.hasFeature(Pt.LOG_LEVEL)){let t=vt.getValue(Pt.LOG_LEVEL)||"all";if(t=t.toLowerCase().trim(),t==="off")return!1;if(t!=="all"){const r=["debug","log","info","warn","error"],n=r.indexOf(e),s=r.indexOf(t);if(n<s)return!1}}return!0}function In(e,t,r={}){return Object.getOwnPropertyNames(e).forEach(n=>{var i;if([null,void 0,NaN].includes(e[n])||t&&(((i=t.match(/\./g))==null?void 0:i.length)||0)>=10)return;const s=t?`${t}.${n}`:n;typeof e[n]=="object"?In(e[n],s,r):["number","string","boolean"].includes(typeof e[n])&&(r[s]=e[n])}),r}function Mn(e,t={},r=""){const n={};try{const s=JSON.stringify(t),i=JSON.parse(s),a=In(i,r),o=JSON.stringify(a);if(o.length>5e3){const c=`Log named: "${e}" is trying to log an flattened object of size ${o.length} chars that is beyond permitted limit of 5000 chars. Please optimize.`;throw Ln()&&console.error(c,{log:t,flattened:o}),new Error(c)}return JSON.parse(o)}catch(s){const i=De(s);n[`${r}.error.message`]=i.message||"",n[`${r}.error.stack`]=i.stack||"",n[`${r}.error.reason`]=i.reason||"",n[`${r}.error.source`]="safelyFlattenObjForOpenTelemetry"}return n}const Ru={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Nn={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},C={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},I={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},H={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class l{static getFirstMatch(t,r){const n=r.match(t);return n&&n.length>0&&n[1]||""}static getSecondMatch(t,r){const n=r.match(t);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(t,r,n){if(t.test(r))return n}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const r=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),r[0]===10)switch(r[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const r=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),!(r[0]===1&&r[1]<5)){if(r[0]===1&&r[1]<6)return"Cupcake";if(r[0]===1&&r[1]>=6)return"Donut";if(r[0]===2&&r[1]<2)return"Eclair";if(r[0]===2&&r[1]===2)return"Froyo";if(r[0]===2&&r[1]>2)return"Gingerbread";if(r[0]===3)return"Honeycomb";if(r[0]===4&&r[1]<1)return"Ice Cream Sandwich";if(r[0]===4&&r[1]<4)return"Jelly Bean";if(r[0]===4&&r[1]>=4)return"KitKat";if(r[0]===5)return"Lollipop";if(r[0]===6)return"Marshmallow";if(r[0]===7)return"Nougat";if(r[0]===8)return"Oreo";if(r[0]===9)return"Pie"}}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,r,n=!1){const s=l.getVersionPrecision(t),i=l.getVersionPrecision(r);let a=Math.max(s,i),o=0;const c=l.map([t,r],d=>{const f=a-l.getVersionPrecision(d),u=d+new Array(f+1).join(".0");return l.map(u.split("."),h=>new Array(20-h.length).join("0")+h).reverse()});for(n&&(o=a-Math.min(s,i)),a-=1;a>=o;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===o)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}}static map(t,r){const n=[];let s;if(Array.prototype.map)return Array.prototype.map.call(t,r);for(s=0;s<t.length;s+=1)n.push(r(t[s]));return n}static find(t,r){let n,s;if(Array.prototype.find)return Array.prototype.find.call(t,r);for(n=0,s=t.length;n<s;n+=1){const i=t[n];if(r(i,n))return i}}static assign(t,...r){const n=t;let s,i;if(Object.assign)return Object.assign(t,...r);for(s=0,i=r.length;s<i;s+=1){const a=r[s];typeof a=="object"&&a!==null&&Object.keys(a).forEach(c=>{n[c]=a[c]})}return t}static getBrowserAlias(t){return Ru[t]}static getBrowserTypeByAlias(t){return Nn[t]||""}}const b=/version\/(\d+(\.?_?\d+)+)/i,Lu=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},r=l.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||l.getFirstMatch(b,e);return r&&(t.version=r),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},r=l.getFirstMatch(b,e)||l.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},r=l.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||l.getFirstMatch(b,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},r=l.getFirstMatch(b,e)||l.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},r=l.getFirstMatch(b,e)||l.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},r=l.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||l.getFirstMatch(b,e);return r&&(t.version=r),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},r=l.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||l.getFirstMatch(b,e);return r&&(t.version=r),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},r=l.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||l.getFirstMatch(b,e);return r&&(t.version=r),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},r=l.getFirstMatch(b,e)||l.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},r=l.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||l.getFirstMatch(b,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},r=l.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||l.getFirstMatch(b,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},r=l.getFirstMatch(b,e)||l.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},r=l.getFirstMatch(b,e)||l.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},r=l.getFirstMatch(b,e)||l.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},r=l.getFirstMatch(b,e)||l.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},r=l.getFirstMatch(b,e)||l.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},r=l.getFirstMatch(b,e)||l.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},r=l.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||l.getFirstMatch(b,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=l.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||l.getFirstMatch(b,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},r=l.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},r=l.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},r=l.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},r=l.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},r=l.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},r=l.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},r=l.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},r=l.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},r=l.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},r=l.getFirstMatch(b,e)||l.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},r=l.getFirstMatch(b,e)||l.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},r=l.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},r=l.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||l.getFirstMatch(b,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},r=l.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||l.getFirstMatch(b,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},r=l.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},r=l.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},r=l.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},r=l.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||l.getFirstMatch(b,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},r=l.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},r=l.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t={name:"Android Browser"},r=l.getFirstMatch(b,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},r=l.getFirstMatch(b,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},r=l.getFirstMatch(b,e);return r&&(t.version=r),t}},{test:[/.*/i],describe(e){const t=/^(.*)\/(.*) /,r=/^(.*)\/(.*)[ \t]\((.*)/,s=e.search("\\(")!==-1?r:t;return{name:l.getFirstMatch(s,e),version:l.getSecondMatch(s,e)}}}];var Iu=[{test:[/Roku\/DVP/],describe(e){const t=l.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:I.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=l.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:I.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=l.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=l.getWindowsVersionName(t);return{name:I.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:I.iOS},r=l.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe(e){const t=l.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=l.getMacOSVersionName(t),n={name:I.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=l.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:I.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t=l.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=l.getAndroidVersionName(t),n={name:I.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=l.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:I.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=l.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||l.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||l.getFirstMatch(/\bbb(\d+)/i,e);return{name:I.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=l.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:I.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=l.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:I.Tizen,version:t}}},{test:[/linux/i],describe(){return{name:I.Linux}}},{test:[/CrOS/],describe(){return{name:I.ChromeOS}}},{test:[/PlayStation 4/],describe(e){const t=l.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:I.PlayStation4,version:t}}}],Mu=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(e){const t=l.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:C.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:C.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:C.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:C.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:C.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:C.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:C.tablet}}},{test(e){const t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe(e){const t=l.getFirstMatch(/(ipod|iphone)/i,e);return{type:C.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:C.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:C.mobile}}},{test(e){return e.getBrowserName(!0)==="blackberry"},describe(){return{type:C.mobile,vendor:"BlackBerry"}}},{test(e){return e.getBrowserName(!0)==="bada"},describe(){return{type:C.mobile}}},{test(e){return e.getBrowserName()==="windows phone"},describe(){return{type:C.mobile,vendor:"Microsoft"}}},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe(){return{type:C.tablet}}},{test(e){return e.getOSName(!0)==="android"},describe(){return{type:C.mobile}}},{test(e){return e.getOSName(!0)==="macos"},describe(){return{type:C.desktop,vendor:"Apple"}}},{test(e){return e.getOSName(!0)==="windows"},describe(){return{type:C.desktop}}},{test(e){return e.getOSName(!0)==="linux"},describe(){return{type:C.desktop}}},{test(e){return e.getOSName(!0)==="playstation 4"},describe(){return{type:C.tv}}},{test(e){return e.getOSName(!0)==="roku"},describe(){return{type:C.tv}}}],Nu=[{test(e){return e.getBrowserName(!0)==="microsoft edge"},describe(e){if(/\sedg\//i.test(e))return{name:H.Blink};const r=l.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:H.EdgeHTML,version:r}}},{test:[/trident/i],describe(e){const t={name:H.Trident},r=l.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){return e.test(/presto/i)},describe(e){const t={name:H.Presto},r=l.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe(e){const t={name:H.Gecko},r=l.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:H.Blink}}},{test:[/(apple)?webkit/i],describe(e){const t={name:H.WebKit},r=l.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];class Pn{constructor(t,r=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},r!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=l.find(Lu,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=l.find(Iu,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:r}=this.getOS();return t?String(r).toLowerCase()||"":r||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:r}=this.getPlatform();return t?String(r).toLowerCase()||"":r||""}parsePlatform(){this.parsedResult.platform={};const t=l.find(Mu,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=l.find(Nu,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return l.assign({},this.parsedResult)}satisfies(t){const r={};let n=0;const s={};let i=0;if(Object.keys(t).forEach(o=>{const c=t[o];typeof c=="string"?(s[o]=c,i+=1):typeof c=="object"&&(r[o]=c,n+=1)}),n>0){const o=Object.keys(r),c=l.find(o,f=>this.isOS(f));if(c){const f=this.satisfies(r[c]);if(f!==void 0)return f}const d=l.find(o,f=>this.isPlatform(f));if(d){const f=this.satisfies(r[d]);if(f!==void 0)return f}}if(i>0){const o=Object.keys(s),c=l.find(o,d=>this.isBrowser(d,!0));if(c!==void 0)return this.compareVersion(s[c])}}isBrowser(t,r=!1){const n=this.getBrowserName().toLowerCase();let s=t.toLowerCase();const i=l.getBrowserTypeByAlias(s);return r&&i&&(s=i.toLowerCase()),s===n}compareVersion(t){let r=[0],n=t,s=!1;const i=this.getBrowserVersion();if(typeof i=="string")return t[0]===">"||t[0]==="<"?(n=t.substr(1),t[1]==="="?(s=!0,n=t.substr(2)):r=[],t[0]===">"?r.push(1):r.push(-1)):t[0]==="="?n=t.substr(1):t[0]==="~"&&(s=!0,n=t.substr(1)),r.indexOf(l.compareVersions(i,n,s))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,r=!1){return this.isBrowser(t,r)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(r=>this.is(r))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Pu{static getParser(t,r=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new Pn(t,r)}static parse(t){return new Pn(t).getResult()}static get BROWSER_MAP(){return Nn}static get ENGINE_MAP(){return H}static get OS_MAP(){return I}static get PLATFORMS_MAP(){return C}}const Ee="chrome",xn="opera",Fn="firefox",kn="iexplorer",Bn="safari",$n="nwjs",Dn="electron",jn="react-native",xt="unknown",je={Chrome:Ee,Chromium:Ee,Opera:xn,Firefox:Fn,"Internet Explorer":kn,Safari:Bn};function xu(){const{userAgent:e}=navigator,t={name:xt,version:void 0};if(e.match(/Chrome/)&&!e.match(/Edge/))if(e.match(/Edg(A?)/)){const r=e.match(/Chrome\/([\d.]+)/)[1];Number.parseInt(r,10)>72&&(t.name=Ee,t.version=r)}else t.name=Ee,t.version=e.match(/Chrome\/([\d.]+)/)[1];return t}function Fu(){const{userAgent:e}=navigator;if(e.match(/Electron/)){const t=e.match(/Electron\/([\d.]+)/)[1];return{name:Dn,version:t}}return null}function ku(){const{userAgent:e}=navigator;if(e.match(/JitsiMeetNW/)){const t=e.match(/JitsiMeetNW\/([\d.]+)/)[1];return{name:$n,version:t}}}function Bu(){const e=navigator.userAgent.match(/\b(react[ \t_-]*native)(?:\/(\S+))?/i);let t;if(e||navigator.product==="ReactNative")return e&&e.length>2&&(e[1],t=e[2]),t||(t="unknown"),{name:jn,version:t}}function $u(e){let t;const r=[Bu,Fu,ku];for(let s=0;s<r.length;s+=1)if(t=r[s](),t)return t;const n=e.getBrowserName();return n in je?{name:je[n],version:e.getBrowserVersion()}:(t=xu(),t||{name:xt,version:void 0})}class Du{constructor(){g(this,"_bowser");g(this,"_name");g(this,"_version");g(this,"getDeviceInfo",()=>({isMobile:this.isMobile(),browserName:this._bowser.getBrowserName(),osName:this._bowser.getOSName(),browserVersion:this._bowser.getBrowserVersion(),osVersionName:this._bowser.getOSVersion(),engineName:this._bowser.getEngineName()}))}init(t){let r,n;if(this._bowser=Pu.getParser(navigator.userAgent),typeof t=="undefined"){const s=$u(this._bowser);r=s.name,n=s.version}else t.name in je?(r=je[t.name],n=t.version):(r=xt,n=void 0);this._name=r,this._version=n}getName(){return this._name}isChrome(){return this._name===Ee}isOpera(){return this._name===xn}isFirefox(){return this._name===Fn}isIExplorer(){return this._name===kn}isSafari(){return this._name===Bn}isNWJS(){return this._name===$n}isElectron(){return this._name===Dn}isReactNative(){return this._name===jn||navigator.isReactNative===!0}getVersion(){return this._version}isMobile(){return this._bowser.getPlatformType()==="mobile"}_checkCondition(t){if(this._version)return this._bowser.satisfies(t)}isVersionGreaterThan(t){return this._checkCondition({[this._name]:`>${t}`})}isVersionLessThan(t){return this._checkCondition({[this._name]:`<${t}`})}isVersionEqualTo(t){return this._checkCondition({[this._name]:`~${t}`})}}const ju=72;class Uu extends Du{doesVideoMuteByStreamRemove(){return this.isChromiumBased()||this.isWebKitBased()}supportsP2P(){return!this.usesUnifiedPlan()}isChromiumBased(){return this.isChrome()||this.isElectron()||this.isNWJS()||this.isOpera()}isWebKitBased(){return this._bowser.isEngine("webkit")&&typeof navigator.mediaDevices!="undefined"&&typeof navigator.mediaDevices.getUserMedia!="undefined"&&typeof window.RTCRtpTransceiver!="undefined"&&Object.keys(RTCRtpTransceiver.prototype).indexOf("currentDirection")>-1}isSupported(){return this.isChromiumBased()&&this._getChromiumBasedVersion()>=ju||this.isFirefox()||this.isReactNative()||this.isWebKitBased()}isUserInteractionRequiredForUnmute(){return this.isFirefox()&&this.isVersionLessThan("68")}supportsVideoMuteOnConnInterrupted(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}supportsBandwidthStatistics(){return!this.isFirefox()&&!this.isWebKitBased()}supportsCodecPreferences(){return this.usesUnifiedPlan()&&typeof window.RTCRtpTransceiver!="undefined"&&Object.keys(window.RTCRtpTransceiver.prototype).indexOf("setCodecPreferences")>-1&&Object.keys(RTCRtpSender.prototype).indexOf("getCapabilities")>-1&&!this.isWebKitBased()}supportsDeviceChangeEvent(){return navigator.mediaDevices&&typeof navigator.mediaDevices.ondevicechange!="undefined"&&typeof navigator.mediaDevices.addEventListener!="undefined"}supportsLocalCandidateRttStatistics(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}supportsPerformanceObserver(){return typeof window.PerformanceObserver!="undefined"&&PerformanceObserver.supportedEntryTypes.indexOf("longtask")>-1}supportsReceiverStats(){return typeof window.RTCRtpReceiver!="undefined"&&Object.keys(RTCRtpReceiver.prototype).indexOf("getSynchronizationSources")>-1}supportsRTTStatistics(){return!this.isFirefox()}usesPlanB(){return!this.usesUnifiedPlan()}usesSdpMungingForSimulcast(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}usesUnifiedPlan(){return!!(this.isFirefox()||this.isWebKitBased())}usesNewGumFlow(){return!!(this.isChromiumBased()||this.isFirefox()||this.isWebKitBased())}usesAdapter(){return this.usesNewGumFlow()}usesRidsForSimulcast(){return!1}supportsGetDisplayMedia(){return typeof navigator.getDisplayMedia!="undefined"||typeof navigator.mediaDevices!="undefined"&&typeof navigator.mediaDevices.getDisplayMedia!="undefined"}supportsInsertableStreams(){if(!(typeof window.RTCRtpSender!="undefined"&&(window.RTCRtpSender.prototype.createEncodedStreams||window.RTCRtpSender.prototype.createEncodedVideoStreams)))return!1;const t=new ReadableStream;try{return window.postMessage(t,"*",[t]),!0}catch(r){return!1}}supportsAudioRed(){return Boolean(window.RTCRtpSender&&window.RTCRtpSender.getCapabilities&&window.RTCRtpSender.getCapabilities("audio").codecs.some(t=>t.mimeType==="audio/red")&&window.RTCRtpReceiver&&window.RTCRtpReceiver.getCapabilities&&window.RTCRtpReceiver.getCapabilities("audio").codecs.some(t=>t.mimeType==="audio/red"))}supportsSdpSemantics(){return this.isChromiumBased()}_getChromiumBasedVersion(){if(this.isChromiumBased()){if(this.isNWJS())return Number.parseInt(process.versions.chromium,10);const t=navigator.userAgent;if(t.match(/Chrome/))return Number.parseInt(t.match(/Chrome\/([\d.]+)/)[1],10)}return-1}isIOSMobile(){return this.isMobile&&this._bowser.getOSName()==="iOS"}}const Ku=new Uu,m=class{static get logsEndpoint(){return`https://${Ou({servicePrefix:"api-silos",apiBase:Nt.apiBase,baseURI:Nt.baseURI})}/otel/logs`}static init(t,r){navigator.isReactNative||(m.tracingEnabled=r,m.meetingMetadata.peerId=t,m.meetingMetadata.sdkVersion=Au,m.meetingMetadata.deviceInfo=Ku.getDeviceInfo(),m.meetingMetadata.visitedUrl=!navigator.isReactNative&&typeof window!="undefined"&&window.location.href,document.addEventListener("visibilitychange",m.processCachedLogs),m.logsProcessorTimer=setInterval(m.processCachedLogs,m.logsProcessingInterval),r&&(m.initialized=!0))}static trace(t){return(r,n,s)=>{const i=s.value;return s.value=function(...o){if(!m.initialized||navigator.isReactNative||!m.tracingEnabled||vt.hasFeature(Pt.SKIP_OTEL_TRACES))return i.apply(this,o);m.addLogInCurrentSpan("info",t);const c=performance.now(),d=i.apply(this,o);return Promise.resolve(d).then(()=>{const f=performance.now();m.addLogInCurrentSpan("info",`${t}_timing`,{execTime:f-c})}).catch(()=>{const f=performance.now();m.addLogInCurrentSpan("info",`${t}_timing`,{execTime:f-c})}),d},s}}static injectContext(t){var s;const r=_u().replace(/-/g,"").substring(0,16),n=(s=m.meetingMetadata.peerId)==null?void 0:s.replace(/-/g,"");t.TRACEPARENT=`00-${n}-${r}-01`}static addLogInCurrentSpan(t,r,n={},s=!1){if(n!=null&&n.error&&Object.assign(n,{error:De(n.error)}),Ln()&&(Su(n)?console[t]("DyteInternalLogs:: ",t,r):console[t]("DyteInternalLogs:: ",t,r,n)),!!Tu(t))try{const a=Mn(r,n,"metadata"),o=new Date,c=fs(ls({message:r,level:t},a),{loggedAt:o.toISOString(),loggedAtTzOffset:o.getTimezoneOffset()});s?m.sendOtelLogsToNewRelic([c]):m.logsCache.push(c)}catch(a){m.addLogInCurrentSpan("error","opentelemetry::addLogInCurrentSpan_failed",{error:De(a)})}}static sendOtelLogsToNewRelic(t){Tr.post(m.logsEndpoint,{meetingMetadata:Mn("sendOtelLogsToNewRelic",m.meetingMetadata,"meetingMetadata"),serviceName:Cu,logs:t}).catch(r=>{m.addLogInCurrentSpan("error","opentelemetry::sendOtelLogToNewRelic_failed",{error:De(r)}),m.logsCache.push(...t)})}static processCachedLogs(){const t=m.logsCache.splice(0,25);t!=null&&t.length&&m.sendOtelLogsToNewRelic(t)}static destruct(){clearInterval(m.logsProcessorTimer),m.processCachedLogs(),!navigator.isReactNative&&document.removeEventListener("visibilitychange",m.processCachedLogs)}};let P=m;g(P,"logsCache",[]),g(P,"logsProcessorTimer"),g(P,"tracingEnabled",!0),g(P,"initialized",!1),g(P,"logsProcessingInterval",7e3),g(P,"logExclusionList",["message","websocket/message","roomMessage","websocket/room-message","websocket/room-legacy-mode","chatMessage","websocket/new-chat-message","websocket/no-active-speaker","websocket/selected-peers","websocket/active-speaker","ping","websocket/new-consumer","websocket/producer-score","websocket/consumer-score","websocket/plugin-event","websocket/plugin-data","websocket/plugin-internal-data"]),g(P,"meetingMetadata",{});class T{static info(t,r,n){P.addLogInCurrentSpan("info",t,r,n)}static error(t,r,n){P.addLogInCurrentSpan("error",t,r,n)}static debug(t,r,n){P.addLogInCurrentSpan("debug",t,r,n)}static log(t,r,n){P.addLogInCurrentSpan("log",t,r,n)}static warn(t,r,n){P.addLogInCurrentSpan("warn",t,r,n)}}const Ue="AES-GCM",Vu=16,Ft={key:10,delta:3,audio:1,empty:0},Un=12,qu={sharedKey:!1,ratchetSalt:"DyteFrameEncryptionKey",ratchetWindowSize:8},Hu={"00":"DyteClient","01":"Controller","02":"RoomNodeClient","03":"HiveNodeClient","04":"SocketService","05":"Chat","06":"Plugin","07":"Polls","08":"Meta","09":"Preset",10:"Recording",11:"Self",12:"Participant",13:"Spotlight",14:"Remote Request",15:"Webinar",16:"LocalMediaHandler",17:"End-End Encryption"},Ke={"0000":"Internal exception.","0001":"Failed to initialize.","0002":"Failed to join room.","0003":"Failed to leave room.","0100":"Internal exception","0200":"Internal exception.","0300":"Internal exception","0400":"Internal exception","0500":"Internal exception","0501":"Permission denied.","0502":"Invalid message body.","0510":"Invalid channel name.","0600":"Internal exception","0700":"Internal exception","0800":"Internal exception","0900":"Internal exception",1e3:"Internal exception",1100:"Internal exception",1200:"Internal exception",1300:"Internal exception",1400:"Internal exception",1500:"Internal exception",1600:"Internal exception",1601:"Failed to get audio track",1602:"Failed to get video track",1603:"Incorrect device",1604:"Failed to change device",1701:"Crypto error",9900:"Internal exception"};Object.keys(Ke).forEach(e=>{Ke[e]=`{${Hu[e.slice(0,2)]}} ${Ke[e]}`});class Wu extends Error{constructor(r,n,s=!1){super(r);g(this,"code");this.code=n,this.name="DyteError",this.message=`[ERR${this.code}]: ${Ke[this.code]}
${this.message}`;try{let i=s;n&&n.endsWith("00")&&(i=!0),i&&T.error("DyteError",{error:{message:this.message,name:this.name,code:n}})}catch(i){}}}var Q=(e=>(e[e.InvalidKey=0]="InvalidKey",e[e.MissingKey=1]="MissingKey",e[e.InternalError=2]="InternalError",e))(Q||{});class Z extends Wu{constructor(r,n=2){super(r,"1701");g(this,"reason");this.reason=n}}var Ve={},Gu={get exports(){return Ve},set exports(e){Ve=e}},de=typeof Reflect=="object"?Reflect:null,Kn=de&&typeof de.apply=="function"?de.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},qe;de&&typeof de.ownKeys=="function"?qe=de.ownKeys:Object.getOwnPropertySymbols?qe=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:qe=function(t){return Object.getOwnPropertyNames(t)};function zu(e){console&&console.warn&&console.warn(e)}var Vn=Number.isNaN||function(t){return t!==t};function v(){v.init.call(this)}Gu.exports=v,Ve.once=Qu,v.EventEmitter=v,v.prototype._events=void 0,v.prototype._eventsCount=0,v.prototype._maxListeners=void 0;var qn=10;function He(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(v,"defaultMaxListeners",{enumerable:!0,get:function(){return qn},set:function(e){if(typeof e!="number"||e<0||Vn(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");qn=e}}),v.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},v.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Vn(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Hn(e){return e._maxListeners===void 0?v.defaultMaxListeners:e._maxListeners}v.prototype.getMaxListeners=function(){return Hn(this)},v.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=t==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var c=i[t];if(c===void 0)return!1;if(typeof c=="function")Kn(c,this,r);else for(var d=c.length,f=Yn(c,d),n=0;n<d;++n)Kn(f[n],this,r);return!0};function Wn(e,t,r,n){var s,i,a;if(He(r),i=e._events,i===void 0?(i=e._events=Object.create(null),e._eventsCount=0):(i.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),a=i[t]),a===void 0)a=i[t]=r,++e._eventsCount;else if(typeof a=="function"?a=i[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),s=Hn(e),s>0&&a.length>s&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=a.length,zu(o)}return e}v.prototype.addListener=function(t,r){return Wn(this,t,r,!1)},v.prototype.on=v.prototype.addListener,v.prototype.prependListener=function(t,r){return Wn(this,t,r,!0)};function Ju(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Gn(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},s=Ju.bind(n);return s.listener=r,n.wrapFn=s,s}v.prototype.once=function(t,r){return He(r),this.on(t,Gn(this,t,r)),this},v.prototype.prependOnceListener=function(t,r){return He(r),this.prependListener(t,Gn(this,t,r)),this},v.prototype.removeListener=function(t,r){var n,s,i,a,o;if(He(r),s=this._events,s===void 0)return this;if(n=s[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===r||n[a].listener===r){o=n[a].listener,i=a;break}if(i<0)return this;i===0?n.shift():Yu(n,i),n.length===1&&(s[t]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",t,o||r)}return this},v.prototype.off=v.prototype.removeListener,v.prototype.removeAllListeners=function(t){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var i=Object.keys(n),a;for(s=0;s<i.length;++s)a=i[s],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(t,r[s]);return this};function zn(e,t,r){var n=e._events;if(n===void 0)return[];var s=n[t];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?Xu(s):Yn(s,s.length)}v.prototype.listeners=function(t){return zn(this,t,!0)},v.prototype.rawListeners=function(t){return zn(this,t,!1)},v.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Jn.call(e,t)},v.prototype.listenerCount=Jn;function Jn(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}v.prototype.eventNames=function(){return this._eventsCount>0?qe(this._events):[]};function Yn(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Yu(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Xu(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function Qu(e,t){return new Promise(function(r,n){function s(a){e.removeListener(t,i),n(a)}function i(){typeof e.removeListener=="function"&&e.removeListener("error",s),r([].slice.call(arguments))}Xn(e,t,i,{once:!0}),t!=="error"&&Zu(e,s,{once:!0})})}function Zu(e,t,r){typeof e.on=="function"&&Xn(e,"error",t,r)}function Xn(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function s(i){n.once&&e.removeEventListener(t,s),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}class Qn extends Ve.EventEmitter{constructor(){super(),super.setMaxListeners(25)}emit(t,...r){return super.emit("*",t,...r),super.emit(t,...r)}on(t,r){try{const n=this.listenerCount(t);n>25&&n%25===0&&T.warn("DyteEventEmitter::maxListenersExceeded",{eventListener:{eventName:t.toString(),listenerCount:this.listenerCount(t)}})}catch(n){}return super.on(t,r)}addListener(t,r){try{const n=this.listenerCount(t);n>25&&n%25===0&&T.warn("DyteEventEmitter::maxListenersExceeded",{eventListener:{eventName:t.toString(),listenerCount:this.listenerCount(t)}})}catch(n){}return super.addListener(t,r)}off(t,r){return super.off(t,r)}once(t,r){return super.once(t,r)}prependListener(t,r){return super.prependListener(t,r)}prependOnceListener(t,r){return super.prependOnceListener(t,r)}removeListener(t,r){return super.removeListener(t,r)}removeAllListeners(t){return super.removeAllListeners(t)}listeners(t){return super.listeners(t)}listenerCount(t){return super.listenerCount(t)}}const kt={Error:"cryptorError"};function ed(e){return"type"in e}function td(n){return k(this,arguments,function*(e,t={name:Ue},r="encrypt"){return crypto.subtle.importKey("raw",e,t,!1,r==="derive"?["deriveBits","deriveKey"]:["encrypt","decrypt"])})}function Zn(e,t){const n=new TextEncoder().encode(t);switch(e){case"HKDF":return{name:"HKDF",salt:n,hash:"SHA-256",info:new ArrayBuffer(128)};case"PBKDF2":return{name:"PBKDF2",salt:n,hash:"SHA-256",iterations:1e5};default:throw new Error(`algorithm ${e} is currently unsupported`)}}function es(e,t){return k(this,null,function*(){const r=Zn(e.algorithm.name,t),n=yield crypto.subtle.deriveKey(r,e,{name:Ue,length:128},!1,["encrypt","decrypt"]);return{material:e,encryptionKey:n}})}function rd(e,t){return k(this,null,function*(){const r=Zn(e.algorithm.name,t);return crypto.subtle.deriveBits(r,e,256)})}class nd extends Qn{}class ts extends nd{constructor(r){var n;super();g(this,"sendCounts");g(this,"isKeyInvalid",!1);g(this,"participantId");g(this,"trackId");g(this,"keys");g(this,"videoCodec");g(this,"rtpMap");g(this,"keyProviderOptions");g(this,"unencryptedFrameByteTrailer");this.sendCounts=new Map,this.keys=r.keys,this.participantId=r.participantId,this.rtpMap=new Map,this.keyProviderOptions=r.keyProviderOptions,this.unencryptedFrameByteTrailer=(n=r.unencryptedFrameBytes)!=null?n:new TextEncoder().encode("LKROCKS")}setParticipant(r,n){this.participantId=r,this.keys=n}unsetParticipant(){this.participantId=void 0}getParticipantId(){return this.participantId}getTrackId(){return this.trackId}setVideoCodec(r){this.videoCodec=r}setRtpMap(r){this.rtpMap=r}setupTransform(r,n,s,i,a){a&&(console.info("setting codec on cryptor to",a),this.videoCodec=a);const o=r==="encode"?this.encodeFunction:this.decodeFunction,c=new TransformStream({transform:o.bind(this)});n.pipeThrough(c).pipeTo(s).catch(d=>{console.error(d),this.emit("cryptorError",d instanceof Z?d:new Z(d.message))}),this.trackId=i}encodeFunction(r,n){return k(this,null,function*(){var a;if(!this.keys.isEnabled()||r.data.byteLength===0)return n.enqueue(r);const{encryptionKey:s}=this.keys.getKeySet(),i=this.keys.getCurrentKeyIndex();if(s){const o=this.makeIV((a=r.getMetadata().synchronizationSource)!=null?a:-1,r.timestamp),c=new Uint8Array(r.data,0,this.getUnencryptedBytes(r)),d=new Uint8Array(2);d[0]=Un,d[1]=i;try{const f=yield crypto.subtle.encrypt({name:Ue,iv:o,additionalData:new Uint8Array(r.data,0,c.byteLength)},s,new Uint8Array(r.data,this.getUnencryptedBytes(r))),u=new ArrayBuffer(c.byteLength+f.byteLength+o.byteLength+d.byteLength),h=new Uint8Array(u);return h.set(c),h.set(new Uint8Array(f),c.byteLength),h.set(new Uint8Array(o),c.byteLength+f.byteLength),h.set(d,c.byteLength+f.byteLength+o.byteLength),r.data=u,n.enqueue(r)}catch(f){T.error(f)}}else this.emit(kt.Error,new Z("encryption key missing for encoding",Q.MissingKey))})}decodeFunction(r,n){return k(this,null,function*(){if(!this.keys.isEnabled()||r.data.byteLength===0||sd(r.data,this.unencryptedFrameByteTrailer))return n.enqueue(r);const i=new Uint8Array(r.data)[r.data.byteLength-1];if(this.keys.getKeySet(i))try{const a=yield this.decryptFrame(r,i);if(a)return n.enqueue(a);this.isKeyInvalid=!1}catch(a){a instanceof Z&&a.reason===Q.InvalidKey?this.isKeyInvalid||(T.warn("invalid key"),this.emit(kt.Error,new Z(`invalid key for participant ${this.participantId}`,Q.InvalidKey)),this.isKeyInvalid=!0):T.warn("decoding frame failed",{error:a})}else this.emit(kt.Error,new Z(`key missing for participant ${this.participantId}`,Q.MissingKey));return n.enqueue(r)})}decryptFrame(a,o){return k(this,arguments,function*(r,n,s=void 0,i={ratchetCount:0}){var d;const c=this.keys.getKeySet(n);try{const f=new Uint8Array(r.data,0,this.getUnencryptedBytes(r)),u=new Uint8Array(r.data,r.data.byteLength-2,2),h=u[0],E=new Uint8Array(r.data,r.data.byteLength-h-u.byteLength,h),M=f.byteLength,F=r.data.byteLength-(f.byteLength+h+u.byteLength),S=yield crypto.subtle.decrypt({name:Ue,iv:E,additionalData:new Uint8Array(r.data,0,f.byteLength)},(d=i.encryptionKey)!=null?d:c.encryptionKey,new Uint8Array(r.data,M,F)),O=new ArrayBuffer(f.byteLength+S.byteLength),B=new Uint8Array(O);return B.set(new Uint8Array(r.data,0,f.byteLength)),B.set(new Uint8Array(S),f.byteLength),r.data=O,r}catch(f){if(this.keyProviderOptions.ratchetWindowSize>0){if(i.ratchetCount<this.keyProviderOptions.ratchetWindowSize){T.debug(`ratcheting key attempt ${i.ratchetCount} of ${this.keyProviderOptions.ratchetWindowSize}, for kind ${r instanceof RTCEncodedAudioFrame?"audio":"video"}`);let u;if(c===this.keys.getKeySet(n)){const E=yield this.keys.ratchetKey(n,!1);u=yield es(E,this.keyProviderOptions.ratchetSalt)}const h=yield this.decryptFrame(r,n,s||c,{ratchetCount:i.ratchetCount+1,encryptionKey:u==null?void 0:u.encryptionKey});return h&&u&&(this.keys.setKeySet(u,n,!0),this.keys.setCurrentKeyIndex(n)),h}s&&(T.debug("resetting to initial material"),this.keys.setKeyFromMaterial(s.material,n)),T.warn("maximum ratchet attempts exceeded, resetting key")}else throw new Z("Decryption failed, most likely because of an invalid key",Q.InvalidKey)}})}makeIV(r,n){var o;const s=new ArrayBuffer(Un),i=new DataView(s);this.sendCounts.has(r)||this.sendCounts.set(r,Math.floor(Math.random()*65535));const a=(o=this.sendCounts.get(r))!=null?o:0;return i.setUint32(0,r),i.setUint32(4,n),i.setUint32(8,n-a%65535),this.sendCounts.set(r,a+1),s}getUnencryptedBytes(r){var n;if(ed(r)){const s=(n=this.getVideoCodec(r))!=null?n:this.videoCodec;if(s==="av1"||s==="vp9")throw new Error(`${s} is not yet supported for end to end encryption`);return Ft[r.type]}return Ft.audio}getVideoCodec(r){if(this.rtpMap.size===0)return;const{payloadType:n}=r.getMetadata();return n?this.rtpMap.get(n):void 0}}function sd(e,t){const r=new Uint8Array(e.slice(e.byteLength-t.byteLength));return t.every((n,s)=>n===r[s])}class rs extends Qn{constructor(r,n,s){super();g(this,"currentKeyIndex");g(this,"cryptoKeyRing");g(this,"enabled");g(this,"keyProviderOptions");g(this,"ratchetPromiseMap");g(this,"participantId");this.currentKeyIndex=0,this.cryptoKeyRing=new Array(Vu),this.enabled=n,this.keyProviderOptions=s,this.ratchetPromiseMap=new Map,this.participantId=r}setEnabled(r){this.enabled=r}ratchetKey(r,n=!0){const s=r!=null?r:this.getCurrentKeyIndex(),i=s,a=this.ratchetPromiseMap.get(i);if(typeof a!="undefined")return a;const o=new Promise((c,d)=>k(this,null,function*(){try{const f=this.getKeySet(i).material,u=yield td(yield rd(f,this.keyProviderOptions.ratchetSalt),f.algorithm.name,"derive");n&&this.setKeyFromMaterial(u,i,!0),this.emit("keyRatcheted",u,s,this.participantId),c(u)}catch(f){d(f)}finally{this.ratchetPromiseMap.delete(i)}}));return this.ratchetPromiseMap.set(i,o),o}setKeyFromMaterial(r,n=0,s=!1){return k(this,null,function*(){T.debug("Worker: setting new key"),n>=0&&(this.currentKeyIndex=n%this.cryptoKeyRing.length);const i=yield es(r,this.keyProviderOptions.ratchetSalt);this.setKeySet(i,this.currentKeyIndex,s)})}setKeySet(r,n,s=!1){return k(this,null,function*(){this.cryptoKeyRing[n%this.cryptoKeyRing.length]=r,s&&this.emit("keyRatcheted",r.material,n,this.participantId)})}setCurrentKeyIndex(r){return k(this,null,function*(){this.currentKeyIndex=r%this.cryptoKeyRing.length})}isEnabled(){return this.enabled}getCurrentKeyIndex(){return this.currentKeyIndex}getKeySet(r){return this.cryptoKeyRing[r!=null?r:this.currentKeyIndex]}}const Bt=[],$t=new Map,Dt=[];let W,jt=!1,ns=!1,Ut,ee=qu;function id(e,t){postMessage({kind:"ratchetKey",data:{keyIndex:t,material:e}})}function Se(e){if(!e)return W;let t=$t.get(e);return t||(t=new rs(e,!0,ee),Ut&&t.setKeyFromMaterial(Ut),$t.set(e,t)),t}function ad(e,t){t?Se(t).setEnabled(e):(jt=e,W.setEnabled(e))}function ss(e){e.on("cryptorError",t=>{const r={kind:"error",data:{error:new Error(`${Q[t.reason]}: ${t.message}`)}};postMessage(r)})}function Kt(e,t){let r=Bt.find(n=>n.getTrackId()===t);if(r)e!==r.getParticipantId()&&r.setParticipant(e,Se(e));else{if(T.info(`creating new cryptor for ${e}`),!ee)throw Error("Missing keyProvider options");r=new ts({participantId:e,keys:Se(e),keyProviderOptions:ee}),ss(r),Bt.push(r)}return r}function is(e){let t=Dt.find(r=>r.getTrackId()===e);if(!t){if(!ee)throw new TypeError("Missing keyProvider options");t=new ts({keys:W,participantId:"publisher",keyProviderOptions:ee}),ss(t),Dt.push(t)}return t}function od(e){var t;(t=Bt.find(r=>r.getTrackId()===e))==null||t.unsetParticipant()}function cd(e,t){T.debug("setting shared key"),Ut=e,W==null||W.setKeyFromMaterial(e,t);for(const[,r]of $t)r.setKeyFromMaterial(e,t)}onmessage=e=>{const{kind:t,data:r}=e.data;switch(t){case"init":T.info("worker initialized"),ee=r.keyProviderOptions,ns=!!r.keyProviderOptions.sharedKey;const n={kind:"enable",data:{enabled:jt}};W=new rs(void 0,jt,ee),W.on("keyRatcheted",id),postMessage(n);break;case"enable":ad(r.enabled,r.participantId),T.info("updated e2ee enabled status"),postMessage(e.data);break;case"decode":Kt(r.participantId,r.trackId).setupTransform(t,r.readableStream,r.writableStream,r.trackId,r.codec);break;case"encode":is(r.trackId).setupTransform(t,r.readableStream,r.writableStream,r.trackId,r.codec);break;case"setKey":ns?(T.debug("set shared key"),cd(r.key,r.keyIndex)):r.participantId?Se(r.participantId).setKeyFromMaterial(r.key,r.keyIndex):T.error("no participant Id was provided and shared key usage is disabled");break;case"removeTransform":od(r.trackId);break;case"updateCodec":Kt(r.participantId,r.trackId).setVideoCodec(r.codec);break;case"setRTPMap":Dt.forEach(a=>{a.setRtpMap(r.map)});break;case"ratchetRequest":Se(r.participantId).ratchetKey(r.keyIndex);break}},self.RTCTransformEvent&&(T.debug("setup transform event"),self.onrtctransform=e=>{const{transformer:t}=e;T.debug("transformer",t),t.handled=!0;const{kind:r,participantId:n,trackId:s,codec:i}=t.options,a=r==="encode"?is(s):Kt(n,s);T.debug(`transform ${i}`),a.setupTransform(r,t.readable,t.writable,s,i)})})();
