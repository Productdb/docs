import { v4 as Kr, validate as Od } from "uuid";
import { EventEmitter as is } from "events";
import fv from "bowser";
import { faker as ji } from "@faker-js/faker";
import * as Ba from "worker-timers";
var Cd, it, Rt, vn, fr, Cr, mn, Id, z, at, Wi, gn, pr, yn, St, Tn, Pt, hr, Ir, B, ba, vr, wn, kn, po, Vs, Ct, It, Bs, fi, _a;
function Mt(e) {
  return tv(e) || rv(e) || ho(e) || ev();
}
function ev() {
  throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function rv(e) {
  if (typeof Symbol != "undefined" && e[Symbol.iterator] != null || e["@@iterator"] != null)
    return Array.from(e);
}
function tv(e) {
  if (Array.isArray(e))
    return Au(e);
}
function f(e, t) {
  if (!Object.prototype.hasOwnProperty.call(e, t))
    throw new TypeError("attempted to use private field on non-instance");
  return e;
}
var nv = 0;
function V(e) {
  return "__private_" + nv++ + "_" + e;
}
function Kn(e) {
  var t = typeof Map == "function" ? /* @__PURE__ */ new Map() : void 0;
  return Kn = function(n) {
    if (n === null || !iv(n))
      return n;
    if (typeof n != "function")
      throw new TypeError("Super expression must either be null or a function");
    if (typeof t != "undefined") {
      if (t.has(n))
        return t.get(n);
      t.set(n, i);
    }
    function i() {
      return pi(n, arguments, ne(this).constructor);
    }
    return i.prototype = Object.create(n.prototype, { constructor: { value: i, enumerable: !1, writable: !0, configurable: !0 } }), ra(i, n);
  }, Kn(e);
}
function pi(e, t, r) {
  return Dd() ? pi = Reflect.construct.bind() : pi = function(i, a, s) {
    var u = [null];
    u.push.apply(u, a);
    var o = Function.bind.apply(i, u), c = new o();
    return s && ra(c, s.prototype), c;
  }, pi.apply(null, arguments);
}
function iv(e) {
  try {
    return Function.toString.call(e).indexOf("[native code]") !== -1;
  } catch (t) {
    return typeof e == "function";
  }
}
function le() {
  return typeof Reflect != "undefined" && Reflect.get ? le = Reflect.get.bind() : le = function(t, r, n) {
    var i = av(t, r);
    if (i) {
      var a = Object.getOwnPropertyDescriptor(i, r);
      return a.get ? a.get.call(arguments.length < 3 ? t : n) : a.value;
    }
  }, le.apply(this, arguments);
}
function av(e, t) {
  for (; !Object.prototype.hasOwnProperty.call(e, t) && (e = ne(e), e !== null); )
    ;
  return e;
}
function E(e, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && ra(e, t);
}
function ra(e, t) {
  return ra = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, i) {
    return n.__proto__ = i, n;
  }, ra(e, t);
}
function A(e) {
  var t = Dd();
  return function() {
    var n = ne(e), i;
    if (t) {
      var a = ne(this).constructor;
      i = Reflect.construct(n, arguments, a);
    } else
      i = n.apply(this, arguments);
    return sv(this, i);
  };
}
function sv(e, t) {
  if (t && (typeof t == "object" || typeof t == "function"))
    return t;
  if (t !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return M(e);
}
function M(e) {
  if (e === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e;
}
function Dd() {
  if (typeof Reflect == "undefined" || !Reflect.construct || Reflect.construct.sham)
    return !1;
  if (typeof Proxy == "function")
    return !0;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), !0;
  } catch (e) {
    return !1;
  }
}
function ne(e) {
  return ne = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(r) {
    return r.__proto__ || Object.getPrototypeOf(r);
  }, ne(e);
}
function Cc(e, t) {
  var r = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    t && (n = n.filter(function(i) {
      return Object.getOwnPropertyDescriptor(e, i).enumerable;
    })), r.push.apply(r, n);
  }
  return r;
}
function ie(e) {
  for (var t = 1; t < arguments.length; t++) {
    var r = arguments[t] != null ? arguments[t] : {};
    t % 2 ? Cc(Object(r), !0).forEach(function(n) {
      uv(e, n, r[n]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : Cc(Object(r)).forEach(function(n) {
      Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(r, n));
    });
  }
  return e;
}
function uv(e, t, r) {
  return t = Md(t), t in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e;
}
function or(e, t) {
  var r = typeof Symbol != "undefined" && e[Symbol.iterator] || e["@@iterator"];
  if (!r) {
    if (Array.isArray(e) || (r = ho(e)) || t && e && typeof e.length == "number") {
      r && (e = r);
      var n = 0, i = function() {
      };
      return { s: i, n: function() {
        return n >= e.length ? { done: !0 } : { done: !1, value: e[n++] };
      }, e: function(c) {
        throw c;
      }, f: i };
    }
    throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
  }
  var a = !0, s = !1, u;
  return { s: function() {
    r = r.call(e);
  }, n: function() {
    var c = r.next();
    return a = c.done, c;
  }, e: function(c) {
    s = !0, u = c;
  }, f: function() {
    try {
      !a && r.return != null && r.return();
    } finally {
      if (s)
        throw u;
    }
  } };
}
function Ne(e, t) {
  return lv(e) || cv(e, t) || ho(e, t) || ov();
}
function ov() {
  throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function ho(e, t) {
  if (e) {
    if (typeof e == "string")
      return Au(e, t);
    var r = Object.prototype.toString.call(e).slice(8, -1);
    if (r === "Object" && e.constructor && (r = e.constructor.name), r === "Map" || r === "Set")
      return Array.from(e);
    if (r === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))
      return Au(e, t);
  }
}
function Au(e, t) {
  (t == null || t > e.length) && (t = e.length);
  for (var r = 0, n = new Array(t); r < t; r++)
    n[r] = e[r];
  return n;
}
function cv(e, t) {
  var r = e == null ? null : typeof Symbol != "undefined" && e[Symbol.iterator] || e["@@iterator"];
  if (r != null) {
    var n, i, a, s, u = [], o = !0, c = !1;
    try {
      if (a = (r = r.call(e)).next, t === 0) {
        if (Object(r) !== r)
          return;
        o = !1;
      } else
        for (; !(o = (n = a.call(r)).done) && (u.push(n.value), u.length !== t); o = !0)
          ;
    } catch (l) {
      c = !0, i = l;
    } finally {
      try {
        if (!o && r.return != null && (s = r.return(), Object(s) !== s))
          return;
      } finally {
        if (c)
          throw i;
      }
    }
    return u;
  }
}
function lv(e) {
  if (Array.isArray(e))
    return e;
}
function p() {
  "use strict";
  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
  p = function() {
    return t;
  };
  var e, t = {}, r = Object.prototype, n = r.hasOwnProperty, i = Object.defineProperty || function(W, U, G) {
    W[U] = G.value;
  }, a = typeof Symbol == "function" ? Symbol : {}, s = a.iterator || "@@iterator", u = a.asyncIterator || "@@asyncIterator", o = a.toStringTag || "@@toStringTag";
  function c(W, U, G) {
    return Object.defineProperty(W, U, { value: G, enumerable: !0, configurable: !0, writable: !0 }), W[U];
  }
  try {
    c({}, "");
  } catch (W) {
    c = function(G, Z, ce) {
      return G[Z] = ce;
    };
  }
  function l(W, U, G, Z) {
    var ce = U && U.prototype instanceof _ ? U : _, re = Object.create(ce.prototype), Ke = new dr(Z || []);
    return i(re, "_invoke", { value: x(W, G, Ke) }), re;
  }
  function d(W, U, G) {
    try {
      return { type: "normal", arg: W.call(U, G) };
    } catch (Z) {
      return { type: "throw", arg: Z };
    }
  }
  t.wrap = l;
  var v = "suspendedStart", h = "suspendedYield", m = "executing", T = "completed", y = {};
  function _() {
  }
  function C() {
  }
  function D() {
  }
  var I = {};
  c(I, s, function() {
    return this;
  });
  var O = Object.getPrototypeOf, q = O && O(O(nt([])));
  q && q !== r && n.call(q, s) && (I = q);
  var F = D.prototype = _.prototype = Object.create(I);
  function H(W) {
    ["next", "throw", "return"].forEach(function(U) {
      c(W, U, function(G) {
        return this._invoke(U, G);
      });
    });
  }
  function fe(W, U) {
    function G(ce, re, Ke, Tr) {
      var Pr = d(W[ce], W, re);
      if (Pr.type !== "throw") {
        var $n = Pr.arg, hn = $n.value;
        return hn && typeof hn == "object" && n.call(hn, "__await") ? U.resolve(hn.__await).then(function(Nn) {
          G("next", Nn, Ke, Tr);
        }, function(Nn) {
          G("throw", Nn, Ke, Tr);
        }) : U.resolve(hn).then(function(Nn) {
          $n.value = Nn, Ke($n);
        }, function(Nn) {
          return G("throw", Nn, Ke, Tr);
        });
      }
      Tr(Pr.arg);
    }
    var Z;
    i(this, "_invoke", { value: function(re, Ke) {
      function Tr() {
        return new U(function(Pr, $n) {
          G(re, Ke, Pr, $n);
        });
      }
      return Z = Z ? Z.then(Tr, Tr) : Tr();
    } });
  }
  function x(W, U, G) {
    var Z = v;
    return function(ce, re) {
      if (Z === m)
        throw new Error("Generator is already running");
      if (Z === T) {
        if (ce === "throw")
          throw re;
        return { value: e, done: !0 };
      }
      for (G.method = ce, G.arg = re; ; ) {
        var Ke = G.delegate;
        if (Ke) {
          var Tr = pe(Ke, G);
          if (Tr) {
            if (Tr === y)
              continue;
            return Tr;
          }
        }
        if (G.method === "next")
          G.sent = G._sent = G.arg;
        else if (G.method === "throw") {
          if (Z === v)
            throw Z = T, G.arg;
          G.dispatchException(G.arg);
        } else
          G.method === "return" && G.abrupt("return", G.arg);
        Z = m;
        var Pr = d(W, U, G);
        if (Pr.type === "normal") {
          if (Z = G.done ? T : h, Pr.arg === y)
            continue;
          return { value: Pr.arg, done: G.done };
        }
        Pr.type === "throw" && (Z = T, G.method = "throw", G.arg = Pr.arg);
      }
    };
  }
  function pe(W, U) {
    var G = U.method, Z = W.iterator[G];
    if (Z === e)
      return U.delegate = null, G === "throw" && W.iterator.return && (U.method = "return", U.arg = e, pe(W, U), U.method === "throw") || G !== "return" && (U.method = "throw", U.arg = new TypeError("The iterator does not provide a '" + G + "' method")), y;
    var ce = d(Z, W.iterator, U.arg);
    if (ce.type === "throw")
      return U.method = "throw", U.arg = ce.arg, U.delegate = null, y;
    var re = ce.arg;
    return re ? re.done ? (U[W.resultName] = re.value, U.next = W.nextLoc, U.method !== "return" && (U.method = "next", U.arg = e), U.delegate = null, y) : re : (U.method = "throw", U.arg = new TypeError("iterator result is not an object"), U.delegate = null, y);
  }
  function Be(W) {
    var U = { tryLoc: W[0] };
    1 in W && (U.catchLoc = W[1]), 2 in W && (U.finallyLoc = W[2], U.afterLoc = W[3]), this.tryEntries.push(U);
  }
  function Q(W) {
    var U = W.completion || {};
    U.type = "normal", delete U.arg, W.completion = U;
  }
  function dr(W) {
    this.tryEntries = [{ tryLoc: "root" }], W.forEach(Be, this), this.reset(!0);
  }
  function nt(W) {
    if (W || W === "") {
      var U = W[s];
      if (U)
        return U.call(W);
      if (typeof W.next == "function")
        return W;
      if (!isNaN(W.length)) {
        var G = -1, Z = function ce() {
          for (; ++G < W.length; )
            if (n.call(W, G))
              return ce.value = W[G], ce.done = !1, ce;
          return ce.value = e, ce.done = !0, ce;
        };
        return Z.next = Z;
      }
    }
    throw new TypeError(typeof W + " is not iterable");
  }
  return C.prototype = D, i(F, "constructor", { value: D, configurable: !0 }), i(D, "constructor", { value: C, configurable: !0 }), C.displayName = c(D, o, "GeneratorFunction"), t.isGeneratorFunction = function(W) {
    var U = typeof W == "function" && W.constructor;
    return !!U && (U === C || (U.displayName || U.name) === "GeneratorFunction");
  }, t.mark = function(W) {
    return Object.setPrototypeOf ? Object.setPrototypeOf(W, D) : (W.__proto__ = D, c(W, o, "GeneratorFunction")), W.prototype = Object.create(F), W;
  }, t.awrap = function(W) {
    return { __await: W };
  }, H(fe.prototype), c(fe.prototype, u, function() {
    return this;
  }), t.AsyncIterator = fe, t.async = function(W, U, G, Z, ce) {
    ce === void 0 && (ce = Promise);
    var re = new fe(l(W, U, G, Z), ce);
    return t.isGeneratorFunction(U) ? re : re.next().then(function(Ke) {
      return Ke.done ? Ke.value : re.next();
    });
  }, H(F), c(F, o, "Generator"), c(F, s, function() {
    return this;
  }), c(F, "toString", function() {
    return "[object Generator]";
  }), t.keys = function(W) {
    var U = Object(W), G = [];
    for (var Z in U)
      G.push(Z);
    return G.reverse(), function ce() {
      for (; G.length; ) {
        var re = G.pop();
        if (re in U)
          return ce.value = re, ce.done = !1, ce;
      }
      return ce.done = !0, ce;
    };
  }, t.values = nt, dr.prototype = { constructor: dr, reset: function(U) {
    if (this.prev = 0, this.next = 0, this.sent = this._sent = e, this.done = !1, this.delegate = null, this.method = "next", this.arg = e, this.tryEntries.forEach(Q), !U)
      for (var G in this)
        G.charAt(0) === "t" && n.call(this, G) && !isNaN(+G.slice(1)) && (this[G] = e);
  }, stop: function() {
    this.done = !0;
    var U = this.tryEntries[0].completion;
    if (U.type === "throw")
      throw U.arg;
    return this.rval;
  }, dispatchException: function(U) {
    if (this.done)
      throw U;
    var G = this;
    function Z($n, hn) {
      return Ke.type = "throw", Ke.arg = U, G.next = $n, hn && (G.method = "next", G.arg = e), !!hn;
    }
    for (var ce = this.tryEntries.length - 1; ce >= 0; --ce) {
      var re = this.tryEntries[ce], Ke = re.completion;
      if (re.tryLoc === "root")
        return Z("end");
      if (re.tryLoc <= this.prev) {
        var Tr = n.call(re, "catchLoc"), Pr = n.call(re, "finallyLoc");
        if (Tr && Pr) {
          if (this.prev < re.catchLoc)
            return Z(re.catchLoc, !0);
          if (this.prev < re.finallyLoc)
            return Z(re.finallyLoc);
        } else if (Tr) {
          if (this.prev < re.catchLoc)
            return Z(re.catchLoc, !0);
        } else {
          if (!Pr)
            throw new Error("try statement without catch or finally");
          if (this.prev < re.finallyLoc)
            return Z(re.finallyLoc);
        }
      }
    }
  }, abrupt: function(U, G) {
    for (var Z = this.tryEntries.length - 1; Z >= 0; --Z) {
      var ce = this.tryEntries[Z];
      if (ce.tryLoc <= this.prev && n.call(ce, "finallyLoc") && this.prev < ce.finallyLoc) {
        var re = ce;
        break;
      }
    }
    re && (U === "break" || U === "continue") && re.tryLoc <= G && G <= re.finallyLoc && (re = null);
    var Ke = re ? re.completion : {};
    return Ke.type = U, Ke.arg = G, re ? (this.method = "next", this.next = re.finallyLoc, y) : this.complete(Ke);
  }, complete: function(U, G) {
    if (U.type === "throw")
      throw U.arg;
    return U.type === "break" || U.type === "continue" ? this.next = U.arg : U.type === "return" ? (this.rval = this.arg = U.arg, this.method = "return", this.next = "end") : U.type === "normal" && G && (this.next = G), y;
  }, finish: function(U) {
    for (var G = this.tryEntries.length - 1; G >= 0; --G) {
      var Z = this.tryEntries[G];
      if (Z.finallyLoc === U)
        return this.complete(Z.completion, Z.afterLoc), Q(Z), y;
    }
  }, catch: function(U) {
    for (var G = this.tryEntries.length - 1; G >= 0; --G) {
      var Z = this.tryEntries[G];
      if (Z.tryLoc === U) {
        var ce = Z.completion;
        if (ce.type === "throw") {
          var re = ce.arg;
          Q(Z);
        }
        return re;
      }
    }
    throw new Error("illegal catch attempt");
  }, delegateYield: function(U, G, Z) {
    return this.delegate = { iterator: nt(U), resultName: G, nextLoc: Z }, this.method === "next" && (this.arg = e), y;
  } }, t;
}
function Ic(e, t, r, n, i, a, s) {
  try {
    var u = e[a](s), o = u.value;
  } catch (c) {
    r(c);
    return;
  }
  u.done ? t(o) : Promise.resolve(o).then(n, i);
}
function k(e) {
  return function() {
    var t = this, r = arguments;
    return new Promise(function(n, i) {
      var a = e.apply(t, r);
      function s(o) {
        Ic(a, n, i, s, u, "next", o);
      }
      function u(o) {
        Ic(a, n, i, s, u, "throw", o);
      }
      s(void 0);
    });
  };
}
function w(e, t) {
  if (!(e instanceof t))
    throw new TypeError("Cannot call a class as a function");
}
function Dc(e, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, Md(n.key), n);
  }
}
function b(e, t, r) {
  return t && Dc(e.prototype, t), r && Dc(e, r), Object.defineProperty(e, "prototype", { writable: !1 }), e;
}
function Md(e) {
  var t = dv(e, "string");
  return typeof t == "symbol" ? t : String(t);
}
function dv(e, t) {
  if (typeof e != "object" || e === null)
    return e;
  var r = e[Symbol.toPrimitive];
  if (r !== void 0) {
    var n = r.call(e, t || "default");
    if (typeof n != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e);
}
function pv(e) {
  var t = this.length, r = e >= 0 ? e : t + e;
  return r < 0 || r >= t ? void 0 : this[r];
}
Array.prototype.at || Object.assign(Array.prototype, { at: pv });
function hv(e) {
  var t = this.length, r = e >= 0 ? e : t + e;
  return r < 0 || r >= t ? void 0 : this[r];
}
String.prototype.at || Object.assign(String.prototype, { at: hv });
var Yr;
(function(e) {
  e.GroupCall = "GROUP_CALL", e.Webinar = "WEBINAR", e.AudioRoom = "AUDIO_ROOM", e.Livestream = "LIVESTREAM", e.Chat = "CHAT";
})(Yr || (Yr = {}));
var qa;
(function(e) {
  e.Skip = "SKIP", e.OnPrivilegedUserEntry = "ON_PRIVILEGED_USER_ENTRY", e.SkipOnAccept = "SKIP_ON_ACCEPT";
})(qa || (qa = {}));
var ee;
(function(e) {
  e.Allowed = "ALLOWED", e.NotAllowed = "NOT_ALLOWED", e.CanRequest = "CAN_REQUEST";
})(ee || (ee = {}));
var Ga;
(function(e) {
  e.Allowed = "ALLOWED", e.NotAllowed = "NOT_ALLOWED";
})(Ga || (Ga = {}));
var Mc;
(function(e) {
  e.FULL_ACCESS = "FULL_ACCESS", e.VIEW_ONLY = "VIEW_ONLY";
})(Mc || (Mc = {}));
var Ha;
(function(e) {
  e.skip = "SKIP", e.onAccept = "ON_ACCEPT", e.skipOnPrivilegedUserEntry = "SKIP_ON_PRIVILEGED_USER_ENTRY", e.skipOnAccept = "SKIP_ON_ACCEPT";
})(Ha || (Ha = {}));
var mi;
(function(e) {
  e.none = "NONE", e.recorder = "RECORDER", e.livestreamer = "LIVESTREAMER";
})(mi || (mi = {}));
var Ru;
(function(e) {
  e.groupCall = "GROUP_CALL", e.webinar = "WEBINAR", e.audioRoom = "AUDIO_ROOM", e.livestream = "LIVESTREAM", e.chat = "CHAT";
})(Ru || (Ru = {}));
var Oc;
(function(e) {
  e.SKIP = "skip", e.SKIP_ON_PRIVILEGED_USER_ENTRY = "skipOnPrivilegedUserEntry", e.ON_ACCEPT = "skipOnAccept", e.SKIP_ON_ACCEPT = "skipOnAccept";
})(Oc || (Oc = {}));
Ru.groupCall, Ha.skipOnAccept, mi.none;
function vv(e) {
  return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e;
}
var Su = {}, mv = { get exports() {
  return Su;
}, set exports(e) {
  Su = e;
} }, Wa = {}, gv = { get exports() {
  return Wa;
}, set exports(e) {
  Wa = e;
} }, $d = function(t, r) {
  return function() {
    for (var i = new Array(arguments.length), a = 0; a < i.length; a++)
      i[a] = arguments[a];
    return t.apply(r, i);
  };
}, yv = $d, Sn = Object.prototype.toString;
function vo(e) {
  return Array.isArray(e);
}
function Pu(e) {
  return typeof e == "undefined";
}
function Tv(e) {
  return e !== null && !Pu(e) && e.constructor !== null && !Pu(e.constructor) && typeof e.constructor.isBuffer == "function" && e.constructor.isBuffer(e);
}
function Nd(e) {
  return Sn.call(e) === "[object ArrayBuffer]";
}
function kv(e) {
  return Sn.call(e) === "[object FormData]";
}
function wv(e) {
  var t;
  return typeof ArrayBuffer != "undefined" && ArrayBuffer.isView ? t = ArrayBuffer.isView(e) : t = e && e.buffer && Nd(e.buffer), t;
}
function bv(e) {
  return typeof e == "string";
}
function _v(e) {
  return typeof e == "number";
}
function Ld(e) {
  return e !== null && typeof e == "object";
}
function Oa(e) {
  if (Sn.call(e) !== "[object Object]")
    return !1;
  var t = Object.getPrototypeOf(e);
  return t === null || t === Object.prototype;
}
function Ev(e) {
  return Sn.call(e) === "[object Date]";
}
function Av(e) {
  return Sn.call(e) === "[object File]";
}
function Rv(e) {
  return Sn.call(e) === "[object Blob]";
}
function Ud(e) {
  return Sn.call(e) === "[object Function]";
}
function Sv(e) {
  return Ld(e) && Ud(e.pipe);
}
function Pv(e) {
  return Sn.call(e) === "[object URLSearchParams]";
}
function Cv(e) {
  return e.trim ? e.trim() : e.replace(/^\s+|\s+$/g, "");
}
function Iv() {
  return typeof navigator != "undefined" && (navigator.product === "ReactNative" || navigator.product === "NativeScript" || navigator.product === "NS") ? !1 : typeof window != "undefined" && typeof document != "undefined";
}
function mo(e, t) {
  if (!(e === null || typeof e == "undefined"))
    if (typeof e != "object" && (e = [e]), vo(e))
      for (var r = 0, n = e.length; r < n; r++)
        t.call(null, e[r], r, e);
    else
      for (var i in e)
        Object.prototype.hasOwnProperty.call(e, i) && t.call(null, e[i], i, e);
}
function Cu() {
  var e = {};
  function t(i, a) {
    Oa(e[a]) && Oa(i) ? e[a] = Cu(e[a], i) : Oa(i) ? e[a] = Cu({}, i) : vo(i) ? e[a] = i.slice() : e[a] = i;
  }
  for (var r = 0, n = arguments.length; r < n; r++)
    mo(arguments[r], t);
  return e;
}
function Dv(e, t, r) {
  return mo(t, function(i, a) {
    r && typeof i == "function" ? e[a] = yv(i, r) : e[a] = i;
  }), e;
}
function Mv(e) {
  return e.charCodeAt(0) === 65279 && (e = e.slice(1)), e;
}
var $r = { isArray: vo, isArrayBuffer: Nd, isBuffer: Tv, isFormData: kv, isArrayBufferView: wv, isString: bv, isNumber: _v, isObject: Ld, isPlainObject: Oa, isUndefined: Pu, isDate: Ev, isFile: Av, isBlob: Rv, isFunction: Ud, isStream: Sv, isURLSearchParams: Pv, isStandardBrowserEnv: Iv, forEach: mo, merge: Cu, extend: Dv, trim: Cv, stripBOM: Mv }, ui = $r;
function $c(e) {
  return encodeURIComponent(e).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
}
var Fd = function(t, r, n) {
  if (!r)
    return t;
  var i;
  if (n)
    i = n(r);
  else if (ui.isURLSearchParams(r))
    i = r.toString();
  else {
    var a = [];
    ui.forEach(r, function(o, c) {
      o === null || typeof o == "undefined" || (ui.isArray(o) ? c = c + "[]" : o = [o], ui.forEach(o, function(d) {
        ui.isDate(d) ? d = d.toISOString() : ui.isObject(d) && (d = JSON.stringify(d)), a.push($c(c) + "=" + $c(d));
      }));
    }), i = a.join("&");
  }
  if (i) {
    var s = t.indexOf("#");
    s !== -1 && (t = t.slice(0, s)), t += (t.indexOf("?") === -1 ? "?" : "&") + i;
  }
  return t;
}, Ov = $r;
function as() {
  this.handlers = [];
}
as.prototype.use = function(t, r, n) {
  return this.handlers.push({ fulfilled: t, rejected: r, synchronous: n ? n.synchronous : !1, runWhen: n ? n.runWhen : null }), this.handlers.length - 1;
};
as.prototype.eject = function(t) {
  this.handlers[t] && (this.handlers[t] = null);
};
as.prototype.forEach = function(t) {
  Ov.forEach(this.handlers, function(n) {
    n !== null && t(n);
  });
};
var $v = as, Nv = $r, Lv = function(t, r) {
  Nv.forEach(t, function(i, a) {
    a !== r && a.toUpperCase() === r.toUpperCase() && (t[r] = i, delete t[a]);
  });
}, Vd = function(t, r, n, i, a) {
  return t.config = r, n && (t.code = n), t.request = i, t.response = a, t.isAxiosError = !0, t.toJSON = function() {
    return {
      // Standard
      message: this.message,
      name: this.name,
      // Microsoft
      description: this.description,
      number: this.number,
      // Mozilla
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      // Axios
      config: this.config,
      code: this.code,
      status: this.response && this.response.status ? this.response.status : null
    };
  }, t;
}, qs, Nc;
function Bd() {
  if (Nc)
    return qs;
  Nc = 1;
  var e = Vd;
  return qs = function(r, n, i, a, s) {
    var u = new Error(r);
    return e(u, n, i, a, s);
  }, qs;
}
var Gs, Lc;
function Uv() {
  if (Lc)
    return Gs;
  Lc = 1;
  var e = Bd();
  return Gs = function(r, n, i) {
    var a = i.config.validateStatus;
    !i.status || !a || a(i.status) ? r(i) : n(e("Request failed with status code " + i.status, i.config, null, i.request, i));
  }, Gs;
}
var Hs, Uc;
function Fv() {
  if (Uc)
    return Hs;
  Uc = 1;
  var e = $r;
  return Hs = e.isStandardBrowserEnv() ? (
    // Standard browser envs support document.cookie
    function() {
      return { write: function(n, i, a, s, u, o) {
        var c = [];
        c.push(n + "=" + encodeURIComponent(i)), e.isNumber(a) && c.push("expires=" + new Date(a).toGMTString()), e.isString(s) && c.push("path=" + s), e.isString(u) && c.push("domain=" + u), o === !0 && c.push("secure"), document.cookie = c.join("; ");
      }, read: function(n) {
        var i = document.cookie.match(new RegExp("(^|;\\s*)(" + n + ")=([^;]*)"));
        return i ? decodeURIComponent(i[3]) : null;
      }, remove: function(n) {
        this.write(n, "", Date.now() - 864e5);
      } };
    }()
  ) : (
    // Non standard browser env (web workers, react-native) lack needed support.
    function() {
      return { write: function() {
      }, read: function() {
        return null;
      }, remove: function() {
      } };
    }()
  ), Hs;
}
var Ws, Fc;
function Vv() {
  return Fc || (Fc = 1, Ws = function(t) {
    return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);
  }), Ws;
}
var js, Vc;
function Bv() {
  return Vc || (Vc = 1, js = function(t, r) {
    return r ? t.replace(/\/+$/, "") + "/" + r.replace(/^\/+/, "") : t;
  }), js;
}
var Js, Bc;
function qv() {
  if (Bc)
    return Js;
  Bc = 1;
  var e = Vv(), t = Bv();
  return Js = function(n, i) {
    return n && !e(i) ? t(n, i) : i;
  }, Js;
}
var Ks, qc;
function Gv() {
  if (qc)
    return Ks;
  qc = 1;
  var e = $r, t = ["age", "authorization", "content-length", "content-type", "etag", "expires", "from", "host", "if-modified-since", "if-unmodified-since", "last-modified", "location", "max-forwards", "proxy-authorization", "referer", "retry-after", "user-agent"];
  return Ks = function(n) {
    var i = {}, a, s, u;
    return n && e.forEach(n.split(`
`), function(c) {
      if (u = c.indexOf(":"), a = e.trim(c.substr(0, u)).toLowerCase(), s = e.trim(c.substr(u + 1)), a) {
        if (i[a] && t.indexOf(a) >= 0)
          return;
        a === "set-cookie" ? i[a] = (i[a] ? i[a] : []).concat([s]) : i[a] = i[a] ? i[a] + ", " + s : s;
      }
    }), i;
  }, Ks;
}
var Ys, Gc;
function Hv() {
  if (Gc)
    return Ys;
  Gc = 1;
  var e = $r;
  return Ys = e.isStandardBrowserEnv() ? (
    // Standard browser envs have full support of the APIs needed to test
    // whether the request URL is of the same origin as current location.
    function() {
      var r = /(msie|trident)/i.test(navigator.userAgent), n = document.createElement("a"), i;
      function a(s) {
        var u = s;
        return r && (n.setAttribute("href", u), u = n.href), n.setAttribute("href", u), { href: n.href, protocol: n.protocol ? n.protocol.replace(/:$/, "") : "", host: n.host, search: n.search ? n.search.replace(/^\?/, "") : "", hash: n.hash ? n.hash.replace(/^#/, "") : "", hostname: n.hostname, port: n.port, pathname: n.pathname.charAt(0) === "/" ? n.pathname : "/" + n.pathname };
      }
      return i = a(window.location.href), function(u) {
        var o = e.isString(u) ? a(u) : u;
        return o.protocol === i.protocol && o.host === i.host;
      };
    }()
  ) : (
    // Non standard browser envs (web workers, react-native) lack needed support.
    function() {
      return function() {
        return !0;
      };
    }()
  ), Ys;
}
var zs, Hc;
function ss() {
  if (Hc)
    return zs;
  Hc = 1;
  function e(t) {
    this.message = t;
  }
  return e.prototype.toString = function() {
    return "Cancel" + (this.message ? ": " + this.message : "");
  }, e.prototype.__CANCEL__ = !0, zs = e, zs;
}
var Xs, Wc;
function jc() {
  if (Wc)
    return Xs;
  Wc = 1;
  var e = $r, t = Uv(), r = Fv(), n = Fd, i = qv(), a = Gv(), s = Hv(), u = Bd(), o = us(), c = ss();
  return Xs = function(d) {
    return new Promise(function(h, m) {
      var T = d.data, y = d.headers, _ = d.responseType, C;
      function D() {
        d.cancelToken && d.cancelToken.unsubscribe(C), d.signal && d.signal.removeEventListener("abort", C);
      }
      e.isFormData(T) && delete y["Content-Type"];
      var I = new XMLHttpRequest();
      if (d.auth) {
        var O = d.auth.username || "", q = d.auth.password ? unescape(encodeURIComponent(d.auth.password)) : "";
        y.Authorization = "Basic " + btoa(O + ":" + q);
      }
      var F = i(d.baseURL, d.url);
      I.open(d.method.toUpperCase(), n(F, d.params, d.paramsSerializer), !0), I.timeout = d.timeout;
      function H() {
        if (I) {
          var x = "getAllResponseHeaders" in I ? a(I.getAllResponseHeaders()) : null, pe = !_ || _ === "text" || _ === "json" ? I.responseText : I.response, Be = { data: pe, status: I.status, statusText: I.statusText, headers: x, config: d, request: I };
          t(function(dr) {
            h(dr), D();
          }, function(dr) {
            m(dr), D();
          }, Be), I = null;
        }
      }
      if ("onloadend" in I ? I.onloadend = H : I.onreadystatechange = function() {
        !I || I.readyState !== 4 || I.status === 0 && !(I.responseURL && I.responseURL.indexOf("file:") === 0) || setTimeout(H);
      }, I.onabort = function() {
        I && (m(u("Request aborted", d, "ECONNABORTED", I)), I = null);
      }, I.onerror = function() {
        m(u("Network Error", d, null, I)), I = null;
      }, I.ontimeout = function() {
        var pe = d.timeout ? "timeout of " + d.timeout + "ms exceeded" : "timeout exceeded", Be = d.transitional || o.transitional;
        d.timeoutErrorMessage && (pe = d.timeoutErrorMessage), m(u(pe, d, Be.clarifyTimeoutError ? "ETIMEDOUT" : "ECONNABORTED", I)), I = null;
      }, e.isStandardBrowserEnv()) {
        var fe = (d.withCredentials || s(F)) && d.xsrfCookieName ? r.read(d.xsrfCookieName) : void 0;
        fe && (y[d.xsrfHeaderName] = fe);
      }
      "setRequestHeader" in I && e.forEach(y, function(pe, Be) {
        typeof T == "undefined" && Be.toLowerCase() === "content-type" ? delete y[Be] : I.setRequestHeader(Be, pe);
      }), e.isUndefined(d.withCredentials) || (I.withCredentials = !!d.withCredentials), _ && _ !== "json" && (I.responseType = d.responseType), typeof d.onDownloadProgress == "function" && I.addEventListener("progress", d.onDownloadProgress), typeof d.onUploadProgress == "function" && I.upload && I.upload.addEventListener("progress", d.onUploadProgress), (d.cancelToken || d.signal) && (C = function(pe) {
        I && (m(!pe || pe && pe.type ? new c("canceled") : pe), I.abort(), I = null);
      }, d.cancelToken && d.cancelToken.subscribe(C), d.signal && (d.signal.aborted ? C() : d.signal.addEventListener("abort", C))), T || (T = null), I.send(T);
    });
  }, Xs;
}
var Zs, Jc;
function us() {
  if (Jc)
    return Zs;
  Jc = 1;
  var e = $r, t = Lv, r = Vd, n = { "Content-Type": "application/x-www-form-urlencoded" };
  function i(o, c) {
    !e.isUndefined(o) && e.isUndefined(o["Content-Type"]) && (o["Content-Type"] = c);
  }
  function a() {
    var o;
    return (typeof XMLHttpRequest != "undefined" || typeof process != "undefined" && Object.prototype.toString.call(process) === "[object process]") && (o = jc()), o;
  }
  function s(o, c, l) {
    if (e.isString(o))
      try {
        return (c || JSON.parse)(o), e.trim(o);
      } catch (d) {
        if (d.name !== "SyntaxError")
          throw d;
      }
    return (l || JSON.stringify)(o);
  }
  var u = {
    transitional: { silentJSONParsing: !0, forcedJSONParsing: !0, clarifyTimeoutError: !1 },
    adapter: a(),
    transformRequest: [function(c, l) {
      return t(l, "Accept"), t(l, "Content-Type"), e.isFormData(c) || e.isArrayBuffer(c) || e.isBuffer(c) || e.isStream(c) || e.isFile(c) || e.isBlob(c) ? c : e.isArrayBufferView(c) ? c.buffer : e.isURLSearchParams(c) ? (i(l, "application/x-www-form-urlencoded;charset=utf-8"), c.toString()) : e.isObject(c) || l && l["Content-Type"] === "application/json" ? (i(l, "application/json"), s(c)) : c;
    }],
    transformResponse: [function(c) {
      var l = this.transitional || u.transitional, d = l && l.silentJSONParsing, v = l && l.forcedJSONParsing, h = !d && this.responseType === "json";
      if (h || v && e.isString(c) && c.length)
        try {
          return JSON.parse(c);
        } catch (m) {
          if (h)
            throw m.name === "SyntaxError" ? r(m, this, "E_JSON_PARSE") : m;
        }
      return c;
    }],
    /**
    * A timeout in milliseconds to abort a request. If set to 0 (default) a
    * timeout is not created.
    */
    timeout: 0,
    xsrfCookieName: "XSRF-TOKEN",
    xsrfHeaderName: "X-XSRF-TOKEN",
    maxContentLength: -1,
    maxBodyLength: -1,
    validateStatus: function(c) {
      return c >= 200 && c < 300;
    },
    headers: { common: { Accept: "application/json, text/plain, */*" } }
  };
  return e.forEach(["delete", "get", "head"], function(c) {
    u.headers[c] = {};
  }), e.forEach(["post", "put", "patch"], function(c) {
    u.headers[c] = e.merge(n);
  }), Zs = u, Zs;
}
var Wv = $r, jv = us(), Jv = function(t, r, n) {
  var i = this || jv;
  return Wv.forEach(n, function(s) {
    t = s.call(i, t, r);
  }), t;
}, Qs, Kc;
function qd() {
  return Kc || (Kc = 1, Qs = function(t) {
    return !!(t && t.__CANCEL__);
  }), Qs;
}
var Yc = $r, xs = Jv, Kv = qd(), Yv = us(), zv = ss();
function eu(e) {
  if (e.cancelToken && e.cancelToken.throwIfRequested(), e.signal && e.signal.aborted)
    throw new zv("canceled");
}
var Xv = function(t) {
  eu(t), t.headers = t.headers || {}, t.data = xs.call(t, t.data, t.headers, t.transformRequest), t.headers = Yc.merge(t.headers.common || {}, t.headers[t.method] || {}, t.headers), Yc.forEach(["delete", "get", "head", "post", "put", "patch", "common"], function(i) {
    delete t.headers[i];
  });
  var r = t.adapter || Yv.adapter;
  return r(t).then(function(i) {
    return eu(t), i.data = xs.call(t, i.data, i.headers, t.transformResponse), i;
  }, function(i) {
    return Kv(i) || (eu(t), i && i.response && (i.response.data = xs.call(t, i.response.data, i.response.headers, t.transformResponse))), Promise.reject(i);
  });
}, Vr = $r, Gd = function(t, r) {
  r = r || {};
  var n = {};
  function i(l, d) {
    return Vr.isPlainObject(l) && Vr.isPlainObject(d) ? Vr.merge(l, d) : Vr.isPlainObject(d) ? Vr.merge({}, d) : Vr.isArray(d) ? d.slice() : d;
  }
  function a(l) {
    if (Vr.isUndefined(r[l])) {
      if (!Vr.isUndefined(t[l]))
        return i(void 0, t[l]);
    } else
      return i(t[l], r[l]);
  }
  function s(l) {
    if (!Vr.isUndefined(r[l]))
      return i(void 0, r[l]);
  }
  function u(l) {
    if (Vr.isUndefined(r[l])) {
      if (!Vr.isUndefined(t[l]))
        return i(void 0, t[l]);
    } else
      return i(void 0, r[l]);
  }
  function o(l) {
    if (l in r)
      return i(t[l], r[l]);
    if (l in t)
      return i(void 0, t[l]);
  }
  var c = { url: s, method: s, data: s, baseURL: u, transformRequest: u, transformResponse: u, paramsSerializer: u, timeout: u, timeoutMessage: u, withCredentials: u, adapter: u, responseType: u, xsrfCookieName: u, xsrfHeaderName: u, onUploadProgress: u, onDownloadProgress: u, decompress: u, maxContentLength: u, maxBodyLength: u, transport: u, httpAgent: u, httpsAgent: u, cancelToken: u, socketPath: u, responseEncoding: u, validateStatus: o };
  return Vr.forEach(Object.keys(t).concat(Object.keys(r)), function(d) {
    var v = c[d] || a, h = v(d);
    Vr.isUndefined(h) && v !== o || (n[d] = h);
  }), n;
}, ru, zc;
function Hd() {
  return zc || (zc = 1, ru = { version: "0.25.0" }), ru;
}
var Zv = Hd().version, go = {};
["object", "boolean", "number", "function", "string", "symbol"].forEach(function(e, t) {
  go[e] = function(n) {
    return typeof n === e || "a" + (t < 1 ? "n " : " ") + e;
  };
});
var Xc = {};
go.transitional = function(t, r, n) {
  function i(a, s) {
    return "[Axios v" + Zv + "] Transitional option '" + a + "'" + s + (n ? ". " + n : "");
  }
  return function(a, s, u) {
    if (t === !1)
      throw new Error(i(s, " has been removed" + (r ? " in " + r : "")));
    return r && !Xc[s] && (Xc[s] = !0, console.warn(i(s, " has been deprecated since v" + r + " and will be removed in the near future"))), t ? t(a, s, u) : !0;
  };
};
function Qv(e, t, r) {
  if (typeof e != "object")
    throw new TypeError("options must be an object");
  for (var n = Object.keys(e), i = n.length; i-- > 0; ) {
    var a = n[i], s = t[a];
    if (s) {
      var u = e[a], o = u === void 0 || s(u, a, e);
      if (o !== !0)
        throw new TypeError("option " + a + " must be " + o);
      continue;
    }
    if (r !== !0)
      throw Error("Unknown option " + a);
  }
}
var xv = { assertOptions: Qv, validators: go }, Wd = $r, em = Fd, Zc = $v, Qc = Xv, os = Gd, jd = xv, oi = jd.validators;
function la(e) {
  this.defaults = e, this.interceptors = { request: new Zc(), response: new Zc() };
}
la.prototype.request = function(t, r) {
  if (typeof t == "string" ? (r = r || {}, r.url = t) : r = t || {}, !r.url)
    throw new Error("Provided config url is not valid");
  r = os(this.defaults, r), r.method ? r.method = r.method.toLowerCase() : this.defaults.method ? r.method = this.defaults.method.toLowerCase() : r.method = "get";
  var n = r.transitional;
  n !== void 0 && jd.assertOptions(n, { silentJSONParsing: oi.transitional(oi.boolean), forcedJSONParsing: oi.transitional(oi.boolean), clarifyTimeoutError: oi.transitional(oi.boolean) }, !1);
  var i = [], a = !0;
  this.interceptors.request.forEach(function(h) {
    typeof h.runWhen == "function" && h.runWhen(r) === !1 || (a = a && h.synchronous, i.unshift(h.fulfilled, h.rejected));
  });
  var s = [];
  this.interceptors.response.forEach(function(h) {
    s.push(h.fulfilled, h.rejected);
  });
  var u;
  if (!a) {
    var o = [Qc, void 0];
    for (Array.prototype.unshift.apply(o, i), o = o.concat(s), u = Promise.resolve(r); o.length; )
      u = u.then(o.shift(), o.shift());
    return u;
  }
  for (var c = r; i.length; ) {
    var l = i.shift(), d = i.shift();
    try {
      c = l(c);
    } catch (v) {
      d(v);
      break;
    }
  }
  try {
    u = Qc(c);
  } catch (v) {
    return Promise.reject(v);
  }
  for (; s.length; )
    u = u.then(s.shift(), s.shift());
  return u;
};
la.prototype.getUri = function(t) {
  if (!t.url)
    throw new Error("Provided config url is not valid");
  return t = os(this.defaults, t), em(t.url, t.params, t.paramsSerializer).replace(/^\?/, "");
};
Wd.forEach(["delete", "get", "head", "options"], function(t) {
  la.prototype[t] = function(r, n) {
    return this.request(os(n || {}, { method: t, url: r, data: (n || {}).data }));
  };
});
Wd.forEach(["post", "put", "patch"], function(t) {
  la.prototype[t] = function(r, n, i) {
    return this.request(os(i || {}, { method: t, url: r, data: n }));
  };
});
var rm = la, tu, xc;
function tm() {
  if (xc)
    return tu;
  xc = 1;
  var e = ss();
  function t(r) {
    if (typeof r != "function")
      throw new TypeError("executor must be a function.");
    var n;
    this.promise = new Promise(function(s) {
      n = s;
    });
    var i = this;
    this.promise.then(function(a) {
      if (i._listeners) {
        var s, u = i._listeners.length;
        for (s = 0; s < u; s++)
          i._listeners[s](a);
        i._listeners = null;
      }
    }), this.promise.then = function(a) {
      var s, u = new Promise(function(o) {
        i.subscribe(o), s = o;
      }).then(a);
      return u.cancel = function() {
        i.unsubscribe(s);
      }, u;
    }, r(function(s) {
      i.reason || (i.reason = new e(s), n(i.reason));
    });
  }
  return t.prototype.throwIfRequested = function() {
    if (this.reason)
      throw this.reason;
  }, t.prototype.subscribe = function(n) {
    if (this.reason) {
      n(this.reason);
      return;
    }
    this._listeners ? this._listeners.push(n) : this._listeners = [n];
  }, t.prototype.unsubscribe = function(n) {
    if (this._listeners) {
      var i = this._listeners.indexOf(n);
      i !== -1 && this._listeners.splice(i, 1);
    }
  }, t.source = function() {
    var n, i = new t(function(s) {
      n = s;
    });
    return { token: i, cancel: n };
  }, tu = t, tu;
}
var nu, el;
function nm() {
  return el || (el = 1, nu = function(t) {
    return function(n) {
      return t.apply(null, n);
    };
  }), nu;
}
var iu, rl;
function im() {
  if (rl)
    return iu;
  rl = 1;
  var e = $r;
  return iu = function(r) {
    return e.isObject(r) && r.isAxiosError === !0;
  }, iu;
}
var tl = $r, am = $d, $a = rm, sm = Gd, um = us();
function Jd(e) {
  var t = new $a(e), r = am($a.prototype.request, t);
  return tl.extend(r, $a.prototype, t), tl.extend(r, t), r.create = function(i) {
    return Jd(sm(e, i));
  }, r;
}
var $t = Jd(um);
$t.Axios = $a;
$t.Cancel = ss();
$t.CancelToken = tm();
$t.isCancel = qd();
$t.VERSION = Hd().version;
$t.all = function(t) {
  return Promise.all(t);
};
$t.spread = nm();
$t.isAxiosError = im();
gv.exports = $t;
Wa.default = $t;
(function(e) {
  e.exports = Wa;
})(mv);
var Iu = /* @__PURE__ */ vv(Su), Kd = "hXgU8Wc8pwuGNq9ms5q9Hh";
if (typeof process != "undefined") {
  var ci;
  (ci = process) !== null && ci !== void 0 && (ci = ci.env) !== null && ci !== void 0 && ci.FLAGSMITH_ENVIRONMENT_KEY && (Kd = process.env.FLAGSMITH_ENVIRONMENT_KEY);
}
function om() {
  var e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [], t = {};
  return e.forEach(function(r) {
    t[r.feature.name] = { enabled: r.enabled, value: r.feature_state_value };
  }), t;
}
var cm = /* @__PURE__ */ function() {
  function e() {
    var t = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : Kd;
    w(this, e), this.flags = {}, this.environmentKey = null, this.environmentKey = t, this.identify = this.identify.bind(this), this.getValue = this.getValue.bind(this), this.hasFeature = this.hasFeature.bind(this), this.getAllFlags = this.getAllFlags.bind(this);
  }
  return b(e, [{ key: "identify", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      var a, s, u, o, c, l, d, v, h = arguments;
      return p().wrap(function(T) {
        for (; ; )
          switch (T.prev = T.next) {
            case 0:
              return a = h.length > 1 && h[1] !== void 0 ? h[1] : {}, s = h.length > 2 && h[2] !== void 0 ? h[2] : !1, u = h.length > 3 && h[3] !== void 0 ? h[3] : 5e3, o = h.length > 4 && h[4] !== void 0 ? h[4] : "edge.api.flagsmith.com", c = JSON.parse(JSON.stringify(a)), l = Object.entries(c).map(function(y) {
                return { trait_key: y[0], trait_value: y[1] };
              }), T.prev = 6, d = "_" + (Math.random() + 1).toString(36).substring(2), T.next = 10, Iu.post("https://".concat(o, "/api/v1/identities/"), { identifier: i + (s ? d : ""), traits: l }, { headers: { "Content-Type": "application/json", "X-Environment-Key": this.environmentKey }, timeout: u });
            case 10:
              v = T.sent, this.flags = om(v.data.flags || []), T.next = 16;
              break;
            case 14:
              T.prev = 14, T.t0 = T.catch(6);
            case 16:
              return T.abrupt("return", this.flags);
            case 17:
            case "end":
              return T.stop();
          }
      }, n, this, [[6, 14]]);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "getValue", value: function(r) {
    return this.flags && this.flags[r] && this.flags[r].value;
  } }, { key: "hasFeature", value: function(r) {
    return this.flags && this.flags[r] && this.flags[r].enabled;
  } }, { key: "getAllFlags", value: function() {
    return this.flags;
  } }]), e;
}(), Oe = new cm(), Yd = [-2, -1, 0, 1, 2], lm = [0, 1, 2, 3, 4];
function dm(e) {
  e = e.trim();
  var t = "0", r = "0", n = "0";
  return e.length == 4 ? (t = "0x" + e[1] + e[1], r = "0x" + e[2] + e[2], n = "0x" + e[3] + e[3]) : e.length > 6 && (t = "0x" + e[1] + e[2], r = "0x" + e[3] + e[4], n = "0x" + e[5] + e[6]), [+t, +r, +n];
}
var fm = function(t, r, n) {
  var i, a, s;
  if (r == 0)
    i = a = s = n;
  else {
    var u = function(d, v, h) {
      return h < 0 && (h += 1), h > 1 && (h -= 1), h < 0.16666666666666666 ? d + (v - d) * 6 * h : h < 0.5 ? v : h < 0.6666666666666666 ? d + (v - d) * (0.6666666666666666 - h) * 6 : d;
    }, o = n < 0.5 ? n * (1 + r) : n + r - n * r, c = 2 * n - o;
    i = u(c, o, t + 1 / 3), a = u(c, o, t), s = u(c, o, t - 1 / 3);
  }
  return [Math.round(i * 255), Math.round(a * 255), Math.round(s * 255)];
}, pm = function(t, r, n) {
  t /= 255, r /= 255, n /= 255;
  var i = Math.max(t, r, n), a = Math.min(t, r, n), s, u, o = (i + a) / 2;
  if (i == a)
    s = u = 0;
  else {
    var c = i - a;
    switch (u = o > 0.5 ? c / (2 - i - a) : c / (i + a), i) {
      case t:
        s = (r - n) / c + (r < n ? 6 : 0);
        break;
      case r:
        s = (n - t) / c + 2;
        break;
      case n:
        s = (t - r) / c + 4;
        break;
    }
    s /= 6;
  }
  return [s, u, o];
}, hm = function(t, r, n) {
  var i = function(s) {
    return s.toString(16).padStart(2, "0");
  };
  return "#".concat(i(t)).concat(i(r)).concat(i(n));
}, zd = function(t) {
  var r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Yd, n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0.4, i = [], a = dm(t), s = Ne(a, 3), u = s[0], o = s[1], c = s[2], l = pm(u, o, c), d = Ne(l, 3), v = d[0], h = d[1], m = d[2], T = Math.round(m * 100);
  T > 70 ? n = 0.8 : T > 60 ? n = 0.9 : T < 10 ? n = 0.075 : T < 42 && (n = 0.3);
  var y = r.findIndex(function(dr) {
    return dr === 0;
  });
  if (y === -1)
    throw new Error("Invalid reducer provided, it must contain atleast one zero");
  var _ = 5 - y, C = y + 1, D = (100 - T) / _, I = T / C, O = or(r), q;
  try {
    for (O.s(); !(q = O.n()).done; ) {
      var F = q.value, H = void 0;
      F < 0 ? H = T + F * I * n : F > 0 ? H = T + F * D * n : H = T;
      var fe = fm(v, h, H / 100), x = Ne(fe, 3), pe = x[0], Be = x[1], Q = x[2];
      i.push(hm(pe, Be, Q));
    }
  } catch (dr) {
    O.e(dr);
  } finally {
    O.f();
  }
  return i;
}, nl = { dark: { background: { 1e3: "#252525", 900: "#2F2F2F", 800: "#323232", 700: "#3E3E3E", 600: "#4A4A4A" }, text: "#F5F5F5", "video-bg": "#1C1C1C" }, light: { background: { 1e3: "#FFFFFF", 900: "#F5F5F5", 800: "#EBEBEB", 700: "#E0E0E0", 600: "#D6D6D6" }, text: "#111111", "text-on-brand": "#ffffff", "video-bg": "#DADADA" } }, vm = function(t) {
  var r = zd(t, Yd), n = Ne(r, 5), i = n[0], a = n[1], s = n[2], u = n[3], o = n[4];
  return { 300: i, 400: a, 500: s, 600: u, 700: o };
}, mm = function(t) {
  if (t === "#FFFFFF")
    return nl.light.background;
  if (t === "#000000")
    return nl.dark.background;
  var r = zd(t, lm), n = Ne(r, 5), i = n[0], a = n[1], s = n[2], u = n[3], o = n[4];
  return { 1e3: i, 900: a, 800: s, 700: u, 600: o };
};
function gm() {
  this.__data__ = [], this.size = 0;
}
function _t(e, t) {
  return e === t || e !== e && t !== t;
}
function cs(e, t) {
  for (var r = e.length; r--; )
    if (_t(e[r][0], t))
      return r;
  return -1;
}
var ym = Array.prototype, Tm = ym.splice;
function km(e) {
  var t = this.__data__, r = cs(t, e);
  if (r < 0)
    return !1;
  var n = t.length - 1;
  return r == n ? t.pop() : Tm.call(t, r, 1), --this.size, !0;
}
function wm(e) {
  var t = this.__data__, r = cs(t, e);
  return r < 0 ? void 0 : t[r][1];
}
function bm(e) {
  return cs(this.__data__, e) > -1;
}
function _m(e, t) {
  var r = this.__data__, n = cs(r, e);
  return n < 0 ? (++this.size, r.push([e, t])) : r[n][1] = t, this;
}
function tn(e) {
  var t = -1, r = e == null ? 0 : e.length;
  for (this.clear(); ++t < r; ) {
    var n = e[t];
    this.set(n[0], n[1]);
  }
}
tn.prototype.clear = gm;
tn.prototype.delete = km;
tn.prototype.get = wm;
tn.prototype.has = bm;
tn.prototype.set = _m;
function Em() {
  this.__data__ = new tn(), this.size = 0;
}
function Am(e) {
  var t = this.__data__, r = t.delete(e);
  return this.size = t.size, r;
}
function Rm(e) {
  return this.__data__.get(e);
}
function Sm(e) {
  return this.__data__.has(e);
}
var Pm = typeof global == "object" && global && global.Object === Object && global, Xd = Pm, Cm = typeof self == "object" && self && self.Object === Object && self, Im = Xd || Cm || Function("return this")(), ar = Im, Dm = ar.Symbol, mr = Dm, Zd = Object.prototype, Mm = Zd.hasOwnProperty, Om = Zd.toString, Di = mr ? mr.toStringTag : void 0;
function $m(e) {
  var t = Mm.call(e, Di), r = e[Di];
  try {
    e[Di] = void 0;
    var n = !0;
  } catch (a) {
  }
  var i = Om.call(e);
  return n && (t ? e[Di] = r : delete e[Di]), i;
}
var Nm = Object.prototype, Lm = Nm.toString;
function Um(e) {
  return Lm.call(e);
}
var Fm = "[object Null]", Vm = "[object Undefined]", il = mr ? mr.toStringTag : void 0;
function Ar(e) {
  return e == null ? e === void 0 ? Vm : Fm : il && il in Object(e) ? $m(e) : Um(e);
}
function Ge(e) {
  var t = typeof e;
  return e != null && (t == "object" || t == "function");
}
var Bm = "[object AsyncFunction]", qm = "[object Function]", Gm = "[object GeneratorFunction]", Hm = "[object Proxy]";
function nn(e) {
  if (!Ge(e))
    return !1;
  var t = Ar(e);
  return t == qm || t == Gm || t == Bm || t == Hm;
}
var Wm = ar["__core-js_shared__"], Na = Wm, al = function() {
  var e = /[^.]+$/.exec(Na && Na.keys && Na.keys.IE_PROTO || "");
  return e ? "Symbol(src)_1." + e : "";
}();
function jm(e) {
  return !!al && al in e;
}
var Jm = Function.prototype, Km = Jm.toString;
function Qn(e) {
  if (e != null) {
    try {
      return Km.call(e);
    } catch (t) {
    }
    try {
      return e + "";
    } catch (t) {
    }
  }
  return "";
}
var Ym = /[\\^$.*+?()[\]{}|]/g, zm = /^\[object .+?Constructor\]$/, Xm = Function.prototype, Zm = Object.prototype, Qm = Xm.toString, xm = Zm.hasOwnProperty, eg = RegExp("^" + Qm.call(xm).replace(Ym, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");
function Qd(e) {
  if (!Ge(e) || jm(e))
    return !1;
  var t = nn(e) ? eg : zm;
  return t.test(Qn(e));
}
function rg(e, t) {
  return e == null ? void 0 : e[t];
}
function xn(e, t) {
  var r = rg(e, t);
  return Qd(r) ? r : void 0;
}
var tg = xn(ar, "Map"), ta = tg, ng = xn(Object, "create"), na = ng;
function ig() {
  this.__data__ = na ? na(null) : {}, this.size = 0;
}
function ag(e) {
  var t = this.has(e) && delete this.__data__[e];
  return this.size -= t ? 1 : 0, t;
}
var sg = "__lodash_hash_undefined__", ug = Object.prototype, og = ug.hasOwnProperty;
function cg(e) {
  var t = this.__data__;
  if (na) {
    var r = t[e];
    return r === sg ? void 0 : r;
  }
  return og.call(t, e) ? t[e] : void 0;
}
var lg = Object.prototype, dg = lg.hasOwnProperty;
function fg(e) {
  var t = this.__data__;
  return na ? t[e] !== void 0 : dg.call(t, e);
}
var pg = "__lodash_hash_undefined__";
function hg(e, t) {
  var r = this.__data__;
  return this.size += this.has(e) ? 0 : 1, r[e] = na && t === void 0 ? pg : t, this;
}
function Yn(e) {
  var t = -1, r = e == null ? 0 : e.length;
  for (this.clear(); ++t < r; ) {
    var n = e[t];
    this.set(n[0], n[1]);
  }
}
Yn.prototype.clear = ig;
Yn.prototype.delete = ag;
Yn.prototype.get = cg;
Yn.prototype.has = fg;
Yn.prototype.set = hg;
function vg() {
  this.size = 0, this.__data__ = { hash: new Yn(), map: new (ta || tn)(), string: new Yn() };
}
function mg(e) {
  var t = typeof e;
  return t == "string" || t == "number" || t == "symbol" || t == "boolean" ? e !== "__proto__" : e === null;
}
function ls(e, t) {
  var r = e.__data__;
  return mg(t) ? r[typeof t == "string" ? "string" : "hash"] : r.map;
}
function gg(e) {
  var t = ls(this, e).delete(e);
  return this.size -= t ? 1 : 0, t;
}
function yg(e) {
  return ls(this, e).get(e);
}
function Tg(e) {
  return ls(this, e).has(e);
}
function kg(e, t) {
  var r = ls(this, e), n = r.size;
  return r.set(e, t), this.size += r.size == n ? 0 : 1, this;
}
function an(e) {
  var t = -1, r = e == null ? 0 : e.length;
  for (this.clear(); ++t < r; ) {
    var n = e[t];
    this.set(n[0], n[1]);
  }
}
an.prototype.clear = vg;
an.prototype.delete = gg;
an.prototype.get = yg;
an.prototype.has = Tg;
an.prototype.set = kg;
var wg = 200;
function bg(e, t) {
  var r = this.__data__;
  if (r instanceof tn) {
    var n = r.__data__;
    if (!ta || n.length < wg - 1)
      return n.push([e, t]), this.size = ++r.size, this;
    r = this.__data__ = new an(n);
  }
  return r.set(e, t), this.size = r.size, this;
}
function kt(e) {
  var t = this.__data__ = new tn(e);
  this.size = t.size;
}
kt.prototype.clear = Em;
kt.prototype.delete = Am;
kt.prototype.get = Rm;
kt.prototype.has = Sm;
kt.prototype.set = bg;
function ht(e, t) {
  for (var r = -1, n = e == null ? 0 : e.length; ++r < n && t(e[r], r, e) !== !1; )
    ;
  return e;
}
var _g = function() {
  try {
    var e = xn(Object, "defineProperty");
    return e({}, "", {}), e;
  } catch (t) {
  }
}(), ja = _g;
function sn(e, t, r) {
  t == "__proto__" && ja ? ja(e, t, { configurable: !0, enumerable: !0, value: r, writable: !0 }) : e[t] = r;
}
var Eg = Object.prototype, Ag = Eg.hasOwnProperty;
function da(e, t, r) {
  var n = e[t];
  (!(Ag.call(e, t) && _t(n, r)) || r === void 0 && !(t in e)) && sn(e, t, r);
}
function Nt(e, t, r, n) {
  var i = !r;
  r || (r = {});
  for (var a = -1, s = t.length; ++a < s; ) {
    var u = t[a], o = n ? n(r[u], e[u], u, r, e) : void 0;
    o === void 0 && (o = e[u]), i ? sn(r, u, o) : da(r, u, o);
  }
  return r;
}
function yo(e, t) {
  for (var r = -1, n = Array(e); ++r < e; )
    n[r] = t(r);
  return n;
}
function je(e) {
  return e != null && typeof e == "object";
}
var Rg = "[object Arguments]";
function sl(e) {
  return je(e) && Ar(e) == Rg;
}
var xd = Object.prototype, Sg = xd.hasOwnProperty, Pg = xd.propertyIsEnumerable, Cg = sl(function() {
  return arguments;
}()) ? sl : function(e) {
  return je(e) && Sg.call(e, "callee") && !Pg.call(e, "callee");
}, zn = Cg, Ig = Array.isArray, se = Ig;
function To() {
  return !1;
}
var ef = typeof exports == "object" && exports && !exports.nodeType && exports, ul = ef && typeof module == "object" && module && !module.nodeType && module, Dg = ul && ul.exports === ef, ol = Dg ? ar.Buffer : void 0, Mg = ol ? ol.isBuffer : void 0, Og = Mg || To, En = Og, $g = 9007199254740991, Ng = /^(?:0|[1-9]\d*)$/;
function un(e, t) {
  var r = typeof e;
  return t = t == null ? $g : t, !!t && (r == "number" || r != "symbol" && Ng.test(e)) && e > -1 && e % 1 == 0 && e < t;
}
var Lg = 9007199254740991;
function ds(e) {
  return typeof e == "number" && e > -1 && e % 1 == 0 && e <= Lg;
}
var Ug = "[object Arguments]", Fg = "[object Array]", Vg = "[object Boolean]", Bg = "[object Date]", qg = "[object Error]", Gg = "[object Function]", Hg = "[object Map]", Wg = "[object Number]", jg = "[object Object]", Jg = "[object RegExp]", Kg = "[object Set]", Yg = "[object String]", zg = "[object WeakMap]", Xg = "[object ArrayBuffer]", Zg = "[object DataView]", Qg = "[object Float32Array]", xg = "[object Float64Array]", ey = "[object Int8Array]", ry = "[object Int16Array]", ty = "[object Int32Array]", ny = "[object Uint8Array]", iy = "[object Uint8ClampedArray]", ay = "[object Uint16Array]", sy = "[object Uint32Array]", Fe = {};
Fe[Qg] = Fe[xg] = Fe[ey] = Fe[ry] = Fe[ty] = Fe[ny] = Fe[iy] = Fe[ay] = Fe[sy] = !0;
Fe[Ug] = Fe[Fg] = Fe[Xg] = Fe[Vg] = Fe[Zg] = Fe[Bg] = Fe[qg] = Fe[Gg] = Fe[Hg] = Fe[Wg] = Fe[jg] = Fe[Jg] = Fe[Kg] = Fe[Yg] = Fe[zg] = !1;
function uy(e) {
  return je(e) && ds(e.length) && !!Fe[Ar(e)];
}
function zr(e) {
  return function(t) {
    return e(t);
  };
}
var rf = typeof exports == "object" && exports && !exports.nodeType && exports, Ji = rf && typeof module == "object" && module && !module.nodeType && module, oy = Ji && Ji.exports === rf, au = oy && Xd.process, cy = function() {
  try {
    var e = Ji && Ji.require && Ji.require("util").types;
    return e || au && au.binding && au.binding("util");
  } catch (t) {
  }
}(), lt = cy, cl = lt && lt.isTypedArray, ly = cl ? zr(cl) : uy, yi = ly, dy = Object.prototype, fy = dy.hasOwnProperty;
function tf(e, t) {
  var r = se(e), n = !r && zn(e), i = !r && !n && En(e), a = !r && !n && !i && yi(e), s = r || n || i || a, u = s ? yo(e.length, String) : [], o = u.length;
  for (var c in e)
    (t || fy.call(e, c)) && !(s && // Safari 9 has enumerable `arguments.length` in strict mode.
    (c == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
    i && (c == "offset" || c == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
    a && (c == "buffer" || c == "byteLength" || c == "byteOffset") || // Skip index properties.
    un(c, o))) && u.push(c);
  return u;
}
var py = Object.prototype;
function fa(e) {
  var t = e && e.constructor, r = typeof t == "function" && t.prototype || py;
  return e === r;
}
function nf(e, t) {
  return function(r) {
    return e(t(r));
  };
}
var hy = nf(Object.keys, Object), vy = hy, my = Object.prototype, gy = my.hasOwnProperty;
function ko(e) {
  if (!fa(e))
    return vy(e);
  var t = [];
  for (var r in Object(e))
    gy.call(e, r) && r != "constructor" && t.push(r);
  return t;
}
function Nr(e) {
  return e != null && ds(e.length) && !nn(e);
}
function nr(e) {
  return Nr(e) ? tf(e) : ko(e);
}
function af(e, t) {
  return e && Nt(t, nr(t), e);
}
function yy(e) {
  var t = [];
  if (e != null)
    for (var r in Object(e))
      t.push(r);
  return t;
}
var Ty = Object.prototype, ky = Ty.hasOwnProperty;
function wy(e) {
  if (!Ge(e))
    return yy(e);
  var t = fa(e), r = [];
  for (var n in e)
    n == "constructor" && (t || !ky.call(e, n)) || r.push(n);
  return r;
}
function Lr(e) {
  return Nr(e) ? tf(e, !0) : wy(e);
}
function by(e, t) {
  return e && Nt(t, Lr(t), e);
}
var sf = typeof exports == "object" && exports && !exports.nodeType && exports, ll = sf && typeof module == "object" && module && !module.nodeType && module, _y = ll && ll.exports === sf, dl = _y ? ar.Buffer : void 0, fl = dl ? dl.allocUnsafe : void 0;
function uf(e, t) {
  if (t)
    return e.slice();
  var r = e.length, n = fl ? fl(r) : new e.constructor(r);
  return e.copy(n), n;
}
function Or(e, t) {
  var r = -1, n = e.length;
  for (t || (t = Array(n)); ++r < n; )
    t[r] = e[r];
  return t;
}
function Pn(e, t) {
  for (var r = -1, n = e == null ? 0 : e.length, i = 0, a = []; ++r < n; ) {
    var s = e[r];
    t(s, r, e) && (a[i++] = s);
  }
  return a;
}
function wo() {
  return [];
}
var Ey = Object.prototype, Ay = Ey.propertyIsEnumerable, pl = Object.getOwnPropertySymbols, Ry = pl ? function(e) {
  return e == null ? [] : (e = Object(e), Pn(pl(e), function(t) {
    return Ay.call(e, t);
  }));
} : wo, bo = Ry;
function Sy(e, t) {
  return Nt(e, bo(e), t);
}
function Cn(e, t) {
  for (var r = -1, n = t.length, i = e.length; ++r < n; )
    e[i + r] = t[r];
  return e;
}
var Py = nf(Object.getPrototypeOf, Object), fs = Py, Cy = Object.getOwnPropertySymbols, Iy = Cy ? function(e) {
  for (var t = []; e; )
    Cn(t, bo(e)), e = fs(e);
  return t;
} : wo, of = Iy;
function Dy(e, t) {
  return Nt(e, of(e), t);
}
function cf(e, t, r) {
  var n = t(e);
  return se(e) ? n : Cn(n, r(e));
}
function Du(e) {
  return cf(e, nr, bo);
}
function _o(e) {
  return cf(e, Lr, of);
}
var My = xn(ar, "DataView"), Mu = My, Oy = xn(ar, "Promise"), Ou = Oy, $y = xn(ar, "Set"), hi = $y, Ny = xn(ar, "WeakMap"), ia = Ny, hl = "[object Map]", Ly = "[object Object]", vl = "[object Promise]", ml = "[object Set]", gl = "[object WeakMap]", yl = "[object DataView]", Uy = Qn(Mu), Fy = Qn(ta), Vy = Qn(Ou), By = Qn(hi), qy = Qn(ia), Hn = Ar;
(Mu && Hn(new Mu(new ArrayBuffer(1))) != yl || ta && Hn(new ta()) != hl || Ou && Hn(Ou.resolve()) != vl || hi && Hn(new hi()) != ml || ia && Hn(new ia()) != gl) && (Hn = function(t) {
  var r = Ar(t), n = r == Ly ? t.constructor : void 0, i = n ? Qn(n) : "";
  if (i)
    switch (i) {
      case Uy:
        return yl;
      case Fy:
        return hl;
      case Vy:
        return vl;
      case By:
        return ml;
      case qy:
        return gl;
    }
  return r;
});
var Ot = Hn, Gy = Object.prototype, Hy = Gy.hasOwnProperty;
function Wy(e) {
  var t = e.length, r = new e.constructor(t);
  return t && typeof e[0] == "string" && Hy.call(e, "index") && (r.index = e.index, r.input = e.input), r;
}
var jy = ar.Uint8Array, Ja = jy;
function Eo(e) {
  var t = new e.constructor(e.byteLength);
  return new Ja(t).set(new Ja(e)), t;
}
function Jy(e, t) {
  var r = t ? Eo(e.buffer) : e.buffer;
  return new e.constructor(r, e.byteOffset, e.byteLength);
}
var Ky = /\w*$/;
function Yy(e) {
  var t = new e.constructor(e.source, Ky.exec(e));
  return t.lastIndex = e.lastIndex, t;
}
var Tl = mr ? mr.prototype : void 0, kl = Tl ? Tl.valueOf : void 0;
function zy(e) {
  return kl ? Object(kl.call(e)) : {};
}
function lf(e, t) {
  var r = t ? Eo(e.buffer) : e.buffer;
  return new e.constructor(r, e.byteOffset, e.length);
}
var Xy = "[object Boolean]", Zy = "[object Date]", Qy = "[object Map]", xy = "[object Number]", eT = "[object RegExp]", rT = "[object Set]", tT = "[object String]", nT = "[object Symbol]", iT = "[object ArrayBuffer]", aT = "[object DataView]", sT = "[object Float32Array]", uT = "[object Float64Array]", oT = "[object Int8Array]", cT = "[object Int16Array]", lT = "[object Int32Array]", dT = "[object Uint8Array]", fT = "[object Uint8ClampedArray]", pT = "[object Uint16Array]", hT = "[object Uint32Array]";
function vT(e, t, r) {
  var n = e.constructor;
  switch (t) {
    case iT:
      return Eo(e);
    case Xy:
    case Zy:
      return new n(+e);
    case aT:
      return Jy(e, r);
    case sT:
    case uT:
    case oT:
    case cT:
    case lT:
    case dT:
    case fT:
    case pT:
    case hT:
      return lf(e, r);
    case Qy:
      return new n();
    case xy:
    case tT:
      return new n(e);
    case eT:
      return Yy(e);
    case rT:
      return new n();
    case nT:
      return zy(e);
  }
}
var wl = Object.create, mT = function() {
  function e() {
  }
  return function(t) {
    if (!Ge(t))
      return {};
    if (wl)
      return wl(t);
    e.prototype = t;
    var r = new e();
    return e.prototype = void 0, r;
  };
}(), Ti = mT;
function df(e) {
  return typeof e.constructor == "function" && !fa(e) ? Ti(fs(e)) : {};
}
var gT = "[object Map]";
function yT(e) {
  return je(e) && Ot(e) == gT;
}
var bl = lt && lt.isMap, TT = bl ? zr(bl) : yT, ff = TT, kT = "[object Set]";
function wT(e) {
  return je(e) && Ot(e) == kT;
}
var _l = lt && lt.isSet, bT = _l ? zr(_l) : wT, pf = bT, _T = 1, ET = 2, AT = 4, hf = "[object Arguments]", RT = "[object Array]", ST = "[object Boolean]", PT = "[object Date]", CT = "[object Error]", vf = "[object Function]", IT = "[object GeneratorFunction]", DT = "[object Map]", MT = "[object Number]", mf = "[object Object]", OT = "[object RegExp]", $T = "[object Set]", NT = "[object String]", LT = "[object Symbol]", UT = "[object WeakMap]", FT = "[object ArrayBuffer]", VT = "[object DataView]", BT = "[object Float32Array]", qT = "[object Float64Array]", GT = "[object Int8Array]", HT = "[object Int16Array]", WT = "[object Int32Array]", jT = "[object Uint8Array]", JT = "[object Uint8ClampedArray]", KT = "[object Uint16Array]", YT = "[object Uint32Array]", Ue = {};
Ue[hf] = Ue[RT] = Ue[FT] = Ue[VT] = Ue[ST] = Ue[PT] = Ue[BT] = Ue[qT] = Ue[GT] = Ue[HT] = Ue[WT] = Ue[DT] = Ue[MT] = Ue[mf] = Ue[OT] = Ue[$T] = Ue[NT] = Ue[LT] = Ue[jT] = Ue[JT] = Ue[KT] = Ue[YT] = !0;
Ue[CT] = Ue[vf] = Ue[UT] = !1;
function ut(e, t, r, n, i, a) {
  var s, u = t & _T, o = t & ET, c = t & AT;
  if (r && (s = i ? r(e, n, i, a) : r(e)), s !== void 0)
    return s;
  if (!Ge(e))
    return e;
  var l = se(e);
  if (l) {
    if (s = Wy(e), !u)
      return Or(e, s);
  } else {
    var d = Ot(e), v = d == vf || d == IT;
    if (En(e))
      return uf(e, u);
    if (d == mf || d == hf || v && !i) {
      if (s = o || v ? {} : df(e), !u)
        return o ? Dy(e, by(s, e)) : Sy(e, af(s, e));
    } else {
      if (!Ue[d])
        return i ? e : {};
      s = vT(e, d, u);
    }
  }
  a || (a = new kt());
  var h = a.get(e);
  if (h)
    return h;
  a.set(e, s), pf(e) ? e.forEach(function(y) {
    s.add(ut(y, t, r, y, e, a));
  }) : ff(e) && e.forEach(function(y, _) {
    s.set(_, ut(y, t, r, _, e, a));
  });
  var m = c ? o ? _o : Du : o ? Lr : nr, T = l ? void 0 : m(e);
  return ht(T || e, function(y, _) {
    T && (_ = y, y = e[_]), da(s, _, ut(y, t, r, _, e, a));
  }), s;
}
var zT = 1, XT = 4;
function ps(e) {
  return ut(e, zT | XT);
}
var ZT = "[object Symbol]";
function Xr(e) {
  return typeof e == "symbol" || je(e) && Ar(e) == ZT;
}
var QT = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, xT = /^\w*$/;
function Ao(e, t) {
  if (se(e))
    return !1;
  var r = typeof e;
  return r == "number" || r == "symbol" || r == "boolean" || e == null || Xr(e) ? !0 : xT.test(e) || !QT.test(e) || t != null && e in Object(t);
}
var ek = "Expected a function";
function hs(e, t) {
  if (typeof e != "function" || t != null && typeof t != "function")
    throw new TypeError(ek);
  var r = function n() {
    var i = arguments, a = t ? t.apply(this, i) : i[0], s = n.cache;
    if (s.has(a))
      return s.get(a);
    var u = e.apply(this, i);
    return n.cache = s.set(a, u) || s, u;
  };
  return r.cache = new (hs.Cache || an)(), r;
}
hs.Cache = an;
var rk = 500;
function tk(e) {
  var t = hs(e, function(n) {
    return r.size === rk && r.clear(), n;
  }), r = t.cache;
  return t;
}
var nk = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, ik = /\\(\\)?/g, ak = tk(function(e) {
  var t = [];
  return e.charCodeAt(0) === 46 && t.push(""), e.replace(nk, function(r, n, i, a) {
    t.push(i ? a.replace(ik, "$1") : n || r);
  }), t;
}), gf = ak;
function qe(e, t) {
  for (var r = -1, n = e == null ? 0 : e.length, i = Array(n); ++r < n; )
    i[r] = t(e[r], r, e);
  return i;
}
var sk = 1 / 0, El = mr ? mr.prototype : void 0, Al = El ? El.toString : void 0;
function Zr(e) {
  if (typeof e == "string")
    return e;
  if (se(e))
    return qe(e, Zr) + "";
  if (Xr(e))
    return Al ? Al.call(e) : "";
  var t = e + "";
  return t == "0" && 1 / e == -sk ? "-0" : t;
}
function _e(e) {
  return e == null ? "" : Zr(e);
}
function In(e, t) {
  return se(e) ? e : Ao(e, t) ? [e] : gf(_e(e));
}
var uk = 1 / 0;
function Lt(e) {
  if (typeof e == "string" || Xr(e))
    return e;
  var t = e + "";
  return t == "0" && 1 / e == -uk ? "-0" : t;
}
function ei(e, t) {
  t = In(t, e);
  for (var r = 0, n = t.length; e != null && r < n; )
    e = e[Lt(t[r++])];
  return r && r == n ? e : void 0;
}
function Ro(e, t, r) {
  var n = e == null ? void 0 : ei(e, t);
  return n === void 0 ? r : n;
}
var ok = Object.prototype, ck = ok.hasOwnProperty;
function lk(e, t) {
  return e != null && ck.call(e, t);
}
function yf(e, t, r) {
  t = In(t, e);
  for (var n = -1, i = t.length, a = !1; ++n < i; ) {
    var s = Lt(t[n]);
    if (!(a = e != null && r(e, s)))
      break;
    e = e[s];
  }
  return a || ++n != i ? a : (i = e == null ? 0 : e.length, !!i && ds(i) && un(s, i) && (se(e) || zn(e)));
}
function dk(e, t) {
  return e != null && yf(e, t, lk);
}
function pa(e, t, r, n) {
  if (!Ge(e))
    return e;
  t = In(t, e);
  for (var i = -1, a = t.length, s = a - 1, u = e; u != null && ++i < a; ) {
    var o = Lt(t[i]), c = r;
    if (o === "__proto__" || o === "constructor" || o === "prototype")
      return e;
    if (i != s) {
      var l = u[o];
      c = n ? n(l, o, u) : void 0, c === void 0 && (c = Ge(l) ? l : un(t[i + 1]) ? [] : {});
    }
    da(u, o, c), u = u[o];
  }
  return e;
}
function fk(e, t, r) {
  return e == null ? e : pa(e, t, r);
}
var pk = { border_radius: "rounded", border_width: "thin", spacing_base: 4, theme: "dark", colors: { brand: vm("#2160FD"), background: mm("#141414"), danger: "#FF2D2D", text: "#EEEEEE", text_on_brand: "#EEEEEE", success: "#62A504", video_bg: "#191919", warning: "#FFCD07" } };
function Tf() {
  return ps(pk);
}
var hk = { permissions: {
  // webinar
  can_accept_production_requests: !1,
  can_edit_display_name: !0,
  accept_waiting_requests: !1,
  disable_participant_audio: !1,
  disable_participant_screensharing: !1,
  disable_participant_video: !1,
  can_spotlight: !1,
  kick_participant: !1,
  pin_participant: !1,
  can_record: !1,
  can_livestream: !1,
  waiting_room_type: qa.Skip,
  plugins: { can_close: !0, can_start: !0, can_edit_config: !1, config: {} },
  polls: { can_create: !0, can_vote: !0, can_view: !0 },
  media: { video: { can_produce: ee.Allowed, can_consume: Ga.Allowed }, audio: { can_produce: ee.Allowed }, screenshare: { can_produce: ee.Allowed, can_consume: Ga.Allowed } },
  chat: { public: { can_send: !0, text: !0, files: !0 }, private: { can_send: !1, can_receive: !1, text: !1, files: !1 }, channel: {
    // Make sure these are the same in default to ensure consistency in developer portal
    can_create: "ALL",
    can_delete: "ALL",
    can_update: "ALL",
    // end same
    can_read_all: !1
  }, message: {
    // Make sure these are the same in default to ensure consistency in developer portal
    can_delete: "ALL",
    can_edit: "ALL",
    // end same
    delete_cutoff_time_seconds: 0,
    edit_cutoff_time_seconds: 0
  } },
  hidden_participant: !1,
  is_recorder: !1,
  recorder_type: mi.none,
  show_participant_list: !0,
  transcription_enabled: !1,
  can_change_participant_permissions: !1,
  connected_meetings: { can_alter_connected_meetings: !1, can_switch_connected_meetings: !1, can_switch_to_parent_meeting: !1 },
  stage_enabled: !1,
  stage_access: void 0,
  accept_stage_requests: !1
}, ui: { oldTheme: { setup_screen: { is_enabled: !1 }, alone_here: { is_enabled: !1 }, waiting_room: { is_enabled: !1, enable_preview: !0 }, control_bar: { is_enabled: !0, elements: { plugins: !0, screenshare: !0, invite: !1, participants: !0, chat: !0, reactions: !1, polls: !0, fullscreen: !0, layout: !0 } }, header: { is_enabled: !0, elements: { timer: !0, title: !0, participant_count: !0, change_layout: !0 } }, pip_mode: !0, auto_tune: !0, colors: { primary: "#2160FD", secondary: "#1A1A1A", text: "#EEEEEE", background: "#1A1A1A", textPrimary: "#EEEEEE", videoBackground: "#1A1A1A" }, dimensions: { mode: "fillParent" }, grid: { multi: { maxVideoCount: 6, videoFit: "cover" }, single: { maxVideoCount: 6, videoFit: "cover" }, defaultView: "MULTI" }, controls: { pip_toggle: !1 }, plugins: [] }, design_tokens: Tf(), config_diff: {} }, config: { view_type: Yr.GroupCall, media: { audio: { enable_stereo: !1, enable_high_bitrate: !1 }, video: { quality: "vga", frame_rate: 24 }, screenshare: { quality: "hd", frame_rate: 5 } }, max_video_streams: { mobile: 6, desktop: 6 }, max_screenshare_count: 1 }, version: "hybrid" };
function vk() {
  return ps(hk);
}
mi.none, Ha.skip;
var mk = { permissions: {
  // webinar
  can_accept_production_requests: !1,
  can_edit_display_name: !0,
  accept_waiting_requests: !1,
  disable_participant_audio: !1,
  disable_participant_screensharing: !1,
  disable_participant_video: !1,
  can_spotlight: !1,
  kick_participant: !1,
  pin_participant: !1,
  can_record: !1,
  can_livestream: !1,
  waiting_room_type: qa.Skip,
  plugins: { can_close: !0, can_start: !0, can_edit_config: !1, config: {} },
  polls: { can_create: !0, can_vote: !0, can_view: !0 },
  media: { video: { can_produce: ee.Allowed }, audio: { can_produce: ee.Allowed }, screenshare: { can_produce: ee.Allowed } },
  chat: { public: { can_send: !0, text: !0, files: !0 }, private: { can_send: !1, can_receive: !1, text: !1, files: !1 } },
  hidden_participant: !1,
  is_recorder: !1,
  recorder_type: mi.none,
  show_participant_list: !0,
  transcription_enabled: !1,
  can_change_participant_permissions: !1,
  connected_meetings: { can_alter_connected_meetings: !1, can_switch_connected_meetings: !1, can_switch_to_parent_meeting: !1 },
  stage_enabled: !1,
  stage_access: void 0,
  accept_stage_requests: !1
}, ui: { design_tokens: Tf(), config_diff: {} }, config: { view_type: Yr.GroupCall, media: { audio: { enable_stereo: !1, enable_high_bitrate: !1 }, video: { quality: "vga", frame_rate: 24 }, screenshare: { quality: "hd", frame_rate: 5 } }, max_video_streams: { mobile: 6, desktop: 6 }, max_screenshare_count: 1 }, version: "2.0.0" };
function So() {
  return ps(mk);
}
var gk = 0 / 0;
function Rl(e) {
  return typeof e == "number" ? e : Xr(e) ? gk : +e;
}
function vs(e, t) {
  return function(r, n) {
    var i;
    if (r === void 0 && n === void 0)
      return t;
    if (r !== void 0 && (i = r), n !== void 0) {
      if (i === void 0)
        return n;
      typeof r == "string" || typeof n == "string" ? (r = Zr(r), n = Zr(n)) : (r = Rl(r), n = Rl(n)), i = e(r, n);
    }
    return i;
  };
}
var yk = vs(function(e, t) {
  return e + t;
}, 0), Tk = yk, kk = /\s/;
function kf(e) {
  for (var t = e.length; t-- && kk.test(e.charAt(t)); )
    ;
  return t;
}
var wk = /^\s+/;
function wf(e) {
  return e && e.slice(0, kf(e) + 1).replace(wk, "");
}
var Sl = 0 / 0, bk = /^[-+]0x[0-9a-f]+$/i, _k = /^0b[01]+$/i, Ek = /^0o[0-7]+$/i, Ak = parseInt;
function ot(e) {
  if (typeof e == "number")
    return e;
  if (Xr(e))
    return Sl;
  if (Ge(e)) {
    var t = typeof e.valueOf == "function" ? e.valueOf() : e;
    e = Ge(t) ? t + "" : t;
  }
  if (typeof e != "string")
    return e === 0 ? e : +e;
  e = wf(e);
  var r = _k.test(e);
  return r || Ek.test(e) ? Ak(e.slice(2), r ? 2 : 8) : bk.test(e) ? Sl : +e;
}
var Pl = 1 / 0, Rk = 17976931348623157e292;
function en(e) {
  if (!e)
    return e === 0 ? e : 0;
  if (e = ot(e), e === Pl || e === -Pl) {
    var t = e < 0 ? -1 : 1;
    return t * Rk;
  }
  return e === e ? e : 0;
}
function de(e) {
  var t = en(e), r = t % 1;
  return t === t ? r ? t - r : t : 0;
}
var Sk = "Expected a function";
function Pk(e, t) {
  if (typeof t != "function")
    throw new TypeError(Sk);
  return e = de(e), function() {
    if (--e < 1)
      return t.apply(this, arguments);
  };
}
function Rr(e) {
  return e;
}
var Ck = ia && new ia(), Ka = Ck, Ik = Ka ? function(e, t) {
  return Ka.set(e, t), e;
} : Rr, bf = Ik;
function aa(e) {
  return function() {
    var t = arguments;
    switch (t.length) {
      case 0:
        return new e();
      case 1:
        return new e(t[0]);
      case 2:
        return new e(t[0], t[1]);
      case 3:
        return new e(t[0], t[1], t[2]);
      case 4:
        return new e(t[0], t[1], t[2], t[3]);
      case 5:
        return new e(t[0], t[1], t[2], t[3], t[4]);
      case 6:
        return new e(t[0], t[1], t[2], t[3], t[4], t[5]);
      case 7:
        return new e(t[0], t[1], t[2], t[3], t[4], t[5], t[6]);
    }
    var r = Ti(e.prototype), n = e.apply(r, t);
    return Ge(n) ? n : r;
  };
}
var Dk = 1;
function Mk(e, t, r) {
  var n = t & Dk, i = aa(e);
  function a() {
    var s = this && this !== ar && this instanceof a ? i : e;
    return s.apply(n ? r : this, arguments);
  }
  return a;
}
function Qr(e, t, r) {
  switch (r.length) {
    case 0:
      return e.call(t);
    case 1:
      return e.call(t, r[0]);
    case 2:
      return e.call(t, r[0], r[1]);
    case 3:
      return e.call(t, r[0], r[1], r[2]);
  }
  return e.apply(t, r);
}
var Ok = Math.max;
function _f(e, t, r, n) {
  for (var i = -1, a = e.length, s = r.length, u = -1, o = t.length, c = Ok(a - s, 0), l = Array(o + c), d = !n; ++u < o; )
    l[u] = t[u];
  for (; ++i < s; )
    (d || i < a) && (l[r[i]] = e[i]);
  for (; c--; )
    l[u++] = e[i++];
  return l;
}
var $k = Math.max;
function Ef(e, t, r, n) {
  for (var i = -1, a = e.length, s = -1, u = r.length, o = -1, c = t.length, l = $k(a - u, 0), d = Array(l + c), v = !n; ++i < l; )
    d[i] = e[i];
  for (var h = i; ++o < c; )
    d[h + o] = t[o];
  for (; ++s < u; )
    (v || i < a) && (d[h + r[s]] = e[i++]);
  return d;
}
function Nk(e, t) {
  for (var r = e.length, n = 0; r--; )
    e[r] === t && ++n;
  return n;
}
function ms() {
}
var Lk = 4294967295;
function ge(e) {
  this.__wrapped__ = e, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = !1, this.__iteratees__ = [], this.__takeCount__ = Lk, this.__views__ = [];
}
ge.prototype = Ti(ms.prototype);
ge.prototype.constructor = ge;
function Po() {
}
var Uk = Ka ? function(e) {
  return Ka.get(e);
} : Po, Co = Uk, Fk = {}, vi = Fk, Vk = Object.prototype, Bk = Vk.hasOwnProperty;
function La(e) {
  for (var t = e.name + "", r = vi[t], n = Bk.call(vi, t) ? r.length : 0; n--; ) {
    var i = r[n], a = i.func;
    if (a == null || a == e)
      return i.name;
  }
  return t;
}
function dt(e, t) {
  this.__wrapped__ = e, this.__actions__ = [], this.__chain__ = !!t, this.__index__ = 0, this.__values__ = void 0;
}
dt.prototype = Ti(ms.prototype);
dt.prototype.constructor = dt;
function Af(e) {
  if (e instanceof ge)
    return e.clone();
  var t = new dt(e.__wrapped__, e.__chain__);
  return t.__actions__ = Or(e.__actions__), t.__index__ = e.__index__, t.__values__ = e.__values__, t;
}
var qk = Object.prototype, Gk = qk.hasOwnProperty;
function g(e) {
  if (je(e) && !se(e) && !(e instanceof ge)) {
    if (e instanceof dt)
      return e;
    if (Gk.call(e, "__wrapped__"))
      return Af(e);
  }
  return new dt(e);
}
g.prototype = ms.prototype;
g.prototype.constructor = g;
function $u(e) {
  var t = La(e), r = g[t];
  if (typeof r != "function" || !(t in ge.prototype))
    return !1;
  if (e === r)
    return !0;
  var n = Co(r);
  return !!n && e === n[0];
}
var Hk = 800, Wk = 16, jk = Date.now;
function Rf(e) {
  var t = 0, r = 0;
  return function() {
    var n = jk(), i = Wk - (n - r);
    if (r = n, i > 0) {
      if (++t >= Hk)
        return arguments[0];
    } else
      t = 0;
    return e.apply(void 0, arguments);
  };
}
var Jk = Rf(bf), Sf = Jk, Kk = /\{\n\/\* \[wrapped with (.+)\] \*/, Yk = /,? & /;
function zk(e) {
  var t = e.match(Kk);
  return t ? t[1].split(Yk) : [];
}
var Xk = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;
function Zk(e, t) {
  var r = t.length;
  if (!r)
    return e;
  var n = r - 1;
  return t[n] = (r > 1 ? "& " : "") + t[n], t = t.join(r > 2 ? ", " : " "), e.replace(Xk, `{
/* [wrapped with ` + t + `] */
`);
}
function Io(e) {
  return function() {
    return e;
  };
}
var Qk = ja ? function(e, t) {
  return ja(e, "toString", { configurable: !0, enumerable: !1, value: Io(t), writable: !0 });
} : Rr, xk = Qk, ew = Rf(xk), Do = ew;
function gs(e, t, r, n) {
  for (var i = e.length, a = r + (n ? 1 : -1); n ? a-- : ++a < i; )
    if (t(e[a], a, e))
      return a;
  return -1;
}
function Pf(e) {
  return e !== e;
}
function rw(e, t, r) {
  for (var n = r - 1, i = e.length; ++n < i; )
    if (e[n] === t)
      return n;
  return -1;
}
function ki(e, t, r) {
  return t === t ? rw(e, t, r) : gs(e, Pf, r);
}
function ys(e, t) {
  var r = e == null ? 0 : e.length;
  return !!r && ki(e, t, 0) > -1;
}
var tw = 1, nw = 2, iw = 8, aw = 16, sw = 32, uw = 64, ow = 128, cw = 256, lw = 512, dw = [["ary", ow], ["bind", tw], ["bindKey", nw], ["curry", iw], ["curryRight", aw], ["flip", lw], ["partial", sw], ["partialRight", uw], ["rearg", cw]];
function fw(e, t) {
  return ht(dw, function(r) {
    var n = "_." + r[0];
    t & r[1] && !ys(e, n) && e.push(n);
  }), e.sort();
}
function Cf(e, t, r) {
  var n = t + "";
  return Do(e, Zk(n, fw(zk(n), r)));
}
var pw = 1, hw = 2, vw = 4, mw = 8, Cl = 32, Il = 64;
function If(e, t, r, n, i, a, s, u, o, c) {
  var l = t & mw, d = l ? s : void 0, v = l ? void 0 : s, h = l ? a : void 0, m = l ? void 0 : a;
  t |= l ? Cl : Il, t &= ~(l ? Il : Cl), t & vw || (t &= ~(pw | hw));
  var T = [e, t, i, h, d, m, v, u, o, c], y = r.apply(void 0, T);
  return $u(e) && Sf(y, T), y.placeholder = n, Cf(y, e, t);
}
function wi(e) {
  var t = e;
  return t.placeholder;
}
var gw = Math.min;
function yw(e, t) {
  for (var r = e.length, n = gw(t.length, r), i = Or(e); n--; ) {
    var a = t[n];
    e[n] = un(a, r) ? i[a] : void 0;
  }
  return e;
}
var Dl = "__lodash_placeholder__";
function An(e, t) {
  for (var r = -1, n = e.length, i = 0, a = []; ++r < n; ) {
    var s = e[r];
    (s === t || s === Dl) && (e[r] = Dl, a[i++] = r);
  }
  return a;
}
var Tw = 1, kw = 2, ww = 8, bw = 16, _w = 128, Ew = 512;
function Ts(e, t, r, n, i, a, s, u, o, c) {
  var l = t & _w, d = t & Tw, v = t & kw, h = t & (ww | bw), m = t & Ew, T = v ? void 0 : aa(e);
  function y() {
    for (var _ = arguments.length, C = Array(_), D = _; D--; )
      C[D] = arguments[D];
    if (h)
      var I = wi(y), O = Nk(C, I);
    if (n && (C = _f(C, n, i, h)), a && (C = Ef(C, a, s, h)), _ -= O, h && _ < c) {
      var q = An(C, I);
      return If(e, t, Ts, y.placeholder, r, C, q, u, o, c - _);
    }
    var F = d ? r : this, H = v ? F[e] : e;
    return _ = C.length, u ? C = yw(C, u) : m && _ > 1 && C.reverse(), l && o < _ && (C.length = o), this && this !== ar && this instanceof y && (H = T || aa(H)), H.apply(F, C);
  }
  return y;
}
function Aw(e, t, r) {
  var n = aa(e);
  function i() {
    for (var a = arguments.length, s = Array(a), u = a, o = wi(i); u--; )
      s[u] = arguments[u];
    var c = a < 3 && s[0] !== o && s[a - 1] !== o ? [] : An(s, o);
    if (a -= c.length, a < r)
      return If(e, t, Ts, i.placeholder, void 0, s, c, void 0, void 0, r - a);
    var l = this && this !== ar && this instanceof i ? n : e;
    return Qr(l, this, s);
  }
  return i;
}
var Rw = 1;
function Sw(e, t, r, n) {
  var i = t & Rw, a = aa(e);
  function s() {
    for (var u = -1, o = arguments.length, c = -1, l = n.length, d = Array(l + o), v = this && this !== ar && this instanceof s ? a : e; ++c < l; )
      d[c] = n[c];
    for (; o--; )
      d[c++] = arguments[++u];
    return Qr(v, i ? r : this, d);
  }
  return s;
}
var Ml = "__lodash_placeholder__", su = 1, Pw = 2, Cw = 4, Ol = 8, Mi = 128, $l = 256, Iw = Math.min;
function Dw(e, t) {
  var r = e[1], n = t[1], i = r | n, a = i < (su | Pw | Mi), s = n == Mi && r == Ol || n == Mi && r == $l && e[7].length <= t[8] || n == (Mi | $l) && t[7].length <= t[8] && r == Ol;
  if (!(a || s))
    return e;
  n & su && (e[2] = t[2], i |= r & su ? 0 : Cw);
  var u = t[3];
  if (u) {
    var o = e[3];
    e[3] = o ? _f(o, u, t[4]) : u, e[4] = o ? An(e[3], Ml) : t[4];
  }
  return u = t[5], u && (o = e[5], e[5] = o ? Ef(o, u, t[6]) : u, e[6] = o ? An(e[5], Ml) : t[6]), u = t[7], u && (e[7] = u), n & Mi && (e[8] = e[8] == null ? t[8] : Iw(e[8], t[8])), e[9] == null && (e[9] = t[9]), e[0] = t[0], e[1] = i, e;
}
var Mw = "Expected a function", Nl = 1, Ow = 2, uu = 8, ou = 16, cu = 32, Ll = 64, Ul = Math.max;
function on(e, t, r, n, i, a, s, u) {
  var o = t & Ow;
  if (!o && typeof e != "function")
    throw new TypeError(Mw);
  var c = n ? n.length : 0;
  if (c || (t &= ~(cu | Ll), n = i = void 0), s = s === void 0 ? s : Ul(de(s), 0), u = u === void 0 ? u : de(u), c -= i ? i.length : 0, t & Ll) {
    var l = n, d = i;
    n = i = void 0;
  }
  var v = o ? void 0 : Co(e), h = [e, t, r, n, i, l, d, a, s, u];
  if (v && Dw(h, v), e = h[0], t = h[1], r = h[2], n = h[3], i = h[4], u = h[9] = h[9] === void 0 ? o ? 0 : e.length : Ul(h[9] - c, 0), !u && t & (uu | ou) && (t &= ~(uu | ou)), !t || t == Nl)
    var m = Mk(e, t, r);
  else
    t == uu || t == ou ? m = Aw(e, t, u) : (t == cu || t == (Nl | cu)) && !i.length ? m = Sw(e, t, r, n) : m = Ts.apply(void 0, h);
  var T = v ? bf : Sf;
  return Cf(T(m, h), e, t);
}
var $w = 128;
function Df(e, t, r) {
  return t = r ? void 0 : t, t = e && t == null ? e.length : t, on(e, $w, void 0, void 0, void 0, void 0, t);
}
var Fl = Math.max;
function Mf(e, t, r) {
  return t = Fl(t === void 0 ? e.length - 1 : t, 0), function() {
    for (var n = arguments, i = -1, a = Fl(n.length - t, 0), s = Array(a); ++i < a; )
      s[i] = n[t + i];
    i = -1;
    for (var u = Array(t + 1); ++i < t; )
      u[i] = n[i];
    return u[t] = r(s), Qr(e, this, u);
  };
}
function he(e, t) {
  return Do(Mf(e, t, Rr), e + "");
}
function Er(e, t, r) {
  if (!Ge(r))
    return !1;
  var n = typeof t;
  return (n == "number" ? Nr(r) && un(t, r.length) : n == "string" && t in r) ? _t(r[t], e) : !1;
}
function bi(e) {
  return he(function(t, r) {
    var n = -1, i = r.length, a = i > 1 ? r[i - 1] : void 0, s = i > 2 ? r[2] : void 0;
    for (a = e.length > 3 && typeof a == "function" ? (i--, a) : void 0, s && Er(r[0], r[1], s) && (a = i < 3 ? void 0 : a, i = 1), t = Object(t); ++n < i; ) {
      var u = r[n];
      u && e(t, u, n, a);
    }
    return t;
  });
}
var Nw = Object.prototype, Lw = Nw.hasOwnProperty, Uw = bi(function(e, t) {
  if (fa(t) || Nr(t)) {
    Nt(t, nr(t), e);
    return;
  }
  for (var r in t)
    Lw.call(t, r) && da(e, r, t[r]);
}), Fw = Uw, Vw = bi(function(e, t) {
  Nt(t, Lr(t), e);
}), Vl = Vw, Bw = bi(function(e, t, r, n) {
  Nt(t, Lr(t), e, n);
}), Ya = Bw, qw = bi(function(e, t, r, n) {
  Nt(t, nr(t), e, n);
}), Gw = qw;
function Mo(e, t) {
  for (var r = -1, n = t.length, i = Array(n), a = e == null; ++r < n; )
    i[r] = a ? void 0 : Ro(e, t[r]);
  return i;
}
var Bl = mr ? mr.isConcatSpreadable : void 0;
function Hw(e) {
  return se(e) || zn(e) || !!(Bl && e && e[Bl]);
}
function cr(e, t, r, n, i) {
  var a = -1, s = e.length;
  for (r || (r = Hw), i || (i = []); ++a < s; ) {
    var u = e[a];
    t > 0 && r(u) ? t > 1 ? cr(u, t - 1, r, n, i) : Cn(i, u) : n || (i[i.length] = u);
  }
  return i;
}
function Of(e) {
  var t = e == null ? 0 : e.length;
  return t ? cr(e, 1) : [];
}
function cn(e) {
  return Do(Mf(e, void 0, Of), e + "");
}
var Ww = cn(Mo), jw = Ww, Jw = "[object Object]", Kw = Function.prototype, Yw = Object.prototype, $f = Kw.toString, zw = Yw.hasOwnProperty, Xw = $f.call(Object);
function ha(e) {
  if (!je(e) || Ar(e) != Jw)
    return !1;
  var t = fs(e);
  if (t === null)
    return !0;
  var r = zw.call(t, "constructor") && t.constructor;
  return typeof r == "function" && r instanceof r && $f.call(r) == Xw;
}
var Zw = "[object DOMException]", Qw = "[object Error]";
function Oo(e) {
  if (!je(e))
    return !1;
  var t = Ar(e);
  return t == Qw || t == Zw || typeof e.message == "string" && typeof e.name == "string" && !ha(e);
}
var xw = he(function(e, t) {
  try {
    return Qr(e, void 0, t);
  } catch (r) {
    return Oo(r) ? r : new Error(r);
  }
}), Nf = xw, e0 = "Expected a function";
function Lf(e, t) {
  var r;
  if (typeof t != "function")
    throw new TypeError(e0);
  return e = de(e), function() {
    return --e > 0 && (r = t.apply(this, arguments)), e <= 1 && (t = void 0), r;
  };
}
var r0 = 1, t0 = 32, $o = he(function(e, t, r) {
  var n = r0;
  if (r.length) {
    var i = An(r, wi($o));
    n |= t0;
  }
  return on(e, n, t, r, i);
});
$o.placeholder = {};
var Uf = $o, n0 = cn(function(e, t) {
  return ht(t, function(r) {
    r = Lt(r), sn(e, r, Uf(e[r], e));
  }), e;
}), i0 = n0, a0 = 1, s0 = 2, u0 = 32, No = he(function(e, t, r) {
  var n = a0 | s0;
  if (r.length) {
    var i = An(r, wi(No));
    n |= u0;
  }
  return on(t, n, e, r, i);
});
No.placeholder = {};
var o0 = No;
function ft(e, t, r) {
  var n = -1, i = e.length;
  t < 0 && (t = -t > i ? 0 : i + t), r = r > i ? i : r, r < 0 && (r += i), i = t > r ? 0 : r - t >>> 0, t >>>= 0;
  for (var a = Array(i); ++n < i; )
    a[n] = e[n + t];
  return a;
}
function Dn(e, t, r) {
  var n = e.length;
  return r = r === void 0 ? n : r, !t && r >= n ? e : ft(e, t, r);
}
var c0 = "\\ud800-\\udfff", l0 = "\\u0300-\\u036f", d0 = "\\ufe20-\\ufe2f", f0 = "\\u20d0-\\u20ff", p0 = l0 + d0 + f0, h0 = "\\ufe0e\\ufe0f", v0 = "\\u200d", m0 = RegExp("[" + v0 + c0 + p0 + h0 + "]");
function _i(e) {
  return m0.test(e);
}
function g0(e) {
  return e.split("");
}
var Ff = "\\ud800-\\udfff", y0 = "\\u0300-\\u036f", T0 = "\\ufe20-\\ufe2f", k0 = "\\u20d0-\\u20ff", w0 = y0 + T0 + k0, b0 = "\\ufe0e\\ufe0f", _0 = "[" + Ff + "]", Nu = "[" + w0 + "]", Lu = "\\ud83c[\\udffb-\\udfff]", E0 = "(?:" + Nu + "|" + Lu + ")", Vf = "[^" + Ff + "]", Bf = "(?:\\ud83c[\\udde6-\\uddff]){2}", qf = "[\\ud800-\\udbff][\\udc00-\\udfff]", A0 = "\\u200d", Gf = E0 + "?", Hf = "[" + b0 + "]?", R0 = "(?:" + A0 + "(?:" + [Vf, Bf, qf].join("|") + ")" + Hf + Gf + ")*", S0 = Hf + Gf + R0, P0 = "(?:" + [Vf + Nu + "?", Nu, Bf, qf, _0].join("|") + ")", C0 = RegExp(Lu + "(?=" + Lu + ")|" + P0 + S0, "g");
function I0(e) {
  return e.match(C0) || [];
}
function wt(e) {
  return _i(e) ? I0(e) : g0(e);
}
function Wf(e) {
  return function(t) {
    t = _e(t);
    var r = _i(t) ? wt(t) : void 0, n = r ? r[0] : t.charAt(0), i = r ? Dn(r, 1).join("") : t.slice(1);
    return n[e]() + i;
  };
}
var D0 = Wf("toUpperCase"), Lo = D0;
function jf(e) {
  return Lo(_e(e).toLowerCase());
}
function Uo(e, t, r, n) {
  var i = -1, a = e == null ? 0 : e.length;
  for (n && a && (r = e[++i]); ++i < a; )
    r = t(r, e[i], i, e);
  return r;
}
function Fo(e) {
  return function(t) {
    return e == null ? void 0 : e[t];
  };
}
var M0 = {
  // Latin-1 Supplement block.
  À: "A",
  Á: "A",
  Â: "A",
  Ã: "A",
  Ä: "A",
  Å: "A",
  à: "a",
  á: "a",
  â: "a",
  ã: "a",
  ä: "a",
  å: "a",
  Ç: "C",
  ç: "c",
  Ð: "D",
  ð: "d",
  È: "E",
  É: "E",
  Ê: "E",
  Ë: "E",
  è: "e",
  é: "e",
  ê: "e",
  ë: "e",
  Ì: "I",
  Í: "I",
  Î: "I",
  Ï: "I",
  ì: "i",
  í: "i",
  î: "i",
  ï: "i",
  Ñ: "N",
  ñ: "n",
  Ò: "O",
  Ó: "O",
  Ô: "O",
  Õ: "O",
  Ö: "O",
  Ø: "O",
  ò: "o",
  ó: "o",
  ô: "o",
  õ: "o",
  ö: "o",
  ø: "o",
  Ù: "U",
  Ú: "U",
  Û: "U",
  Ü: "U",
  ù: "u",
  ú: "u",
  û: "u",
  ü: "u",
  Ý: "Y",
  ý: "y",
  ÿ: "y",
  Æ: "Ae",
  æ: "ae",
  Þ: "Th",
  þ: "th",
  ß: "ss",
  // Latin Extended-A block.
  Ā: "A",
  Ă: "A",
  Ą: "A",
  ā: "a",
  ă: "a",
  ą: "a",
  Ć: "C",
  Ĉ: "C",
  Ċ: "C",
  Č: "C",
  ć: "c",
  ĉ: "c",
  ċ: "c",
  č: "c",
  Ď: "D",
  Đ: "D",
  ď: "d",
  đ: "d",
  Ē: "E",
  Ĕ: "E",
  Ė: "E",
  Ę: "E",
  Ě: "E",
  ē: "e",
  ĕ: "e",
  ė: "e",
  ę: "e",
  ě: "e",
  Ĝ: "G",
  Ğ: "G",
  Ġ: "G",
  Ģ: "G",
  ĝ: "g",
  ğ: "g",
  ġ: "g",
  ģ: "g",
  Ĥ: "H",
  Ħ: "H",
  ĥ: "h",
  ħ: "h",
  Ĩ: "I",
  Ī: "I",
  Ĭ: "I",
  Į: "I",
  İ: "I",
  ĩ: "i",
  ī: "i",
  ĭ: "i",
  į: "i",
  ı: "i",
  Ĵ: "J",
  ĵ: "j",
  Ķ: "K",
  ķ: "k",
  ĸ: "k",
  Ĺ: "L",
  Ļ: "L",
  Ľ: "L",
  Ŀ: "L",
  Ł: "L",
  ĺ: "l",
  ļ: "l",
  ľ: "l",
  ŀ: "l",
  ł: "l",
  Ń: "N",
  Ņ: "N",
  Ň: "N",
  Ŋ: "N",
  ń: "n",
  ņ: "n",
  ň: "n",
  ŋ: "n",
  Ō: "O",
  Ŏ: "O",
  Ő: "O",
  ō: "o",
  ŏ: "o",
  ő: "o",
  Ŕ: "R",
  Ŗ: "R",
  Ř: "R",
  ŕ: "r",
  ŗ: "r",
  ř: "r",
  Ś: "S",
  Ŝ: "S",
  Ş: "S",
  Š: "S",
  ś: "s",
  ŝ: "s",
  ş: "s",
  š: "s",
  Ţ: "T",
  Ť: "T",
  Ŧ: "T",
  ţ: "t",
  ť: "t",
  ŧ: "t",
  Ũ: "U",
  Ū: "U",
  Ŭ: "U",
  Ů: "U",
  Ű: "U",
  Ų: "U",
  ũ: "u",
  ū: "u",
  ŭ: "u",
  ů: "u",
  ű: "u",
  ų: "u",
  Ŵ: "W",
  ŵ: "w",
  Ŷ: "Y",
  ŷ: "y",
  Ÿ: "Y",
  Ź: "Z",
  Ż: "Z",
  Ž: "Z",
  ź: "z",
  ż: "z",
  ž: "z",
  Ĳ: "IJ",
  ĳ: "ij",
  Œ: "Oe",
  œ: "oe",
  ŉ: "'n",
  ſ: "s"
}, O0 = Fo(M0), $0 = O0, N0 = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, L0 = "\\u0300-\\u036f", U0 = "\\ufe20-\\ufe2f", F0 = "\\u20d0-\\u20ff", V0 = L0 + U0 + F0, B0 = "[" + V0 + "]", q0 = RegExp(B0, "g");
function Jf(e) {
  return e = _e(e), e && e.replace(N0, $0).replace(q0, "");
}
var G0 = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;
function H0(e) {
  return e.match(G0) || [];
}
var W0 = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;
function j0(e) {
  return W0.test(e);
}
var Kf = "\\ud800-\\udfff", J0 = "\\u0300-\\u036f", K0 = "\\ufe20-\\ufe2f", Y0 = "\\u20d0-\\u20ff", z0 = J0 + K0 + Y0, Yf = "\\u2700-\\u27bf", zf = "a-z\\xdf-\\xf6\\xf8-\\xff", X0 = "\\xac\\xb1\\xd7\\xf7", Z0 = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf", Q0 = "\\u2000-\\u206f", x0 = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", Xf = "A-Z\\xc0-\\xd6\\xd8-\\xde", eb = "\\ufe0e\\ufe0f", Zf = X0 + Z0 + Q0 + x0, Qf = "['’]", ql = "[" + Zf + "]", rb = "[" + z0 + "]", xf = "\\d+", tb = "[" + Yf + "]", ep = "[" + zf + "]", rp = "[^" + Kf + Zf + xf + Yf + zf + Xf + "]", nb = "\\ud83c[\\udffb-\\udfff]", ib = "(?:" + rb + "|" + nb + ")", ab = "[^" + Kf + "]", tp = "(?:\\ud83c[\\udde6-\\uddff]){2}", np = "[\\ud800-\\udbff][\\udc00-\\udfff]", li = "[" + Xf + "]", sb = "\\u200d", Gl = "(?:" + ep + "|" + rp + ")", ub = "(?:" + li + "|" + rp + ")", Hl = "(?:" + Qf + "(?:d|ll|m|re|s|t|ve))?", Wl = "(?:" + Qf + "(?:D|LL|M|RE|S|T|VE))?", ip = ib + "?", ap = "[" + eb + "]?", ob = "(?:" + sb + "(?:" + [ab, tp, np].join("|") + ")" + ap + ip + ")*", cb = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", lb = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", db = ap + ip + ob, fb = "(?:" + [tb, tp, np].join("|") + ")" + db, pb = RegExp([li + "?" + ep + "+" + Hl + "(?=" + [ql, li, "$"].join("|") + ")", ub + "+" + Wl + "(?=" + [ql, li + Gl, "$"].join("|") + ")", li + "?" + Gl + "+" + Hl, li + "+" + Wl, lb, cb, xf, fb].join("|"), "g");
function hb(e) {
  return e.match(pb) || [];
}
function sp(e, t, r) {
  return e = _e(e), t = r ? void 0 : t, t === void 0 ? j0(e) ? hb(e) : H0(e) : e.match(t) || [];
}
var vb = "['’]", mb = RegExp(vb, "g");
function Ei(e) {
  return function(t) {
    return Uo(sp(Jf(t).replace(mb, "")), e, "");
  };
}
var gb = Ei(function(e, t, r) {
  return t = t.toLowerCase(), e + (r ? jf(t) : t);
}), yb = gb;
function Tb() {
  if (!arguments.length)
    return [];
  var e = arguments[0];
  return se(e) ? e : [e];
}
var kb = ar.isFinite, wb = Math.min;
function Vo(e) {
  var t = Math[e];
  return function(r, n) {
    if (r = ot(r), n = n == null ? 0 : wb(de(n), 292), n && kb(r)) {
      var i = (_e(r) + "e").split("e"), a = t(i[0] + "e" + (+i[1] + n));
      return i = (_e(a) + "e").split("e"), +(i[0] + "e" + (+i[1] - n));
    }
    return t(r);
  };
}
var bb = Vo("ceil"), _b = bb;
function up(e) {
  var t = g(e);
  return t.__chain__ = !0, t;
}
var Eb = Math.ceil, Ab = Math.max;
function Rb(e, t, r) {
  (r ? Er(e, t, r) : t === void 0) ? t = 1 : t = Ab(de(t), 0);
  var n = e == null ? 0 : e.length;
  if (!n || t < 1)
    return [];
  for (var i = 0, a = 0, s = Array(Eb(n / t)); i < n; )
    s[a++] = ft(e, i, i += t);
  return s;
}
function ri(e, t, r) {
  return e === e && (r !== void 0 && (e = e <= r ? e : r), t !== void 0 && (e = e >= t ? e : t)), e;
}
function Sb(e, t, r) {
  return r === void 0 && (r = t, t = void 0), r !== void 0 && (r = ot(r), r = r === r ? r : 0), t !== void 0 && (t = ot(t), t = t === t ? t : 0), ri(ot(e), t, r);
}
var Pb = 4;
function Cb(e) {
  return ut(e, Pb);
}
var Ib = 1, Db = 4;
function Mb(e, t) {
  return t = typeof t == "function" ? t : void 0, ut(e, Ib | Db, t);
}
var Ob = 4;
function $b(e, t) {
  return t = typeof t == "function" ? t : void 0, ut(e, Ob, t);
}
function Nb() {
  return new dt(this.value(), this.__chain__);
}
function Lb(e) {
  for (var t = -1, r = e == null ? 0 : e.length, n = 0, i = []; ++t < r; ) {
    var a = e[t];
    a && (i[n++] = a);
  }
  return i;
}
function Ub() {
  var e = arguments.length;
  if (!e)
    return [];
  for (var t = Array(e - 1), r = arguments[0], n = e; n--; )
    t[n - 1] = arguments[n];
  return Cn(se(r) ? Or(r) : [r], cr(t, 1));
}
var Fb = "__lodash_hash_undefined__";
function Vb(e) {
  return this.__data__.set(e, Fb), this;
}
function Bb(e) {
  return this.__data__.has(e);
}
function Xn(e) {
  var t = -1, r = e == null ? 0 : e.length;
  for (this.__data__ = new an(); ++t < r; )
    this.add(e[t]);
}
Xn.prototype.add = Xn.prototype.push = Vb;
Xn.prototype.has = Bb;
function Bo(e, t) {
  for (var r = -1, n = e == null ? 0 : e.length; ++r < n; )
    if (t(e[r], r, e))
      return !0;
  return !1;
}
function sa(e, t) {
  return e.has(t);
}
var qb = 1, Gb = 2;
function op(e, t, r, n, i, a) {
  var s = r & qb, u = e.length, o = t.length;
  if (u != o && !(s && o > u))
    return !1;
  var c = a.get(e), l = a.get(t);
  if (c && l)
    return c == t && l == e;
  var d = -1, v = !0, h = r & Gb ? new Xn() : void 0;
  for (a.set(e, t), a.set(t, e); ++d < u; ) {
    var m = e[d], T = t[d];
    if (n)
      var y = s ? n(T, m, d, t, e, a) : n(m, T, d, e, t, a);
    if (y !== void 0) {
      if (y)
        continue;
      v = !1;
      break;
    }
    if (h) {
      if (!Bo(t, function(_, C) {
        if (!sa(h, C) && (m === _ || i(m, _, r, n, a)))
          return h.push(C);
      })) {
        v = !1;
        break;
      }
    } else if (!(m === T || i(m, T, r, n, a))) {
      v = !1;
      break;
    }
  }
  return a.delete(e), a.delete(t), v;
}
function qo(e) {
  var t = -1, r = Array(e.size);
  return e.forEach(function(n, i) {
    r[++t] = [i, n];
  }), r;
}
function ks(e) {
  var t = -1, r = Array(e.size);
  return e.forEach(function(n) {
    r[++t] = n;
  }), r;
}
var Hb = 1, Wb = 2, jb = "[object Boolean]", Jb = "[object Date]", Kb = "[object Error]", Yb = "[object Map]", zb = "[object Number]", Xb = "[object RegExp]", Zb = "[object Set]", Qb = "[object String]", xb = "[object Symbol]", e_ = "[object ArrayBuffer]", r_ = "[object DataView]", jl = mr ? mr.prototype : void 0, lu = jl ? jl.valueOf : void 0;
function t_(e, t, r, n, i, a, s) {
  switch (r) {
    case r_:
      if (e.byteLength != t.byteLength || e.byteOffset != t.byteOffset)
        return !1;
      e = e.buffer, t = t.buffer;
    case e_:
      return !(e.byteLength != t.byteLength || !a(new Ja(e), new Ja(t)));
    case jb:
    case Jb:
    case zb:
      return _t(+e, +t);
    case Kb:
      return e.name == t.name && e.message == t.message;
    case Xb:
    case Qb:
      return e == t + "";
    case Yb:
      var u = qo;
    case Zb:
      var o = n & Hb;
      if (u || (u = ks), e.size != t.size && !o)
        return !1;
      var c = s.get(e);
      if (c)
        return c == t;
      n |= Wb, s.set(e, t);
      var l = op(u(e), u(t), n, i, a, s);
      return s.delete(e), l;
    case xb:
      if (lu)
        return lu.call(e) == lu.call(t);
  }
  return !1;
}
var n_ = 1, i_ = Object.prototype, a_ = i_.hasOwnProperty;
function s_(e, t, r, n, i, a) {
  var s = r & n_, u = Du(e), o = u.length, c = Du(t), l = c.length;
  if (o != l && !s)
    return !1;
  for (var d = o; d--; ) {
    var v = u[d];
    if (!(s ? v in t : a_.call(t, v)))
      return !1;
  }
  var h = a.get(e), m = a.get(t);
  if (h && m)
    return h == t && m == e;
  var T = !0;
  a.set(e, t), a.set(t, e);
  for (var y = s; ++d < o; ) {
    v = u[d];
    var _ = e[v], C = t[v];
    if (n)
      var D = s ? n(C, _, v, t, e, a) : n(_, C, v, e, t, a);
    if (!(D === void 0 ? _ === C || i(_, C, r, n, a) : D)) {
      T = !1;
      break;
    }
    y || (y = v == "constructor");
  }
  if (T && !y) {
    var I = e.constructor, O = t.constructor;
    I != O && "constructor" in e && "constructor" in t && !(typeof I == "function" && I instanceof I && typeof O == "function" && O instanceof O) && (T = !1);
  }
  return a.delete(e), a.delete(t), T;
}
var u_ = 1, Jl = "[object Arguments]", Kl = "[object Array]", Ea = "[object Object]", o_ = Object.prototype, Yl = o_.hasOwnProperty;
function c_(e, t, r, n, i, a) {
  var s = se(e), u = se(t), o = s ? Kl : Ot(e), c = u ? Kl : Ot(t);
  o = o == Jl ? Ea : o, c = c == Jl ? Ea : c;
  var l = o == Ea, d = c == Ea, v = o == c;
  if (v && En(e)) {
    if (!En(t))
      return !1;
    s = !0, l = !1;
  }
  if (v && !l)
    return a || (a = new kt()), s || yi(e) ? op(e, t, r, n, i, a) : t_(e, t, o, r, n, i, a);
  if (!(r & u_)) {
    var h = l && Yl.call(e, "__wrapped__"), m = d && Yl.call(t, "__wrapped__");
    if (h || m) {
      var T = h ? e.value() : e, y = m ? t.value() : t;
      return a || (a = new kt()), i(T, y, r, n, a);
    }
  }
  return v ? (a || (a = new kt()), s_(e, t, r, n, i, a)) : !1;
}
function va(e, t, r, n, i) {
  return e === t ? !0 : e == null || t == null || !je(e) && !je(t) ? e !== e && t !== t : c_(e, t, r, n, va, i);
}
var l_ = 1, d_ = 2;
function Go(e, t, r, n) {
  var i = r.length, a = i, s = !n;
  if (e == null)
    return !a;
  for (e = Object(e); i--; ) {
    var u = r[i];
    if (s && u[2] ? u[1] !== e[u[0]] : !(u[0] in e))
      return !1;
  }
  for (; ++i < a; ) {
    u = r[i];
    var o = u[0], c = e[o], l = u[1];
    if (s && u[2]) {
      if (c === void 0 && !(o in e))
        return !1;
    } else {
      var d = new kt();
      if (n)
        var v = n(c, l, o, e, t, d);
      if (!(v === void 0 ? va(l, c, l_ | d_, n, d) : v))
        return !1;
    }
  }
  return !0;
}
function cp(e) {
  return e === e && !Ge(e);
}
function Ho(e) {
  for (var t = nr(e), r = t.length; r--; ) {
    var n = t[r], i = e[n];
    t[r] = [n, i, cp(i)];
  }
  return t;
}
function lp(e, t) {
  return function(r) {
    return r == null ? !1 : r[e] === t && (t !== void 0 || e in Object(r));
  };
}
function dp(e) {
  var t = Ho(e);
  return t.length == 1 && t[0][2] ? lp(t[0][0], t[0][1]) : function(r) {
    return r === e || Go(r, e, t);
  };
}
function f_(e, t) {
  return e != null && t in Object(e);
}
function Wo(e, t) {
  return e != null && yf(e, t, f_);
}
var p_ = 1, h_ = 2;
function fp(e, t) {
  return Ao(e) && cp(t) ? lp(Lt(e), t) : function(r) {
    var n = Ro(r, e);
    return n === void 0 && n === t ? Wo(r, e) : va(t, n, p_ | h_);
  };
}
function jo(e) {
  return function(t) {
    return t == null ? void 0 : t[e];
  };
}
function v_(e) {
  return function(t) {
    return ei(t, e);
  };
}
function pp(e) {
  return Ao(e) ? jo(Lt(e)) : v_(e);
}
function ae(e) {
  return typeof e == "function" ? e : e == null ? Rr : typeof e == "object" ? se(e) ? fp(e[0], e[1]) : dp(e) : pp(e);
}
var m_ = "Expected a function";
function g_(e) {
  var t = e == null ? 0 : e.length, r = ae;
  return e = t ? qe(e, function(n) {
    if (typeof n[1] != "function")
      throw new TypeError(m_);
    return [r(n[0]), n[1]];
  }) : [], he(function(n) {
    for (var i = -1; ++i < t; ) {
      var a = e[i];
      if (Qr(a[0], this, n))
        return Qr(a[1], this, n);
    }
  });
}
function hp(e, t, r) {
  var n = r.length;
  if (e == null)
    return !n;
  for (e = Object(e); n--; ) {
    var i = r[n], a = t[i], s = e[i];
    if (s === void 0 && !(i in e) || !a(s))
      return !1;
  }
  return !0;
}
function y_(e) {
  var t = nr(e);
  return function(r) {
    return hp(r, e, t);
  };
}
var T_ = 1;
function k_(e) {
  return y_(ut(e, T_));
}
function w_(e, t) {
  return t == null || hp(e, t, nr(t));
}
function b_(e, t, r, n) {
  for (var i = -1, a = e == null ? 0 : e.length; ++i < a; ) {
    var s = e[i];
    t(n, s, r(s), e);
  }
  return n;
}
function vp(e) {
  return function(t, r, n) {
    for (var i = -1, a = Object(t), s = n(t), u = s.length; u--; ) {
      var o = s[e ? u : ++i];
      if (r(a[o], o, a) === !1)
        break;
    }
    return t;
  };
}
var __ = vp(), Jo = __;
function Ut(e, t) {
  return e && Jo(e, t, nr);
}
function mp(e, t) {
  return function(r, n) {
    if (r == null)
      return r;
    if (!Nr(r))
      return e(r, n);
    for (var i = r.length, a = t ? i : -1, s = Object(r); (t ? a-- : ++a < i) && n(s[a], a, s) !== !1; )
      ;
    return r;
  };
}
var E_ = mp(Ut), Mn = E_;
function A_(e, t, r, n) {
  return Mn(e, function(i, a, s) {
    t(n, i, r(i), s);
  }), n;
}
function ws(e, t) {
  return function(r, n) {
    var i = se(r) ? b_ : A_, a = t ? t() : {};
    return i(r, e, ae(n), a);
  };
}
var R_ = Object.prototype, S_ = R_.hasOwnProperty, P_ = ws(function(e, t, r) {
  S_.call(e, r) ? ++e[r] : sn(e, r, 1);
}), C_ = P_;
function I_(e, t) {
  var r = Ti(e);
  return t == null ? r : af(r, t);
}
var D_ = 8;
function Ko(e, t, r) {
  t = r ? void 0 : t;
  var n = on(e, D_, void 0, void 0, void 0, void 0, void 0, t);
  return n.placeholder = Ko.placeholder, n;
}
Ko.placeholder = {};
var M_ = 16;
function Yo(e, t, r) {
  t = r ? void 0 : t;
  var n = on(e, M_, void 0, void 0, void 0, void 0, void 0, t);
  return n.placeholder = Yo.placeholder, n;
}
Yo.placeholder = {};
var O_ = function() {
  return ar.Date.now();
}, Ua = O_, $_ = "Expected a function", N_ = Math.max, L_ = Math.min;
function bs(e, t, r) {
  var n, i, a, s, u, o, c = 0, l = !1, d = !1, v = !0;
  if (typeof e != "function")
    throw new TypeError($_);
  t = ot(t) || 0, Ge(r) && (l = !!r.leading, d = "maxWait" in r, a = d ? N_(ot(r.maxWait) || 0, t) : a, v = "trailing" in r ? !!r.trailing : v);
  function h(q) {
    var F = n, H = i;
    return n = i = void 0, c = q, s = e.apply(H, F), s;
  }
  function m(q) {
    return c = q, u = setTimeout(_, t), l ? h(q) : s;
  }
  function T(q) {
    var F = q - o, H = q - c, fe = t - F;
    return d ? L_(fe, a - H) : fe;
  }
  function y(q) {
    var F = q - o, H = q - c;
    return o === void 0 || F >= t || F < 0 || d && H >= a;
  }
  function _() {
    var q = Ua();
    if (y(q))
      return C(q);
    u = setTimeout(_, T(q));
  }
  function C(q) {
    return u = void 0, v && n ? h(q) : (n = i = void 0, s);
  }
  function D() {
    u !== void 0 && clearTimeout(u), c = 0, n = o = i = u = void 0;
  }
  function I() {
    return u === void 0 ? s : C(Ua());
  }
  function O() {
    var q = Ua(), F = y(q);
    if (n = arguments, i = this, o = q, F) {
      if (u === void 0)
        return m(o);
      if (d)
        return clearTimeout(u), u = setTimeout(_, t), h(o);
    }
    return u === void 0 && (u = setTimeout(_, t)), s;
  }
  return O.cancel = D, O.flush = I, O;
}
function U_(e, t) {
  return e == null || e !== e ? t : e;
}
var gp = Object.prototype, F_ = gp.hasOwnProperty, V_ = he(function(e, t) {
  e = Object(e);
  var r = -1, n = t.length, i = n > 2 ? t[2] : void 0;
  for (i && Er(t[0], t[1], i) && (n = 1); ++r < n; )
    for (var a = t[r], s = Lr(a), u = -1, o = s.length; ++u < o; ) {
      var c = s[u], l = e[c];
      (l === void 0 || _t(l, gp[c]) && !F_.call(e, c)) && (e[c] = a[c]);
    }
  return e;
}), B_ = V_;
function Uu(e, t, r) {
  (r !== void 0 && !_t(e[t], r) || r === void 0 && !(t in e)) && sn(e, t, r);
}
function Ze(e) {
  return je(e) && Nr(e);
}
function Fu(e, t) {
  if (!(t === "constructor" && typeof e[t] == "function") && t != "__proto__")
    return e[t];
}
function yp(e) {
  return Nt(e, Lr(e));
}
function q_(e, t, r, n, i, a, s) {
  var u = Fu(e, r), o = Fu(t, r), c = s.get(o);
  if (c) {
    Uu(e, r, c);
    return;
  }
  var l = a ? a(u, o, r + "", e, t, s) : void 0, d = l === void 0;
  if (d) {
    var v = se(o), h = !v && En(o), m = !v && !h && yi(o);
    l = o, v || h || m ? se(u) ? l = u : Ze(u) ? l = Or(u) : h ? (d = !1, l = uf(o, !0)) : m ? (d = !1, l = lf(o, !0)) : l = [] : ha(o) || zn(o) ? (l = u, zn(u) ? l = yp(u) : (!Ge(u) || nn(u)) && (l = df(o))) : d = !1;
  }
  d && (s.set(o, l), i(l, o, n, a, s), s.delete(o)), Uu(e, r, l);
}
function _s(e, t, r, n, i) {
  e !== t && Jo(t, function(a, s) {
    if (i || (i = new kt()), Ge(a))
      q_(e, t, s, r, _s, n, i);
    else {
      var u = n ? n(Fu(e, s), a, s + "", e, t, i) : void 0;
      u === void 0 && (u = a), Uu(e, s, u);
    }
  }, Lr);
}
function Tp(e, t, r, n, i, a) {
  return Ge(e) && Ge(t) && (a.set(t, e), _s(e, t, void 0, Tp, a), a.delete(t)), e;
}
var G_ = bi(function(e, t, r, n) {
  _s(e, t, r, n);
}), kp = G_, H_ = he(function(e) {
  return e.push(void 0, Tp), Qr(kp, void 0, e);
}), W_ = H_, j_ = "Expected a function";
function wp(e, t, r) {
  if (typeof e != "function")
    throw new TypeError(j_);
  return setTimeout(function() {
    e.apply(void 0, r);
  }, t);
}
var J_ = he(function(e, t) {
  return wp(e, 1, t);
}), K_ = J_, Y_ = he(function(e, t, r) {
  return wp(e, ot(t) || 0, r);
}), z_ = Y_;
function zo(e, t, r) {
  for (var n = -1, i = e == null ? 0 : e.length; ++n < i; )
    if (r(t, e[n]))
      return !0;
  return !1;
}
var X_ = 200;
function ma(e, t, r, n) {
  var i = -1, a = ys, s = !0, u = e.length, o = [], c = t.length;
  if (!u)
    return o;
  r && (t = qe(t, zr(r))), n ? (a = zo, s = !1) : t.length >= X_ && (a = sa, s = !1, t = new Xn(t));
  e:
    for (; ++i < u; ) {
      var l = e[i], d = r == null ? l : r(l);
      if (l = n || l !== 0 ? l : 0, s && d === d) {
        for (var v = c; v--; )
          if (t[v] === d)
            continue e;
        o.push(l);
      } else
        a(t, d, n) || o.push(l);
    }
  return o;
}
var Z_ = he(function(e, t) {
  return Ze(e) ? ma(e, cr(t, 1, Ze, !0)) : [];
}), Q_ = Z_;
function xr(e) {
  var t = e == null ? 0 : e.length;
  return t ? e[t - 1] : void 0;
}
var x_ = he(function(e, t) {
  var r = xr(t);
  return Ze(r) && (r = void 0), Ze(e) ? ma(e, cr(t, 1, Ze, !0), ae(r)) : [];
}), eE = x_, rE = he(function(e, t) {
  var r = xr(t);
  return Ze(r) && (r = void 0), Ze(e) ? ma(e, cr(t, 1, Ze, !0), void 0, r) : [];
}), tE = rE, nE = vs(function(e, t) {
  return e / t;
}, 1), iE = nE;
function aE(e, t, r) {
  var n = e == null ? 0 : e.length;
  return n ? (t = r || t === void 0 ? 1 : de(t), ft(e, t < 0 ? 0 : t, n)) : [];
}
function sE(e, t, r) {
  var n = e == null ? 0 : e.length;
  return n ? (t = r || t === void 0 ? 1 : de(t), t = n - t, ft(e, 0, t < 0 ? 0 : t)) : [];
}
function Es(e, t, r, n) {
  for (var i = e.length, a = n ? i : -1; (n ? a-- : ++a < i) && t(e[a], a, e); )
    ;
  return r ? ft(e, n ? 0 : a, n ? a + 1 : i) : ft(e, n ? a + 1 : 0, n ? i : a);
}
function uE(e, t) {
  return e && e.length ? Es(e, ae(t), !0, !0) : [];
}
function oE(e, t) {
  return e && e.length ? Es(e, ae(t), !0) : [];
}
function Ft(e) {
  return typeof e == "function" ? e : Rr;
}
function zl(e, t) {
  var r = se(e) ? ht : Mn;
  return r(e, Ft(t));
}
function cE(e, t) {
  for (var r = e == null ? 0 : e.length; r-- && t(e[r], r, e) !== !1; )
    ;
  return e;
}
var lE = vp(!0), bp = lE;
function Xo(e, t) {
  return e && bp(e, t, nr);
}
var dE = mp(Xo, !0), _p = dE;
function Xl(e, t) {
  var r = se(e) ? cE : _p;
  return r(e, Ft(t));
}
function fE(e, t, r) {
  e = _e(e), t = Zr(t);
  var n = e.length;
  r = r === void 0 ? n : ri(de(r), 0, n);
  var i = r;
  return r -= t.length, r >= 0 && e.slice(r, i) == t;
}
function pE(e, t) {
  return qe(t, function(r) {
    return [r, e[r]];
  });
}
function hE(e) {
  var t = -1, r = Array(e.size);
  return e.forEach(function(n) {
    r[++t] = [n, n];
  }), r;
}
var vE = "[object Map]", mE = "[object Set]";
function Ep(e) {
  return function(t) {
    var r = Ot(t);
    return r == vE ? qo(t) : r == mE ? hE(t) : pE(t, e(t));
  };
}
var gE = Ep(nr), Zl = gE, yE = Ep(Lr), Ql = yE, TE = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }, kE = Fo(TE), wE = kE, Ap = /[&<>"']/g, bE = RegExp(Ap.source);
function Rp(e) {
  return e = _e(e), e && bE.test(e) ? e.replace(Ap, wE) : e;
}
var Sp = /[\\^$.*+?()[\]{}|]/g, _E = RegExp(Sp.source);
function EE(e) {
  return e = _e(e), e && _E.test(e) ? e.replace(Sp, "\\$&") : e;
}
function Pp(e, t) {
  for (var r = -1, n = e == null ? 0 : e.length; ++r < n; )
    if (!t(e[r], r, e))
      return !1;
  return !0;
}
function AE(e, t) {
  var r = !0;
  return Mn(e, function(n, i, a) {
    return r = !!t(n, i, a), r;
  }), r;
}
function RE(e, t, r) {
  var n = se(e) ? Pp : AE;
  return r && Er(e, t, r) && (t = void 0), n(e, ae(t));
}
var SE = 4294967295;
function Cp(e) {
  return e ? ri(de(e), 0, SE) : 0;
}
function PE(e, t, r, n) {
  var i = e.length;
  for (r = de(r), r < 0 && (r = -r > i ? 0 : i + r), n = n === void 0 || n > i ? i : de(n), n < 0 && (n += i), n = r > n ? 0 : Cp(n); r < n; )
    e[r++] = t;
  return e;
}
function CE(e, t, r, n) {
  var i = e == null ? 0 : e.length;
  return i ? (r && typeof r != "number" && Er(e, t, r) && (r = 0, n = i), PE(e, t, r, n)) : [];
}
function Ip(e, t) {
  var r = [];
  return Mn(e, function(n, i, a) {
    t(n, i, a) && r.push(n);
  }), r;
}
function IE(e, t) {
  var r = se(e) ? Pn : Ip;
  return r(e, ae(t));
}
function Dp(e) {
  return function(t, r, n) {
    var i = Object(t);
    if (!Nr(t)) {
      var a = ae(r);
      t = nr(t), r = function(o) {
        return a(i[o], o, i);
      };
    }
    var s = e(t, r, n);
    return s > -1 ? i[a ? t[s] : s] : void 0;
  };
}
var DE = Math.max;
function Mp(e, t, r) {
  var n = e == null ? 0 : e.length;
  if (!n)
    return -1;
  var i = r == null ? 0 : de(r);
  return i < 0 && (i = DE(n + i, 0)), gs(e, ae(t), i);
}
var ME = Dp(Mp), OE = ME;
function Op(e, t, r) {
  var n;
  return r(e, function(i, a, s) {
    if (t(i, a, s))
      return n = a, !1;
  }), n;
}
function $E(e, t) {
  return Op(e, ae(t), Ut);
}
var NE = Math.max, LE = Math.min;
function $p(e, t, r) {
  var n = e == null ? 0 : e.length;
  if (!n)
    return -1;
  var i = n - 1;
  return r !== void 0 && (i = de(r), i = r < 0 ? NE(n + i, 0) : LE(i, n - 1)), gs(e, ae(t), i, !0);
}
var UE = Dp($p), FE = UE;
function VE(e, t) {
  return Op(e, ae(t), Xo);
}
function xl(e) {
  return e && e.length ? e[0] : void 0;
}
function Np(e, t) {
  var r = -1, n = Nr(e) ? Array(e.length) : [];
  return Mn(e, function(i, a, s) {
    n[++r] = t(i, a, s);
  }), n;
}
function As(e, t) {
  var r = se(e) ? qe : Np;
  return r(e, ae(t));
}
function BE(e, t) {
  return cr(As(e, t), 1);
}
var qE = 1 / 0;
function GE(e, t) {
  return cr(As(e, t), qE);
}
function HE(e, t, r) {
  return r = r === void 0 ? 1 : de(r), cr(As(e, t), r);
}
var WE = 1 / 0;
function jE(e) {
  var t = e == null ? 0 : e.length;
  return t ? cr(e, WE) : [];
}
function JE(e, t) {
  var r = e == null ? 0 : e.length;
  return r ? (t = t === void 0 ? 1 : de(t), cr(e, t)) : [];
}
var KE = 512;
function YE(e) {
  return on(e, KE);
}
var zE = Vo("floor"), XE = zE, ZE = "Expected a function", QE = 8, xE = 32, e1 = 128, r1 = 256;
function Lp(e) {
  return cn(function(t) {
    var r = t.length, n = r, i = dt.prototype.thru;
    for (e && t.reverse(); n--; ) {
      var a = t[n];
      if (typeof a != "function")
        throw new TypeError(ZE);
      if (i && !s && La(a) == "wrapper")
        var s = new dt([], !0);
    }
    for (n = s ? n : r; ++n < r; ) {
      a = t[n];
      var u = La(a), o = u == "wrapper" ? Co(a) : void 0;
      o && $u(o[0]) && o[1] == (e1 | QE | xE | r1) && !o[4].length && o[9] == 1 ? s = s[La(o[0])].apply(s, o[3]) : s = a.length == 1 && $u(a) ? s[u]() : s.thru(a);
    }
    return function() {
      var c = arguments, l = c[0];
      if (s && c.length == 1 && se(l))
        return s.plant(l).value();
      for (var d = 0, v = r ? t[d].apply(this, c) : l; ++d < r; )
        v = t[d].call(this, v);
      return v;
    };
  });
}
var t1 = Lp(), n1 = t1, i1 = Lp(!0), a1 = i1;
function s1(e, t) {
  return e == null ? e : Jo(e, Ft(t), Lr);
}
function u1(e, t) {
  return e == null ? e : bp(e, Ft(t), Lr);
}
function o1(e, t) {
  return e && Ut(e, Ft(t));
}
function c1(e, t) {
  return e && Xo(e, Ft(t));
}
function l1(e) {
  for (var t = -1, r = e == null ? 0 : e.length, n = {}; ++t < r; ) {
    var i = e[t];
    n[i[0]] = i[1];
  }
  return n;
}
function Rs(e, t) {
  return Pn(t, function(r) {
    return nn(e[r]);
  });
}
function d1(e) {
  return e == null ? [] : Rs(e, nr(e));
}
function f1(e) {
  return e == null ? [] : Rs(e, Lr(e));
}
var p1 = Object.prototype, h1 = p1.hasOwnProperty, v1 = ws(function(e, t, r) {
  h1.call(e, r) ? e[r].push(t) : sn(e, r, [t]);
}), m1 = v1;
function Zo(e, t) {
  return e > t;
}
function Ss(e) {
  return function(t, r) {
    return typeof t == "string" && typeof r == "string" || (t = ot(t), r = ot(r)), e(t, r);
  };
}
var g1 = Ss(Zo), y1 = g1, T1 = Ss(function(e, t) {
  return e >= t;
}), k1 = T1, w1 = Math.max, b1 = Math.min;
function _1(e, t, r) {
  return e >= b1(t, r) && e < w1(t, r);
}
function E1(e, t, r) {
  return t = en(t), r === void 0 ? (r = t, t = 0) : r = en(r), e = ot(e), _1(e, t, r);
}
var A1 = "[object String]";
function Ps(e) {
  return typeof e == "string" || !se(e) && je(e) && Ar(e) == A1;
}
function Qo(e, t) {
  return qe(t, function(r) {
    return e[r];
  });
}
function Ai(e) {
  return e == null ? [] : Qo(e, nr(e));
}
var R1 = Math.max;
function S1(e, t, r, n) {
  e = Nr(e) ? e : Ai(e), r = r && !n ? de(r) : 0;
  var i = e.length;
  return r < 0 && (r = R1(i + r, 0)), Ps(e) ? r <= i && e.indexOf(t, r) > -1 : !!i && ki(e, t, r) > -1;
}
var P1 = Math.max;
function C1(e, t, r) {
  var n = e == null ? 0 : e.length;
  if (!n)
    return -1;
  var i = r == null ? 0 : de(r);
  return i < 0 && (i = P1(n + i, 0)), ki(e, t, i);
}
function I1(e) {
  var t = e == null ? 0 : e.length;
  return t ? ft(e, 0, -1) : [];
}
var D1 = Math.min;
function xo(e, t, r) {
  for (var n = r ? zo : ys, i = e[0].length, a = e.length, s = a, u = Array(a), o = 1 / 0, c = []; s--; ) {
    var l = e[s];
    s && t && (l = qe(l, zr(t))), o = D1(l.length, o), u[s] = !r && (t || i >= 120 && l.length >= 120) ? new Xn(s && l) : void 0;
  }
  l = e[0];
  var d = -1, v = u[0];
  e:
    for (; ++d < i && c.length < o; ) {
      var h = l[d], m = t ? t(h) : h;
      if (h = r || h !== 0 ? h : 0, !(v ? sa(v, m) : n(c, m, r))) {
        for (s = a; --s; ) {
          var T = u[s];
          if (!(T ? sa(T, m) : n(e[s], m, r)))
            continue e;
        }
        v && v.push(m), c.push(h);
      }
    }
  return c;
}
function ec(e) {
  return Ze(e) ? e : [];
}
var M1 = he(function(e) {
  var t = qe(e, ec);
  return t.length && t[0] === e[0] ? xo(t) : [];
}), O1 = M1, $1 = he(function(e) {
  var t = xr(e), r = qe(e, ec);
  return t === xr(r) ? t = void 0 : r.pop(), r.length && r[0] === e[0] ? xo(r, ae(t)) : [];
}), N1 = $1, L1 = he(function(e) {
  var t = xr(e), r = qe(e, ec);
  return t = typeof t == "function" ? t : void 0, t && r.pop(), r.length && r[0] === e[0] ? xo(r, void 0, t) : [];
}), U1 = L1;
function F1(e, t, r, n) {
  return Ut(e, function(i, a, s) {
    t(n, r(i), a, s);
  }), n;
}
function Up(e, t) {
  return function(r, n) {
    return F1(r, e, t(n), {});
  };
}
var V1 = Object.prototype, B1 = V1.toString, q1 = Up(function(e, t, r) {
  t != null && typeof t.toString != "function" && (t = B1.call(t)), e[t] = r;
}, Io(Rr)), G1 = q1, Fp = Object.prototype, H1 = Fp.hasOwnProperty, W1 = Fp.toString, j1 = Up(function(e, t, r) {
  t != null && typeof t.toString != "function" && (t = W1.call(t)), H1.call(e, t) ? e[t].push(r) : e[t] = [r];
}, ae), J1 = j1;
function Vp(e, t) {
  return t.length < 2 ? e : ei(e, ft(t, 0, -1));
}
function ga(e, t, r) {
  t = In(t, e), e = Vp(e, t);
  var n = e == null ? e : e[Lt(xr(t))];
  return n == null ? void 0 : Qr(n, e, r);
}
var K1 = he(ga), Y1 = K1, z1 = he(function(e, t, r) {
  var n = -1, i = typeof t == "function", a = Nr(e) ? Array(e.length) : [];
  return Mn(e, function(s) {
    a[++n] = i ? Qr(t, s, r) : ga(s, t, r);
  }), a;
}), X1 = z1, Z1 = "[object ArrayBuffer]";
function Q1(e) {
  return je(e) && Ar(e) == Z1;
}
var ed = lt && lt.isArrayBuffer, x1 = ed ? zr(ed) : Q1, eA = x1, rA = "[object Boolean]";
function tA(e) {
  return e === !0 || e === !1 || je(e) && Ar(e) == rA;
}
var nA = "[object Date]";
function iA(e) {
  return je(e) && Ar(e) == nA;
}
var rd = lt && lt.isDate, aA = rd ? zr(rd) : iA, sA = aA;
function uA(e) {
  return je(e) && e.nodeType === 1 && !ha(e);
}
var oA = "[object Map]", cA = "[object Set]", lA = Object.prototype, dA = lA.hasOwnProperty;
function rc(e) {
  if (e == null)
    return !0;
  if (Nr(e) && (se(e) || typeof e == "string" || typeof e.splice == "function" || En(e) || yi(e) || zn(e)))
    return !e.length;
  var t = Ot(e);
  if (t == oA || t == cA)
    return !e.size;
  if (fa(e))
    return !ko(e).length;
  for (var r in e)
    if (dA.call(e, r))
      return !1;
  return !0;
}
function Bp(e, t) {
  return va(e, t);
}
function fA(e, t, r) {
  r = typeof r == "function" ? r : void 0;
  var n = r ? r(e, t) : void 0;
  return n === void 0 ? va(e, t, void 0, r) : !!n;
}
var pA = ar.isFinite;
function hA(e) {
  return typeof e == "number" && pA(e);
}
function qp(e) {
  return typeof e == "number" && e == de(e);
}
function vA(e, t) {
  return e === t || Go(e, t, Ho(t));
}
function mA(e, t, r) {
  return r = typeof r == "function" ? r : void 0, Go(e, t, Ho(t), r);
}
var gA = "[object Number]";
function Gp(e) {
  return typeof e == "number" || je(e) && Ar(e) == gA;
}
function yA(e) {
  return Gp(e) && e != +e;
}
var TA = Na ? nn : To, kA = TA, wA = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";
function bA(e) {
  if (kA(e))
    throw new Error(wA);
  return Qd(e);
}
function _A(e) {
  return e == null;
}
function EA(e) {
  return e === null;
}
var AA = "[object RegExp]";
function RA(e) {
  return je(e) && Ar(e) == AA;
}
var td = lt && lt.isRegExp, SA = td ? zr(td) : RA, tc = SA, nd = 9007199254740991;
function PA(e) {
  return qp(e) && e >= -nd && e <= nd;
}
function CA(e) {
  return e === void 0;
}
var IA = "[object WeakMap]";
function DA(e) {
  return je(e) && Ot(e) == IA;
}
var MA = "[object WeakSet]";
function OA(e) {
  return je(e) && Ar(e) == MA;
}
var $A = 1;
function NA(e) {
  return ae(typeof e == "function" ? e : ut(e, $A));
}
var LA = Array.prototype, UA = LA.join;
function FA(e, t) {
  return e == null ? "" : UA.call(e, t);
}
var VA = Ei(function(e, t, r) {
  return e + (r ? "-" : "") + t.toLowerCase();
}), BA = VA, qA = ws(function(e, t, r) {
  sn(e, r, t);
}), GA = qA;
function HA(e, t, r) {
  for (var n = r + 1; n--; )
    if (e[n] === t)
      return n;
  return n;
}
var WA = Math.max, jA = Math.min;
function JA(e, t, r) {
  var n = e == null ? 0 : e.length;
  if (!n)
    return -1;
  var i = n;
  return r !== void 0 && (i = de(r), i = i < 0 ? WA(n + i, 0) : jA(i, n - 1)), t === t ? HA(e, t, i) : gs(e, Pf, i, !0);
}
var KA = Ei(function(e, t, r) {
  return e + (r ? " " : "") + t.toLowerCase();
}), YA = KA, zA = Wf("toLowerCase"), XA = zA;
function nc(e, t) {
  return e < t;
}
var ZA = Ss(nc), QA = ZA, xA = Ss(function(e, t) {
  return e <= t;
}), eR = xA;
function rR(e, t) {
  var r = {};
  return t = ae(t), Ut(e, function(n, i, a) {
    sn(r, t(n, i, a), n);
  }), r;
}
function tR(e, t) {
  var r = {};
  return t = ae(t), Ut(e, function(n, i, a) {
    sn(r, i, t(n, i, a));
  }), r;
}
var nR = 1;
function iR(e) {
  return dp(ut(e, nR));
}
var aR = 1;
function sR(e, t) {
  return fp(e, ut(t, aR));
}
function Cs(e, t, r) {
  for (var n = -1, i = e.length; ++n < i; ) {
    var a = e[n], s = t(a);
    if (s != null && (u === void 0 ? s === s && !Xr(s) : r(s, u)))
      var u = s, o = a;
  }
  return o;
}
function uR(e) {
  return e && e.length ? Cs(e, Rr, Zo) : void 0;
}
function oR(e, t) {
  return e && e.length ? Cs(e, ae(t), Zo) : void 0;
}
function ic(e, t) {
  for (var r, n = -1, i = e.length; ++n < i; ) {
    var a = t(e[n]);
    a !== void 0 && (r = r === void 0 ? a : r + a);
  }
  return r;
}
var cR = 0 / 0;
function Hp(e, t) {
  var r = e == null ? 0 : e.length;
  return r ? ic(e, t) / r : cR;
}
function lR(e) {
  return Hp(e, Rr);
}
function dR(e, t) {
  return Hp(e, ae(t));
}
var fR = bi(function(e, t, r) {
  _s(e, t, r);
}), Wp = fR, pR = he(function(e, t) {
  return function(r) {
    return ga(r, e, t);
  };
}), hR = pR, vR = he(function(e, t) {
  return function(r) {
    return ga(e, r, t);
  };
}), mR = vR;
function gR(e) {
  return e && e.length ? Cs(e, Rr, nc) : void 0;
}
function yR(e, t) {
  return e && e.length ? Cs(e, ae(t), nc) : void 0;
}
function jp(e, t, r) {
  var n = nr(t), i = Rs(t, n), a = !(Ge(r) && "chain" in r) || !!r.chain, s = nn(e);
  return ht(i, function(u) {
    var o = t[u];
    e[u] = o, s && (e.prototype[u] = function() {
      var c = this.__chain__;
      if (a || c) {
        var l = e(this.__wrapped__), d = l.__actions__ = Or(this.__actions__);
        return d.push({ func: o, args: arguments, thisArg: e }), l.__chain__ = c, l;
      }
      return o.apply(e, Cn([this.value()], arguments));
    });
  }), e;
}
var TR = vs(function(e, t) {
  return e * t;
}, 1), kR = TR, wR = "Expected a function";
function ya(e) {
  if (typeof e != "function")
    throw new TypeError(wR);
  return function() {
    var t = arguments;
    switch (t.length) {
      case 0:
        return !e.call(this);
      case 1:
        return !e.call(this, t[0]);
      case 2:
        return !e.call(this, t[0], t[1]);
      case 3:
        return !e.call(this, t[0], t[1], t[2]);
    }
    return !e.apply(this, t);
  };
}
function bR(e) {
  for (var t, r = []; !(t = e.next()).done; )
    r.push(t.value);
  return r;
}
var _R = "[object Map]", ER = "[object Set]", du = mr ? mr.iterator : void 0;
function Jp(e) {
  if (!e)
    return [];
  if (Nr(e))
    return Ps(e) ? wt(e) : Or(e);
  if (du && e[du])
    return bR(e[du]());
  var t = Ot(e), r = t == _R ? qo : t == ER ? ks : Ai;
  return r(e);
}
function AR() {
  this.__values__ === void 0 && (this.__values__ = Jp(this.value()));
  var e = this.__index__ >= this.__values__.length, t = e ? void 0 : this.__values__[this.__index__++];
  return { done: e, value: t };
}
function Kp(e, t) {
  var r = e.length;
  if (r)
    return t += t < 0 ? r : 0, un(t, r) ? e[t] : void 0;
}
function RR(e, t) {
  return e && e.length ? Kp(e, de(t)) : void 0;
}
function SR(e) {
  return e = de(e), he(function(t) {
    return Kp(t, e);
  });
}
function ac(e, t) {
  return t = In(t, e), e = Vp(e, t), e == null || delete e[Lt(xr(t))];
}
function PR(e) {
  return ha(e) ? void 0 : e;
}
var CR = 1, IR = 2, DR = 4, MR = cn(function(e, t) {
  var r = {};
  if (e == null)
    return r;
  var n = !1;
  t = qe(t, function(a) {
    return a = In(a, e), n || (n = a.length > 1), a;
  }), Nt(e, _o(e), r), n && (r = ut(r, CR | IR | DR, PR));
  for (var i = t.length; i--; )
    ac(r, t[i]);
  return r;
}), OR = MR;
function Yp(e, t, r) {
  for (var n = -1, i = t.length, a = {}; ++n < i; ) {
    var s = t[n], u = ei(e, s);
    r(u, s) && pa(a, In(s, e), u);
  }
  return a;
}
function zp(e, t) {
  if (e == null)
    return {};
  var r = qe(_o(e), function(n) {
    return [n];
  });
  return t = ae(t), Yp(e, r, function(n, i) {
    return t(n, i[0]);
  });
}
function $R(e, t) {
  return zp(e, ya(ae(t)));
}
function NR(e) {
  return Lf(2, e);
}
function LR(e, t) {
  var r = e.length;
  for (e.sort(t); r--; )
    e[r] = e[r].value;
  return e;
}
function Xp(e, t) {
  if (e !== t) {
    var r = e !== void 0, n = e === null, i = e === e, a = Xr(e), s = t !== void 0, u = t === null, o = t === t, c = Xr(t);
    if (!u && !c && !a && e > t || a && s && o && !u && !c || n && s && o || !r && o || !i)
      return 1;
    if (!n && !a && !c && e < t || c && r && i && !n && !a || u && r && i || !s && i || !o)
      return -1;
  }
  return 0;
}
function UR(e, t, r) {
  for (var n = -1, i = e.criteria, a = t.criteria, s = i.length, u = r.length; ++n < s; ) {
    var o = Xp(i[n], a[n]);
    if (o) {
      if (n >= u)
        return o;
      var c = r[n];
      return o * (c == "desc" ? -1 : 1);
    }
  }
  return e.index - t.index;
}
function Zp(e, t, r) {
  t.length ? t = qe(t, function(a) {
    return se(a) ? function(s) {
      return ei(s, a.length === 1 ? a[0] : a);
    } : a;
  }) : t = [Rr];
  var n = -1;
  t = qe(t, zr(ae));
  var i = Np(e, function(a, s, u) {
    var o = qe(t, function(c) {
      return c(a);
    });
    return { criteria: o, index: ++n, value: a };
  });
  return LR(i, function(a, s) {
    return UR(a, s, r);
  });
}
function FR(e, t, r, n) {
  return e == null ? [] : (se(t) || (t = t == null ? [] : [t]), r = n ? void 0 : r, se(r) || (r = r == null ? [] : [r]), Zp(e, t, r));
}
function sc(e) {
  return cn(function(t) {
    return t = qe(t, zr(ae)), he(function(r) {
      var n = this;
      return e(t, function(i) {
        return Qr(i, n, r);
      });
    });
  });
}
var VR = sc(qe), BR = VR, qR = he, GR = qR, HR = Math.min, WR = GR(function(e, t) {
  t = t.length == 1 && se(t[0]) ? qe(t[0], zr(ae)) : qe(cr(t, 1), zr(ae));
  var r = t.length;
  return he(function(n) {
    for (var i = -1, a = HR(n.length, r); ++i < a; )
      n[i] = t[i].call(this, n[i]);
    return Qr(e, this, n);
  });
}), jR = WR, JR = sc(Pp), KR = JR, YR = sc(Bo), zR = YR, XR = 9007199254740991, ZR = Math.floor;
function Vu(e, t) {
  var r = "";
  if (!e || t < 1 || t > XR)
    return r;
  do
    t % 2 && (r += e), t = ZR(t / 2), t && (e += e);
  while (t);
  return r;
}
var QR = jo("length"), xR = QR, Qp = "\\ud800-\\udfff", eS = "\\u0300-\\u036f", rS = "\\ufe20-\\ufe2f", tS = "\\u20d0-\\u20ff", nS = eS + rS + tS, iS = "\\ufe0e\\ufe0f", aS = "[" + Qp + "]", Bu = "[" + nS + "]", qu = "\\ud83c[\\udffb-\\udfff]", sS = "(?:" + Bu + "|" + qu + ")", xp = "[^" + Qp + "]", eh = "(?:\\ud83c[\\udde6-\\uddff]){2}", rh = "[\\ud800-\\udbff][\\udc00-\\udfff]", uS = "\\u200d", th = sS + "?", nh = "[" + iS + "]?", oS = "(?:" + uS + "(?:" + [xp, eh, rh].join("|") + ")" + nh + th + ")*", cS = nh + th + oS, lS = "(?:" + [xp + Bu + "?", Bu, eh, rh, aS].join("|") + ")", id = RegExp(qu + "(?=" + qu + ")|" + lS + cS, "g");
function dS(e) {
  for (var t = id.lastIndex = 0; id.test(e); )
    ++t;
  return t;
}
function Ri(e) {
  return _i(e) ? dS(e) : xR(e);
}
var fS = Math.ceil;
function za(e, t) {
  t = t === void 0 ? " " : Zr(t);
  var r = t.length;
  if (r < 2)
    return r ? Vu(t, e) : t;
  var n = Vu(t, fS(e / Ri(t)));
  return _i(t) ? Dn(wt(n), 0, e).join("") : n.slice(0, e);
}
var pS = Math.ceil, hS = Math.floor;
function vS(e, t, r) {
  e = _e(e), t = de(t);
  var n = t ? Ri(e) : 0;
  if (!t || n >= t)
    return e;
  var i = (t - n) / 2;
  return za(hS(i), r) + e + za(pS(i), r);
}
function mS(e, t, r) {
  e = _e(e), t = de(t);
  var n = t ? Ri(e) : 0;
  return t && n < t ? e + za(t - n, r) : e;
}
function gS(e, t, r) {
  e = _e(e), t = de(t);
  var n = t ? Ri(e) : 0;
  return t && n < t ? za(t - n, r) + e : e;
}
var yS = /^\s+/, TS = ar.parseInt;
function kS(e, t, r) {
  return r || t == null ? t = 0 : t && (t = +t), TS(_e(e).replace(yS, ""), t || 0);
}
var wS = 32, uc = he(function(e, t) {
  var r = An(t, wi(uc));
  return on(e, wS, void 0, t, r);
});
uc.placeholder = {};
var ih = uc, bS = 64, oc = he(function(e, t) {
  var r = An(t, wi(oc));
  return on(e, bS, void 0, t, r);
});
oc.placeholder = {};
var _S = oc, ES = ws(function(e, t, r) {
  e[r ? 0 : 1].push(t);
}, function() {
  return [[], []];
}), AS = ES;
function RS(e, t) {
  return Yp(e, t, function(r, n) {
    return Wo(e, n);
  });
}
var SS = cn(function(e, t) {
  return e == null ? {} : RS(e, t);
}), PS = SS;
function CS(e) {
  for (var t, r = this; r instanceof ms; ) {
    var n = Af(r);
    n.__index__ = 0, n.__values__ = void 0, t ? i.__wrapped__ = n : t = n;
    var i = n;
    r = r.__wrapped__;
  }
  return i.__wrapped__ = e, t;
}
function IS(e) {
  return function(t) {
    return e == null ? void 0 : ei(e, t);
  };
}
function DS(e, t, r, n) {
  for (var i = r - 1, a = e.length; ++i < a; )
    if (n(e[i], t))
      return i;
  return -1;
}
var MS = Array.prototype, ad = MS.splice;
function cc(e, t, r, n) {
  var i = n ? DS : ki, a = -1, s = t.length, u = e;
  for (e === t && (t = Or(t)), r && (u = qe(e, zr(r))); ++a < s; )
    for (var o = 0, c = t[a], l = r ? r(c) : c; (o = i(u, l, o, n)) > -1; )
      u !== e && ad.call(u, o, 1), ad.call(e, o, 1);
  return e;
}
function ah(e, t) {
  return e && e.length && t && t.length ? cc(e, t) : e;
}
var OS = he(ah), $S = OS;
function NS(e, t, r) {
  return e && e.length && t && t.length ? cc(e, t, ae(r)) : e;
}
function LS(e, t, r) {
  return e && e.length && t && t.length ? cc(e, t, void 0, r) : e;
}
var US = Array.prototype, FS = US.splice;
function sh(e, t) {
  for (var r = e ? t.length : 0, n = r - 1; r--; ) {
    var i = t[r];
    if (r == n || i !== a) {
      var a = i;
      un(i) ? FS.call(e, i, 1) : ac(e, i);
    }
  }
  return e;
}
var VS = cn(function(e, t) {
  var r = e == null ? 0 : e.length, n = Mo(e, t);
  return sh(e, qe(t, function(i) {
    return un(i, r) ? +i : i;
  }).sort(Xp)), n;
}), BS = VS, qS = Math.floor, GS = Math.random;
function lc(e, t) {
  return e + qS(GS() * (t - e + 1));
}
var HS = parseFloat, WS = Math.min, jS = Math.random;
function JS(e, t, r) {
  if (r && typeof r != "boolean" && Er(e, t, r) && (t = r = void 0), r === void 0 && (typeof t == "boolean" ? (r = t, t = void 0) : typeof e == "boolean" && (r = e, e = void 0)), e === void 0 && t === void 0 ? (e = 0, t = 1) : (e = en(e), t === void 0 ? (t = e, e = 0) : t = en(t)), e > t) {
    var n = e;
    e = t, t = n;
  }
  if (r || e % 1 || t % 1) {
    var i = jS();
    return WS(e + i * (t - e + HS("1e-" + ((i + "").length - 1))), t);
  }
  return lc(e, t);
}
var KS = Math.ceil, YS = Math.max;
function zS(e, t, r, n) {
  for (var i = -1, a = YS(KS((t - e) / (r || 1)), 0), s = Array(a); a--; )
    s[n ? a : ++i] = e, e += r;
  return s;
}
function uh(e) {
  return function(t, r, n) {
    return n && typeof n != "number" && Er(t, r, n) && (r = n = void 0), t = en(t), r === void 0 ? (r = t, t = 0) : r = en(r), n = n === void 0 ? t < r ? 1 : -1 : en(n), zS(t, r, n, e);
  };
}
var XS = uh(), ZS = XS, QS = uh(!0), xS = QS, eP = 256, rP = cn(function(e, t) {
  return on(e, eP, void 0, void 0, void 0, t);
}), tP = rP;
function oh(e, t, r, n, i) {
  return i(e, function(a, s, u) {
    r = n ? (n = !1, a) : t(r, a, s, u);
  }), r;
}
function nP(e, t, r) {
  var n = se(e) ? Uo : oh, i = arguments.length < 3;
  return n(e, ae(t), r, i, Mn);
}
function iP(e, t, r, n) {
  var i = e == null ? 0 : e.length;
  for (n && i && (r = e[--i]); i--; )
    r = t(r, e[i], i, e);
  return r;
}
function aP(e, t, r) {
  var n = se(e) ? iP : oh, i = arguments.length < 3;
  return n(e, ae(t), r, i, _p);
}
function sP(e, t) {
  var r = se(e) ? Pn : Ip;
  return r(e, ya(ae(t)));
}
function uP(e, t) {
  var r = [];
  if (!(e && e.length))
    return r;
  var n = -1, i = [], a = e.length;
  for (t = ae(t); ++n < a; ) {
    var s = e[n];
    t(s, n, e) && (r.push(s), i.push(n));
  }
  return sh(e, i), r;
}
function oP(e, t, r) {
  return (r ? Er(e, t, r) : t === void 0) ? t = 1 : t = de(t), Vu(_e(e), t);
}
function cP() {
  var e = arguments, t = _e(e[0]);
  return e.length < 3 ? t : t.replace(e[1], e[2]);
}
var lP = "Expected a function";
function dP(e, t) {
  if (typeof e != "function")
    throw new TypeError(lP);
  return t = t === void 0 ? t : de(t), he(e, t);
}
function fP(e, t, r) {
  t = In(t, e);
  var n = -1, i = t.length;
  for (i || (i = 1, e = void 0); ++n < i; ) {
    var a = e == null ? void 0 : e[Lt(t[n])];
    a === void 0 && (n = i, a = r), e = nn(a) ? a.call(e) : a;
  }
  return e;
}
var pP = Array.prototype, hP = pP.reverse;
function Gu(e) {
  return e == null ? e : hP.call(e);
}
var vP = Vo("round"), mP = vP;
function ch(e) {
  var t = e.length;
  return t ? e[lc(0, t - 1)] : void 0;
}
function gP(e) {
  return ch(Ai(e));
}
function yP(e) {
  var t = se(e) ? ch : gP;
  return t(e);
}
function Is(e, t) {
  var r = -1, n = e.length, i = n - 1;
  for (t = t === void 0 ? n : t; ++r < t; ) {
    var a = lc(r, i), s = e[a];
    e[a] = e[r], e[r] = s;
  }
  return e.length = t, e;
}
function TP(e, t) {
  return Is(Or(e), ri(t, 0, e.length));
}
function kP(e, t) {
  var r = Ai(e);
  return Is(r, ri(t, 0, r.length));
}
function wP(e, t, r) {
  (r ? Er(e, t, r) : t === void 0) ? t = 1 : t = de(t);
  var n = se(e) ? TP : kP;
  return n(e, t);
}
function bP(e, t, r, n) {
  return n = typeof n == "function" ? n : void 0, e == null ? e : pa(e, t, r, n);
}
function _P(e) {
  return Is(Or(e));
}
function EP(e) {
  return Is(Ai(e));
}
function AP(e) {
  var t = se(e) ? _P : EP;
  return t(e);
}
var RP = "[object Map]", SP = "[object Set]";
function PP(e) {
  if (e == null)
    return 0;
  if (Nr(e))
    return Ps(e) ? Ri(e) : e.length;
  var t = Ot(e);
  return t == RP || t == SP ? e.size : ko(e).length;
}
function CP(e, t, r) {
  var n = e == null ? 0 : e.length;
  return n ? (r && typeof r != "number" && Er(e, t, r) ? (t = 0, r = n) : (t = t == null ? 0 : de(t), r = r === void 0 ? n : de(r)), ft(e, t, r)) : [];
}
var IP = Ei(function(e, t, r) {
  return e + (r ? "_" : "") + t.toLowerCase();
}), DP = IP;
function MP(e, t) {
  var r;
  return Mn(e, function(n, i, a) {
    return r = t(n, i, a), !r;
  }), !!r;
}
function OP(e, t, r) {
  var n = se(e) ? Bo : MP;
  return r && Er(e, t, r) && (t = void 0), n(e, ae(t));
}
var $P = he(function(e, t) {
  if (e == null)
    return [];
  var r = t.length;
  return r > 1 && Er(e, t[0], t[1]) ? t = [] : r > 2 && Er(t[0], t[1], t[2]) && (t = [t[0]]), Zp(e, cr(t, 1), []);
}), NP = $P, LP = 4294967295, UP = LP - 1, FP = Math.floor, VP = Math.min;
function dc(e, t, r, n) {
  var i = 0, a = e == null ? 0 : e.length;
  if (a === 0)
    return 0;
  t = r(t);
  for (var s = t !== t, u = t === null, o = Xr(t), c = t === void 0; i < a; ) {
    var l = FP((i + a) / 2), d = r(e[l]), v = d !== void 0, h = d === null, m = d === d, T = Xr(d);
    if (s)
      var y = n || m;
    else
      c ? y = m && (n || v) : u ? y = m && v && (n || !h) : o ? y = m && v && !h && (n || !T) : h || T ? y = !1 : y = n ? d <= t : d < t;
    y ? i = l + 1 : a = l;
  }
  return VP(a, UP);
}
var BP = 4294967295, qP = BP >>> 1;
function Ds(e, t, r) {
  var n = 0, i = e == null ? n : e.length;
  if (typeof t == "number" && t === t && i <= qP) {
    for (; n < i; ) {
      var a = n + i >>> 1, s = e[a];
      s !== null && !Xr(s) && (r ? s <= t : s < t) ? n = a + 1 : i = a;
    }
    return i;
  }
  return dc(e, t, Rr, r);
}
function GP(e, t) {
  return Ds(e, t);
}
function HP(e, t, r) {
  return dc(e, t, ae(r));
}
function WP(e, t) {
  var r = e == null ? 0 : e.length;
  if (r) {
    var n = Ds(e, t);
    if (n < r && _t(e[n], t))
      return n;
  }
  return -1;
}
function jP(e, t) {
  return Ds(e, t, !0);
}
function JP(e, t, r) {
  return dc(e, t, ae(r), !0);
}
function KP(e, t) {
  var r = e == null ? 0 : e.length;
  if (r) {
    var n = Ds(e, t, !0) - 1;
    if (_t(e[n], t))
      return n;
  }
  return -1;
}
function lh(e, t) {
  for (var r = -1, n = e.length, i = 0, a = []; ++r < n; ) {
    var s = e[r], u = t ? t(s) : s;
    if (!r || !_t(u, o)) {
      var o = u;
      a[i++] = s === 0 ? 0 : s;
    }
  }
  return a;
}
function YP(e) {
  return e && e.length ? lh(e) : [];
}
function zP(e, t) {
  return e && e.length ? lh(e, ae(t)) : [];
}
var XP = 4294967295;
function ZP(e, t, r) {
  return r && typeof r != "number" && Er(e, t, r) && (t = r = void 0), r = r === void 0 ? XP : r >>> 0, r ? (e = _e(e), e && (typeof t == "string" || t != null && !tc(t)) && (t = Zr(t), !t && _i(e)) ? Dn(wt(e), 0, r) : e.split(t, r)) : [];
}
var QP = "Expected a function", xP = Math.max;
function eC(e, t) {
  if (typeof e != "function")
    throw new TypeError(QP);
  return t = t == null ? 0 : xP(de(t), 0), he(function(r) {
    var n = r[t], i = Dn(r, 0, t);
    return n && Cn(i, n), Qr(e, this, i);
  });
}
var rC = Ei(function(e, t, r) {
  return e + (r ? " " : "") + Lo(t);
}), tC = rC;
function nC(e, t, r) {
  return e = _e(e), r = r == null ? 0 : ri(de(r), 0, e.length), t = Zr(t), e.slice(r, r + t.length) == t;
}
function iC() {
  return {};
}
function aC() {
  return "";
}
function sC() {
  return !0;
}
var uC = vs(function(e, t) {
  return e - t;
}, 0), oC = uC;
function cC(e) {
  return e && e.length ? ic(e, Rr) : 0;
}
function lC(e, t) {
  return e && e.length ? ic(e, ae(t)) : 0;
}
function dC(e) {
  var t = e == null ? 0 : e.length;
  return t ? ft(e, 1, t) : [];
}
function fC(e, t, r) {
  return e && e.length ? (t = r || t === void 0 ? 1 : de(t), ft(e, 0, t < 0 ? 0 : t)) : [];
}
function pC(e, t, r) {
  var n = e == null ? 0 : e.length;
  return n ? (t = r || t === void 0 ? 1 : de(t), t = n - t, ft(e, t < 0 ? 0 : t, n)) : [];
}
function hC(e, t) {
  return e && e.length ? Es(e, ae(t), !1, !0) : [];
}
function vC(e, t) {
  return e && e.length ? Es(e, ae(t)) : [];
}
function mC(e, t) {
  return t(e), e;
}
var dh = Object.prototype, gC = dh.hasOwnProperty;
function sd(e, t, r, n) {
  return e === void 0 || _t(e, dh[r]) && !gC.call(n, r) ? t : e;
}
var yC = { "\\": "\\", "'": "'", "\n": "n", "\r": "r", "\u2028": "u2028", "\u2029": "u2029" };
function TC(e) {
  return "\\" + yC[e];
}
var kC = /<%=([\s\S]+?)%>/g, fh = kC, wC = /<%-([\s\S]+?)%>/g, bC = wC, _C = /<%([\s\S]+?)%>/g, EC = _C, AC = {
  /**
  * Used to detect `data` property values to be HTML-escaped.
  *
  * @memberOf _.templateSettings
  * @type {RegExp}
  */
  escape: bC,
  /**
  * Used to detect code to be evaluated.
  *
  * @memberOf _.templateSettings
  * @type {RegExp}
  */
  evaluate: EC,
  /**
  * Used to detect `data` property values to inject.
  *
  * @memberOf _.templateSettings
  * @type {RegExp}
  */
  interpolate: fh,
  /**
  * Used to reference the data object in the template text.
  *
  * @memberOf _.templateSettings
  * @type {string}
  */
  variable: "",
  /**
  * Used to import variables into the compiled template.
  *
  * @memberOf _.templateSettings
  * @type {Object}
  */
  imports: {
    /**
    * A reference to the `lodash` function.
    *
    * @memberOf _.templateSettings.imports
    * @type {Function}
    */
    _: { escape: Rp }
  }
}, Hu = AC, RC = "Invalid `variable` option passed into `_.template`", SC = /\b__p \+= '';/g, PC = /\b(__p \+=) '' \+/g, CC = /(__e\(.*?\)|\b__t\)) \+\n'';/g, IC = /[()=,{}\[\]\/\s]/, DC = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, Aa = /($^)/, MC = /['\n\r\u2028\u2029\\]/g, OC = Object.prototype, ud = OC.hasOwnProperty;
function $C(e, t, r) {
  var n = Hu.imports._.templateSettings || Hu;
  r && Er(e, t, r) && (t = void 0), e = _e(e), t = Ya({}, t, n, sd);
  var i = Ya({}, t.imports, n.imports, sd), a = nr(i), s = Qo(i, a), u, o, c = 0, l = t.interpolate || Aa, d = "__p += '", v = RegExp((t.escape || Aa).source + "|" + l.source + "|" + (l === fh ? DC : Aa).source + "|" + (t.evaluate || Aa).source + "|$", "g"), h = ud.call(t, "sourceURL") ? "//# sourceURL=" + (t.sourceURL + "").replace(/\s/g, " ") + `
` : "";
  e.replace(v, function(y, _, C, D, I, O) {
    return C || (C = D), d += e.slice(c, O).replace(MC, TC), _ && (u = !0, d += `' +
__e(` + _ + `) +
'`), I && (o = !0, d += `';
` + I + `;
__p += '`), C && (d += `' +
((__t = (` + C + `)) == null ? '' : __t) +
'`), c = O + y.length, y;
  }), d += `';
`;
  var m = ud.call(t, "variable") && t.variable;
  if (!m)
    d = `with (obj) {
` + d + `
}
`;
  else if (IC.test(m))
    throw new Error(RC);
  d = (o ? d.replace(SC, "") : d).replace(PC, "$1").replace(CC, "$1;"), d = "function(" + (m || "obj") + `) {
` + (m ? "" : `obj || (obj = {});
`) + "var __t, __p = ''" + (u ? ", __e = _.escape" : "") + (o ? `, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
` : `;
`) + d + `return __p
}`;
  var T = Nf(function() {
    return Function(a, h + "return " + d).apply(void 0, s);
  });
  if (T.source = d, Oo(T))
    throw T;
  return T;
}
var NC = "Expected a function";
function LC(e, t, r) {
  var n = !0, i = !0;
  if (typeof e != "function")
    throw new TypeError(NC);
  return Ge(r) && (n = "leading" in r ? !!r.leading : n, i = "trailing" in r ? !!r.trailing : i), bs(e, t, { leading: n, maxWait: t, trailing: i });
}
function Ta(e, t) {
  return t(e);
}
var UC = 9007199254740991, fu = 4294967295, FC = Math.min;
function VC(e, t) {
  if (e = de(e), e < 1 || e > UC)
    return [];
  var r = fu, n = FC(e, fu);
  t = Ft(t), e -= fu;
  for (var i = yo(n, t); ++r < e; )
    t(r);
  return i;
}
function BC() {
  return this;
}
function ph(e, t) {
  var r = e;
  return r instanceof ge && (r = r.value()), Uo(t, function(n, i) {
    return i.func.apply(i.thisArg, Cn([n], i.args));
  }, r);
}
function pu() {
  return ph(this.__wrapped__, this.__actions__);
}
function qC(e) {
  return _e(e).toLowerCase();
}
function GC(e) {
  return se(e) ? qe(e, Lt) : Xr(e) ? [e] : Or(gf(_e(e)));
}
var od = 9007199254740991;
function HC(e) {
  return e ? ri(de(e), -od, od) : e === 0 ? e : 0;
}
function WC(e) {
  return _e(e).toUpperCase();
}
function jC(e, t, r) {
  var n = se(e), i = n || En(e) || yi(e);
  if (t = ae(t), r == null) {
    var a = e && e.constructor;
    i ? r = n ? new a() : [] : Ge(e) ? r = nn(a) ? Ti(fs(e)) : {} : r = {};
  }
  return (i ? ht : Ut)(e, function(s, u, o) {
    return t(r, s, u, o);
  }), r;
}
function hh(e, t) {
  for (var r = e.length; r-- && ki(t, e[r], 0) > -1; )
    ;
  return r;
}
function vh(e, t) {
  for (var r = -1, n = e.length; ++r < n && ki(t, e[r], 0) > -1; )
    ;
  return r;
}
function JC(e, t, r) {
  if (e = _e(e), e && (r || t === void 0))
    return wf(e);
  if (!e || !(t = Zr(t)))
    return e;
  var n = wt(e), i = wt(t), a = vh(n, i), s = hh(n, i) + 1;
  return Dn(n, a, s).join("");
}
function KC(e, t, r) {
  if (e = _e(e), e && (r || t === void 0))
    return e.slice(0, kf(e) + 1);
  if (!e || !(t = Zr(t)))
    return e;
  var n = wt(e), i = hh(n, wt(t)) + 1;
  return Dn(n, 0, i).join("");
}
var YC = /^\s+/;
function zC(e, t, r) {
  if (e = _e(e), e && (r || t === void 0))
    return e.replace(YC, "");
  if (!e || !(t = Zr(t)))
    return e;
  var n = wt(e), i = vh(n, wt(t));
  return Dn(n, i).join("");
}
var XC = 30, ZC = "...", QC = /\w*$/;
function xC(e, t) {
  var r = XC, n = ZC;
  if (Ge(t)) {
    var i = "separator" in t ? t.separator : i;
    r = "length" in t ? de(t.length) : r, n = "omission" in t ? Zr(t.omission) : n;
  }
  e = _e(e);
  var a = e.length;
  if (_i(e)) {
    var s = wt(e);
    a = s.length;
  }
  if (r >= a)
    return e;
  var u = r - Ri(n);
  if (u < 1)
    return n;
  var o = s ? Dn(s, 0, u).join("") : e.slice(0, u);
  if (i === void 0)
    return o + n;
  if (s && (u += o.length - u), tc(i)) {
    if (e.slice(u).search(i)) {
      var c, l = o;
      for (i.global || (i = RegExp(i.source, _e(QC.exec(i)) + "g")), i.lastIndex = 0; c = i.exec(l); )
        var d = c.index;
      o = o.slice(0, d === void 0 ? u : d);
    }
  } else if (e.indexOf(Zr(i), u) != u) {
    var v = o.lastIndexOf(i);
    v > -1 && (o = o.slice(0, v));
  }
  return o + n;
}
function eI(e) {
  return Df(e, 1);
}
var rI = { "&amp;": "&", "&lt;": "<", "&gt;": ">", "&quot;": '"', "&#39;": "'" }, tI = Fo(rI), nI = tI, mh = /&(?:amp|lt|gt|quot|#39);/g, iI = RegExp(mh.source);
function aI(e) {
  return e = _e(e), e && iI.test(e) ? e.replace(mh, nI) : e;
}
var sI = 1 / 0, uI = hi && 1 / ks(new hi([, -0]))[1] == sI ? function(e) {
  return new hi(e);
} : Po, oI = uI, cI = 200;
function Rn(e, t, r) {
  var n = -1, i = ys, a = e.length, s = !0, u = [], o = u;
  if (r)
    s = !1, i = zo;
  else if (a >= cI) {
    var c = t ? null : oI(e);
    if (c)
      return ks(c);
    s = !1, i = sa, o = new Xn();
  } else
    o = t ? [] : u;
  e:
    for (; ++n < a; ) {
      var l = e[n], d = t ? t(l) : l;
      if (l = r || l !== 0 ? l : 0, s && d === d) {
        for (var v = o.length; v--; )
          if (o[v] === d)
            continue e;
        t && o.push(d), u.push(l);
      } else
        i(o, d, r) || (o !== u && o.push(d), u.push(l));
    }
  return u;
}
var lI = he(function(e) {
  return Rn(cr(e, 1, Ze, !0));
}), dI = lI, fI = he(function(e) {
  var t = xr(e);
  return Ze(t) && (t = void 0), Rn(cr(e, 1, Ze, !0), ae(t));
}), pI = fI, hI = he(function(e) {
  var t = xr(e);
  return t = typeof t == "function" ? t : void 0, Rn(cr(e, 1, Ze, !0), void 0, t);
}), vI = hI;
function mI(e) {
  return e && e.length ? Rn(e) : [];
}
function gI(e, t) {
  return e && e.length ? Rn(e, ae(t)) : [];
}
function yI(e, t) {
  return t = typeof t == "function" ? t : void 0, e && e.length ? Rn(e, void 0, t) : [];
}
var TI = 0;
function kI(e) {
  var t = ++TI;
  return _e(e) + t;
}
function wI(e, t) {
  return e == null ? !0 : ac(e, t);
}
var bI = Math.max;
function fc(e) {
  if (!(e && e.length))
    return [];
  var t = 0;
  return e = Pn(e, function(r) {
    if (Ze(r))
      return t = bI(r.length, t), !0;
  }), yo(t, function(r) {
    return qe(e, jo(r));
  });
}
function gh(e, t) {
  if (!(e && e.length))
    return [];
  var r = fc(e);
  return t == null ? r : qe(r, function(n) {
    return Qr(t, void 0, n);
  });
}
function yh(e, t, r, n) {
  return pa(e, t, r(ei(e, t)), n);
}
function _I(e, t, r) {
  return e == null ? e : yh(e, t, Ft(r));
}
function EI(e, t, r, n) {
  return n = typeof n == "function" ? n : void 0, e == null ? e : yh(e, t, Ft(r), n);
}
var AI = Ei(function(e, t, r) {
  return e + (r ? " " : "") + t.toUpperCase();
}), RI = AI;
function SI(e) {
  return e == null ? [] : Qo(e, Lr(e));
}
var PI = he(function(e, t) {
  return Ze(e) ? ma(e, t) : [];
}), CI = PI;
function II(e, t) {
  return ih(Ft(t), e);
}
var DI = cn(function(e) {
  var t = e.length, r = t ? e[0] : 0, n = this.__wrapped__, i = function(s) {
    return Mo(s, e);
  };
  return t > 1 || this.__actions__.length || !(n instanceof ge) || !un(r) ? this.thru(i) : (n = n.slice(r, +r + (t ? 1 : 0)), n.__actions__.push({ func: Ta, args: [i], thisArg: void 0 }), new dt(n, this.__chain__).thru(function(a) {
    return t && !a.length && a.push(void 0), a;
  }));
}), MI = DI;
function OI() {
  return up(this);
}
function $I() {
  var e = this.__wrapped__;
  if (e instanceof ge) {
    var t = e;
    return this.__actions__.length && (t = new ge(this)), t = t.reverse(), t.__actions__.push({ func: Ta, args: [Gu], thisArg: void 0 }), new dt(t, this.__chain__);
  }
  return this.thru(Gu);
}
function pc(e, t, r) {
  var n = e.length;
  if (n < 2)
    return n ? Rn(e[0]) : [];
  for (var i = -1, a = Array(n); ++i < n; )
    for (var s = e[i], u = -1; ++u < n; )
      u != i && (a[i] = ma(a[i] || s, e[u], t, r));
  return Rn(cr(a, 1), t, r);
}
var NI = he(function(e) {
  return pc(Pn(e, Ze));
}), LI = NI, UI = he(function(e) {
  var t = xr(e);
  return Ze(t) && (t = void 0), pc(Pn(e, Ze), ae(t));
}), FI = UI, VI = he(function(e) {
  var t = xr(e);
  return t = typeof t == "function" ? t : void 0, pc(Pn(e, Ze), void 0, t);
}), Th = VI, BI = he(fc), qI = BI;
function kh(e, t, r) {
  for (var n = -1, i = e.length, a = t.length, s = {}; ++n < i; ) {
    var u = n < a ? t[n] : void 0;
    r(s, e[n], u);
  }
  return s;
}
function GI(e, t) {
  return kh(e || [], t || [], da);
}
function HI(e, t) {
  return kh(e || [], t || [], pa);
}
var WI = he(function(e) {
  var t = e.length, r = t > 1 ? e[t - 1] : void 0;
  return r = typeof r == "function" ? (e.pop(), r) : void 0, gh(e, r);
}), jI = WI, K = { chunk: Rb, compact: Lb, concat: Ub, difference: Q_, differenceBy: eE, differenceWith: tE, drop: aE, dropRight: sE, dropRightWhile: uE, dropWhile: oE, fill: CE, findIndex: Mp, findLastIndex: $p, first: xl, flatten: Of, flattenDeep: jE, flattenDepth: JE, fromPairs: l1, head: xl, indexOf: C1, initial: I1, intersection: O1, intersectionBy: N1, intersectionWith: U1, join: FA, last: xr, lastIndexOf: JA, nth: RR, pull: $S, pullAll: ah, pullAllBy: NS, pullAllWith: LS, pullAt: BS, remove: uP, reverse: Gu, slice: CP, sortedIndex: GP, sortedIndexBy: HP, sortedIndexOf: WP, sortedLastIndex: jP, sortedLastIndexBy: JP, sortedLastIndexOf: KP, sortedUniq: YP, sortedUniqBy: zP, tail: dC, take: fC, takeRight: pC, takeRightWhile: hC, takeWhile: vC, union: dI, unionBy: pI, unionWith: vI, uniq: mI, uniqBy: gI, uniqWith: yI, unzip: fc, unzipWith: gh, without: CI, xor: LI, xorBy: FI, xorWith: Th, zip: qI, zipObject: GI, zipObjectDeep: HI, zipWith: jI }, Pe = { countBy: C_, each: zl, eachRight: Xl, every: RE, filter: IE, find: OE, findLast: FE, flatMap: BE, flatMapDeep: GE, flatMapDepth: HE, forEach: zl, forEachRight: Xl, groupBy: m1, includes: S1, invokeMap: X1, keyBy: GA, map: As, orderBy: FR, partition: AS, reduce: nP, reduceRight: aP, reject: sP, sample: yP, sampleSize: wP, shuffle: AP, size: PP, some: OP, sortBy: NP }, JI = { now: Ua }, Je = { after: Pk, ary: Df, before: Lf, bind: Uf, bindKey: o0, curry: Ko, curryRight: Yo, debounce: bs, defer: K_, delay: z_, flip: YE, memoize: hs, negate: ya, once: NR, overArgs: jR, partial: ih, partialRight: _S, rearg: tP, rest: dP, spread: eC, throttle: LC, unary: eI, wrap: II }, X = { castArray: Tb, clone: Cb, cloneDeep: ps, cloneDeepWith: Mb, cloneWith: $b, conformsTo: w_, eq: _t, gt: y1, gte: k1, isArguments: zn, isArray: se, isArrayBuffer: eA, isArrayLike: Nr, isArrayLikeObject: Ze, isBoolean: tA, isBuffer: En, isDate: sA, isElement: uA, isEmpty: rc, isEqual: Bp, isEqualWith: fA, isError: Oo, isFinite: hA, isFunction: nn, isInteger: qp, isLength: ds, isMap: ff, isMatch: vA, isMatchWith: mA, isNaN: yA, isNative: bA, isNil: _A, isNull: EA, isNumber: Gp, isObject: Ge, isObjectLike: je, isPlainObject: ha, isRegExp: tc, isSafeInteger: PA, isSet: pf, isString: Ps, isSymbol: Xr, isTypedArray: yi, isUndefined: CA, isWeakMap: DA, isWeakSet: OA, lt: QA, lte: eR, toArray: Jp, toFinite: en, toInteger: de, toLength: Cp, toNumber: ot, toPlainObject: yp, toSafeInteger: HC, toString: _e }, Sr = { add: Tk, ceil: _b, divide: iE, floor: XE, max: uR, maxBy: oR, mean: lR, meanBy: dR, min: gR, minBy: yR, multiply: kR, round: mP, subtract: oC, sum: cC, sumBy: lC }, hc = { clamp: Sb, inRange: E1, random: JS }, te = { assign: Fw, assignIn: Vl, assignInWith: Ya, assignWith: Gw, at: jw, create: I_, defaults: B_, defaultsDeep: W_, entries: Zl, entriesIn: Ql, extend: Vl, extendWith: Ya, findKey: $E, findLastKey: VE, forIn: s1, forInRight: u1, forOwn: o1, forOwnRight: c1, functions: d1, functionsIn: f1, get: Ro, has: dk, hasIn: Wo, invert: G1, invertBy: J1, invoke: Y1, keys: nr, keysIn: Lr, mapKeys: rR, mapValues: tR, merge: Wp, mergeWith: kp, omit: OR, omitBy: $R, pick: PS, pickBy: zp, result: fP, set: fk, setWith: bP, toPairs: Zl, toPairsIn: Ql, transform: jC, unset: wI, update: _I, updateWith: EI, values: Ai, valuesIn: SI }, Vt = { at: MI, chain: up, commit: Nb, lodash: g, next: AR, plant: CS, reverse: $I, tap: mC, thru: Ta, toIterator: BC, toJSON: pu, value: pu, valueOf: pu, wrapperChain: OI }, be = { camelCase: yb, capitalize: jf, deburr: Jf, endsWith: fE, escape: Rp, escapeRegExp: EE, kebabCase: BA, lowerCase: YA, lowerFirst: XA, pad: vS, padEnd: mS, padStart: gS, parseInt: kS, repeat: oP, replace: cP, snakeCase: DP, split: ZP, startCase: tC, startsWith: nC, template: $C, templateSettings: Hu, toLower: qC, toUpper: WC, trim: JC, trimEnd: KC, trimStart: zC, truncate: xC, unescape: aI, upperCase: RI, upperFirst: Lo, words: sp }, Ee = { attempt: Nf, bindAll: i0, cond: g_, conforms: k_, constant: Io, defaultTo: U_, flow: n1, flowRight: a1, identity: Rr, iteratee: NA, matches: iR, matchesProperty: sR, method: hR, methodOf: mR, mixin: jp, noop: Po, nthArg: SR, over: BR, overEvery: KR, overSome: zR, property: pp, propertyOf: IS, range: ZS, rangeRight: xS, stubArray: wo, stubFalse: To, stubObject: iC, stubString: aC, stubTrue: sC, times: VC, toPath: GC, uniqueId: kI };
function KI() {
  var e = new ge(this.__wrapped__);
  return e.__actions__ = Or(this.__actions__), e.__dir__ = this.__dir__, e.__filtered__ = this.__filtered__, e.__iteratees__ = Or(this.__iteratees__), e.__takeCount__ = this.__takeCount__, e.__views__ = Or(this.__views__), e;
}
function YI() {
  if (this.__filtered__) {
    var e = new ge(this);
    e.__dir__ = -1, e.__filtered__ = !0;
  } else
    e = this.clone(), e.__dir__ *= -1;
  return e;
}
var zI = Math.max, XI = Math.min;
function ZI(e, t, r) {
  for (var n = -1, i = r.length; ++n < i; ) {
    var a = r[n], s = a.size;
    switch (a.type) {
      case "drop":
        e += s;
        break;
      case "dropRight":
        t -= s;
        break;
      case "take":
        t = XI(t, e + s);
        break;
      case "takeRight":
        e = zI(e, t - s);
        break;
    }
  }
  return { start: e, end: t };
}
var QI = 1, xI = 2, eD = Math.min;
function rD() {
  var e = this.__wrapped__.value(), t = this.__dir__, r = se(e), n = t < 0, i = r ? e.length : 0, a = ZI(0, i, this.__views__), s = a.start, u = a.end, o = u - s, c = n ? u : s - 1, l = this.__iteratees__, d = l.length, v = 0, h = eD(o, this.__takeCount__);
  if (!r || !n && i == o && h == o)
    return ph(e, this.__actions__);
  var m = [];
  e:
    for (; o-- && v < h; ) {
      c += t;
      for (var T = -1, y = e[c]; ++T < d; ) {
        var _ = l[T], C = _.iteratee, D = _.type, I = C(y);
        if (D == xI)
          y = I;
        else if (!I) {
          if (D == QI)
            continue e;
          break e;
        }
      }
      m[v++] = y;
    }
  return m;
}
/**
* @license
* Lodash (Custom Build) <https://lodash.com/>
* Build: `lodash modularize exports="es" -o ./`
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/
var tD = "4.17.21", nD = 2, iD = 1, aD = 3, wh = 4294967295, sD = Array.prototype, uD = Object.prototype, bh = uD.hasOwnProperty, cd = mr ? mr.iterator : void 0, oD = Math.max, ld = Math.min, vc = function(e) {
  return function(t, r, n) {
    if (n == null) {
      var i = Ge(r), a = i && nr(r), s = a && a.length && Rs(r, a);
      (s ? s.length : i) || (n = r, r = t, t = this);
    }
    return e(t, r, n);
  };
}(jp);
g.after = Je.after;
g.ary = Je.ary;
g.assign = te.assign;
g.assignIn = te.assignIn;
g.assignInWith = te.assignInWith;
g.assignWith = te.assignWith;
g.at = te.at;
g.before = Je.before;
g.bind = Je.bind;
g.bindAll = Ee.bindAll;
g.bindKey = Je.bindKey;
g.castArray = X.castArray;
g.chain = Vt.chain;
g.chunk = K.chunk;
g.compact = K.compact;
g.concat = K.concat;
g.cond = Ee.cond;
g.conforms = Ee.conforms;
g.constant = Ee.constant;
g.countBy = Pe.countBy;
g.create = te.create;
g.curry = Je.curry;
g.curryRight = Je.curryRight;
g.debounce = Je.debounce;
g.defaults = te.defaults;
g.defaultsDeep = te.defaultsDeep;
g.defer = Je.defer;
g.delay = Je.delay;
g.difference = K.difference;
g.differenceBy = K.differenceBy;
g.differenceWith = K.differenceWith;
g.drop = K.drop;
g.dropRight = K.dropRight;
g.dropRightWhile = K.dropRightWhile;
g.dropWhile = K.dropWhile;
g.fill = K.fill;
g.filter = Pe.filter;
g.flatMap = Pe.flatMap;
g.flatMapDeep = Pe.flatMapDeep;
g.flatMapDepth = Pe.flatMapDepth;
g.flatten = K.flatten;
g.flattenDeep = K.flattenDeep;
g.flattenDepth = K.flattenDepth;
g.flip = Je.flip;
g.flow = Ee.flow;
g.flowRight = Ee.flowRight;
g.fromPairs = K.fromPairs;
g.functions = te.functions;
g.functionsIn = te.functionsIn;
g.groupBy = Pe.groupBy;
g.initial = K.initial;
g.intersection = K.intersection;
g.intersectionBy = K.intersectionBy;
g.intersectionWith = K.intersectionWith;
g.invert = te.invert;
g.invertBy = te.invertBy;
g.invokeMap = Pe.invokeMap;
g.iteratee = Ee.iteratee;
g.keyBy = Pe.keyBy;
g.keys = nr;
g.keysIn = te.keysIn;
g.map = Pe.map;
g.mapKeys = te.mapKeys;
g.mapValues = te.mapValues;
g.matches = Ee.matches;
g.matchesProperty = Ee.matchesProperty;
g.memoize = Je.memoize;
g.merge = te.merge;
g.mergeWith = te.mergeWith;
g.method = Ee.method;
g.methodOf = Ee.methodOf;
g.mixin = vc;
g.negate = ya;
g.nthArg = Ee.nthArg;
g.omit = te.omit;
g.omitBy = te.omitBy;
g.once = Je.once;
g.orderBy = Pe.orderBy;
g.over = Ee.over;
g.overArgs = Je.overArgs;
g.overEvery = Ee.overEvery;
g.overSome = Ee.overSome;
g.partial = Je.partial;
g.partialRight = Je.partialRight;
g.partition = Pe.partition;
g.pick = te.pick;
g.pickBy = te.pickBy;
g.property = Ee.property;
g.propertyOf = Ee.propertyOf;
g.pull = K.pull;
g.pullAll = K.pullAll;
g.pullAllBy = K.pullAllBy;
g.pullAllWith = K.pullAllWith;
g.pullAt = K.pullAt;
g.range = Ee.range;
g.rangeRight = Ee.rangeRight;
g.rearg = Je.rearg;
g.reject = Pe.reject;
g.remove = K.remove;
g.rest = Je.rest;
g.reverse = K.reverse;
g.sampleSize = Pe.sampleSize;
g.set = te.set;
g.setWith = te.setWith;
g.shuffle = Pe.shuffle;
g.slice = K.slice;
g.sortBy = Pe.sortBy;
g.sortedUniq = K.sortedUniq;
g.sortedUniqBy = K.sortedUniqBy;
g.split = be.split;
g.spread = Je.spread;
g.tail = K.tail;
g.take = K.take;
g.takeRight = K.takeRight;
g.takeRightWhile = K.takeRightWhile;
g.takeWhile = K.takeWhile;
g.tap = Vt.tap;
g.throttle = Je.throttle;
g.thru = Ta;
g.toArray = X.toArray;
g.toPairs = te.toPairs;
g.toPairsIn = te.toPairsIn;
g.toPath = Ee.toPath;
g.toPlainObject = X.toPlainObject;
g.transform = te.transform;
g.unary = Je.unary;
g.union = K.union;
g.unionBy = K.unionBy;
g.unionWith = K.unionWith;
g.uniq = K.uniq;
g.uniqBy = K.uniqBy;
g.uniqWith = K.uniqWith;
g.unset = te.unset;
g.unzip = K.unzip;
g.unzipWith = K.unzipWith;
g.update = te.update;
g.updateWith = te.updateWith;
g.values = te.values;
g.valuesIn = te.valuesIn;
g.without = K.without;
g.words = be.words;
g.wrap = Je.wrap;
g.xor = K.xor;
g.xorBy = K.xorBy;
g.xorWith = K.xorWith;
g.zip = K.zip;
g.zipObject = K.zipObject;
g.zipObjectDeep = K.zipObjectDeep;
g.zipWith = K.zipWith;
g.entries = te.toPairs;
g.entriesIn = te.toPairsIn;
g.extend = te.assignIn;
g.extendWith = te.assignInWith;
vc(g, g);
g.add = Sr.add;
g.attempt = Ee.attempt;
g.camelCase = be.camelCase;
g.capitalize = be.capitalize;
g.ceil = Sr.ceil;
g.clamp = hc.clamp;
g.clone = X.clone;
g.cloneDeep = X.cloneDeep;
g.cloneDeepWith = X.cloneDeepWith;
g.cloneWith = X.cloneWith;
g.conformsTo = X.conformsTo;
g.deburr = be.deburr;
g.defaultTo = Ee.defaultTo;
g.divide = Sr.divide;
g.endsWith = be.endsWith;
g.eq = X.eq;
g.escape = be.escape;
g.escapeRegExp = be.escapeRegExp;
g.every = Pe.every;
g.find = Pe.find;
g.findIndex = K.findIndex;
g.findKey = te.findKey;
g.findLast = Pe.findLast;
g.findLastIndex = K.findLastIndex;
g.findLastKey = te.findLastKey;
g.floor = Sr.floor;
g.forEach = Pe.forEach;
g.forEachRight = Pe.forEachRight;
g.forIn = te.forIn;
g.forInRight = te.forInRight;
g.forOwn = te.forOwn;
g.forOwnRight = te.forOwnRight;
g.get = te.get;
g.gt = X.gt;
g.gte = X.gte;
g.has = te.has;
g.hasIn = te.hasIn;
g.head = K.head;
g.identity = Rr;
g.includes = Pe.includes;
g.indexOf = K.indexOf;
g.inRange = hc.inRange;
g.invoke = te.invoke;
g.isArguments = X.isArguments;
g.isArray = se;
g.isArrayBuffer = X.isArrayBuffer;
g.isArrayLike = X.isArrayLike;
g.isArrayLikeObject = X.isArrayLikeObject;
g.isBoolean = X.isBoolean;
g.isBuffer = X.isBuffer;
g.isDate = X.isDate;
g.isElement = X.isElement;
g.isEmpty = X.isEmpty;
g.isEqual = X.isEqual;
g.isEqualWith = X.isEqualWith;
g.isError = X.isError;
g.isFinite = X.isFinite;
g.isFunction = X.isFunction;
g.isInteger = X.isInteger;
g.isLength = X.isLength;
g.isMap = X.isMap;
g.isMatch = X.isMatch;
g.isMatchWith = X.isMatchWith;
g.isNaN = X.isNaN;
g.isNative = X.isNative;
g.isNil = X.isNil;
g.isNull = X.isNull;
g.isNumber = X.isNumber;
g.isObject = Ge;
g.isObjectLike = X.isObjectLike;
g.isPlainObject = X.isPlainObject;
g.isRegExp = X.isRegExp;
g.isSafeInteger = X.isSafeInteger;
g.isSet = X.isSet;
g.isString = X.isString;
g.isSymbol = X.isSymbol;
g.isTypedArray = X.isTypedArray;
g.isUndefined = X.isUndefined;
g.isWeakMap = X.isWeakMap;
g.isWeakSet = X.isWeakSet;
g.join = K.join;
g.kebabCase = be.kebabCase;
g.last = xr;
g.lastIndexOf = K.lastIndexOf;
g.lowerCase = be.lowerCase;
g.lowerFirst = be.lowerFirst;
g.lt = X.lt;
g.lte = X.lte;
g.max = Sr.max;
g.maxBy = Sr.maxBy;
g.mean = Sr.mean;
g.meanBy = Sr.meanBy;
g.min = Sr.min;
g.minBy = Sr.minBy;
g.stubArray = Ee.stubArray;
g.stubFalse = Ee.stubFalse;
g.stubObject = Ee.stubObject;
g.stubString = Ee.stubString;
g.stubTrue = Ee.stubTrue;
g.multiply = Sr.multiply;
g.nth = K.nth;
g.noop = Ee.noop;
g.now = JI.now;
g.pad = be.pad;
g.padEnd = be.padEnd;
g.padStart = be.padStart;
g.parseInt = be.parseInt;
g.random = hc.random;
g.reduce = Pe.reduce;
g.reduceRight = Pe.reduceRight;
g.repeat = be.repeat;
g.replace = be.replace;
g.result = te.result;
g.round = Sr.round;
g.sample = Pe.sample;
g.size = Pe.size;
g.snakeCase = be.snakeCase;
g.some = Pe.some;
g.sortedIndex = K.sortedIndex;
g.sortedIndexBy = K.sortedIndexBy;
g.sortedIndexOf = K.sortedIndexOf;
g.sortedLastIndex = K.sortedLastIndex;
g.sortedLastIndexBy = K.sortedLastIndexBy;
g.sortedLastIndexOf = K.sortedLastIndexOf;
g.startCase = be.startCase;
g.startsWith = be.startsWith;
g.subtract = Sr.subtract;
g.sum = Sr.sum;
g.sumBy = Sr.sumBy;
g.template = be.template;
g.times = Ee.times;
g.toFinite = X.toFinite;
g.toInteger = de;
g.toLength = X.toLength;
g.toLower = be.toLower;
g.toNumber = X.toNumber;
g.toSafeInteger = X.toSafeInteger;
g.toString = X.toString;
g.toUpper = be.toUpper;
g.trim = be.trim;
g.trimEnd = be.trimEnd;
g.trimStart = be.trimStart;
g.truncate = be.truncate;
g.unescape = be.unescape;
g.uniqueId = Ee.uniqueId;
g.upperCase = be.upperCase;
g.upperFirst = be.upperFirst;
g.each = Pe.forEach;
g.eachRight = Pe.forEachRight;
g.first = K.head;
vc(g, function() {
  var e = {};
  return Ut(g, function(t, r) {
    bh.call(g.prototype, r) || (e[r] = t);
  }), e;
}(), { chain: !1 });
g.VERSION = tD;
(g.templateSettings = be.templateSettings).imports._ = g;
ht(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function(e) {
  g[e].placeholder = g;
});
ht(["drop", "take"], function(e, t) {
  ge.prototype[e] = function(r) {
    r = r === void 0 ? 1 : oD(de(r), 0);
    var n = this.__filtered__ && !t ? new ge(this) : this.clone();
    return n.__filtered__ ? n.__takeCount__ = ld(r, n.__takeCount__) : n.__views__.push({ size: ld(r, wh), type: e + (n.__dir__ < 0 ? "Right" : "") }), n;
  }, ge.prototype[e + "Right"] = function(r) {
    return this.reverse()[e](r).reverse();
  };
});
ht(["filter", "map", "takeWhile"], function(e, t) {
  var r = t + 1, n = r == iD || r == aD;
  ge.prototype[e] = function(i) {
    var a = this.clone();
    return a.__iteratees__.push({ iteratee: ae(i), type: r }), a.__filtered__ = a.__filtered__ || n, a;
  };
});
ht(["head", "last"], function(e, t) {
  var r = "take" + (t ? "Right" : "");
  ge.prototype[e] = function() {
    return this[r](1).value()[0];
  };
});
ht(["initial", "tail"], function(e, t) {
  var r = "drop" + (t ? "" : "Right");
  ge.prototype[e] = function() {
    return this.__filtered__ ? new ge(this) : this[r](1);
  };
});
ge.prototype.compact = function() {
  return this.filter(Rr);
};
ge.prototype.find = function(e) {
  return this.filter(e).head();
};
ge.prototype.findLast = function(e) {
  return this.reverse().find(e);
};
ge.prototype.invokeMap = he(function(e, t) {
  return typeof e == "function" ? new ge(this) : this.map(function(r) {
    return ga(r, e, t);
  });
});
ge.prototype.reject = function(e) {
  return this.filter(ya(ae(e)));
};
ge.prototype.slice = function(e, t) {
  e = de(e);
  var r = this;
  return r.__filtered__ && (e > 0 || t < 0) ? new ge(r) : (e < 0 ? r = r.takeRight(-e) : e && (r = r.drop(e)), t !== void 0 && (t = de(t), r = t < 0 ? r.dropRight(-t) : r.take(t - e)), r);
};
ge.prototype.takeRightWhile = function(e) {
  return this.reverse().takeWhile(e).reverse();
};
ge.prototype.toArray = function() {
  return this.take(wh);
};
Ut(ge.prototype, function(e, t) {
  var r = /^(?:filter|find|map|reject)|While$/.test(t), n = /^(?:head|last)$/.test(t), i = g[n ? "take" + (t == "last" ? "Right" : "") : t], a = n || /^find/.test(t);
  i && (g.prototype[t] = function() {
    var s = this.__wrapped__, u = n ? [1] : arguments, o = s instanceof ge, c = u[0], l = o || se(s), d = function(C) {
      var D = i.apply(g, Cn([C], u));
      return n && v ? D[0] : D;
    };
    l && r && typeof c == "function" && c.length != 1 && (o = l = !1);
    var v = this.__chain__, h = !!this.__actions__.length, m = a && !v, T = o && !h;
    if (!a && l) {
      s = T ? s : new ge(this);
      var y = e.apply(s, u);
      return y.__actions__.push({ func: Ta, args: [d], thisArg: void 0 }), new dt(y, v);
    }
    return m && T ? e.apply(this, u) : (y = this.thru(d), m ? n ? y.value()[0] : y.value() : y);
  });
});
ht(["pop", "push", "shift", "sort", "splice", "unshift"], function(e) {
  var t = sD[e], r = /^(?:push|sort|unshift)$/.test(e) ? "tap" : "thru", n = /^(?:pop|shift)$/.test(e);
  g.prototype[e] = function() {
    var i = arguments;
    if (n && !this.__chain__) {
      var a = this.value();
      return t.apply(se(a) ? a : [], i);
    }
    return this[r](function(s) {
      return t.apply(se(s) ? s : [], i);
    });
  };
});
Ut(ge.prototype, function(e, t) {
  var r = g[t];
  if (r) {
    var n = r.name + "";
    bh.call(vi, n) || (vi[n] = []), vi[n].push({ name: t, func: r });
  }
});
vi[Ts(void 0, nD).name] = [{ name: "wrapper", func: void 0 }];
ge.prototype.clone = KI;
ge.prototype.reverse = YI;
ge.prototype.value = rD;
g.prototype.at = Vt.at;
g.prototype.chain = Vt.wrapperChain;
g.prototype.commit = Vt.commit;
g.prototype.next = Vt.next;
g.prototype.plant = Vt.plant;
g.prototype.reverse = Vt.reverse;
g.prototype.toJSON = g.prototype.valueOf = g.prototype.value = Vt.value;
g.prototype.first = g.prototype.head;
cd && (g.prototype[cd] = Vt.toIterator);
var Te = { roomName: void 0, authToken: void 0, peerId: void 0, apiBase: void 0, baseURI: void 0, defaults: { audio: !0, video: !0 }, modules: void 0, organizationId: void 0, overrides: {}, viewType: void 0, env: void 0, cachedUserDetails: void 0 };
function cD(e) {
  var t, r, n, i, a, s, u, o;
  (t = Te.roomName) !== null && t !== void 0 || (Te.roomName = e == null ? void 0 : e.roomName), (r = Te.authToken) !== null && r !== void 0 || (Te.authToken = e == null ? void 0 : e.authToken), (n = Te.peerId) !== null && n !== void 0 || (Te.peerId = e == null ? void 0 : e.peerId), (i = Te.apiBase) !== null && i !== void 0 || (Te.apiBase = e == null ? void 0 : e.apiBase), (a = Te.baseURI) !== null && a !== void 0 || (Te.baseURI = e == null ? void 0 : e.baseURI), (s = Te.modules) !== null && s !== void 0 || (Te.modules = e == null ? void 0 : e.modules), (u = Te.organizationId) !== null && u !== void 0 || (Te.organizationId = e == null ? void 0 : e.organizationId), Te.defaults = ie(ie({}, Te.defaults), (o = e == null ? void 0 : e.defaults) !== null && o !== void 0 ? o : {});
}
var _h = "VERSION_PLACEHOLDER";
function lD(e) {
  var t = e.servicePrefix, r = e.apiBase, n = e.baseURI;
  return n ? "".concat(t, ".").concat(n) : r != null && r.includes("api.preprod.dyte") ? "".concat(t, ".preprod.dyte.io") : r != null && r.includes("api.devel.dyte") ? "".concat(t, ".devel.dyte.io") : "".concat(t, ".dyte.io");
}
var $e = {
  INTERNAL_CALL_STATS: "internal_call_stats",
  SIMULCAST: "simulcast",
  CHAT_SOCKET_SERVER: "chat_socket_server",
  POLL_SOCKET_SERVER: "poll_socket_server",
  PLUGIN_SOCKET_SERVER: "plugin_socket_server",
  NR_OTEL_WEB: "nr_otel_web",
  CONNECTED_MEETINGS: "connected_meetings",
  ICE_RESTART_ON_FAILED_STATE: "ice_restart_on_failed_state",
  ICE_RESTART_ON_DISCONNECTED_STATE: "ice_restart_on_disconnected_state",
  ENABLE_ICE_STATE_LOGGING: "enable_ice_state_logging",
  REMOVE_OPERATIONAL_MIC: "web_core_remove_operational_mic",
  SUPPRESS_PEER_MUTE_UNMUTE_EMITS: "web_core_suppress_peer_mute_unmute_emits",
  SKIP_OTEL_TRACES: "skip_otel_traces",
  NEW_LOCAL_MEDIA_HANDLER: "new_local_media_handler",
  CALLSTATS_INGESTION_LAYER: "callstats_ingestion_layer",
  USE_USERIDS_IN_CHAT: "use_userids_in_chat",
  CUSTOM_PING_PONG: "custom_ping_pong",
  // NOTE(itzmanish) below flags is added by me
  ENABLE_HIVE_SIMULCAST: "enable_hive_simulcast",
  ENABLE_HIVE_TRANSPORT_RECONNECTION_ON_ICE_FAILED: "enable_hive_transport_reconnection_on_ice_failed",
  ENABLE_HIVE_EXPERIMENTAL_FAIL_RECOVERY: "enable_hive_fail_recovery",
  ENABLE_HIVE_INFINITE_RETRIES: "enable_hive_infinite_retries",
  // ==========================================
  BYPASS_LOG_EXCLUSION_LIST: "bypass_log_exclusion_list",
  LOG_LEVEL: "log_level",
  V1_PLUGINS: "v1_plugins",
  SCREENSHARE_DTX: "screenshare_dtx",
  SCREENSHARE_PRIORITY: "screenshare_priority",
  SCREENSHARE_MIN_BITRATE: "screenshare_minbitrate",
  SCREENSHARE_MAX_DIMENSIONS: "screenshare_maxdimensions",
  SCREENSHARE_SIMULCAST: "screenshare_simulcast",
  DISABLE_WEBCAM_LAYERS_ON_SCREENSHARE: "disable_webcam_layers_on_screenshare",
  SCREENSHARE_FORCE_GOOG_CONFERENCE: "screenshare_force_goog_conference",
  LIVESTREAM: "feat_livestream",
  FETCH_RETRY: "fetch_retry",
  DEVICE_REMOVE_EXP: "device_remove_exp",
  DISABLE_WEBCAM_SIMULCAST: "webcore_disable_webcam_simulcast",
  OVERRIDE_WEBCAM_SIMULCAST: "override_webcam_simulcast",
  SOCKET_POLLING: "socket_polling",
  NS_NETWORK_SCORE: "ns_network_score",
  FEAT_PAGINATED_CHAT: "feat_paginated_chat",
  VAL_MIN_FRAMERATE: "val_min_framerate",
  EXTENSION_HACK: "extension_hack",
  VAL_MAX_FRAMERATE_EXT: "val_max_framerate_ext",
  VAL_MIN_FRAMERATE_EXT: "val_min_framerate_ext",
  SCREEENSHARE_ERR_HACK: "screenshare_err_hack",
  TROUBLESHOOTING: "feat_troubleshooting",
  VIDEO_CONSTRAINTS: "video_constraints",
  SCREENSHARE_CONSTRAINTS: "screenshare_constraints",
  FEAT_CHAT_SDK: "feat_chat_sdk",
  FEAT_CHAT_SDK_SEARCH: "chat_search",
  OBS_QUALITY: "obs_quality",
  ALLOW_SAFARI_MEDIA_MIDDLEWARES: "allow_safari_media_middlewares",
  DYNAMIC_VIDEO_QUALITY: "dynamic_video_quality",
  EXP_RESHARE: "exp_reshare",
  LEAVE_STAGE_ON_END: "leave_stage_on_end",
  SKIP_SETTING_IN_USE_DEVICE: "skip_setting_in_use_device",
  PRECALL_BANDWIDTH_TEST: "precall_bandwidth_test"
};
function Wu(e) {
  var t = {};
  return typeof (e == null ? void 0 : e.code) == "number" && (t.code = e.code), typeof (e == null ? void 0 : e.code) == "string" && (t.code = e.code.substring(0, 100)), typeof (e == null ? void 0 : e.name) == "string" && (t.name = e.name.substring(0, 500)), typeof (e == null ? void 0 : e.message) == "string" && (t.message = e.message.substring(0, 500)), typeof (e == null ? void 0 : e.reason) == "string" && (t.reason = e.reason.substring(0, 500)), typeof (e == null ? void 0 : e.stack) == "string" && (t.stack = e.stack.substring(0, 500)), t;
}
function Eh() {
  var e, t, r, n = typeof navigator != "undefined" && !navigator.isReactNative && ((e = window.location.host) === null || e === void 0 ? void 0 : e.includes("devel")) && ((t = window.location.host) === null || t === void 0 ? void 0 : t.includes("dyte.io")), i = !!((r = Te.modules) !== null && r !== void 0 && (r = r.devTools) !== null && r !== void 0 && r.logs);
  return n || i;
}
function dD(e) {
  if (Oe.hasFeature($e.LOG_LEVEL)) {
    var t = Oe.getValue($e.LOG_LEVEL) || "all";
    if (t = t.toLowerCase().trim(), t === "off")
      return !1;
    if (t !== "all") {
      var r = ["debug", "log", "info", "warn", "error"], n = r.indexOf(e), i = r.indexOf(t);
      if (n < i)
        return !1;
    }
  }
  return !0;
}
function Ah(e, t) {
  var r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  return Object.getOwnPropertyNames(e).forEach(function(n) {
    var i;
    if (![null, void 0, NaN].includes(e[n]) && !(t && (((i = t.match(/\./g)) === null || i === void 0 ? void 0 : i.length) || 0) >= 10)) {
      var a = t ? "".concat(t, ".").concat(n) : n;
      typeof e[n] == "object" ? Ah(e[n], a, r) : ["number", "string", "boolean"].includes(typeof e[n]) && (r[a] = e[n]);
    }
  }), r;
}
function fD(e) {
  var t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "", n = {};
  try {
    var i = JSON.stringify(t), a = JSON.parse(i), s = Ah(a, r), u = JSON.stringify(s);
    if (u.length > 5e3) {
      var o = 'Log named: "'.concat(e, '" is trying to log an flattened object of size ').concat(u.length, " chars that is beyond permitted limit of 5000 chars. Please optimize."), c = Eh();
      throw c && console.error(o, { log: t, flattened: u }), new Error(o);
    }
    return JSON.parse(u);
  } catch (d) {
    var l = Wu(d);
    n["".concat(r, ".error.message")] = l.message || "", n["".concat(r, ".error.stack")] = l.stack || "", n["".concat(r, ".error.reason")] = l.reason || "", n["".concat(r, ".error.source")] = "safelyFlattenObjForOpenTelemetry";
  }
  return n;
}
var ua = "chrome", Rh = "opera", Sh = "firefox", Ph = "iexplorer", Ch = "safari", Ih = "nwjs", Dh = "electron", Mh = "react-native", mc = "unknown", Xa = { Chrome: ua, Chromium: ua, Opera: Rh, Firefox: Sh, "Internet Explorer": Ph, Safari: Ch };
function pD() {
  var e = navigator, t = e.userAgent, r = { name: mc, version: void 0 };
  if (t.match(/Chrome/) && !t.match(/Edge/))
    if (t.match(/Edg(A?)/)) {
      var n = t.match(/Chrome\/([\d.]+)/)[1];
      Number.parseInt(n, 10) > 72 && (r.name = ua, r.version = n);
    } else
      r.name = ua, r.version = t.match(/Chrome\/([\d.]+)/)[1];
  return r;
}
function hD() {
  var e = navigator, t = e.userAgent;
  if (t.match(/Electron/)) {
    var r = t.match(/Electron\/([\d.]+)/)[1];
    return { name: Dh, version: r };
  }
  return null;
}
function vD() {
  var e = navigator, t = e.userAgent;
  if (t.match(/JitsiMeetNW/)) {
    var r = t.match(/JitsiMeetNW\/([\d.]+)/)[1];
    return { name: Ih, version: r };
  }
}
function mD() {
  var e = navigator.userAgent.match(/\b(react[ \t_-]*native)(?:\/(\S+))?/i), t;
  if (e || navigator.product === "ReactNative")
    return e && e.length > 2 && (e[1], t = e[2]), t || (t = "unknown"), { name: Mh, version: t };
}
function gD(e) {
  for (var t, r = [mD, hD, vD], n = 0; n < r.length; n += 1)
    if (t = r[n](), t)
      return t;
  var i = e.getBrowserName();
  return i in Xa ? { name: Xa[i], version: e.getBrowserVersion() } : (t = pD(), t || { name: mc, version: void 0 });
}
var yD = /* @__PURE__ */ function() {
  function e() {
    var t = this;
    w(this, e), this._bowser = void 0, this._name = void 0, this._version = void 0, this.getDeviceInfo = function() {
      return { isMobile: t.isMobile(), browserName: t._bowser.getBrowserName(), osName: t._bowser.getOSName(), browserVersion: t._bowser.getBrowserVersion(), osVersionName: t._bowser.getOSVersion(), engineName: t._bowser.getEngineName() };
    };
  }
  return b(e, [{
    key: "init",
    value: (
      /**
      * Creates new BrowserDetection instance.
      *
      * @param {Object} [browserInfo] - Information about the browser.
      * @param {string} browserInfo.name - The name of the browser.
      * @param {string} browserInfo.version - The version of the browser.
      */
      function(r) {
        var n, i;
        if (this._bowser = fv.getParser(navigator.userAgent), typeof r == "undefined") {
          var a = gD(this._bowser);
          n = a.name, i = a.version;
        } else
          r.name in Xa ? (n = Xa[r.name], i = r.version) : (n = mc, i = void 0);
        this._name = n, this._version = i;
      }
    )
    /**
    * Gets current browser name.
    * @returns {string}
    */
  }, {
    key: "getName",
    value: function() {
      return this._name;
    }
    /**
    * Checks if current browser is Chrome.
    * @returns {boolean}
    */
  }, {
    key: "isChrome",
    value: function() {
      return this._name === ua;
    }
    /**
    * Checks if current browser is Opera.
    * @returns {boolean}
    */
  }, {
    key: "isOpera",
    value: function() {
      return this._name === Rh;
    }
    /**
    * Checks if current browser is Firefox.
    * @returns {boolean}
    */
  }, {
    key: "isFirefox",
    value: function() {
      return this._name === Sh;
    }
    /**
    * Checks if current browser is Internet Explorer.
    * @returns {boolean}
    */
  }, {
    key: "isIExplorer",
    value: function() {
      return this._name === Ph;
    }
    /**
    * Checks if current browser is Safari.
    * @returns {boolean}
    */
  }, {
    key: "isSafari",
    value: function() {
      return this._name === Ch;
    }
    /**
    * Checks if current environment is NWJS.
    * @returns {boolean}
    */
  }, {
    key: "isNWJS",
    value: function() {
      return this._name === Ih;
    }
    /**
    * Checks if current environment is Electron.
    * @returns {boolean}
    */
  }, {
    key: "isElectron",
    value: function() {
      return this._name === Dh;
    }
    /**
    * Checks if current environment is React Native.
    * @returns {boolean}
    */
  }, {
    key: "isReactNative",
    value: function() {
      return this._name === Mh || navigator.isReactNative === !0;
    }
    /**
    * Returns the version of the current browser.
    * @returns {string}
    */
  }, { key: "getVersion", value: function() {
    return this._version;
  } }, { key: "isMobile", value: function() {
    return this._bowser.getPlatformType() === "mobile";
  } }, {
    key: "_checkCondition",
    value: (
      /**
      * Check if the parsed browser matches the passed condition.
      *
      * @param {Object} checkTree - It's one or two layered object, which can include a
      * platform or an OS on the first layer and should have browsers specs on the
      * bottom layer.
      * Eg. { chrome: '>71.1.0' }
      *		 { windows: { chrome: '<70.2' } }
      * @returns {boolean | undefined} - Returns true if the browser satisfies the set
      * conditions, false if not and undefined when the browser is not defined in the
      * checktree object or when the current browser's version is unknown.
      * @private
      */
      function(r) {
        if (this._version)
          return this._bowser.satisfies(r);
      }
    )
    /**
    * Compares the passed version with the current browser version.
    *
    * @param {*} version - The version to compare with. Anything different
    * than string will be converted to string.
    * @returns {boolean|undefined} - Returns true if the current version is
    * greater than the passed version and false otherwise. Returns undefined if
    * the current browser version is unknown.
    */
  }, {
    key: "isVersionGreaterThan",
    value: function(r) {
      return this._checkCondition({ [this._name]: ">".concat(r) });
    }
    /**
    * Compares the passed version with the current browser version.
    *
    * @param {*} version - The version to compare with. Anything different
    * than string will be converted to string.
    * @returns {boolean|undefined} - Returns true if the current version is
    * lower than the passed version and false otherwise. Returns undefined if
    * the current browser version is unknown.
    */
  }, {
    key: "isVersionLessThan",
    value: function(r) {
      return this._checkCondition({ [this._name]: "<".concat(r) });
    }
    /**
    * Compares the passed version with the current browser version.
    *
    * @param {*} version - The version to compare with. Anything different
    * than string will be converted to string.
    * @returns {boolean|undefined} - Returns true if the current version is
    * equal to the passed version and false otherwise. Returns undefined if
    * the current browser version is unknown.
    * A loose-equality operator is used here so that it matches the sub-versions as well.
    */
  }, { key: "isVersionEqualTo", value: function(r) {
    return this._checkCondition({ [this._name]: "~".concat(r) });
  } }]), e;
}(), TD = 72, kD = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.apply(this, arguments);
  }
  return b(r, [{
    key: "doesVideoMuteByStreamRemove",
    value: (
      /**
      * Tells whether or not the <tt>MediaStream/tt> is removed from
      * the <tt>PeerConnection</tt> and disposed on video mute (in order to turn
      * off the camera device).
      * @return {boolean} <tt>true</tt> if the current browser supports this
      * strategy or <tt>false</tt> otherwise.
      */
      function() {
        return this.isChromiumBased() || this.isWebKitBased();
      }
    )
    /**
    * Check whether or not the current browser support peer to peer connections
    * @return {boolean} <tt>true</tt> if p2p is supported or <tt>false</tt>
    * otherwise.
    */
  }, {
    key: "supportsP2P",
    value: function() {
      return !this.usesUnifiedPlan();
    }
    /**
    * Checks if the current browser is Chromium based, that is, it's either
    * Chrome / Chromium or uses it as its engine, but doesn't identify as
    * Chrome.
    *
    * This includes the following browsers:
    * - Chrome and Chromium
    * - Other browsers which use the Chrome engine, but are detected as Chrome,
    *	 such as Brave and Vivaldi
    * - Browsers which are NOT Chrome but use it as their engine, and have
    *	 custom detection code: Opera, Electron and NW.JS
    */
  }, {
    key: "isChromiumBased",
    value: function() {
      return this.isChrome() || this.isElectron() || this.isNWJS() || this.isOpera();
    }
    /**
    * Checks if the current browser is WebKit based. It's either
    * Safari or uses WebKit as its engine.
    *
    * This includes Chrome and Firefox on iOS
    *
    * @returns {boolean}
    */
  }, {
    key: "isWebKitBased",
    value: function() {
      return this._bowser.isEngine("webkit") && typeof navigator.mediaDevices != "undefined" && typeof navigator.mediaDevices.getUserMedia != "undefined" && typeof window.RTCRtpTransceiver != "undefined" && Object.keys(RTCRtpTransceiver.prototype).indexOf("currentDirection") > -1;
    }
    /**
    * Checks if the current browser is supported.
    *
    * @returns {boolean} true if the browser is supported, false otherwise.
    */
  }, {
    key: "isSupported",
    value: function() {
      return this.isChromiumBased() && this._getChromiumBasedVersion() >= TD || this.isFirefox() || this.isReactNative() || this.isWebKitBased();
    }
    /**
    * Returns whether or not the current environment needs a user interaction
    * with the page before any unmute can occur.
    *
    * @returns {boolean}
    */
  }, {
    key: "isUserInteractionRequiredForUnmute",
    value: function() {
      return this.isFirefox() && this.isVersionLessThan("68");
    }
    /**
    * Checks if the current browser triggers 'onmute'/'onunmute' events when
    * user's connection is interrupted and the video stops playback.
    * @returns {*|boolean} 'true' if the event is supported or 'false'
    * otherwise.
    */
  }, {
    key: "supportsVideoMuteOnConnInterrupted",
    value: function() {
      return this.isChromiumBased() || this.isReactNative() || this.isWebKitBased();
    }
    /**
    * Checks if the current browser reports upload and download bandwidth
    * statistics.
    * @return {boolean}
    */
  }, {
    key: "supportsBandwidthStatistics",
    value: function() {
      return !this.isFirefox() && !this.isWebKitBased();
    }
    /**
    * Checks if the current browser supports setting codec preferences on the transceiver.
    * @returns {boolean}
    */
  }, {
    key: "supportsCodecPreferences",
    value: function() {
      return this.usesUnifiedPlan() && typeof window.RTCRtpTransceiver != "undefined" && Object.keys(window.RTCRtpTransceiver.prototype).indexOf("setCodecPreferences") > -1 && Object.keys(RTCRtpSender.prototype).indexOf("getCapabilities") > -1 && !this.isWebKitBased();
    }
    /**
    * Checks if the current browser support the device change event.
    * @return {boolean}
    */
    // eslint-disable-next-line class-methods-use-this
  }, {
    key: "supportsDeviceChangeEvent",
    value: function() {
      return navigator.mediaDevices && typeof navigator.mediaDevices.ondevicechange != "undefined" && typeof navigator.mediaDevices.addEventListener != "undefined";
    }
    /**
    * Checks if the current browser supports RTT statistics for srflx local
    * candidates through the legacy getStats() API.
    */
  }, {
    key: "supportsLocalCandidateRttStatistics",
    value: function() {
      return this.isChromiumBased() || this.isReactNative() || this.isWebKitBased();
    }
    /**
    * Checks if the current browser supports the Long Tasks API that lets us observe
    * performance measurement events and be notified of tasks that take longer than
    * 50ms to execute on the main thread.
    */
  }, {
    key: "supportsPerformanceObserver",
    value: function() {
      return typeof window.PerformanceObserver != "undefined" && PerformanceObserver.supportedEntryTypes.indexOf("longtask") > -1;
    }
    /**
    * Checks if the current browser supports audio level stats on the receivers.
    */
  }, {
    key: "supportsReceiverStats",
    value: function() {
      return typeof window.RTCRtpReceiver != "undefined" && Object.keys(RTCRtpReceiver.prototype).indexOf("getSynchronizationSources") > -1;
    }
    /**
    * Checks if the current browser reports round trip time statistics for
    * the ICE candidate pair.
    * @return {boolean}
    */
  }, {
    key: "supportsRTTStatistics",
    value: function() {
      return !this.isFirefox();
    }
    /**
    * Checks if the browser uses plan B.
    *
    * @returns {boolean}
    */
  }, {
    key: "usesPlanB",
    value: function() {
      return !this.usesUnifiedPlan();
    }
    /**
    * Checks if the browser uses SDP munging for turning on simulcast.
    *
    * @returns {boolean}
    */
  }, {
    key: "usesSdpMungingForSimulcast",
    value: function() {
      return this.isChromiumBased() || this.isReactNative() || this.isWebKitBased();
    }
    /**
    * Checks if the browser uses unified plan.
    *
    * @returns {boolean}
    */
  }, {
    key: "usesUnifiedPlan",
    value: function() {
      return !!(this.isFirefox() || this.isWebKitBased());
    }
    /**
    * Returns whether or not the current browser should be using the new
    * getUserMedia flow, which utilizes the adapter shim. This method should
    * be temporary and used while migrating all browsers to use adapter and
    * the new getUserMedia.
    *
    * @returns {boolean}
    */
  }, {
    key: "usesNewGumFlow",
    value: function() {
      return !!(this.isChromiumBased() || this.isFirefox() || this.isWebKitBased());
    }
    /**
    * Checks if the browser uses webrtc-adapter. All browsers using the new
    * getUserMedia flow.
    *
    * @returns {boolean}
    */
  }, {
    key: "usesAdapter",
    value: function() {
      return this.usesNewGumFlow();
    }
    /**
    * Checks if the browser uses RIDs/MIDs for siganling the simulcast streams
    * to the bridge instead of the ssrcs.
    */
  }, {
    key: "usesRidsForSimulcast",
    value: function() {
      return !1;
    }
    /**
    * Checks if the browser supports getDisplayMedia.
    * @returns {boolean} {@code true} if the browser supports getDisplayMedia.
    */
  }, {
    key: "supportsGetDisplayMedia",
    value: function() {
      return typeof navigator.getDisplayMedia != "undefined" || typeof navigator.mediaDevices != "undefined" && typeof navigator.mediaDevices.getDisplayMedia != "undefined";
    }
    /**
    * Checks if the browser supports insertable streams, needed for E2EE.
    * @returns {boolean} {@code true} if the browser supports insertable streams.
    */
  }, {
    key: "supportsInsertableStreams",
    value: function() {
      if (!(typeof window.RTCRtpSender != "undefined" && (window.RTCRtpSender.prototype.createEncodedStreams || window.RTCRtpSender.prototype.createEncodedVideoStreams)))
        return !1;
      var i = new ReadableStream();
      try {
        return window.postMessage(i, "*", [i]), !0;
      } catch (a) {
        return !1;
      }
    }
    /**
    * Whether the browser supports the RED format for audio.
    */
  }, {
    key: "supportsAudioRed",
    value: function() {
      return Boolean(window.RTCRtpSender && window.RTCRtpSender.getCapabilities && window.RTCRtpSender.getCapabilities("audio").codecs.some(function(i) {
        return i.mimeType === "audio/red";
      }) && window.RTCRtpReceiver && window.RTCRtpReceiver.getCapabilities && window.RTCRtpReceiver.getCapabilities("audio").codecs.some(function(i) {
        return i.mimeType === "audio/red";
      }));
    }
    /**
    * Checks if the browser supports the "sdpSemantics" configuration option.
    * https://webrtc.org/web-apis/chrome/unified-plan/
    *
    * @returns {boolean}
    */
  }, {
    key: "supportsSdpSemantics",
    value: function() {
      return this.isChromiumBased();
    }
    /**
    * Returns the version of a Chromium based browser.
    *
    * @returns {Number}
    */
  }, { key: "_getChromiumBasedVersion", value: function() {
    if (this.isChromiumBased()) {
      if (this.isNWJS())
        return Number.parseInt(process.versions.chromium, 10);
      var i = navigator.userAgent;
      if (i.match(/Chrome/)) {
        var a = Number.parseInt(i.match(/Chrome\/([\d.]+)/)[1], 10);
        return a;
      }
    }
    return -1;
  } }, { key: "isIOSMobile", value: function() {
    return this.isMobile && this._bowser.getOSName() === "iOS";
  } }]), r;
}(yD), Ve = new kD(), P = /* @__PURE__ */ function() {
  function e() {
    w(this, e);
  }
  return b(e, null, [{ key: "logsEndpoint", get: function() {
    var r = lD({ servicePrefix: "api-silos", apiBase: Te.apiBase, baseURI: Te.baseURI });
    return "https://".concat(r, "/otel/logs");
  } }, { key: "init", value: function(r, n) {
    navigator.isReactNative || (e.tracingEnabled = n, e.meetingMetadata.peerId = r, e.meetingMetadata.sdkVersion = _h, e.meetingMetadata.deviceInfo = Ve.getDeviceInfo(), e.meetingMetadata.visitedUrl = !navigator.isReactNative && typeof window != "undefined" && window.location.href, document.addEventListener("visibilitychange", e.processCachedLogs), e.logsProcessorTimer = setInterval(e.processCachedLogs, e.logsProcessingInterval), n && (e.initialized = !0));
  } }, { key: "trace", value: function(r) {
    return function(n, i, a) {
      var s = a.value;
      return a.value = function() {
        for (var o = arguments.length, c = new Array(o), l = 0; l < o; l++)
          c[l] = arguments[l];
        if (!e.initialized || navigator.isReactNative || !e.tracingEnabled || Oe.hasFeature($e.SKIP_OTEL_TRACES))
          return s.apply(this, c);
        e.addLogInCurrentSpan("info", r);
        var d = performance.now(), v = s.apply(this, c);
        return Promise.resolve(v).then(function() {
          var h = performance.now();
          e.addLogInCurrentSpan("info", "".concat(r, "_timing"), { execTime: h - d });
        }).catch(function() {
          var h = performance.now();
          e.addLogInCurrentSpan("info", "".concat(r, "_timing"), { execTime: h - d });
        }), v;
      }, a;
    };
  } }, {
    key: "injectContext",
    value: function(r) {
      var n, i = Kr().replace(/-/g, "").substring(0, 16), a = (n = e.meetingMetadata.peerId) === null || n === void 0 ? void 0 : n.replace(/-/g, "");
      r.TRACEPARENT = "00-".concat(a, "-").concat(i, "-01");
    }
    /**
    * Adds event into the current span or the main span.
    * Event(or this method) is not a replacement for a log.
    * Tip :: Heavy objects should be logged.
    * Tip :: Light objects with `to the point` info should be added as events.
    * @param eventSeverity severity of the passed event to create better dashboards
    * @param eventName name of event in format
    *	fileName::functionName::eventName or functionName::eventName or whatever seems fit
    * @param metadata pass any information which makes sense for analytics or debugging
    * @param noCache optionally pass if log can be cached in FE or it has to be sent instantly
    * @returns nothing
    */
  }, { key: "addLogInCurrentSpan", value: function(r, n) {
    var i = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, a = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !1;
    i != null && i.error && Object.assign(i, { error: Wu(i.error) }), Eh() && (rc(i) ? console[r]("DyteInternalLogs:: ", r, n) : console[r]("DyteInternalLogs:: ", r, n, i));
    var s = dD(r);
    if (s)
      try {
        var u = fD(n, i, "metadata"), o = new Date(), c = ie(ie({ message: n, level: r }, u), {}, { loggedAt: o.toISOString(), loggedAtTzOffset: o.getTimezoneOffset() });
        a ? e.sendOtelLogsToNewRelic([c]) : e.logsCache.push(c);
      } catch (l) {
        e.addLogInCurrentSpan("error", "opentelemetry::addLogInCurrentSpan_failed", { error: Wu(l) });
      }
  } }, { key: "sendOtelLogsToNewRelic", value: function(r) {
  } }, { key: "processCachedLogs", value: function() {
    var r = e.logsCache.splice(0, 25);
    r != null && r.length;
  } }, { key: "destruct", value: function() {
    clearInterval(e.logsProcessorTimer), e.processCachedLogs(), !navigator.isReactNative && document.removeEventListener("visibilitychange", e.processCachedLogs);
  } }]), e;
}();
P.logsCache = [];
P.logsProcessorTimer = void 0;
P.tracingEnabled = !0;
P.initialized = !1;
P.logsProcessingInterval = 7e3;
P.logExclusionList = ["message", "websocket/message", "roomMessage", "websocket/room-message", "websocket/room-legacy-mode", "chatMessage", "websocket/new-chat-message", "websocket/no-active-speaker", "websocket/selected-peers", "websocket/active-speaker", "ping", "websocket/new-consumer", "websocket/producer-score", "websocket/consumer-score", "websocket/plugin-event", "websocket/plugin-data", "websocket/plugin-internal-data"];
P.meetingMetadata = {};
var R = /* @__PURE__ */ function() {
  function e() {
    w(this, e);
  }
  return b(e, null, [{ key: "info", value: function(r, n, i) {
    P.addLogInCurrentSpan("info", r, n, i);
  } }, { key: "error", value: function(r, n, i) {
    P.addLogInCurrentSpan("error", r, n, i);
  } }, { key: "debug", value: function(r, n, i) {
    P.addLogInCurrentSpan("debug", r, n, i);
  } }, { key: "log", value: function(r, n, i) {
    P.addLogInCurrentSpan("log", r, n, i);
  } }, { key: "warn", value: function(r, n, i) {
    P.addLogInCurrentSpan("warn", r, n, i);
  } }]), e;
}(), ln = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    var n, i;
    return w(this, r), i = t.call(this), le((n = M(i), ne(r.prototype)), "setMaxListeners", n).call(n, 25), i;
  }
  return b(r, [{ key: "emit", value: function(i) {
    for (var a, s, u = arguments.length, o = new Array(u > 1 ? u - 1 : 0), c = 1; c < u; c++)
      o[c - 1] = arguments[c];
    return (a = le(ne(r.prototype), "emit", this)).call.apply(a, [this, "*", i].concat(o)), (s = le(ne(r.prototype), "emit", this)).call.apply(s, [this, i].concat(o));
  } }, { key: "on", value: function(i, a) {
    try {
      var s = this.listenerCount(i);
      s > 25 && s % 25 === 0 && R.warn("DyteEventEmitter::maxListenersExceeded", { eventListener: { eventName: i.toString(), listenerCount: this.listenerCount(i) } });
    } catch (u) {
    }
    return le(ne(r.prototype), "on", this).call(this, i, a);
  } }, { key: "addListener", value: function(i, a) {
    try {
      var s = this.listenerCount(i);
      s > 25 && s % 25 === 0 && R.warn("DyteEventEmitter::maxListenersExceeded", { eventListener: { eventName: i.toString(), listenerCount: this.listenerCount(i) } });
    } catch (u) {
    }
    return le(ne(r.prototype), "addListener", this).call(this, i, a);
  } }, { key: "off", value: function(i, a) {
    return le(ne(r.prototype), "off", this).call(this, i, a);
  } }, { key: "once", value: function(i, a) {
    return le(ne(r.prototype), "once", this).call(this, i, a);
  } }, { key: "prependListener", value: function(i, a) {
    return le(ne(r.prototype), "prependListener", this).call(this, i, a);
  } }, { key: "prependOnceListener", value: function(i, a) {
    return le(ne(r.prototype), "prependOnceListener", this).call(this, i, a);
  } }, { key: "removeListener", value: function(i, a) {
    return le(ne(r.prototype), "removeListener", this).call(this, i, a);
  } }, { key: "removeAllListeners", value: function(i) {
    return le(ne(r.prototype), "removeAllListeners", this).call(this, i);
  } }, { key: "listeners", value: function(i) {
    return le(ne(r.prototype), "listeners", this).call(this, i);
  } }, { key: "listenerCount", value: function(i) {
    return le(ne(r.prototype), "listenerCount", this).call(this, i);
  } }]), r;
}(is), rt = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    var n, i;
    return w(this, r), i = t.call(this), le((n = M(i), ne(r.prototype)), "setMaxListeners", n).call(n, 25), i;
  }
  return b(r, [{ key: "emit", value: function(i) {
    for (var a, s, u = arguments.length, o = new Array(u > 1 ? u - 1 : 0), c = 1; c < u; c++)
      o[c - 1] = arguments[c];
    return (a = le(ne(r.prototype), "emit", this)).call.apply(a, [this, "*", i].concat(o)), (s = le(ne(r.prototype), "emit", this)).call.apply(s, [this, i].concat(o));
  } }, { key: "on", value: function(i, a) {
    try {
      var s = this.listenerCount(i);
      s > 25 && s % 25 === 0 && R.warn("DyteEventEmitter::maxListenersExceeded", { eventListener: { eventName: i.toString(), listenerCount: this.listenerCount(i) } });
    } catch (u) {
    }
    return le(ne(r.prototype), "on", this).call(this, i, a);
  } }, { key: "addListener", value: function(i, a) {
    try {
      var s = this.listenerCount(i);
      s > 25 && s % 25 === 0 && R.warn("DyteEventEmitter::maxListenersExceeded", { eventListener: { eventName: i.toString(), listenerCount: this.listenerCount(i) } });
    } catch (u) {
    }
    return le(ne(r.prototype), "addListener", this).call(this, i, a);
  } }, { key: "off", value: function(i, a) {
    return le(ne(r.prototype), "off", this).call(this, i, a);
  } }, { key: "once", value: function(i, a) {
    return le(ne(r.prototype), "once", this).call(this, i, a);
  } }, { key: "prependListener", value: function(i, a) {
    return le(ne(r.prototype), "prependListener", this).call(this, i, a);
  } }, { key: "prependOnceListener", value: function(i, a) {
    return le(ne(r.prototype), "prependOnceListener", this).call(this, i, a);
  } }, { key: "removeListener", value: function(i, a) {
    return le(ne(r.prototype), "removeListener", this).call(this, i, a);
  } }, { key: "removeAllListeners", value: function(i) {
    return le(ne(r.prototype), "removeAllListeners", this).call(this, i);
  } }, { key: "listeners", value: function(i) {
    return le(ne(r.prototype), "listeners", this).call(this, i);
  } }, { key: "listenerCount", value: function(i) {
    return le(ne(r.prototype), "listenerCount", this).call(this, i);
  } }]), r;
}(is), wD = { "00": "DyteClient", "01": "Controller", "02": "RoomNodeClient", "03": "HiveNodeClient", "04": "SocketService", "05": "Chat", "06": "Plugin", "07": "Polls", "08": "Meta", "09": "Preset", 10: "Recording", 11: "Self", 12: "Participant", 13: "Spotlight", 14: "Remote Request", 15: "Webinar", 16: "LocalMediaHandler" }, Fa = { "0000": "Internal exception.", "0001": "Failed to initialize.", "0002": "Failed to join room.", "0003": "Failed to leave room.", "0100": "Internal exception", "0200": "Internal exception.", "0300": "Internal exception", "0400": "Internal exception", "0500": "Internal exception", "0501": "Permission denied.", "0502": "Invalid message body.", "0510": "Invalid channel name.", "0600": "Internal exception", "0700": "Internal exception", "0800": "Internal exception", "0900": "Internal exception", 1e3: "Internal exception", 1100: "Internal exception", 1200: "Internal exception", 1300: "Internal exception", 1400: "Internal exception", 1500: "Internal exception", 1600: "Internal exception", 1601: "Failed to get audio track", 1602: "Failed to get video track", 1603: "Incorrect device", 1604: "Failed to change device", 1700: "Internal exception" };
Object.keys(Fa).forEach(function(e) {
  Fa[e] = "{".concat(wD[e.slice(0, 2)], "} ").concat(Fa[e]);
});
var $ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n, i) {
    var a, s = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1;
    w(this, r), a = t.call(this, n), a.code = void 0, a.code = i, a.name = "DyteError", a.message = "[ERR".concat(a.code, "]: ").concat(Fa[a.code], `
`).concat(a.message);
    try {
      var u = s;
      i && i.endsWith("00") && (u = !0), u && R.error("DyteError", { error: { message: a.message, name: a.name, code: i } });
    } catch (o) {
    }
    return a;
  }
  return b(r);
}(/* @__PURE__ */ Kn(Error));
function Ra(e, t, r, n) {
  if (typeof r == "function" && n instanceof t)
    r.call(null, n, e);
  else
    throw n;
}
function dd(e, t, r) {
  if (!e.value) {
    var n = e.get, i = e.set;
    return n && (e.get = function() {
      try {
        return n.apply(this);
      } catch (s) {
        Ra(this, t, r, s);
      }
    }), i && (e.set = function(s) {
      try {
        return i.apply(this, [s]);
      } catch (u) {
        Ra(this, t, r, u);
      }
    }), e;
  }
  var a = e.value;
  return e.value = function() {
    var s = this;
    try {
      for (var u = arguments.length, o = new Array(u), c = 0; c < u; c++)
        o[c] = arguments[c];
      var l = a.apply(this, o);
      return l && l instanceof Promise ? l.catch(function(d) {
        Ra(s, t, r, d);
      }) : l;
    } catch (d) {
      Ra(this, t, r, d);
    }
  }, e;
}
function bD(e, t) {
  return function(r, n, i) {
    if (i)
      return dd(i, e, t);
    var a = or(Reflect.ownKeys(r.prototype).filter(function(l) {
      return l !== "constructor";
    })), s;
    try {
      for (a.s(); !(s = a.n()).done; ) {
        var u = s.value, o = Object.getOwnPropertyDescriptor(r.prototype, u), c = o.value instanceof Function || o.get instanceof Function || o.set instanceof Function;
        c && Object.defineProperty(r.prototype, u, dd(o, e, t));
      }
    } catch (l) {
      a.e(l);
    } finally {
      a.f();
    }
  };
}
var lr = function(t) {
  return bD(Error, t);
}, _D = Object.defineProperty, ED = Object.getOwnPropertyDescriptor, AD = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? ED(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && _D(r, n, a), a;
}, ju = (it = /* @__PURE__ */ V("self"), /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n, i, a) {
    var s;
    return w(this, r), s = t.call(this), s.selfActiveTab = void 0, s.broadcastTabChanges = void 0, Object.defineProperty(M(s), it, { writable: !0, value: void 0 }), s.viewType = void 0, s.meetingStartedTimestamp = void 0, s.meetingTitle = void 0, s.sessionId = void 0, f(M(s), it)[it] = n, s.viewType = i, s.meetingTitle = a, s.broadcastTabChanges = n.permissions.canSpotlight, s;
  }
  return b(r, [{
    key: "joined",
    get: function() {
      return f(this, it)[it].roomJoined;
    }
    /**
    * @deprecated
    * The room name of the meeting.
    */
  }, {
    key: "roomName",
    get: function() {
      return this.meetingId;
    }
    /**
    * The room name of the meeting.
    */
  }, {
    key: "meetingId",
    get: function() {
      return Kr();
    }
    /**
    * Has room-node connection been made.
    */
  }, {
    key: "mediaConnected",
    get: function() {
      return f(this, it)[it].roomJoined;
    }
    /**
    * This is set to true if user has succesfully connected to the socket.
    */
  }, {
    key: "socketConnected",
    get: function() {
      return f(this, it)[it].roomJoined;
    }
    /**
    * Sets current user as broadcasting tab changes
    * @param broadcastTabChanges
    */
  }, {
    key: "setBroadcastTabChanges",
    value: function(i) {
      if (!f(this, it)[it].permissions.canSpotlight)
        throw R.error("DyteSpotlight::setSpotlighted::permission_denied"), new $("User does not have permission to toggle spotlight");
      this.broadcastTabChanges = i, this.emit("broadcastTabChangesUpdate", this.broadcastTabChanges);
    }
    /**
    * Sets current active tab for user
    * @param spotlightTab
    */
  }, { key: "setSelfActiveTab", value: function(i, a) {
    R.info("DyteSpotlight::setActiveTab", { spotlight: { currentTab: { id: i.id, type: i.type } } }), this.selfActiveTab = i, a === 0 && this.emit("selfTabUpdate", i);
  } }]), r;
}(rt));
ju = AD([lr(function(e) {
  throw new $(e.message, "0800");
})], ju);
var Ju = { gross: { width: { ideal: 192 }, height: { ideal: 144 } }, qvga: { width: { ideal: 384 }, height: { ideal: 288 } }, pvga: { width: { ideal: 480 }, height: { ideal: 360 } }, vga: { width: { ideal: 640 }, height: { ideal: 480 } }, hd: { width: { ideal: 1280 }, height: { ideal: 720 } }, hd_cropped: { width: { ideal: 900 }, height: { ideal: 720 } }, fhd: { width: { ideal: 1920 }, height: { ideal: 1080 } } };
function RD(e) {
  return e.replace(/([-_]\w)/g, function(t) {
    return t[1].toUpperCase();
  });
}
function ct(e) {
  if (!e || typeof e != "object")
    return e;
  if (Array.isArray(e))
    return e.map(function(r) {
      return ct(r);
    });
  var t = {};
  return Object.keys(e).forEach(function(r) {
    var n = Od(r) ? r : RD(r);
    t[n] = ct(e[r]);
  }), t;
}
function SD(e) {
  return e.replace(/[A-Z]/g, function(t) {
    return "_".concat(t.toLowerCase());
  });
}
function Oh(e) {
  if (!e || typeof e != "object")
    return e;
  if (Array.isArray(e))
    return e.map(function(r) {
      return Oh(r);
    });
  var t = {};
  return Object.keys(e).forEach(function(r) {
    var n = Od(r) ? r : SD(r);
    t[n] = e[r];
  }), t;
}
var PD = vk(), Dr = ct(PD.config.media);
function CD(e) {
  var t = {};
  if (e.audio) {
    var r, n;
    t.audio = { enableStereo: (r = e.audio.enableStereo) !== null && r !== void 0 ? r : !1, enableHighBitrate: (n = e.audio.enableHighBitrate) !== null && n !== void 0 ? n : !1 };
  }
  return t.video = e.video.quality, t;
}
var Gt = /* @__PURE__ */ V("mediaConstraints"), $h = /* @__PURE__ */ function() {
  function e(t) {
    var r = this;
    w(this, e), Object.defineProperty(this, Gt, { writable: !0, value: void 0 }), this.getScreenShareConstraints = function() {
      var n, i, a, s, u, o, c, l, d, v, h = (n = Te.defaults.screenShare) !== null && n !== void 0 ? n : {}, m = h.displaySurface, T = (i = f(r, Gt)[Gt]) === null || i === void 0 ? void 0 : i.screenshare, y = (a = T == null || (s = T.width) === null || s === void 0 ? void 0 : s.max) !== null && a !== void 0 ? a : 1920, _ = (u = T == null || (o = T.height) === null || o === void 0 ? void 0 : o.max) !== null && u !== void 0 ? u : 1080, C = (c = T == null || (l = T.frameRate) === null || l === void 0 ? void 0 : l.max) !== null && c !== void 0 ? c : 5, D = (d = T == null || (v = T.frameRate) === null || v === void 0 ? void 0 : v.ideal) !== null && d !== void 0 ? d : 5;
      Oe.getValue($e.VAL_MIN_FRAMERATE) && (D = parseInt(Oe.getValue($e.VAL_MIN_FRAMERATE), 10));
      var I = { width: { max: y }, height: { max: _ }, frameRate: { ideal: D, max: C } };
      if (Oe.hasFeature($e.SCREENSHARE_CONSTRAINTS)) {
        var O = Oe.getValue($e.SCREENSHARE_CONSTRAINTS);
        I = JSON.parse(O);
      }
      return m !== void 0 && ["monitor", "browser", "window"].includes(m) && (I = ie(ie({}, I), {}, { displaySurface: m })), { audio: !0, video: I };
    }, this.getAudioConstraints = function(n) {
      var i, a, s, u, o, c = {}, l = (i = f(r, Gt)[Gt]) === null || i === void 0 ? void 0 : i.audio, d = l != null && l.enableStereo ? 2 : 1;
      if (Ve.isFirefox() || Ve.isWebKitBased()) {
        var v, h, m;
        return c.audio = { deviceId: n, autoGainControl: (v = l == null ? void 0 : l.autoGainControl) !== null && v !== void 0 ? v : !0, echoCancellation: (h = l == null ? void 0 : l.echoCancellation) !== null && h !== void 0 ? h : !0, noiseSuppression: (m = l == null ? void 0 : l.noiseSupression) !== null && m !== void 0 ? m : !0, channelCount: d }, c;
      }
      return c.audio = {}, c.audio.optional = [n ? { sourceId: n } : { sourceId: "default" }, { channelCount: d }, { echoCancellation: (a = l == null ? void 0 : l.echoCancellation) !== null && a !== void 0 ? a : !0 }, { googEchoCancellation: (s = l == null ? void 0 : l.echoCancellation) !== null && s !== void 0 ? s : !0 }, { googAutoGainControl: (u = l == null ? void 0 : l.autoGainControl) !== null && u !== void 0 ? u : !0 }, { googNoiseSuppression: (o = l == null ? void 0 : l.noiseSupression) !== null && o !== void 0 ? o : !0 }, { googHighpassFilter: !0 }], c;
    }, this.getVideoConstraints = function(n) {
      var i, a, s, u = {}, o = (i = f(r, Gt)[Gt]) === null || i === void 0 ? void 0 : i.video, c = Ju.vga;
      if (typeof o == "string" ? c = Ju[o] : o !== void 0 && (c.height.ideal = o.height.ideal, c.width.ideal = o.width.ideal), c.frameRate = { ideal: (a = (s = c.frameRate) === null || s === void 0 ? void 0 : s.ideal) !== null && a !== void 0 ? a : 24 }, Ve.isChromiumBased() && (c.frameRate.max = 30), Oe.hasFeature($e.VIDEO_CONSTRAINTS)) {
        var l = Oe.getValue($e.VIDEO_CONSTRAINTS);
        c = JSON.parse(l);
      }
      return u.video = c, n ? u.video.deviceId = { exact: n } : u.video.facingMode = "user", u;
    }, f(this, Gt)[Gt] = t;
  }
  return b(e, [{ key: "getUpdatedVideoConstraints", value: (
    // eslint-disable-next-line class-methods-use-this
    function(r) {
      var n = r;
      return n;
    }
  ) }]), e;
}(), j = /* @__PURE__ */ function(e) {
  return e.NEW_PRODUCER = "NEW_PRODUCER", e.PRODUCER_TRACK_ENDED = "PRODUCER_TRACK_ENDED", e.ROOM_NODE_CONNECTED = "ROOM_NODE_CONNECTED", e.ROOM_NODE_DISCONNECTED = "ROOM_NODE_DISCONNECTED", e.ROOM_NODE_CONNECTION_ERROR = "ROOM_NODE_CONNECTION_ERROR", e.SOCKET_SERVICE_CONNECTED = "SOCKET_SERVICE_CONNECTED", e.SOCKET_SERVICE_DISCONNECTED = "SOCKET_SERVICE_DISCONNECTED", e.SOCKET_SERVICE_RECONNECTING = "SOCKET_SERVICE_RECONNECTING", e.SOCKET_SERVICE_RECONNECTION_ATTEMPT = "SOCKET_SERVICE_RECONNECTION_ATTEMPT", e.SOCKET_SERVICE_RECONNECT_FAILURE = "SOCKET_SERVICE_RECONNECT_FAILURE", e.SOCKET_SERVICE_RECONNECTED = "SOCKET_SERVICE_RECONNECTED", e.SOCKET_SERVICE_FAILED = "SOCKET_SERVICE_FAILED", e.ROOM_JOINED = "ROOM_JOINED", e.SOCKET_SERVICE_ROOM_JOINED = "SOCKET_SERVICE_ROOM_JOINED", e.SELF_ROOM_JOINED = "SELF_ROOM_JOINED", e.PRODUCER_SCORE_UPDATE = "PRODUCER_SCORE_UPDATE", e.CONSUMER_SCORE_UPDATE = "CONSUMER_SCORE_UPDATE", e.PRODUCER_STATUS_UPDATE = "PRODUCER_STATUS_UPDATE", e.CONSUMER_STATUS_UPDATE = "CONSUMER_STATUS_UPDATE", e.LOW_PRODUCER_SCORE = "LOW_PRODUCER_SCORE", e.LOW_CONSUMER_SCORE = "LOW_CONSUMER_SCORE", e.MEDIA_PERMISSION_ERROR = "MEDIA_PERMISSION_ERROR", e.MEDIA_PERMISSION_UPDATE = "MEDIA_PERMISSION_UPDATE", e.WAITLISTED = "WAIT_LISTED", e.WAITLIST_ACCEPTED = "websocket/waitlist-accepted", e.WAITLIST_REJECTED = "websocket/waitlist-rejected", e.WAITLIST_PEER_ADDED = "websocket/waitlist-peer-added", e.WAITLIST_PEER_REMOVED = "websocket/waitlist-peer-closed", e.MESSAGE = "websocket/message", e.ROOM_MESSAGE = "websocket/room-message", e.DISABLE_AUDIO = "websocket/disable-audio", e.DISABLE_VIDEO = "websocket/disable-video", e.PEER_JOINED = "websocket/peer-joined", e.PEER_CLOSED = "websocket/peer-closed", e.PEER_MUTED = "websocket/peer-muted", e.PEER_UNMUTED = "websocket/peer-unmuted", e.PEER_PINNED = "websocket/pin-peer", e.PEER_UNPINNED = "websocker/unpin-peer", e.MUTE_ALL = "websocket/mute-all", e.MUTE_ALL_VIDEO = "websocket/mute-all-video", e.CONSUMER_CLOSED = "websocket/consumer-closed", e.CONSUMER_PAUSED = "websocket/consumer-paused", e.CONSUMER_RESUMED = "websocket/consumer-resumed", e.PRODUCER_CLOSED = "websocket/producer-closed", e.NEW_CONSUMER = "websocket/new-consumer", e.CONNECTED_MEETING_STATE = "websocket/connectedMeetingState", e.MOVE_TO_CONNECTED_MEETING = "websocket/transferMeeting", e.GET_CHAT_MESSAGES = "websocket/get-chat-messages", e.NEW_CHAT_MESSAGE = "websocket/new-chat-message", e.PIN_CHAT_MESSAGE = "websocket/pin-chat-message", e.UNPIN_CHAT_MESSAGE = "websocket/unpin-chat-message", e.GET_POLLS = "websocket/get-polls", e.UPDATE_POLL = "websocket/update-poll", e.SELECTED_PEERS = "websocket/selected-peers", e.GET_PAGE = "websocket/get-page", e.ACTIVE_SPEAKER = "websocket/active-speaker", e.NO_ACTIVE_SPEAKER = "websocket/no-active-speaker", e.PRODUCER_SCORE = "websocket/producer-score", e.CONSUMER_SCORE = "websocket/consumer-score", e.ENABLE_PLUGIN = "websocket/enable-plugin", e.DISABLE_PLUGIN = "websocket/disable-plugin", e.PLUGIN_EVENT = "websocket/plugin-event", e.PLUGIN_DATA = "websocket/plugin-data", e.PLUGIN_INTERNAL_DATA = "websocket/plugin-internal-data", e.KICKED = "websocket/kicked", e.ICE_CONNECTED = "ICE_CONNECTED", e.ICE_DISCONNECTED = "ICE_DISCONNECTED", e.ICE_FAILED = "ICE_FAILED", e.ICE_RECONNECTING = "ICE_RECONNECTING", e.AUDIO_TRACK_ANALYSIS = "AUDIO_TRACK_ANALYSIS", e.AUDIO_TRACK_CLOSED = "AUDIO_TRACK_CLOSED", e.AUDIO_TRACK_CHANGED = "AUDIO_TRACK_CHANGED", e.AUDIO_TRACK_CREATED = "AUDIO_TRACK_CREATED", e.VIDEO_TRACK_ANALYSIS = "VIDEO_TRACK_ANALYSIS", e.VIDEO_TRACK_ANALYSIS_ERROR = "VIDEO_TRACK_ANALYSIS_ERROR", e.VIDEO_TRACK_CLOSED = "VIDEO_TRACK_CLOSED", e.VIDEO_TRACK_CHANGED = "VIDEO_TRACK_CHANGED", e.VIDEO_TRACK_CREATED = "VIDEO_TRACK_CREATED", e.SCREENSHARE_AUDIO_TRACK_ANALYSIS = "SCREENSHARE_AUDIO_TRACK_ANALYSIS", e.SCREENSHARE_AUDIO_TRACK_CLOSED = "SCREENSHARE_AUDIO_TRACK_CLOSED", e.SCREENSHARE_AUDIO_TRACK_CREATED = "SCREENSHARE_AUDIO_TRACK_CREATED", e.SCREENSHARE_VIDEO_TRACK_ANALYSIS = "SCREENSHARE_VIDEO_TRACK_ANALYSIS", e.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR = "SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR", e.SCREENSHARE_VIDEO_TRACK_CLOSED = "SCREENSHARE_VIDEO_TRACK_CLOSED", e.SCREENSHARE_VIDEO_TRACK_CREATED = "SCREENSHARE_VIDEO_TRACK_CREATED", e.SCREENSHARE_TRACK_CHANGED = "SCREENSHARE_TRACK_CHANGED", e.CANDIDATE_PEER_UPDATE = "CANDIDATE_PEER_UPDATE", e.INBOUND_RTP_UPDATE = "INBOUND_RTP_UPDATE", e.OUTBOUND_RTP_UPDATE = "OUTBOUND_RTP_UPDATE", e.SEND_TRANSPORT_CLOSED = "SEND_TRANSPORT_CLOSED", e.RECV_TRANSPORT_CLOSED = "RECV_TRANSPORT_CLOSED", e.SEND_TRANSPORT_CREATED = "SEND_TRANSPORT_CREATED", e.RECV_TRANSPORT_CREATED = "RECV_TRANSPORT_CREATED", e.PRODUCER_TOGGLE = "hive/producer-toggle", e.CONSUMER_TOGGLE = "hive/consumer-toggle", e.SELECTED_PEERS_DIFF = "hive/selected-peers-diff", e.REFRESH_GRID = "hive/refresh-grid", e.RESET_PRODUCER_STATE = "hive/reset-producer-state", e.HIVE_TRANSPORT_STATE_CHANGED = "hive/transport-state-changed", e.HIVE_ROOM_REJOINING = "hive/room-rejoining", e.HIVE_ROOM_REJOIN_FAILED = "hive/room-rejoining-failed", e.HIVE_ROOM_REJOINED = "hive/room-rejoined", e.HIVE_TRANPSORT_RECONNECTING = "hive/transport-reconnecting", e.ROOM_STATE = "sockethub/room-state", e.PEER_DISPLAY_NAME_CHANGED = "hive/display-name-changed", e.ASSERT_SPOTLIGHTER = "websocket/assert-spotlighter", e.GET_STAGE_REQUESTS = "GET_STAGE_REQUESTS", e.UPDATE_STAGE_REQUESTS = "UPDATE_STAGE_REQUESTS", e.PEER_REQUESTED_TO_JOIN_STAGE = "websocket/request-to-join-stage-peer-added", e.PEER_WITHDRAWN_REQUEST_TO_JOIN_STAGE = "websocket/request-to-join-stage-peer-withdrawn", e.PEER_REJECTED_TO_JOIN_STAGE = "websocket/peer-rejected-to-join-stage", e.PEER_ADDED_TO_STAGE = "websocket/peer-added-to-stage", e.PEER_REMOVED_FROM_STAGE = "websocket/peer-removed-from-stage", e.PEER_STARTED_PRESENTING = "websocket/peer-started-presenting", e.PEER_STOPPED_PRESENTING = "websocket/peer-stopped-presenting", e.STAGE_REQUESTS_UPDATED = "STAGE_REQUESTS_UPDATED", e.KICK_PEER = "KICK_PEER", e.REQUEST_TO_JOIN_STAGE_ACCEPTED = "websocket/request-to-join-stage-accepted", e.REQUEST_TO_JOIN_STAGE_REJECTED = "websocket/request-to-join-stage-rejected", e.STARTED_PRESENTING = "websocket/started-presenting", e.STOPPED_PRESENTING = "websocket/stopped-presenting", e.REMOVED_FROM_STAGE = "websocket/removed-from-stage", e.JOIN_MEDIA_ROOM = "JOIN_MEDIA_ROOM", e.LEAVE_MEDIA_ROOM = "LEAVE_MEDIA_ROOM", e.UPDATE_PEER_STAGE_STATUS = "UPDATE_PEER_STAGE_STATUS", e.GET_WEBINAR_STAGE_STATUS = "GET_WEBINAR_STAGE_STATUS", e.REQUEST_TO_JOIN_STAGE = "REQUEST_TO_JOIN_STAGE", e.WITHDRAW_REQUEST_TO_JOIN_STAGE = "WITHDRAW_REQUEST_TO_JOIN_STAGE", e.LEAVE_STAGE = "LEAVE_STAGE", e.JOIN_STAGE = "JOIN_STAGE", e.SET_WEBINAR_STAGE_STATUS = "SET_WEBINAR_STAGE_STATUS", e.SET_STAGE_STATUS = "SET_STAGE_STATUS", e.NEW_STAGE_REQUEST = "NEW_STAGE_REQUEST", e.ACCEPT_JOIN_STAGE_REQUEST = "ACCEPT_JOIN_STAGE_REQUEST", e.REMOVE_FROM_STAGE = "REMOVE_FROM_STAGE", e.REJECT_REQUEST_TO_JOIN_STAGE = "REJECT_REQUEST_TO_JOIN_STAGE", e.ACCEPT_ALL_REQUESTS_TO_JOIN_STAGE = "ACCEPT_ALL_REQUESTS_TO_JOIN_STAGE", e.PIP_HANGUP = "PIP_HANGUP", e.SOCKET_PEERS = "SOCKET_PEERS", e.UPDATE_PERMISSIONS = "UPDATE_PERMISSIONS", e;
}(j || {}), Br = /* @__PURE__ */ V("eventPromises"), qr = /* @__PURE__ */ V("asyncListeners"), ID = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    var n;
    return w(this, r), n = t.call(this), Object.defineProperty(M(n), Br, { writable: !0, value: void 0 }), Object.defineProperty(M(n), qr, { writable: !0, value: void 0 }), n.asyncPromiseTimeout = void 0, f(M(n), Br)[Br] = /* @__PURE__ */ new Map(), f(M(n), qr)[qr] = /* @__PURE__ */ new Map(), n.asyncPromiseTimeout = 8e3, n;
  }
  return b(r, [{ key: "emitAsync", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u = this, o, c, l, d, v, h = arguments;
      return p().wrap(function(T) {
        for (; ; )
          switch (T.prev = T.next) {
            case 0:
              for (f(this, Br)[Br].set(s, []), c = f(this, qr)[qr].get(s).map(function() {
                return new Promise(function(y) {
                  f(u, Br)[Br].get(s).push(y);
                });
              }), l = h.length, d = new Array(l > 1 ? l - 1 : 0), v = 1; v < l; v++)
                d[v - 1] = h[v];
              return (o = le(ne(r.prototype), "emit", this)).call.apply(o, [this, s].concat(d)), T.next = 6, Promise.race([Promise.all(c), new Promise(function(y, _) {
                return setTimeout(function() {
                  return _(new Error("emitAsync failed to resolve for event ".concat(s, ".")));
                }, u.asyncPromiseTimeout);
              })]);
            case 6:
              f(this, Br)[Br].delete(s);
            case 7:
            case "end":
              return T.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, {
    key: "onAsync",
    value: function(i, a) {
      var s = f(this, Br)[Br], u = /* @__PURE__ */ function() {
        var o = k(/* @__PURE__ */ p().mark(function c() {
          var l, d, v = arguments;
          return p().wrap(function(m) {
            for (; ; )
              switch (m.prev = m.next) {
                case 0:
                  return m.prev = 0, m.next = 3, a.apply(void 0, v);
                case 3:
                  m.next = 8;
                  break;
                case 5:
                  m.prev = 5, m.t0 = m.catch(0), R.error("[onAsync]", { error: m.t0 });
                case 8:
                  d = (l = s.get(i)) === null || l === void 0 ? void 0 : l.shift(), d == null || d();
                case 10:
                case "end":
                  return m.stop();
              }
          }, c, null, [[0, 5]]);
        }));
        return function() {
          return o.apply(this, arguments);
        };
      }();
      return f(this, qr)[qr].get(i) || f(this, qr)[qr].set(i, []), f(this, qr)[qr].get(i).push(u), le(ne(r.prototype), "on", this).call(this, i, u);
    }
    /**
    * removes all attached listeners
    */
  }, { key: "reset", value: function() {
    f(this, Br)[Br] = /* @__PURE__ */ new Map(), f(this, qr)[qr] = /* @__PURE__ */ new Map(), le(ne(r.prototype), "removeAllListeners", this).call(this);
  } }]), r;
}(is), J = new ID(), Wn = /* @__PURE__ */ function(e) {
  return e.allowed = "ALLOWED", e.notAllowed = "NOT_ALLOWED", e.canRequest = "CAN_REQUEST", e;
}(Wn || {}), DD = { view_type: Yr.GroupCall, accept_waiting_requests: !1, request_produce: !1, can_allow_participant_audio: !0, can_allow_participant_screensharing: !1, can_allow_participant_video: !0, request_kick_participant: !1, kick_participant: !0, pin_participant: !0, can_record: !1, waiting_room_type: "SKIP", plugins: { can_close: !0, can_start: !0, can_edit_acl: !1, config: {} }, polls: { can_create: !0, can_vote: !0, can_view: !0 }, produce: { video: { allow: !0, quality: Dr.video.quality, frame_rate: Dr.video.frameRate }, audio: !0, screenshare: { allow: !0, quality: Dr.screenshare.quality, frame_rate: Dr.screenshare.frameRate } }, chat: { public: { can_send: !0, text: !0, files: !0 }, private: { can_send: !1, can_receive: !1, text: !1, files: !1 } }, reactions: !1, hidden_participant: !1, show_participant_list: !0, can_change_participant_role: !0, can_change_theme: !1, can_present: !1, accept_present_requests: !1, can_edit_display_name: !1, max_screenshare_count: 1, is_recorder: !1, can_spotlight: !1 };
ct(DD);
var Le = ct(So().permissions), L = /* @__PURE__ */ V("permissions"), Ln = /* @__PURE__ */ V("viewType"), Oi = /* @__PURE__ */ V("useHive"), Ie = /* @__PURE__ */ V("stageStatus"), hu = /* @__PURE__ */ V("updatePermission"), MD = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n, i, a) {
    var s, u = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !1;
    if (w(this, r), s = t.call(this), Object.defineProperty(M(s), L, { writable: !0, value: void 0 }), Object.defineProperty(M(s), Ln, { writable: !0, value: void 0 }), Object.defineProperty(M(s), Oi, { writable: !0, value: void 0 }), Object.defineProperty(M(s), Ie, { writable: !0, value: void 0 }), Object.defineProperty(M(s), hu, { writable: !0, value: function(c) {
      c.chat && (c.chat.private && g.merge(f(M(s), L)[L].chat.private, c.chat.private), c.chat.public && g.merge(f(M(s), L)[L].chat.public, c.chat.public), s.emit("chatUpdate")), c.polls && (g.merge(f(M(s), L)[L].polls, c.polls), s.emit("pollsUpdate")), c.plugins && (g.merge(f(M(s), L)[L].plugins, c.plugins), s.emit("pluginsUpdate"));
    } }), !n)
      throw R.error("DytePermissionsPreset::load_preset_permissions_failed"), new $("Could not load preset permissions.");
    return f(M(s), Oi)[Oi] = a, f(M(s), Ln)[Ln] = i, f(M(s), L)[L] = n, u && s.setupEvents(), s;
  }
  return b(r, [{ key: "setupEvents", value: function() {
    function i(s) {
      return a.apply(this, arguments);
    }
    function a() {
      return a = k(/* @__PURE__ */ p().mark(function s(u) {
        return p().wrap(function(c) {
          for (; ; )
            switch (c.prev = c.next) {
              case 0:
                f(this, Ie)[Ie] = u, this.stageStatus = u;
              case 2:
              case "end":
                return c.stop();
            }
        }, s, this);
      })), a.apply(this, arguments);
    }
    J.onAsync(j.SET_STAGE_STATUS, i.bind(this)), J.on(j.UPDATE_PERMISSIONS, f(this, hu)[hu]);
  } }, {
    key: "mediaRoomType",
    get: function() {
      return f(this, Oi)[Oi] ? "HIVE" : "ROOM_NODE";
    }
    /**
    * The `stageEnabled` property returns a boolean value.
    * If `true`, stage management is available for the participant.
    */
  }, { key: "stageEnabled", get: function() {
    var i;
    return ((i = f(this, L)[L]) === null || i === void 0 ? void 0 : i.stageEnabled) || f(this, Ln)[Ln] === Yr.Webinar || f(this, Ln)[Ln] === Yr.Livestream;
  } }, {
    key: "acceptStageRequests",
    get: function() {
      var i, a;
      return this.stageEnabled ? ((i = f(this, L)[L]) === null || i === void 0 ? void 0 : i.acceptStageRequests) || ((a = f(this, L)[L]) === null || a === void 0 ? void 0 : a.canAcceptProductionRequests) : !1;
    }
    /**
    * The `stageAccess` property dictactes how a user interacts with the stage.
    * There possible values are `ALLOWED`, `NOT_ALLOWED`, `CAN_REQUEST`;
    */
  }, {
    key: "stageAccess",
    get: function() {
      var i, a, s;
      return ((i = f(this, L)[L]) === null || i === void 0 ? void 0 : i.stageAccess) === ee.NotAllowed ? ee.NotAllowed : ((a = f(this, L)[L]) === null || a === void 0 ? void 0 : a.stageAccess) === ee.CanRequest ? ee.CanRequest : ((s = f(this, L)[L]) === null || s === void 0 ? void 0 : s.stageAccess) === ee.Allowed || f(this, L)[L].media.audio.canProduce === ee.Allowed || f(this, L)[L].media.video.canProduce === ee.Allowed || f(this, L)[L].media.screenshare.canProduce === ee.Allowed ? ee.Allowed : f(this, L)[L].media.audio.canProduce === ee.CanRequest || f(this, L)[L].media.video.canProduce === ee.CanRequest || f(this, L)[L].media.screenshare.canProduce === ee.CanRequest ? ee.CanRequest : ee.NotAllowed;
    }
    /**
    * The `acceptWaitingRequests` returns boolean value.
    * If `true`, participant can accept the request of waiting participant.
    */
  }, {
    key: "acceptWaitingRequests",
    get: function() {
      var i, a;
      return (i = (a = f(this, L)[L]) === null || a === void 0 ? void 0 : a.acceptWaitingRequests) !== null && i !== void 0 ? i : Le.acceptWaitingRequests;
    }
    /**
    * The `requestProduceVideo` returns boolean value.
    * If `true`, participant can send request to participants
    * about producing video.
    */
  }, {
    key: "requestProduceVideo",
    get: function() {
      var i;
      return ((i = f(this, L)[L]) === null || i === void 0 || (i = i.media) === null || i === void 0 || (i = i.video) === null || i === void 0 ? void 0 : i.canProduce) === ee.CanRequest;
    }
    /**
    * The `requestProduceAudio` returns boolean value.
    * If `true`, participant can send request to participants
    * about producing audio.
    */
  }, {
    key: "requestProduceAudio",
    get: function() {
      var i;
      return ((i = f(this, L)[L]) === null || i === void 0 || (i = i.media) === null || i === void 0 || (i = i.audio) === null || i === void 0 ? void 0 : i.canProduce) === ee.CanRequest;
    }
    /**
    * The `requestProduceScreenshare` returns boolean value.
    * If `true`, participant can send request to participants
    * about sharing screen.
    */
  }, {
    key: "requestProduceScreenshare",
    get: function() {
      var i;
      return ((i = f(this, L)[L]) === null || i === void 0 || (i = i.media) === null || i === void 0 || (i = i.screenshare) === null || i === void 0 ? void 0 : i.canProduce) === ee.CanRequest;
    }
    /**
    * The `canAllowParticipantAudio` returns boolean value.
    * If `true`, participant can enable other participants` audio.
    */
  }, {
    key: "canAllowParticipantAudio",
    get: function() {
      var i, a;
      return (i = (a = f(this, L)[L]) === null || a === void 0 ? void 0 : a.disableParticipantAudio) !== null && i !== void 0 ? i : Le.disableParticipantAudio;
    }
    /**
    * The `canAllowParticipantScreensharing` returns boolean value.
    * If `true`, participant can enable other participants` screen share.
    */
  }, {
    key: "canAllowParticipantScreensharing",
    get: function() {
      var i, a;
      return (i = (a = f(this, L)[L]) === null || a === void 0 ? void 0 : a.canAcceptProductionRequests) !== null && i !== void 0 ? i : Le.canAcceptProductionRequests;
    }
    /**
    * The `canAllowParticipantVideo` returns boolean value.
    * If `true`, participant can enable other participants` video.
    */
  }, {
    key: "canAllowParticipantVideo",
    get: function() {
      var i, a;
      return (i = (a = f(this, L)[L]) === null || a === void 0 ? void 0 : a.disableParticipantVideo) !== null && i !== void 0 ? i : Le.disableParticipantVideo;
    }
    /**
    * If `true`, a participant can disable other participants` audio.
    */
  }, {
    key: "canDisableParticipantAudio",
    get: function() {
      return this.canAllowParticipantAudio;
    }
    /**
    * If `true`, a participant can disable other participants` video.
    */
  }, {
    key: "canDisableParticipantVideo",
    get: function() {
      return this.canAllowParticipantVideo;
    }
    /**
    * The `kickParticipant` returns boolean value.
    * If `true`, participant can remove other participants from the meeting.
    */
  }, {
    key: "kickParticipant",
    get: function() {
      var i, a;
      return (i = (a = f(this, L)[L]) === null || a === void 0 ? void 0 : a.kickParticipant) !== null && i !== void 0 ? i : Le.kickParticipant;
    }
    /**
    * The `pinParticipant` returns boolean value.
    * If `true`, participant can pin a participant in the meeting.
    */
  }, {
    key: "pinParticipant",
    get: function() {
      var i, a;
      return (i = (a = f(this, L)[L]) === null || a === void 0 ? void 0 : a.pinParticipant) !== null && i !== void 0 ? i : Le.pinParticipant;
    }
    /**
    * The `canRecord` returns boolean value.
    * If `true`, participant can record the meeting.
    */
  }, {
    key: "canRecord",
    get: function() {
      var i, a;
      return (i = (a = f(this, L)[L]) === null || a === void 0 ? void 0 : a.canRecord) !== null && i !== void 0 ? i : Le.canRecord;
    }
    /**
    * @deprecated in favour of `waitingRoomBehaviour`.
    * The `waitingRoomType` returns string value.
    * type of waiting room behavior
    * possible values are `SKIP`, `ON_PRIVILEGED_USER_ENTRY`, `SKIP_ON_ACCEPT`
    */
  }, {
    key: "waitingRoomType",
    get: function() {
      var i, a;
      return (i = (a = f(this, L)[L]) === null || a === void 0 ? void 0 : a.waitingRoomType) !== null && i !== void 0 ? i : Le.waitingRoomType;
    }
    /**
    * The `waitingRoomType` returns string value.
    * type of waiting room behavior
    * possible values are `SKIP`, `ON_PRIVILEGED_USER_ENTRY`, `SKIP_ON_ACCEPT`
    */
  }, {
    key: "waitingRoomBehaviour",
    get: function() {
      var i, a;
      return (i = (a = f(this, L)[L]) === null || a === void 0 ? void 0 : a.waitingRoomType) !== null && i !== void 0 ? i : Le.waitingRoomType;
    }
    /**
    * The `plugins` tells if the participant can act on plugins
    * there are 2 permissions with boolean values, `canStart` and `canClose`.
    */
  }, {
    key: "plugins",
    get: function() {
      var i, a;
      return (i = (a = f(this, L)[L]) === null || a === void 0 ? void 0 : a.plugins) !== null && i !== void 0 ? i : Le.plugins;
    }
    /**
    * The `polls` tells if the participant can use polls.
    * There are 3 permissions with boolean values, `canCreate`, `canVote`, `canViewResults`
    */
  }, {
    key: "polls",
    get: function() {
      var i, a;
      return (i = (a = f(this, L)[L]) === null || a === void 0 ? void 0 : a.polls) !== null && i !== void 0 ? i : Le.polls;
    }
    /**
    * @deprecated in favour of `canProduceVideo`
    * The `produceVideo` shows permissions for enabling video.
    * There possible values are `ALLOWED`, `NOT_ALLOWED`, `CAN_REQUEST`
    */
  }, {
    key: "produceVideo",
    get: function() {
      return this.canProduceVideo;
    }
    /**
    * @deprecated
    * The `requestProduce` returns boolean value.
    * If `true`, participant can send request to participants
    * about producing audio, video or screenshare.
    */
  }, {
    key: "requestProduce",
    get: function() {
      return f(this, L)[L].media.audio.canProduce === ee.CanRequest || f(this, L)[L].media.video.canProduce === ee.CanRequest || f(this, L)[L].media.screenshare.canProduce === ee.CanRequest;
    }
    /**
    * The `canProduceVideo` shows permissions for enabling video.
    * There possible values are `ALLOWED`, `NOT_ALLOWED`, `CAN_REQUEST`
    */
  }, {
    key: "canProduceVideo",
    get: function() {
      var i, a = (i = f(this, L)[L].media.video.canProduce) !== null && i !== void 0 ? i : Le.media.video.canProduce;
      return this.stageEnabled && (f(this, Ie)[Ie] === "ACCEPTED_TO_JOIN_STAGE" || f(this, Ie)[Ie] === "ON_STAGE") && a === ee.CanRequest ? ee.Allowed : this.stageEnabled && (f(this, Ie)[Ie] === "OFF_STAGE" || f(this, Ie)[Ie] === "REQUESTED_TO_JOIN_STAGE") && a === ee.Allowed ? ee.NotAllowed : a;
    }
    /**
    * @deprecated in favour of `canProduceScreenshare`
    * The `produceVideo` shows permissions for sharing screen.
    * There possible values are `ALLOWED`, `NOT_ALLOWED`, `CAN_REQUEST`
    */
  }, {
    key: "produceScreenshare",
    get: function() {
      return this.canProduceScreenshare;
    }
    /**
    * The `canProduceScreenshare` shows permissions for sharing screen.
    * There possible values are `ALLOWED`, `NOT_ALLOWED`, `CAN_REQUEST`
    */
  }, {
    key: "canProduceScreenshare",
    get: function() {
      var i, a = (i = f(this, L)[L].media.screenshare.canProduce) !== null && i !== void 0 ? i : Le.media.screenshare.canProduce;
      return this.stageEnabled && (f(this, Ie)[Ie] === "ACCEPTED_TO_JOIN_STAGE" || f(this, Ie)[Ie] === "ON_STAGE") && a === ee.CanRequest ? ee.Allowed : this.stageEnabled && (f(this, Ie)[Ie] === "OFF_STAGE" || f(this, Ie)[Ie] === "REQUESTED_TO_JOIN_STAGE") && a === ee.Allowed ? ee.NotAllowed : a;
    }
    /**
    * @deprecated in favour of `canProduceAudio`
    * The `produceAudio` shows permissions for enabling audio.
    * There possible values are `ALLOWED`, `NOT_ALLOWED`, `CAN_REQUEST`
    */
  }, {
    key: "produceAudio",
    get: function() {
      return this.canProduceAudio;
    }
    /**
    * The `canProduceAudio` shows permissions for enabling audio.
    * There possible values are `ALLOWED`, `NOT_ALLOWED`, `CAN_REQUEST`
    */
  }, {
    key: "canProduceAudio",
    get: function() {
      var i, a = (i = f(this, L)[L].media.audio.canProduce) !== null && i !== void 0 ? i : Le.media.audio.canProduce;
      return this.stageEnabled && (f(this, Ie)[Ie] === "ACCEPTED_TO_JOIN_STAGE" || f(this, Ie)[Ie] === "ON_STAGE") && a === ee.CanRequest ? ee.Allowed : this.stageEnabled && (f(this, Ie)[Ie] === "OFF_STAGE" || f(this, Ie)[Ie] === "REQUESTED_TO_JOIN_STAGE") && a === ee.Allowed ? ee.NotAllowed : a;
    }
    /**
    * The `chatPublic` shows permissions for public chat
    * there are 4 permissions
    * `canSend` - if true, the participant can send chat
    * `text` - if true, the participant can send text
    * `files` - if true, the participant can send files
    */
  }, {
    key: "chatPublic",
    get: function() {
      var i, a;
      return (i = (a = f(this, L)[L]) === null || a === void 0 || (a = a.chat) === null || a === void 0 ? void 0 : a.public) !== null && i !== void 0 ? i : Le.chat.public;
    }
    /**
    * The `chatPrivate` shows permissions for public chat
    * there are 4 permissions
    * `canSend` - if true, the participant can send private chat
    * `text` - if true, the participant can send text as private chat
    * `files` - if true, the participant can send files as private chat
    * `canReceive` - (optional) if true, the participant can receive private chat
    */
  }, { key: "chatPrivate", get: function() {
    var i, a;
    return (i = (a = f(this, L)[L]) === null || a === void 0 || (a = a.chat) === null || a === void 0 ? void 0 : a.private) !== null && i !== void 0 ? i : Le.chat.private;
  } }, { key: "chatChannel", get: function() {
    var i, a;
    return (i = (a = f(this, L)[L]) === null || a === void 0 || (a = a.chat) === null || a === void 0 ? void 0 : a.channel) !== null && i !== void 0 ? i : Le.chat.channel;
  } }, { key: "chatMessage", get: function() {
    var i, a;
    return (i = (a = f(this, L)[L]) === null || a === void 0 || (a = a.chat) === null || a === void 0 ? void 0 : a.message) !== null && i !== void 0 ? i : Le.chat.message;
  } }, {
    key: "connectedMeetings",
    get: function() {
      var i, a;
      return (i = (a = f(this, L)[L]) === null || a === void 0 ? void 0 : a.connectedMeetings) !== null && i !== void 0 ? i : Le == null ? void 0 : Le.connectedMeetings;
    }
    /**
    * The `hiddenParticipant` returns boolean value.
    * If `true`, participant is hidden.
    */
  }, {
    key: "hiddenParticipant",
    get: function() {
      var i, a;
      return (i = (a = f(this, L)[L]) === null || a === void 0 ? void 0 : a.hiddenParticipant) !== null && i !== void 0 ? i : Le.hiddenParticipant;
    }
    /**
    * The `showParticipantList` returns boolean value.
    * If `true`, participant list can be shown to the participant.
    */
  }, {
    key: "showParticipantList",
    get: function() {
      var i;
      return (i = f(this, L)[L].showParticipantList) !== null && i !== void 0 ? i : Le.showParticipantList;
    }
    /**
    * @deprecated in favour of `canChangeParticipantPermissions`
    * The `canChangeParticipantRole` returns boolean value.
    * If `true`, allow changing the participants' role.
    */
  }, {
    key: "canChangeParticipantRole",
    get: function() {
      var i, a;
      return (i = (a = f(this, L)[L]) === null || a === void 0 ? void 0 : a.canChangeParticipantPermissions) !== null && i !== void 0 ? i : Le.canChangeParticipantPermissions;
    }
    /**
    * The `canChangeParticipantPermissions` returns boolean value.
    * If `true`, allow changing the participants' permissions.
    */
  }, {
    key: "canChangeParticipantPermissions",
    get: function() {
      var i, a;
      return (i = (a = f(this, L)[L]) === null || a === void 0 ? void 0 : a.canChangeParticipantPermissions) !== null && i !== void 0 ? i : Le.canChangeParticipantPermissions;
    }
    /**
    * @deprecated
    * The `canChangeTheme` returns boolean value.
    * If `true`, the participant can change the meeting theme.
    */
    // eslint-disable-next-line class-methods-use-this
  }, {
    key: "canChangeTheme",
    get: function() {
      return !1;
    }
    /**
    * @deprecated in favour of individual production settings
    * The `canPresent` returns boolean value.
    * If `true`, the participant can become a presentor.
    */
  }, {
    key: "canPresent",
    get: function() {
      return f(this, L)[L].media.audio.canProduce === ee.Allowed || f(this, L)[L].media.video.canProduce === ee.Allowed || f(this, L)[L].media.screenshare.canProduce === ee.Allowed;
    }
    /**
    * @deprecated Use `acceptStageRequests` instead.
    */
  }, { key: "acceptPresentRequests", get: function() {
    return this.acceptStageRequests;
  } }, {
    key: "canEditDisplayName",
    get: function() {
      var i;
      return (i = f(this, L)[L].canEditDisplayName) !== null && i !== void 0 ? i : !1;
    }
    /**
    * @deprecated DyteSelf.config.maxScreenShareCount
    */
    // eslint-disable-next-line class-methods-use-this
  }, {
    key: "maxScreenShareCount",
    get: function() {
      return 1;
    }
    // eslint-disable-next-line class-methods-use-this
  }, { key: "isRecorder", get: function() {
    return f(this, L)[L].isRecorder;
  } }, {
    key: "canSpotlight",
    get: function() {
      return f(this, L)[L].canSpotlight;
    }
    /** Livestream */
  }, { key: "canLivestream", get: function() {
    return f(this, L)[L].canLivestream;
  } }, {
    key: "transcriptionEnabled",
    get: function() {
      return f(this, L)[L].transcriptionEnabled;
    }
    // eslint-disable-next-line class-methods-use-this
  }, { key: "isV2", get: function() {
    return !0;
  } }], [{ key: "fromResponse", value: function(i, a, s) {
    return new r(i, a, s, !0);
  } }, { key: "default", value: function(i, a) {
    return new r(Le, i, a);
  } }]), r;
}(rt), OD = ct(So()), Ye = /* @__PURE__ */ V("config"), Ht = /* @__PURE__ */ V("theme"), Un = /* @__PURE__ */ V("pluginsConfig"), $D = /* @__PURE__ */ function() {
  function e(t) {
    if (w(this, e), Object.defineProperty(this, Ye, { writable: !0, value: void 0 }), Object.defineProperty(this, Ht, { writable: !0, value: void 0 }), Object.defineProperty(this, Un, { writable: !0, value: void 0 }), !t)
      throw new $("Could not load preset.");
    f(this, Ye)[Ye] = t.config, f(this, Ht)[Ht] = t.ui || ct(So().ui), f(this, Un)[Un] = t.permissions.plugins.config;
  }
  return b(e, [{
    key: "setupScreen",
    get: (
      /**
      * @deprecated
      * The `setupScreen` represents the setup screen for the meeting.
      */
      function() {
        return { isEnabled: !0 };
      }
    )
    /**
    * @deprecated
    * The `waitingRoom` contains the properties to show a layout when
    * the participant is in waiting to join the meeting.
    */
  }, {
    key: "waitingRoom",
    get: function() {
      return { isEnabled: !0 };
    }
    /**
    * @deprecated
    * The `controlBar` contains the properties to show the meeting control bar with
    * various action buttons for the meeting.
    * The `elements` key contains the various action buttons.
    */
  }, {
    key: "controlBar",
    get: function() {
      return { isEnabled: !0, elements: { chat: !0, fullscreen: !0, invite: !1, layout: !1, participants: !0, plugins: !0, polls: !0, reactions: !1, screenshare: !0 } };
    }
    /**
    * @deprecated
    * The `header` contains the properties to show the meeting header with various elements.
    * The `elements` key contains the following properties
    * `logo` - string value representing the public URL for the logo
    * `timer` - boolean value suggesting if the timer should be shown
    * `title` - boolean value suggesting if the meeting title should be shown
    * `participantCount` - boolean value suggesting if the participant count shuld be shown
    * `changeLayout` - boolean value suggesting if the participant can change layout
    */
  }, {
    key: "header",
    get: function() {
      return { isEnabled: !0, elements: { logo: f(this, Ht)[Ht].designTokens.logo, timer: !0, title: !0, participantCount: !0, changeLayout: !1 } };
    }
    /**
    * @deprecated
    * The `pipMode` property returns a boolean value
    * If true, picture-in-picture mode is enabled for the participant.
    */
  }, {
    key: "pipMode",
    get: function() {
      return !0;
    }
    /**
    * The `viewType` tells the type of the meeting
    * possible values are: GROUP_CALL| LIVESTREAM | CHAT | AUDIO_ROOM
    */
  }, {
    key: "viewType",
    get: function() {
      return f(this, Ye)[Ye].viewType;
    }
    /**
    * The `maxVideoStreams` contains the maximum video
    * streams for mobile and desktop
    */
  }, {
    key: "maxVideoStreams",
    get: function() {
      return f(this, Ye)[Ye].maxVideoStreams;
    }
    /**
    * The `maxScreenShareCount` contains the maximum
    * possible concurrent screen shares
    */
  }, {
    key: "maxScreenShareCount",
    get: function() {
      return f(this, Ye)[Ye].maxScreenshareCount;
    }
    /**
    * @deprecated in favour of permissions.plugins.config
    */
  }, {
    key: "plugins",
    get: function() {
      return [];
    }
    /**
    * The `disabledPlugins` property returns id of all disabled plugins
    */
  }, { key: "disabledPlugins", get: function() {
    var r = this;
    return Object.keys(f(this, Un)[Un]).filter(function(n) {
      var i = f(r, Un)[Un][n];
      return i.disabled;
    });
  } }, { key: "designTokens", get: function() {
    return f(this, Ht)[Ht].designTokens;
  } }, { key: "configDiff", get: function() {
    return f(this, Ht)[Ht].configDiff;
  } }, { key: "mediaConstraints", get: function() {
    var r, n, i, a, s, u, o, c, l, d, v, h;
    return { audio: { enableStereo: (r = (n = f(this, Ye)[Ye]) === null || n === void 0 || (n = n.media) === null || n === void 0 || (n = n.audio) === null || n === void 0 ? void 0 : n.enableStereo) !== null && r !== void 0 ? r : Dr.audio.enableStereo, enableHighBitrate: (i = (a = f(this, Ye)[Ye]) === null || a === void 0 || (a = a.media) === null || a === void 0 || (a = a.audio) === null || a === void 0 ? void 0 : a.enableHighBitrate) !== null && i !== void 0 ? i : Dr.audio.enableHighBitrate }, video: { quality: (s = (u = f(this, Ye)[Ye]) === null || u === void 0 || (u = u.media) === null || u === void 0 || (u = u.video) === null || u === void 0 ? void 0 : u.quality) !== null && s !== void 0 ? s : Dr.video.quality, frameRate: (o = (c = f(this, Ye)[Ye]) === null || c === void 0 || (c = c.media) === null || c === void 0 || (c = c.video) === null || c === void 0 ? void 0 : c.frameRate) !== null && o !== void 0 ? o : Dr.video.frameRate }, screenshare: { quality: (l = (d = f(this, Ye)[Ye]) === null || d === void 0 || (d = d.media) === null || d === void 0 || (d = d.screenshare) === null || d === void 0 ? void 0 : d.quality) !== null && l !== void 0 ? l : Dr.screenshare.quality, frameRate: (v = (h = f(this, Ye)[Ye]) === null || h === void 0 || (h = h.media) === null || h === void 0 || (h = h.screenshare) === null || h === void 0 ? void 0 : h.frameRate) !== null && v !== void 0 ? v : Dr.screenshare.frameRate } };
  } }, { key: "isV2", get: function() {
    return !0;
  } }], [{ key: "fromResponse", value: function(r) {
    return new e(r);
  } }, { key: "default", value: function() {
    return new e(OD);
  } }]), e;
}();
function Jn(e) {
  var t, r, n, i, a, s, u, o, c;
  return e ? { media: { audio: { enabled: e.audioEnabled, trackId: (t = e.audioTrack) === null || t === void 0 ? void 0 : t.id, permission: "mediaPermissions" in e ? (r = e.mediaPermissions) === null || r === void 0 ? void 0 : r.audio : null }, video: { enabled: e.videoEnabled, trackId: (n = e.videoTrack) === null || n === void 0 ? void 0 : n.id, permission: "mediaPermissions" in e ? (i = e.mediaPermissions) === null || i === void 0 ? void 0 : i.video : null }, screenshare: { enabled: e.screenShareEnabled, permission: "mediaPermissions" in e ? (a = e.mediaPermissions) === null || a === void 0 ? void 0 : a.screenshare : null, audio: { enabled: (s = e.screenShareTracks) === null || s === void 0 || (s = s.audio) === null || s === void 0 ? void 0 : s.enabled, trackId: (u = e.screenShareTracks) === null || u === void 0 || (u = u.audio) === null || u === void 0 ? void 0 : u.id }, video: { enabled: (o = e.screenShareTracks) === null || o === void 0 || (o = o.video) === null || o === void 0 ? void 0 : o.enabled, trackId: (c = e.screenShareTracks) === null || c === void 0 || (c = c.video) === null || c === void 0 ? void 0 : c.id } } } } : {};
}
var ND = ["virtual", "emulator", "krisp", "solstice conference", "teams", "manycam", "blackHole"];
function fd(e) {
  var t = e.label.toLowerCase();
  return Ve._bowser.getOSName() === "macOS" && t.includes("iphone") ? (R.log("isVirtualDevice::ignore_macos_continuity"), !0) : ND.some(function(r) {
    return t.includes(r);
  });
}
var Zt = { setItem: function(t, r) {
  try {
    localStorage.setItem(t, r);
  } catch (n) {
    R.error("LocalStorage::setItem::crashed", { error: n, localStorage: { key: t, value: r } });
  }
}, getItem: function(t) {
  try {
    return localStorage.getItem(t);
  } catch (r) {
    R.error("LocalStorage::getItem::crashed", { error: r, localStorage: { key: t } });
  }
  return null;
} }, LD = function() {
  var t = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 0;
  return new Promise(function(r) {
    return setTimeout(r, t);
  });
}, UD = function(t, r, n) {
  var i = typeof n == "number" ? n : 250, a = t.createMediaStreamSource(r), s = t.createAnalyser();
  s.fftSize = 2048, a.connect(s);
  var u = new Uint8Array(s.fftSize), o = !1;
  setTimeout(function() {
    o = !0;
  }, i);
  function c() {
    return o ? Promise.resolve(!0) : (s.getByteTimeDomainData(u), u.some(function(l) {
      return l !== 128 && l !== 0;
    }) ? Promise.resolve(!1) : LD().then(c));
  }
  return c().then(function(l) {
    return a.disconnect(), l;
  }, function(l) {
    throw a.disconnect(), l;
  });
}, FD = typeof AudioContext != "undefined" ? AudioContext : null, VD = /* @__PURE__ */ function() {
  function e(t) {
    w(this, e), this._AudioContext = void 0, this.audioContext = void 0, this._audioContextRefContainers = void 0;
    var r = ie({ AudioContext: FD }, t);
    Object.defineProperties(this, { _AudioContext: { value: r.AudioContext }, audioContext: { value: null, writable: !0 }, _audioContextRefContainers: { value: /* @__PURE__ */ new Set() }, AudioContextProvider: { enumerable: !0, value: e } });
  }
  return b(e, [{ key: "getOrCreate", value: function(r) {
    if (!this._audioContextRefContainers.has(r) && (this._audioContextRefContainers.add(r), this._AudioContext && !this.audioContext))
      try {
        this.audioContext = new this._AudioContext();
      } catch (n) {
      }
    return this.audioContext;
  } }, { key: "release", value: function(r) {
    this._audioContextRefContainers.has(r) && (this._audioContextRefContainers.delete(r), !this._audioContextRefContainers.size && this.audioContext && (this.audioContext.close(), this.audioContext = null));
  } }]), e;
}(), pd = new VD(), BD = 3, qD = 250;
function GD(e) {
  var t = {}, r = pd.getOrCreate(t), n = BD;
  function i() {
    return n -= 1, UD(r, e.srcObject, qD).then(function(a) {
      return a ? n > 0 ? i() : !0 : !1;
    }).catch(function() {
      return !0;
    });
  }
  return i().finally(function() {
    pd.release(t);
  });
}
function Za(e) {
  return Ku.apply(this, arguments);
}
function Ku() {
  return Ku = k(/* @__PURE__ */ p().mark(function e(t) {
    var r, n, i, a;
    return p().wrap(function(u) {
      for (; ; )
        switch (u.prev = u.next) {
          case 0:
            if (r = new Audio(), n = new MediaStream(), n.addTrack(t), r.srcObject = n, i = !1, u.prev = 5, a = r.play(), !a) {
              u.next = 10;
              break;
            }
            return u.next = 10, a;
          case 10:
            return u.next = 12, GD(r);
          case 12:
            i = u.sent, i && R.info("checkIfAudioTrackIsSilent::silence_detected"), u.next = 19;
            break;
          case 16:
            u.prev = 16, u.t0 = u.catch(5), R.error("checkIfAudioTrackIsSilent::failed_to_detect_silence", { error: u.t0 });
          case 19:
            return u.prev = 19, r.pause(), r.remove(), u.finish(19);
          case 23:
            return u.abrupt("return", i);
          case 24:
          case "end":
            return u.stop();
        }
    }, e, null, [[5, 16, 19, 23]]);
  })), Ku.apply(this, arguments);
}
function HD(e, t) {
  return Yu.apply(this, arguments);
}
function Yu() {
  return Yu = k(/* @__PURE__ */ p().mark(function e(t, r) {
    var n, i, a, s, u, o;
    return p().wrap(function(l) {
      for (; ; )
        switch (l.prev = l.next) {
          case 0:
            if (t != null && t.length) {
              l.next = 2;
              break;
            }
            return l.abrupt("return", r);
          case 2:
            return n = new AudioContext(), l.next = 5, Promise.all(t == null ? void 0 : t.map(function(d) {
              return d(n);
            }));
          case 5:
            for (i = l.sent, a = n.createMediaStreamSource(new MediaStream([r])), s = n.createMediaStreamDestination(), l.prev = 8, u = a, o = 0; o < i.length; o += 1)
              u.connect(i[o]), u = i[o];
            u.connect(s), l.next = 18;
            break;
          case 14:
            return l.prev = 14, l.t0 = l.catch(8), R.error("getTransformedAudioTrack::middleware_execution_failed", { error: l.t0 }), l.abrupt("return", r);
          case 18:
            return l.abrupt("return", s.stream.getAudioTracks()[0]);
          case 19:
          case "end":
            return l.stop();
        }
    }, e, null, [[8, 14]]);
  })), Yu.apply(this, arguments);
}
var WD = Object.defineProperty, jD = Object.getOwnPropertyDescriptor, JD = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? jD(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && WD(r, n, a), a;
}, zu = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n, i, a) {
    var s;
    return w(this, r), s = t.call(this), s.constructorName = s.constructor.name, s.userSelectedDevice = void 0, s.mediaInterface = void 0, s.isNonPreferredDevice = void 0, s._mediaTrack = void 0, s.transformedMediaTrack = void 0, s.middlewares = [], s.currentDevice = void 0, s.mediaInterface = n, i && s.setMediaTrack(i), s.userSelectedDevice = void 0, s.isNonPreferredDevice = a, s.onTrackEnded = s.onTrackEnded.bind(M(s)), s.onTrackMuted = s.onTrackMuted.bind(M(s)), s;
  }
  return b(r, [{ key: "disableTrack", value: function() {
    var i, a;
    this.removeMediaTrackListeners(), (i = this._mediaTrack) === null || i === void 0 || i.stop(), this._mediaTrack = void 0, (a = this.transformedMediaTrack) === null || a === void 0 || a.stop(), this.transformedMediaTrack = void 0;
  } }, { key: "mediaTrack", get: function() {
    return this._mediaTrack;
  } }, {
    key: "setMediaTrack",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s) {
        var u = this, o;
        return p().wrap(function(l) {
          for (; ; )
            switch (l.prev = l.next) {
              case 0:
                o = function(v) {
                  R.error("".concat(u.constructorName, ".setMediaTrack.error"), { error: v });
                };
                try {
                  this.disableTrack();
                } catch (d) {
                  o(d);
                }
                return l.next = 4, this.conditionallyChangeTrack(s);
              case 4:
                return this._mediaTrack = l.sent, l.next = 7, this.setTransformedTrack();
              case 7:
                return l.prev = 7, this.addMediaTrackListeners(), l.next = 11, this.setCurrentDevice();
              case 11:
                l.next = 16;
                break;
              case 13:
                l.prev = 13, l.t0 = l.catch(7), o(l.t0);
              case 16:
              case "end":
                return l.stop();
            }
        }, a, this, [[7, 13]]);
      }));
      function i(a) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Represents current audio/video state according to track status
    */
  }, {
    key: "trackEnabled",
    get: function() {
      return !!this.mediaTrack && this.mediaTrack.readyState === "live" && this.mediaTrack.enabled;
    }
    /**
    * Mutes track if it's present, DOES NOT STOP IT!
    * Only used for audio streams
    */
  }, {
    key: "muteTrack",
    value: function() {
      if (!this.mediaTrack) {
        R.warn("BaseMediaHandler.muteTrack Tried muting with no track present");
        return;
      }
      this.transformedMediaTrack && (this.transformedMediaTrack.enabled = !1), this.mediaTrack.enabled = !1;
    }
    /**
    * If track is present and not enabled, we enable it.
    * If no track is present we set one up.
    */
  }, {
    key: "unmuteTrack",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a() {
        return p().wrap(function(u) {
          for (; ; )
            switch (u.prev = u.next) {
              case 0:
                if (u.prev = 0, this.mediaTrack) {
                  u.next = 6;
                  break;
                }
                return u.next = 4, this.enableTrack(!1);
              case 4:
                u.next = 7;
                break;
              case 6:
                this.mediaTrack.enabled = !0;
              case 7:
                u.next = 14;
                break;
              case 9:
                throw u.prev = 9, u.t0 = u.catch(0), R.error("".concat(this.constructorName, ".unmuteTrack.error"), { error: u.t0 }), this.disableTrack(), new $("Failed to unmute track");
              case 14:
              case "end":
                return u.stop();
            }
        }, a, this, [[0, 9]]);
      }));
      function i() {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Called after every track switch, maintains local state of current
    * selected device for this particular stream.
    */
  }, {
    key: "setCurrentDevice",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a() {
        var s;
        return p().wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                if (this.mediaTrack) {
                  o.next = 3;
                  break;
                }
                return this.currentDevice = void 0, o.abrupt("return");
              case 3:
                if (((s = this.currentDevice) === null || s === void 0 ? void 0 : s.deviceId) !== this.mediaTrack.getSettings().deviceId) {
                  o.next = 5;
                  break;
                }
                return o.abrupt("return");
              case 5:
                return o.next = 7, this.mediaInterface.getDevice(this.mediaTrack.getSettings().deviceId);
              case 7:
                this.currentDevice = o.sent;
              case 8:
              case "end":
                return o.stop();
            }
        }, a, this);
      }));
      function i() {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Middleware Utility
    */
  }, { key: "addMiddleware", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (!(Ve.isWebKitBased() && !Oe.hasFeature($e.ALLOW_SAFARI_MEDIA_MIDDLEWARES))) {
                o.next = 2;
                break;
              }
              return o.abrupt("return", { success: !1, message: "Middlewares are not supported in this WebKit engine based browser." });
            case 2:
              if (!this.middlewares.includes(s)) {
                o.next = 4;
                break;
              }
              return o.abrupt("return", { success: !1, message: "This middleware has been applied, already. Skipping." });
            case 4:
              if (o.prev = 4, this.middlewares.push(s), !this.trackEnabled) {
                o.next = 9;
                break;
              }
              return o.next = 9, this.setTransformedTrack();
            case 9:
              return o.abrupt("return", { success: !0, message: "Successfully added the middleware." });
            case 12:
              return o.prev = 12, o.t0 = o.catch(4), R.error("While adding middleware", { error: o.t0 }), this.removeMiddleware(s), o.abrupt("return", { success: !1, message: o.t0 === null || o.t0 === void 0 ? void 0 : o.t0.message });
            case 17:
            case "end":
              return o.stop();
          }
      }, a, this, [[4, 12]]);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "removeMiddleware", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              if (u = this.middlewares.indexOf(s, 0), !(u > -1)) {
                c.next = 13;
                break;
              }
              return c.prev = 2, this.middlewares.splice(u, 1), c.next = 6, this.setTransformedTrack(!0);
            case 6:
              return c.abrupt("return", { success: !0, message: "Successfully removed the middleware." });
            case 9:
              return c.prev = 9, c.t0 = c.catch(2), R.error("While removing middleware", { error: c.t0 }), c.abrupt("return", { success: !1, message: c.t0 === null || c.t0 === void 0 ? void 0 : c.t0.message });
            case 13:
              return c.abrupt("return", { success: !1, message: "No such middleware was found. Skipping." });
            case 14:
            case "end":
              return c.stop();
          }
      }, a, this, [[2, 9]]);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "addMediaTrackListeners", value: function() {
    var i, a;
    this.mediaTrack && (R.info("".concat(this.constructorName, ".addMediaTrackListeners for deviceId ").concat((i = this.mediaTrack) === null || i === void 0 || (i = i.getSettings()) === null || i === void 0 ? void 0 : i.deviceId, " of type ").concat((a = this.mediaTrack) === null || a === void 0 ? void 0 : a.kind)), this.mediaTrack.addEventListener("ended", this.onTrackEnded), this.mediaTrack.addEventListener("mute", this.onTrackMuted));
  } }, { key: "removeMediaTrackListeners", value: function() {
    var i, a;
    this.mediaTrack && (R.info("".concat(this.constructorName, ".removeMediaTrackListeners for deviceId ").concat((i = this.mediaTrack) === null || i === void 0 || (i = i.getSettings()) === null || i === void 0 ? void 0 : i.deviceId, " of type ").concat((a = this.mediaTrack) === null || a === void 0 ? void 0 : a.kind)), R.info("".concat(this.constructorName, ".removeMediaTrackListeners")), this.mediaTrack.removeEventListener("ended", this.onTrackEnded), this.mediaTrack.removeEventListener("mute", this.onTrackMuted));
  } }]), r;
}(ln);
zu = JD([lr(function(e) {
  throw new $(e.message, "1600");
})], zu);
var Nh = zu, KD = Object.defineProperty, YD = Object.getOwnPropertyDescriptor, gc = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? YD(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && KD(r, n, a), a;
}, vu = "[Dyte]nonSilentDeviceLabels", Ms = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.apply(this, arguments);
  }
  return b(r, [{ key: "setDevice", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              if (s) {
                c.next = 3;
                break;
              }
              throw R.warn("AudioMediaHandler.setDevice No device received"), new $("No device received!", "1603");
            case 3:
              if (s.kind === "audioinput") {
                c.next = 6;
                break;
              }
              throw R.warn("AudioMediaHandler.setDevice Received non audio device"), new $("Non audio device received while setting device!", "1603");
            case 6:
              return c.prev = 6, u = this.trackEnabled, this.userSelectedDevice = s.deviceId, c.t0 = this, c.next = 12, this.mediaInterface.getAudioTrack(!u, s.deviceId);
            case 12:
              return c.t1 = c.sent, c.next = 15, c.t0.setMediaTrack.call(c.t0, c.t1);
            case 15:
              c.next = 22;
              break;
            case 17:
              throw c.prev = 17, c.t2 = c.catch(6), R.error("AudioMediaHandler.setDevice.error", { error: c.t2 }), this.disableTrack(), new $(c.t2.message, "1604");
            case 22:
            case "end":
              return c.stop();
          }
      }, a, this, [[6, 17]]);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "enableTrack", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              if (!this.trackEnabled) {
                c.next = 3;
                break;
              }
              return R.warn("AudioMediaHandler.enableTrack Track already enabled!"), c.abrupt("return");
            case 3:
              return c.next = 5, this.mediaInterface.getAudioTrack(s, this.userSelectedDevice);
            case 5:
              return u = c.sent, c.next = 8, this.setMediaTrack(u);
            case 8:
            case "end":
              return c.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "setTransformedTrack", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              if (!(!s && !((u = this.middlewares) !== null && u !== void 0 && u.length))) {
                c.next = 3;
                break;
              }
              return this.transformedMediaTrack = this.mediaTrack, c.abrupt("return");
            case 3:
              return c.prev = 3, c.next = 6, HD(this.middlewares, this.mediaTrack);
            case 6:
              this.transformedMediaTrack = c.sent, this.emit("trackChanged"), c.next = 14;
              break;
            case 10:
              c.prev = 10, c.t0 = c.catch(3), R.error("AudioMediaHandler.setTransformedTrack", { error: c.t0 }), this.transformedMediaTrack = this.mediaTrack;
            case 14:
            case "end":
              return c.stop();
          }
      }, a, this, [[3, 10]]);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "onTrackEnded", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              return R.info("AudioMediaHandler.TrackEnded"), this.emit("trackEnded"), s = this.mediaTrack.enabled, this.disableTrack(), o.next = 6, this.enableTrack(!s);
            case 6:
              return o.next = 8, this.setTransformedTrack();
            case 8:
              this.emit("trackChanged");
            case 9:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "onTrackMuted", value: function() {
    R.info("AudioMediaHandler.TrackMuted"), this.emit("trackMuted");
  } }, { key: "conditionallyChangeTrack", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u = this, o, c, l, d, v, h, m;
      return p().wrap(function(y) {
        for (; ; )
          switch (y.prev = y.next) {
            case 0:
              if (s) {
                y.next = 2;
                break;
              }
              return y.abrupt("return", s);
            case 2:
              if (!this.userSelectedDevice) {
                y.next = 4;
                break;
              }
              return y.abrupt("return", s);
            case 4:
              return o = s, y.next = 7, this.mediaInterface.getAudioInputDevices();
            case 7:
              if (c = y.sent, l = this.isNonPreferredDevice ? c.filter(function(_) {
                return _ && !u.isNonPreferredDevice(_);
              }) : c, l != null && l.length) {
                y.next = 11;
                break;
              }
              return y.abrupt("return", o);
            case 11:
              if (l.find(function(_) {
                return _.deviceId === s.getSettings().deviceId;
              })) {
                y.next = 17;
                break;
              }
              return o.stop(), R.info("localmediahandler::setupstreams::found_audio_non_preferred"), y.next = 16, this.mediaInterface.getAudioTrack(!1, l[0].deviceId);
            case 16:
              o = y.sent;
            case 17:
              if (d = JSON.parse(Zt.getItem(vu)), !(d != null && d.devices.some(function(_) {
                return _.label === o.label;
              }))) {
                y.next = 20;
                break;
              }
              return y.abrupt("return", o);
            case 20:
              return y.next = 22, Za(o);
            case 22:
              if (y.sent) {
                y.next = 26;
                break;
              }
              return h = (v = d == null ? void 0 : d.devices.concat({ label: o.label })) !== null && v !== void 0 ? v : [{ label: o.label }], Zt.setItem(vu, JSON.stringify({ devices: h })), y.abrupt("return", o);
            case 26:
              return R.info("AudioMediaHandler.conditionallyChangeTrack.DetectedSilentTrack"), m = o.getSettings().deviceId, l.filter(function(_) {
                return _.deviceId !== m;
              }).some(/* @__PURE__ */ function() {
                var _ = k(/* @__PURE__ */ p().mark(function C(D) {
                  var I;
                  return p().wrap(function(q) {
                    for (; ; )
                      switch (q.prev = q.next) {
                        case 0:
                          return q.next = 2, u.mediaInterface.getAudioTrack(!1, D.deviceId);
                        case 2:
                          return o = q.sent, q.next = 5, Za(o);
                        case 5:
                          if (q.sent) {
                            q.next = 10;
                            break;
                          }
                          return I = d.devices.concat({ label: o.label }), Zt.setItem(vu, JSON.stringify({ devices: I })), R.info("AudioMediaHandler.conditionallyChangeTrack.SuccesfullyChangedTrack"), q.abrupt("return", !0);
                        case 10:
                          return R.info("AudioMediaHandler.conditionallyChangeTrack.AnotherSilentTrackFound"), q.abrupt("return", !1);
                        case 12:
                        case "end":
                          return q.stop();
                      }
                  }, C);
                }));
                return function(C) {
                  return _.apply(this, arguments);
                };
              }()), y.abrupt("return", o);
            case 30:
            case "end":
              return y.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }]), r;
}(Nh);
gc([P.trace("AudioMediaHandler.setTransformedTrack")], Ms.prototype, "setTransformedTrack", 1);
gc([P.trace("AudioMediaHandler.onTrackEnded")], Ms.prototype, "onTrackEnded", 1);
gc([P.trace("AudioMediaHandler.conditionallyChangeTrack")], Ms.prototype, "conditionallyChangeTrack", 1);
var mu = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n, i, a) {
    var s;
    return w(this, r), s = t.call(this, i), s.constraints = void 0, s.name = void 0, s.name = n, s.constraints = a, s;
  }
  return b(r);
}(/* @__PURE__ */ Kn(Error));
function Os(e, t, r) {
  if (Ve.isChromiumBased()) {
    if (t === "NotAllowedError")
      return r.indexOf("by system") > 0 ? "SYSTEM_DENIED" : e === "screenshare" ? "CANCELED" : "DENIED";
    if (t === "NotReadableError")
      return "COULD_NOT_START";
  } else if (Ve.isSafari()) {
    if (t === "NotAllowedError")
      return "DENIED";
  } else if (Ve.isFirefox()) {
    if (t === "NotFoundError" || t === "NotReadableError")
      return "SYSTEM_DENIED";
    if (t === "NotAllowedError")
      return "DENIED";
    if (t === "AbortError")
      return "COULD_NOT_START";
  }
  return "COULD_NOT_START";
}
var zD = /* @__PURE__ */ function() {
  function e() {
    w(this, e), this.permissions = void 0, this.permissions = { audio: "NOT_REQUESTED", video: "NOT_REQUESTED", screenshare: "NOT_REQUESTED" };
  }
  return b(e, [{ key: "getAudioInputDevices", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n() {
      var i;
      return p().wrap(function(s) {
        for (; ; )
          switch (s.prev = s.next) {
            case 0:
              return s.next = 2, this.getAvailableDevices();
            case 2:
              return i = s.sent, s.abrupt("return", i.filter(function(u) {
                return u.kind === "audioinput";
              }));
            case 4:
            case "end":
              return s.stop();
          }
      }, n, this);
    }));
    function r() {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "getVideoInputDevices", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n() {
      var i;
      return p().wrap(function(s) {
        for (; ; )
          switch (s.prev = s.next) {
            case 0:
              return s.next = 2, this.getAvailableDevices();
            case 2:
              return i = s.sent, s.abrupt("return", i.filter(function(u) {
                return u.kind === "videoinput";
              }));
            case 4:
            case "end":
              return s.stop();
          }
      }, n, this);
    }));
    function r() {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "getAudioOutputDevices", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n() {
      var i;
      return p().wrap(function(s) {
        for (; ; )
          switch (s.prev = s.next) {
            case 0:
              return s.next = 2, this.getAvailableDevices();
            case 2:
              return i = s.sent, s.abrupt("return", i.filter(function(u) {
                return u.kind === "audiooutput";
              }));
            case 4:
            case "end":
              return s.stop();
          }
      }, n, this);
    }));
    function r() {
      return t.apply(this, arguments);
    }
    return r;
  }() }]), e;
}(), XD = Object.defineProperty, ZD = Object.getOwnPropertyDescriptor, Et = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? ZD(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && XD(r, n, a), a;
}, et = (Rt = /* @__PURE__ */ V("availableDevices"), vn = /* @__PURE__ */ V("deviceChangeAbortController"), fr = /* @__PURE__ */ V("constraintsBuilder"), /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n) {
    var i;
    return w(this, r), i = t.call(this), Object.defineProperty(M(i), Rt, { writable: !0, value: void 0 }), Object.defineProperty(M(i), vn, { writable: !0, value: void 0 }), Object.defineProperty(M(i), fr, { writable: !0, value: void 0 }), f(M(i), fr)[fr] = new $h(n), f(M(i), vn)[vn] = new AbortController(), i.getAvailableDevices(), i;
  }
  return b(r, [{ key: "constraintsBuilder", get: function() {
    return f(this, fr)[fr];
  } }, { key: "destruct", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              (s = f(this, vn)[vn]) === null || s === void 0 || s.abort();
            case 1:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "handlePermissionErrors", value: function(i, a) {
    var s = Os(i, a.name, a.message);
    this.permissions[i] = s, J.emit(j.MEDIA_PERMISSION_ERROR, { message: s, constraints: a.constraints, kind: i });
  } }, { key: "getAudioAndVideoTrack", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s, u, o, c, l, d, v;
      return p().wrap(function(m) {
        for (; ; )
          switch (m.prev = m.next) {
            case 0:
              return s = { audio: f(this, fr)[fr].getAudioConstraints().audio, video: f(this, fr)[fr].getVideoConstraints().video }, m.prev = 1, R.info("getUserMediaWithoutTimeout::requesting_user_media", { constraints: JSON.stringify(s) }), m.next = 5, navigator.mediaDevices.getUserMedia(s);
            case 5:
              if (u = m.sent, R.info("getUserMediaWithoutTimeout::received_user_media", { constraints: JSON.stringify(s) }), o = u.getAudioTracks()[0], c = u.getVideoTracks()[0], this.permissions.audio = "ACCEPTED", this.permissions.video = "ACCEPTED", l = Oe.hasFeature($e.OBS_QUALITY), !(l && c.label.includes("OBS Virtual"))) {
                m.next = 20;
                break;
              }
              return m.next = 15, this.getVideoInputDevices();
            case 15:
              return d = m.sent, v = d.find(function(T) {
                return T.label.includes("OBS Virtual");
              }), m.next = 19, this.getVideoTrack(v.deviceId);
            case 19:
              c = m.sent;
            case 20:
              return J.emit(j.MEDIA_PERMISSION_UPDATE, { message: this.permissions.audio, kind: "audio" }), J.emit(j.MEDIA_PERMISSION_UPDATE, { message: this.permissions.video, kind: "video" }), m.abrupt("return", { audioTrack: o, videoTrack: c });
            case 25:
              throw m.prev = 25, m.t0 = m.catch(1), R.error("WebMediaInterface.getAudioAndVideoTrack", { error: m.t0 }), new $("Couldnt fetch audio and video track");
            case 29:
            case "end":
              return m.stop();
          }
      }, a, this, [[1, 25]]);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getAudioTrack", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
      var o, c;
      return p().wrap(function(d) {
        for (; ; )
          switch (d.prev = d.next) {
            case 0:
              return o = f(this, fr)[fr].getAudioConstraints(u), d.prev = 1, R.info("getUserMediaWithoutTimeout::requesting_user_media", { constraints: JSON.stringify(o) }), d.next = 5, navigator.mediaDevices.getUserMedia(o);
            case 5:
              return c = d.sent.getAudioTracks()[0], R.info("getUserMediaWithoutTimeout::received_user_media", { constraints: JSON.stringify(o) }), c.enabled = !s, this.permissions.audio = "ACCEPTED", J.emit(j.MEDIA_PERMISSION_UPDATE, { message: this.permissions.audio, kind: "audio" }), d.abrupt("return", c);
            case 13:
              throw d.prev = 13, d.t0 = d.catch(1), this.handlePermissionErrors("audio", new mu(d.t0.name, d.t0.message, o)), new $(d.t0.message, "1601");
            case 17:
            case "end":
              return d.stop();
          }
      }, a, this, [[1, 13]]);
    }));
    function i(a, s) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getScreenShareTracks", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s, u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              return s = f(this, fr)[fr].getScreenShareConstraints(), c.prev = 1, R.info("getDisplayMediaWithoutTimeout::requesting_display_media", { constraints: JSON.stringify(s) }), c.next = 5, navigator.mediaDevices.getDisplayMedia(s);
            case 5:
              return u = c.sent, R.info("getDisplayMediaWithoutTimeout::received_display_media", { constraints: JSON.stringify(s) }), this.permissions.screenshare = "ACCEPTED", J.emit(j.MEDIA_PERMISSION_UPDATE, { message: this.permissions.screenshare, kind: "screenshare" }), c.abrupt("return", { audioTrack: u.getAudioTracks()[0], videoTrack: u.getVideoTracks()[0] });
            case 12:
              throw c.prev = 12, c.t0 = c.catch(1), this.handlePermissionErrors("screenshare", new mu(c.t0.name, c.t0.message, s)), R.error("WebMediaInterface.getScreenShareTracks Error while fetching screenshare tracks", { error: c.t0 }), new $("Couldnt fetch screen share tracks");
            case 17:
            case "end":
              return c.stop();
          }
      }, a, this, [[1, 12]]);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getCurrentDeviceLabel", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              return c.next = 2, this.getDevice(s || "default");
            case 2:
              return u = c.sent, c.abrupt("return", u == null ? void 0 : u.label);
            case 4:
            case "end":
              return c.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getVideoTrack", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u, o, c, l, d, v, h, m, T, y, _;
      return p().wrap(function(D) {
        for (; ; )
          switch (D.prev = D.next) {
            case 0:
              return u = Oe.hasFeature($e.OBS_QUALITY), D.next = 3, this.getCurrentDeviceLabel(s);
            case 3:
              return o = D.sent, c = o && o.includes("OBS Virtual"), l = f(this, fr)[fr].getVideoConstraints(s), d = l.video, v = {}, u && c && typeof d != "boolean" ? v = { deviceId: d.deviceId } : v = d, D.prev = 8, D.next = 11, navigator.mediaDevices.getUserMedia({ video: v });
            case 11:
              return h = D.sent.getVideoTracks()[0], u && c && typeof d != "boolean" && typeof d.width == "object" && (m = h.getSettings(), T = m.width, y = m.height, _ = d.width.ideal, h.applyConstraints({ width: { ideal: _ }, height: { ideal: Math.floor(y * _ / T) }, frameRate: d.frameRate })), this.permissions.video = "ACCEPTED", J.emit(j.MEDIA_PERMISSION_UPDATE, { message: this.permissions.video, kind: "video" }), D.abrupt("return", h);
            case 18:
              throw D.prev = 18, D.t0 = D.catch(8), this.handlePermissionErrors("video", new mu(D.t0.name, D.t0.message, v)), R.error("WebMediaInterface.getVideoTrack Error while fetching video track", { error: D.t0 }), new $("Couldnt fetch video track");
            case 23:
            case "end":
              return D.stop();
          }
      }, a, this, [[8, 18]]);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getAvailableDevices", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              return o.prev = 0, o.next = 3, navigator.mediaDevices.enumerateDevices();
            case 3:
              return s = o.sent, o.abrupt("return", s);
            case 7:
              throw o.prev = 7, o.t0 = o.catch(0), R.error("enumerate_devices_failed", { error: o.t0 }), new $("Failed to get available devices");
            case 11:
            case "end":
              return o.stop();
          }
      }, a, null, [[0, 7]]);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getAvailableDevicesByKind", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              return o.prev = 0, o.next = 3, navigator.mediaDevices.enumerateDevices();
            case 3:
              return o.abrupt("return", o.sent.filter(function(c) {
                var l = c.kind;
                return s === l;
              }));
            case 6:
              throw o.prev = 6, o.t0 = o.catch(0), R.error("enumerate_devices_failed", { error: o.t0 }), new $("Failed to get available devices by kind");
            case 10:
            case "end":
              return o.stop();
          }
      }, a, null, [[0, 6]]);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getDevice", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              return c.prev = 0, c.next = 3, navigator.mediaDevices.enumerateDevices();
            case 3:
              return u = c.sent, c.abrupt("return", u.filter(function(l) {
                return l.deviceId === s;
              })[0]);
            case 7:
              throw c.prev = 7, c.t0 = c.catch(0), R.error("enumerate_devices_failed", { error: c.t0 }), new $("Failed to get device");
            case 11:
            case "end":
              return c.stop();
          }
      }, a, null, [[0, 7]]);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "onDeviceChange", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u, o = this, c;
      return p().wrap(function(d) {
        for (; ; )
          switch (d.prev = d.next) {
            case 0:
              if ((u = f(this, Rt)[Rt]) !== null && u !== void 0 && u.length) {
                d.next = 5;
                break;
              }
              return d.next = 3, this.getAvailableDevices();
            case 3:
              c = d.sent, c != null && c.length && (f(this, Rt)[Rt] = c, s(null, { added: c, removed: [] }, !0));
            case 5:
              Ve.supportsDeviceChangeEvent() && navigator.mediaDevices.addEventListener("devicechange", bs(/* @__PURE__ */ function() {
                var v = k(/* @__PURE__ */ p().mark(function h(m) {
                  var T, y, _, C, D, I, O;
                  return p().wrap(function(F) {
                    for (; ; )
                      switch (F.prev = F.next) {
                        case 0:
                          return _ = f(o, Rt)[Rt], C = new Set(_.map(function(H) {
                            return H.deviceId;
                          })), F.next = 4, o.getAvailableDevices();
                        case 4:
                          D = F.sent, I = new Set(D.map(function(H) {
                            return H.deviceId;
                          })), O = { added: D.filter(function(H) {
                            return !C.has(H.deviceId);
                          }), removed: _.filter(function(H) {
                            return !I.has(H.deviceId);
                          }) }, f(o, Rt)[Rt] = D, ((T = O.added) !== null && T !== void 0 && T.length || (y = O.removed) !== null && y !== void 0 && y.length) && s(m, O, !1);
                        case 9:
                        case "end":
                          return F.stop();
                      }
                  }, h);
                }));
                return function(h) {
                  return v.apply(this, arguments);
                };
              }(), 100), { signal: f(this, vn)[vn].signal });
            case 6:
            case "end":
              return d.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }]), r;
}(zD));
Et([P.trace("WebMediaInterface.destruct")], et.prototype, "destruct", 1);
Et([P.trace("WebMediaInterface.handlePermissionErrors")], et.prototype, "handlePermissionErrors", 1);
Et([P.trace("WebMediaInterface.getAudioAndVideoTrack")], et.prototype, "getAudioAndVideoTrack", 1);
Et([P.trace("WebMediaInterface.getAudioTrack")], et.prototype, "getAudioTrack", 1);
Et([P.trace("WebMediaInterface.getScreenShareTracks")], et.prototype, "getScreenShareTracks", 1);
Et([P.trace("WebMediaInterface.getVideoTrack")], et.prototype, "getVideoTrack", 1);
Et([P.trace("WebMediaInterface.getAvailableDevices")], et.prototype, "getAvailableDevices", 1);
Et([P.trace("WebMediaInterface.getAvailableDevicesByKind")], et.prototype, "getAvailableDevicesByKind", 1);
Et([P.trace("WebMediaInterface.getDevice")], et.prototype, "getDevice", 1);
Et([P.trace("WebMediaInterface.onDeviceChange")], et.prototype, "onDeviceChange", 1);
et = Et([lr(function(e) {
  throw new $(e.message, "1600");
})], et);
var yc = et, Fn = /* @__PURE__ */ V("mediaInterface"), QD = /* @__PURE__ */ function() {
  function e(t) {
    w(this, e), Object.defineProperty(this, Fn, { writable: !0, value: void 0 }), this.currentDevice = void 0, f(this, Fn)[Fn] = t;
  }
  return b(e, [{ key: "setupSpeaker", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      var a, s, u = this, o, c, l;
      return p().wrap(function(v) {
        for (; ; )
          switch (v.prev = v.next) {
            case 0:
              if (f(this, Fn)[Fn] instanceof yc) {
                v.next = 2;
                break;
              }
              return v.abrupt("return");
            case 2:
              if (o = i, i) {
                v.next = 9;
                break;
              }
              return v.next = 6, f(this, Fn)[Fn].getAvailableDevicesByKind("audiooutput");
            case 6:
              c = v.sent, l = Ne(c, 1), o = l[0];
            case 9:
              if (o) {
                v.next = 11;
                break;
              }
              throw new $("No speaker found");
            case 11:
              if (((a = this.currentDevice) === null || a === void 0 ? void 0 : a.deviceId) !== o.deviceId) {
                v.next = 13;
                break;
              }
              return v.abrupt("return");
            case 13:
              (s = this.currentDevice) !== null && s !== void 0 || (this.currentDevice = o), document.querySelectorAll("audio").forEach(/* @__PURE__ */ function() {
                var h = k(/* @__PURE__ */ p().mark(function m(T) {
                  return p().wrap(function(_) {
                    for (; ; )
                      switch (_.prev = _.next) {
                        case 0:
                          if (!(typeof T.sinkId != "undefined" && u.currentDevice.deviceId && T.sinkId !== u.currentDevice.deviceId)) {
                            _.next = 8;
                            break;
                          }
                          return _.prev = 1, _.next = 4, T.setSinkId(u.currentDevice.deviceId);
                        case 4:
                          _.next = 8;
                          break;
                        case 6:
                          _.prev = 6, _.t0 = _.catch(1);
                        case 8:
                        case "end":
                          return _.stop();
                      }
                  }, m, null, [[1, 6]]);
                }));
                return function(m) {
                  return h.apply(this, arguments);
                };
              }());
            case 15:
            case "end":
              return v.stop();
          }
      }, n, this);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }]), e;
}(), xD = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n) {
    var i;
    return w(this, r), i = t.call(this), i.mediaInterface = void 0, i.audioMediaTrack = void 0, i.videoMediaTrack = void 0, i.mediaInterface = n, i;
  }
  return b(r, [{ key: "trackEnabled", get: function() {
    return !!this.videoMediaTrack;
  } }, { key: "enableScreenShare", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s, u, o, c;
      return p().wrap(function(d) {
        for (; ; )
          switch (d.prev = d.next) {
            case 0:
              return d.next = 2, this.mediaInterface.getScreenShareTracks();
            case 2:
              if (u = d.sent, o = u.audioTrack, c = u.videoTrack, this.audioMediaTrack = o, this.videoMediaTrack = c, this.addMediaTrackListeners(), ((s = this.mediaInterface) === null || s === void 0 || (s = s.permissions) === null || s === void 0 ? void 0 : s.screenshare) !== "ACCEPTED") {
                d.next = 10;
                break;
              }
              return d.abrupt("return");
            case 10:
              this.mediaInterface.permissions && (this.mediaInterface.permissions.screenshare = "ACCEPTED", J.emit(j.MEDIA_PERMISSION_UPDATE, { message: this.mediaInterface.permissions.screenshare, kind: "screenshare" }));
            case 11:
            case "end":
              return d.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "disableScreenShare", value: function() {
    var i, a;
    this.removeMediaTrackListeners(), (i = this.audioMediaTrack) === null || i === void 0 || i.stop(), (a = this.videoMediaTrack) === null || a === void 0 || a.stop(), this.videoMediaTrack = void 0, this.audioMediaTrack = void 0;
  } }, { key: "updateConstraints", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              if (this.videoMediaTrack) {
                c.next = 2;
                break;
              }
              throw new $("No media track enabled!");
            case 2:
              if (u = this.mediaInterface, u.constraintsBuilder) {
                c.next = 5;
                break;
              }
              throw new $("update constraints not supported for non web clients", "1100");
            case 5:
              try {
                this.videoMediaTrack.applyConstraints(u.constraintsBuilder.getUpdatedVideoConstraints(s)), this.addMediaTrackListeners();
              } catch (l) {
                R.error("ScreenShareHandler.updateConstraints.error", { error: l });
              }
            case 6:
            case "end":
              return c.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "addMediaTrackListeners", value: function() {
    var i;
    (i = this.videoMediaTrack) === null || i === void 0 || i.addEventListener("ended", this.onTrackEnded.bind(this));
  } }, { key: "removeMediaTrackListeners", value: function() {
    var i;
    (i = this.videoMediaTrack) === null || i === void 0 || i.removeEventListener("ended", this.onTrackEnded);
  } }, { key: "onTrackEnded", value: function() {
    this.emit("trackEnded");
  } }]), r;
}(ln), Wt = /* @__PURE__ */ V("middlewareWebWorkerInterval"), eM = /* @__PURE__ */ function() {
  function e() {
    w(this, e), Object.defineProperty(this, Wt, { writable: !0, value: void 0 });
  }
  return b(e, [{ key: "terminateMiddlewareWebWorker", value: function() {
    if (f(this, Wt)[Wt])
      try {
        Ba.clearInterval(f(this, Wt)[Wt]), f(this, Wt)[Wt] = void 0;
      } catch (r) {
        R.debug("WorkerTimers::terminateMiddlewareWebWorker::failed");
      }
  } }, { key: "getTransformedVideoTrack", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i, a) {
      var s = this, u, o, c, l, d, v, h;
      return p().wrap(function(T) {
        for (; ; )
          switch (T.prev = T.next) {
            case 0:
              if (i != null && i.length) {
                T.next = 2;
                break;
              }
              return T.abrupt("return", a);
            case 2:
              return T.next = 4, Promise.all(i == null ? void 0 : i.map(function(y) {
                return y();
              }));
            case 4:
              u = T.sent, o = new MediaStream(), o.addTrack(a), c = document.createElement("canvas"), l = c.getContext("2d"), d = document.createElement("video"), d.srcObject = o, d.autoplay = !0, this.terminateMiddlewareWebWorker(), v = /* @__PURE__ */ function() {
                var y = k(/* @__PURE__ */ p().mark(function _() {
                  var C;
                  return p().wrap(function(I) {
                    for (; ; )
                      switch (I.prev = I.next) {
                        case 0:
                          if (!(a.enabled === !1 || a.readyState === "ended")) {
                            I.next = 5;
                            break;
                          }
                          return s.terminateMiddlewareWebWorker(), d.remove(), c.remove(), I.abrupt("return");
                        case 5:
                          I.prev = 5, l.drawImage(d, 0, 0), C = 0;
                        case 8:
                          if (!(C < u.length)) {
                            I.next = 14;
                            break;
                          }
                          return I.next = 11, u[C](c, l);
                        case 11:
                          C += 1, I.next = 8;
                          break;
                        case 14:
                          I.next = 19;
                          break;
                        case 16:
                          I.prev = 16, I.t0 = I.catch(5), R.error("getTransformedVideoTrack::middleware_execution_failed", { error: I.t0 });
                        case 19:
                        case "end":
                          return I.stop();
                      }
                  }, _, null, [[5, 16]]);
                }));
                return function() {
                  return y.apply(this, arguments);
                };
              }();
              try {
                d.play();
              } catch (y) {
              }
              return d.addEventListener("play", function() {
                c.width = d.width || a.getSettings().width, c.height = d.width || a.getSettings().height, f(s, Wt)[Wt] = Ba.setInterval(v, 50);
              }, !1), h = c.captureStream(), T.abrupt("return", h.getVideoTracks()[0]);
            case 18:
            case "end":
              return T.stop();
          }
      }, n, this);
    }));
    function r(n, i) {
      return t.apply(this, arguments);
    }
    return r;
  }() }]), e;
}(), rM = Object.defineProperty, tM = Object.getOwnPropertyDescriptor, Tc = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? tM(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && rM(r, n, a), a;
}, Vn = /* @__PURE__ */ V("videoMiddlewareUtils"), $s = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n, i, a) {
    var s;
    return w(this, r), s = t.call(this, n, i, a), Object.defineProperty(M(s), Vn, { writable: !0, value: void 0 }), f(M(s), Vn)[Vn] = new eM(), s;
  }
  return b(r, [{ key: "setDevice", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (s) {
                o.next = 3;
                break;
              }
              throw R.warn("VideoMediaHandler.setDevice No device received"), new $("No device received!");
            case 3:
              if (s.kind === "videoinput") {
                o.next = 6;
                break;
              }
              throw R.warn("VideoMediaHandler.setDevice Received non video device", { devices: [s] }), new $("Non video device received while setting video device!");
            case 6:
              if (this.userSelectedDevice = s.deviceId, this.mediaTrack && this.mediaTrack.enabled) {
                o.next = 11;
                break;
              }
              return R.warn("VideoMediaHandler.setDevice Tried switching device with video disabled", { devices: [s] }), this.currentDevice = s, o.abrupt("return");
            case 11:
              return o.prev = 11, o.t0 = this, o.next = 15, this.mediaInterface.getVideoTrack(this.userSelectedDevice);
            case 15:
              return o.t1 = o.sent, o.next = 18, o.t0.setMediaTrack.call(o.t0, o.t1);
            case 18:
              o.next = 25;
              break;
            case 20:
              throw o.prev = 20, o.t2 = o.catch(11), R.error("VideoMediaHandler.setDevice.error", { error: o.t2 }), this.disableTrack(), new $("Failed to change device");
            case 25:
            case "end":
              return o.stop();
          }
      }, a, this, [[11, 20]]);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "enableTrack", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (!this.trackEnabled) {
                u.next = 3;
                break;
              }
              return R.warn("VideoMediaHandler.enableTrack Track already enabled!"), u.abrupt("return");
            case 3:
              return u.t0 = this, u.next = 6, this.mediaInterface.getVideoTrack(this.userSelectedDevice);
            case 6:
              return u.t1 = u.sent, u.next = 9, u.t0.setMediaTrack.call(u.t0, u.t1);
            case 9:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "setTransformedTrack", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              if (!(!s && !((u = this.middlewares) !== null && u !== void 0 && u.length))) {
                c.next = 3;
                break;
              }
              return this.transformedMediaTrack = this.mediaTrack, c.abrupt("return");
            case 3:
              return c.prev = 3, c.next = 6, f(this, Vn)[Vn].getTransformedVideoTrack(this.middlewares, this.mediaTrack);
            case 6:
              this.transformedMediaTrack = c.sent, this.emit("trackChanged"), c.next = 14;
              break;
            case 10:
              c.prev = 10, c.t0 = c.catch(3), R.error("VideoMediaHandler.setTransformedTrack", { error: c.t0 }), this.transformedMediaTrack = this.mediaTrack;
            case 14:
            case "end":
              return c.stop();
          }
      }, a, this, [[3, 10]]);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "updateConstraints", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              if (this._mediaTrack) {
                c.next = 2;
                break;
              }
              throw new $("No media track enabled!");
            case 2:
              if (u = this.mediaInterface, u.constraintsBuilder) {
                c.next = 5;
                break;
              }
              throw new $("update constraints not supported for non web clients", "1100");
            case 5:
              return c.prev = 5, this._mediaTrack.applyConstraints(u.constraintsBuilder.getUpdatedVideoConstraints(s)), c.next = 9, this.setTransformedTrack();
            case 9:
              return this.addMediaTrackListeners(), c.next = 12, this.setCurrentDevice();
            case 12:
              c.next = 17;
              break;
            case 14:
              c.prev = 14, c.t0 = c.catch(5), R.error("VideoMediaHandler.updateConstraints.error", { error: c.t0 });
            case 17:
            case "end":
              return c.stop();
          }
      }, a, this, [[5, 14]]);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "terminateMiddlewareWebWorker", value: function() {
    f(this, Vn)[Vn].terminateMiddlewareWebWorker();
  } }, { key: "onTrackEnded", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              R.info("VideoMediaHandler.TrackEnded"), this.disableTrack(), this.emit("trackEnded");
            case 3:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "onTrackMuted", value: function() {
    R.info("VideoMediaHandler.TrackMuted"), this.emit("trackMuted");
  } }, { key: "conditionallyChangeTrack", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u = this, o, c, l;
      return p().wrap(function(v) {
        for (; ; )
          switch (v.prev = v.next) {
            case 0:
              if (s) {
                v.next = 2;
                break;
              }
              return v.abrupt("return", s);
            case 2:
              if (!this.userSelectedDevice) {
                v.next = 4;
                break;
              }
              return v.abrupt("return", s);
            case 4:
              return o = s, v.next = 7, this.mediaInterface.getVideoInputDevices();
            case 7:
              if (c = v.sent, l = this.isNonPreferredDevice ? c.filter(function(h) {
                return !u.isNonPreferredDevice(h);
              }) : c, l != null && l.length) {
                v.next = 11;
                break;
              }
              return v.abrupt("return", o);
            case 11:
              if (!window.FAST_DYTE) {
                v.next = 13;
                break;
              }
              return v.abrupt("return", o);
            case 13:
              if (l.find(function(h) {
                return h.deviceId === s.getSettings().deviceId;
              })) {
                v.next = 19;
                break;
              }
              return o.stop(), R.info("localmediahandler::setupstreams::found_video_non_preferred"), v.next = 18, this.mediaInterface.getVideoTrack(l[0].deviceId);
            case 18:
              o = v.sent;
            case 19:
              return v.abrupt("return", o);
            case 20:
            case "end":
              return v.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }]), r;
}(Nh);
Tc([P.trace("VideoMediaHandler.setTransformedTrack")], $s.prototype, "setTransformedTrack", 1);
Tc([P.trace("VideoMediaHandler.onTrackEnded")], $s.prototype, "onTrackEnded", 1);
Tc([P.trace("VideoMediaHandler.conditionallyChangeTrack")], $s.prototype, "conditionallyChangeTrack", 1);
var nM = Object.defineProperty, iM = Object.getOwnPropertyDescriptor, tt = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? iM(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && nM(r, n, a), a;
}, ye = /* @__PURE__ */ V("mediaInterface"), Ae = /* @__PURE__ */ V("audioMediaHandler"), ke = /* @__PURE__ */ V("videoMediaHandler"), vt = /* @__PURE__ */ V("audioOutputMediaHandler"), er = /* @__PURE__ */ V("screenShareMediaHandler"), $i = /* @__PURE__ */ V("autoSwitchDevice"), Ur = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n) {
    var i, a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : fd, s = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !0;
    return w(this, r), i = t.call(this), Object.defineProperty(M(i), ye, { writable: !0, value: void 0 }), Object.defineProperty(M(i), Ae, { writable: !0, value: void 0 }), Object.defineProperty(M(i), ke, { writable: !0, value: void 0 }), Object.defineProperty(M(i), vt, { writable: !0, value: void 0 }), Object.defineProperty(M(i), er, { writable: !0, value: void 0 }), Object.defineProperty(M(i), $i, { writable: !0, value: void 0 }), i.audioUpdateInProgress = void 0, i.videoUpdateInProgress = void 0, i.audioUpdateInProgress = !1, i.videoUpdateInProgress = !1, f(M(i), ye)[ye] = new yc(n), f(M(i), Ae)[Ae] = new Ms(f(M(i), ye)[ye], void 0, a), f(M(i), ke)[ke] = new $s(f(M(i), ye)[ye], void 0, a), f(M(i), er)[er] = new xD(f(M(i), ye)[ye]), f(M(i), vt)[vt] = new QD(f(M(i), ye)[ye]), f(M(i), $i)[$i] = s, f(M(i), Ae)[Ae].on("trackMuted", i.onAudioTrackMuted.bind(M(i))), f(M(i), Ae)[Ae].on("trackChanged", i.onAudioTrackChanged.bind(M(i))), f(M(i), ke)[ke].on("trackChanged", i.onVideoTrackChanged.bind(M(i))), f(M(i), ke)[ke].on("trackEnded", i.onVideoTrackEnded.bind(M(i))), f(M(i), er)[er].on("trackEnded", i.onScreenShareEnded.bind(M(i))), i.onVisibilityChange = i.onVisibilityChange.bind(M(i)), document.addEventListener("visibilitychange", i.onVisibilityChange), i;
  }
  return b(r, [{
    key: "onVisibilityChange",
    value: function() {
    }
    // eslint-disable-next-line class-methods-use-this
  }, { key: "repopulateAvailableDevices", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              return u.abrupt("return", !0);
            case 1:
            case "end":
              return u.stop();
          }
      }, a);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "setupStreams", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u = this, o, c, l, d, v;
      return p().wrap(function(m) {
        for (; ; )
          switch (m.prev = m.next) {
            case 0:
              if (o = s.audio, c = s.video, !(o && c)) {
                m.next = 13;
                break;
              }
              return m.prev = 2, m.next = 5, f(this, ye)[ye].getAudioAndVideoTrack();
            case 5:
              v = m.sent, l = v.audioTrack, d = v.videoTrack, m.next = 13;
              break;
            case 10:
              m.prev = 10, m.t0 = m.catch(2), R.error("LocalMediaHandler::init::Failed to get audio video tracks", { error: m.t0 });
            case 13:
              if (!(!l && o)) {
                m.next = 23;
                break;
              }
              return m.prev = 14, m.next = 17, f(this, ye)[ye].getAudioTrack(!1);
            case 17:
              l = m.sent, m.next = 23;
              break;
            case 20:
              m.prev = 20, m.t1 = m.catch(14), R.error("LocalMediaHandler::init::Failed to get audio track", { error: m.t1 });
            case 23:
              if (!(!d && c)) {
                m.next = 33;
                break;
              }
              return m.prev = 24, m.next = 27, f(this, ye)[ye].getVideoTrack();
            case 27:
              d = m.sent, m.next = 33;
              break;
            case 30:
              m.prev = 30, m.t2 = m.catch(24), R.error("LocalMediaHandler::init::Failed to get video track", { error: m.t2 });
            case 33:
              return m.next = 35, f(this, Ae)[Ae].setMediaTrack(l);
            case 35:
              return m.next = 37, f(this, ke)[ke].setMediaTrack(d);
            case 37:
              return m.prev = 37, m.next = 40, f(this, vt)[vt].setupSpeaker();
            case 40:
              m.next = 44;
              break;
            case 42:
              m.prev = 42, m.t3 = m.catch(37);
            case 44:
              f(this, ye)[ye].onDeviceChange(function(T, y, _) {
                u.onDeviceChange(y, _);
              });
            case 45:
            case "end":
              return m.stop();
          }
      }, a, this, [[2, 10], [14, 20], [24, 30], [37, 42]]);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getCurrentDevices", value: function() {
    return { audio: f(this, Ae)[Ae].currentDevice, video: f(this, ke)[ke].currentDevice, speaker: f(this, vt)[vt].currentDevice };
  } }, { key: "permissions", get: function() {
    return f(this, ye)[ye].permissions;
  } }, { key: "getAllDevices", value: function() {
    return f(this, ye)[ye].getAvailableDevices();
  } }, {
    key: "getDeviceById",
    value: function(i, a) {
      return f(this, ye)[ye].getDevice(i);
    }
    /**
    * Audio Input Handler
    */
  }, { key: "onAudioTrackMuted", value: function() {
    this.emit("AUDIO_TRACK_SILENT");
  } }, { key: "onAudioTrackChanged", value: function() {
    this.emit("AUDIO_TRACK_CHANGE");
  } }, { key: "rawAudioTrack", get: function() {
    return f(this, Ae)[Ae].mediaTrack;
  } }, { key: "audioTrack", get: function() {
    return f(this, Ae)[Ae].transformedMediaTrack;
  } }, { key: "audioEnabled", get: function() {
    return f(this, Ae)[Ae].trackEnabled;
  } }, { key: "enableAudio", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (!this.audioUpdateInProgress) {
                u.next = 2;
                break;
              }
              return u.abrupt("return");
            case 2:
              return this.audioUpdateInProgress = !0, u.prev = 3, u.next = 6, f(this, Ae)[Ae].unmuteTrack();
            case 6:
              return u.prev = 6, this.audioUpdateInProgress = !1, u.finish(6);
            case 9:
            case "end":
              return u.stop();
          }
      }, a, this, [[3, , 6, 9]]);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "disableAudio", value: function() {
    f(this, Ae)[Ae].muteTrack();
  } }, { key: "getAudioDevices", value: function() {
    return f(this, ye)[ye].getAudioInputDevices();
  } }, {
    key: "setAudioDevice",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s) {
        return p().wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                return o.next = 2, f(this, Ae)[Ae].setDevice(s);
              case 2:
                this.emit("AUDIO_TRACK_CHANGE"), this.emit("DEVICE_CHANGE", { device: s });
              case 4:
              case "end":
                return o.stop();
            }
        }, a, this);
      }));
      function i(a) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Audio Output Handler
    */
  }, { key: "setupSpeaker", value: function() {
    return f(this, vt)[vt].setupSpeaker();
  } }, {
    key: "setSpeakerDevice",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s) {
        return p().wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                return o.next = 2, f(this, vt)[vt].setupSpeaker(s);
              case 2:
                this.emit("DEVICE_CHANGE", { device: s });
              case 3:
              case "end":
                return o.stop();
            }
        }, a, this);
      }));
      function i(a) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Video Handler
    */
  }, { key: "onVideoTrackChanged", value: function() {
    this.emit("VIDEO_TRACK_CHANGE");
  } }, { key: "onVideoTrackEnded", value: function() {
    this.emit("VIDEO_TRACK_CHANGE");
  } }, { key: "rawVideoTrack", get: function() {
    return f(this, ke)[ke].mediaTrack;
  } }, { key: "videoTrack", get: function() {
    return f(this, ke)[ke].transformedMediaTrack;
  } }, { key: "videoEnabled", get: function() {
    return f(this, ke)[ke].trackEnabled;
  } }, { key: "enableVideo", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (!this.videoUpdateInProgress) {
                u.next = 2;
                break;
              }
              return u.abrupt("return");
            case 2:
              return this.videoUpdateInProgress = !0, u.prev = 3, u.next = 6, f(this, ke)[ke].unmuteTrack();
            case 6:
              return u.prev = 6, this.videoUpdateInProgress = !1, u.finish(6);
            case 9:
            case "end":
              return u.stop();
          }
      }, a, this, [[3, , 6, 9]]);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "disableVideo", value: function() {
    f(this, ke)[ke].disableTrack();
  } }, { key: "getVideoDevices", value: function() {
    return f(this, ye)[ye].getVideoInputDevices();
  } }, { key: "setVideoDevice", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              return o.next = 2, f(this, ke)[ke].setDevice(s);
            case 2:
              this.emit("VIDEO_TRACK_CHANGE"), this.emit("DEVICE_CHANGE", { device: s });
            case 4:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, {
    key: "updateVideoConstraints",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s) {
        return p().wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                return o.next = 2, f(this, ke)[ke].updateConstraints(s);
              case 2:
              case "end":
                return o.stop();
            }
        }, a, this);
      }));
      function i(a) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Screen Share Handler
    */
  }, { key: "onScreenShareEnded", value: function() {
    this.emit("SCREENSHARE_ENDED");
  } }, { key: "screenShareTracks", get: function() {
    return { audio: f(this, er)[er].audioMediaTrack, video: f(this, er)[er].videoMediaTrack };
  } }, { key: "screenShareEnabled", get: function() {
    return f(this, er)[er].trackEnabled;
  } }, { key: "enableScreenShare", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              return u.next = 2, f(this, er)[er].enableScreenShare();
            case 2:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "disableScreenShare", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              f(this, er)[er].disableScreenShare();
            case 1:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "updateScreenshareConstraints", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              return o.next = 2, f(this, er)[er].updateConstraints(s);
            case 2:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, {
    key: "getSpeakerDevices",
    value: function() {
      return f(this, ye)[ye].getAudioOutputDevices();
    }
    /**
    * Middleware Utility
    */
  }, { key: "addAudioMiddleware", value: function(i) {
    return f(this, Ae)[Ae].addMiddleware(i);
  } }, { key: "removeAudioMiddleware", value: function(i) {
    return f(this, Ae)[Ae].removeMiddleware(i);
  } }, { key: "addVideoMiddleware", value: function(i) {
    return f(this, ke)[ke].addMiddleware(i);
  } }, { key: "removeVideoMiddleware", value: function(i) {
    return f(this, ke)[ke].removeMiddleware(i);
  } }, { key: "destruct", value: function() {
    f(this, Ae)[Ae].disableTrack(), f(this, ke)[ke].disableTrack(), f(this, ke)[ke].terminateMiddlewareWebWorker(), f(this, er)[er].disableScreenShare(), f(this, ye)[ye].destruct();
  } }, {
    key: "onDeviceChange",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
        var o, c = this, l;
        return p().wrap(function(v) {
          for (; ; )
            switch (v.prev = v.next) {
              case 0:
                return v.next = 2, f(this, ye)[ye].getAvailableDevices();
              case 2:
                if (l = v.sent, R.info("repopulated_full_device_list", { devices: JSON.stringify(l) }), this.emit("DEVICE_LIST_UPDATED", s), !(u || !f(this, $i)[$i])) {
                  v.next = 7;
                  break;
                }
                return v.abrupt("return");
              case 7:
                s == null || (o = s.added) === null || o === void 0 || o.forEach(/* @__PURE__ */ function() {
                  var h = k(/* @__PURE__ */ p().mark(function m(T) {
                    var y;
                    return p().wrap(function(C) {
                      for (; ; )
                        switch (C.prev = C.next) {
                          case 0:
                            if (!(T && !fd(T))) {
                              C.next = 9;
                              break;
                            }
                            if (!(T.kind === "audioinput" && ((y = c.audioTrack) === null || y === void 0 ? void 0 : y.enabled) === !0)) {
                              C.next = 6;
                              break;
                            }
                            return C.next = 4, c.setAudioDevice(T);
                          case 4:
                            C.next = 9;
                            break;
                          case 6:
                            if (T.kind !== "audiooutput") {
                              C.next = 9;
                              break;
                            }
                            return C.next = 9, c.setSpeakerDevice(T);
                          case 9:
                          case "end":
                            return C.stop();
                        }
                    }, m);
                  }));
                  return function(m) {
                    return h.apply(this, arguments);
                  };
                }());
              case 8:
              case "end":
                return v.stop();
            }
        }, a, this);
      }));
      function i(a, s) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Backward Compatibility
    */
  }, { key: "removeAllTracks", value: function() {
    this.destruct();
  } }, { key: "removeDocumentEventListeners", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              document.removeEventListener("visibilitychange", this.onVisibilityChange);
            case 1:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }]), r;
}(ln);
tt([P.trace("MediaHandler.setupStreams")], Ur.prototype, "setupStreams", 1);
tt([P.trace("MediaHandler.enableAudio")], Ur.prototype, "enableAudio", 1);
tt([P.trace("MediaHandler.disableAudio")], Ur.prototype, "disableAudio", 1);
tt([P.trace("MediaHandler.setAudioDevice")], Ur.prototype, "setAudioDevice", 1);
tt([P.trace("MediaHandler.enableVideo")], Ur.prototype, "enableVideo", 1);
tt([P.trace("MediaHandler.disableVideo")], Ur.prototype, "disableVideo", 1);
tt([P.trace("MediaHandler.setVideoDevice")], Ur.prototype, "setVideoDevice", 1);
tt([P.trace("MediaHandler.updateVideoConstraints")], Ur.prototype, "updateVideoConstraints", 1);
tt([P.trace("MediaHandler.enableScreenShare")], Ur.prototype, "enableScreenShare", 1);
tt([P.trace("MediaHandler.disableScreenShare")], Ur.prototype, "disableScreenShare", 1);
tt([P.trace("MediaHandler.updateScreenshareConstraints")], Ur.prototype, "updateScreenshareConstraints", 1);
tt([P.trace("MediaHandler.destruct")], Ur.prototype, "destruct", 1);
tt([P.trace("MediaHandler.onDeviceChange")], Ur.prototype, "onDeviceChange", 1);
var aM = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n, i) {
    var a;
    return w(this, r), a = t.call(this, n), a.code = void 0, a.code = i, a;
  }
  return b(r);
}(/* @__PURE__ */ Kn(Error)), di = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n, i, a) {
    var s;
    return w(this, r), s = t.call(this, i), s.constraints = void 0, s.name = void 0, s.name = n, s.constraints = a, s;
  }
  return b(r);
}(/* @__PURE__ */ Kn(Error)), sM = Object.defineProperty, uM = Object.getOwnPropertyDescriptor, dn = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? uM(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && sM(r, n, a), a;
}, gu = { port: void 0 }, oM = ["virtual", "emulator", "krisp", "solstice conference", "teams", "manycam", "blackHole"];
function jn(e) {
  var t = e.label.toLowerCase();
  return Ve._bowser.getOSName() === "macOS" && t.includes("iphone") ? (R.log("isVirtualDevice::ignore_macos_continuity"), !0) : oM.some(function(r) {
    return t.includes(r);
  });
}
var cM = (Cr = /* @__PURE__ */ V("availableDevices"), mn = /* @__PURE__ */ V("deviceChangeAbortController"), /* @__PURE__ */ function() {
  function e(t) {
    w(this, e), Object.defineProperty(this, Cr, { writable: !0, value: void 0 }), Object.defineProperty(this, mn, { writable: !0, value: void 0 }), f(this, Cr)[Cr] = t, f(this, mn)[mn] = new AbortController();
  }
  return b(e, [{ key: "destruct", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n() {
      var i;
      return p().wrap(function(s) {
        for (; ; )
          switch (s.prev = s.next) {
            case 0:
              (i = f(this, mn)[mn]) === null || i === void 0 || i.abort();
            case 1:
            case "end":
              return s.stop();
          }
      }, n, this);
    }));
    function r() {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "onDeviceChange", value: function(r) {
    var n = this;
    Ve.supportsDeviceChangeEvent() && navigator.mediaDevices.addEventListener("devicechange", bs(/* @__PURE__ */ function() {
      var i = k(/* @__PURE__ */ p().mark(function a(s) {
        var u, o, c, l, d;
        return p().wrap(function(h) {
          for (; ; )
            switch (h.prev = h.next) {
              case 0:
                return u = n.availableDevices, o = new Set(u.map(function(m) {
                  return m.deviceId;
                })), h.next = 4, n.repopulateAvailableDevices();
              case 4:
                c = n.availableDevices, l = new Set(c.map(function(m) {
                  return m.deviceId;
                })), d = { added: c.filter(function(m) {
                  return !o.has(m.deviceId);
                }), removed: u.filter(function(m) {
                  return !l.has(m.deviceId);
                }) }, n.repopulateAvailableDevices().then(function() {
                  return r(s, d);
                });
              case 8:
              case "end":
                return h.stop();
            }
        }, a);
      }));
      return function(a) {
        return i.apply(this, arguments);
      };
    }(), 100), { signal: f(this, mn)[mn].signal });
  } }, { key: "repopulateAvailableDevices", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n() {
      var i, a;
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              return u.next = 2, e.enumerateDevices();
            case 2:
              i = u.sent, i = i.map(function(o) {
                return o.toJSON();
              }), a = !rc(Th(i, f(this, Cr)[Cr], Bp)), a && (f(this, Cr)[Cr] = i, R.info("repopulated_full_device_list", { devices: JSON.stringify(i) }));
            case 6:
            case "end":
              return u.stop();
          }
      }, n, this);
    }));
    function r() {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "availableDevices", get: function() {
    return f(this, Cr)[Cr];
  } }, { key: "getAvailableDevicesByKind", value: function(r) {
    return f(this, Cr)[Cr].filter(function(n) {
      return n.kind === r;
    });
  } }, {
    key: "getDeviceById",
    value: function(r, n) {
      return f(this, Cr)[Cr].find(function(i) {
        return i.deviceId === r && i.kind === n;
      });
    }
    /**
    * Returns all audio input devices (microphone devices).
    */
  }, {
    key: "getAudioDevices",
    value: function() {
      return this.getAvailableDevicesByKind("audioinput").sort(function(r, n) {
        var i = jn(r) ? 0 : 1, a = jn(n) ? 0 : 1;
        return a - i;
      });
    }
    /**
    * Returns all video input devices.
    */
  }, {
    key: "getVideoDevices",
    value: function() {
      return this.getAvailableDevicesByKind("videoinput").sort(function(r, n) {
        var i = jn(r) ? 0 : 1, a = jn(n) ? 0 : 1;
        return a - i;
      });
    }
    /**
    * Returns all audio output devices (speaker devices).
    */
  }, { key: "getSpeakerDevices", value: function() {
    return this.getAvailableDevicesByKind("audiooutput").sort(function(r, n) {
      var i = jn(r) ? 0 : 1, a = jn(n) ? 0 : 1;
      return a - i;
    });
  } }], [{ key: "init", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n() {
      var i;
      return p().wrap(function(s) {
        for (; ; )
          switch (s.prev = s.next) {
            case 0:
              if (i = [], !e.isDeviceListAvailable()) {
                s.next = 8;
                break;
              }
              return s.next = 4, e.enumerateDevices();
            case 4:
              i = s.sent, R.info("initial_full_device_list", { devices: JSON.stringify(i) }), s.next = 9;
              break;
            case 8:
              R.error("UnsupportedMediaAPI::navigator.mediaDevices.enumerateDevices", { debuggingHint: "Try checking meetingMetadata.visitedUrl. It should be running on localhost/127.0.0.1 or HTTPS, if not, there would be issues." });
            case 9:
              return s.abrupt("return", new e(i));
            case 10:
            case "end":
              return s.stop();
          }
      }, n);
    }));
    function r() {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "isDeviceListAvailable", value: function() {
    return !!(navigator.mediaDevices && navigator.mediaDevices.enumerateDevices);
  } }, { key: "enumerateDevices", value: function() {
    try {
      return navigator.mediaDevices.enumerateDevices();
    } catch (r) {
      return R.error("enumerate_devices_failed", { error: r }), Promise.resolve([]);
    }
  } }, { key: "getAudioConstraints", value: function(r) {
    var n = {}, i = r.audioOptions || {}, a = i.disableAP, s = a === void 0 ? !1 : a, u = i.disableAEC, o = u === void 0 ? !1 : u, c = i.disableNS, l = c === void 0 ? !1 : c, d = i.disableAGC, v = d === void 0 ? !1 : d, h = i.disableHPF, m = h === void 0 ? !1 : h;
    if (Ve.isFirefox() || Ve.isWebKitBased())
      n.audio = { deviceId: r.audioDeviceId, autoGainControl: !v && !s, echoCancellation: !o && !s, noiseSuppression: !l && !s };
    else {
      if (typeof n.audio == "boolean")
        return n;
      n.audio = {}, n.audio.optional = [r.audioDeviceId ? { sourceId: r.audioDeviceId } : { sourceId: "default" }, { echoCancellation: !o && !s }, { googEchoCancellation: !o && !s }, { googAutoGainControl: !v && !s }, { googNoiseSuppression: !l && !s }, { googHighpassFilter: !m && !s }, { googNoiseSuppression2: !l && !s }, { googEchoCancellation2: !o && !s }, { googAutoGainControl2: !v && !s }];
    }
    return n;
  } }, { key: "getVideoConstraints", value: function(r) {
    var n = {}, i = r.videoDeviceId, a = r.videoTrackConstraints, s = r.facingMode, u = s === void 0 ? "user" : s, o = r.frameRate, c = o === void 0 ? { ideal: 24, max: 30 } : o;
    return n.video = a || Ju.vga, typeof n.video == "boolean" || (i && (n.video.deviceId = { exact: i }), n.video.facingMode = u, n.video.frameRate = c), n;
  } }, { key: "getUserMediaWithTimeout", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n() {
      var i, a, s, u, o = arguments;
      return p().wrap(function(l) {
        for (; ; )
          switch (l.prev = l.next) {
            case 0:
              if (i = o.length > 0 && o[0] !== void 0 ? o[0] : {}, a = o.length > 1 && o[1] !== void 0 ? o[1] : 0, l.prev = 2, R.info("getUserMediaWithTimeout::requesting_user_media", { timeout: a, constraints: JSON.stringify(i) }), a) {
                l.next = 10;
                break;
              }
              return l.next = 7, navigator.mediaDevices.getUserMedia(i);
            case 7:
              return s = l.sent, R.info("getUserMediaWithTimeout::received_user_media", { timeout: a, constraints: JSON.stringify(i) }), l.abrupt("return", s);
            case 10:
              return l.next = 12, Promise.race([navigator.mediaDevices.getUserMedia(i), new Promise(function(d, v) {
                setTimeout(function() {
                  return v(new aM("Get user media timed out", "ERR_GUM_TIMEOUT"));
                }, a);
              })]);
            case 12:
              return u = l.sent, R.info("getUserMediaWithTimeout::received_user_media", { timeout: a, constraints: JSON.stringify(i) }), l.abrupt("return", u);
            case 17:
              throw l.prev = 17, l.t0 = l.catch(2), R.error("getUserMediaWithTimeout::failed_to_access_local_media", { error: l.t0, constraints: JSON.stringify(i) }), R.error("Failed to get access to local media.", { error: l.t0, constraints: JSON.stringify(i) }), new di(l.t0.name, l.t0.message, i);
            case 22:
            case "end":
              return l.stop();
          }
      }, n, null, [[2, 17]]);
    }));
    function r() {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "getAudioTrack", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      var a, s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              return o.next = 2, e.getUserMediaWithTimeout(i);
            case 2:
              return a = o.sent, s = a.getAudioTracks()[0], o.abrupt("return", s);
            case 5:
            case "end":
              return o.stop();
          }
      }, n);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "getVideoTrack", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      var a, s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              return o.next = 2, e.getUserMediaWithTimeout(i);
            case 2:
              return a = o.sent, s = a.getVideoTracks()[0], o.abrupt("return", s);
            case 5:
            case "end":
              return o.stop();
          }
      }, n);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "getScreenShareTracks", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      var a, s, u, o, c, l;
      return p().wrap(function(v) {
        for (; ; )
          switch (v.prev = v.next) {
            case 0:
              if (a = Oe.hasFeature($e.EXTENSION_HACK), s = null, a)
                try {
                  gu.port = window.chrome.runtime.connect("nkeimhogjdpnpccoofpliimaahmaaome", { name: "chooseDesktopMedia" });
                } catch (h) {
                  P.addLogInCurrentSpan("error", "Extension connect error"), a = !1;
                }
              if (!a) {
                v.next = 7;
                break;
              }
              return v.next = 6, new Promise(function(h) {
                var m = setTimeout(function() {
                  return h(void 0);
                }, 12e3);
                gu.port.onMessage.addListener(/* @__PURE__ */ function() {
                  var T = k(/* @__PURE__ */ p().mark(function y(_) {
                    var C;
                    return p().wrap(function(I) {
                      for (; ; )
                        switch (I.prev = I.next) {
                          case 0:
                            _.value.streamId && (C = _.value.streamId, clearTimeout(m), h(C));
                          case 1:
                          case "end":
                            return I.stop();
                        }
                    }, y);
                  }));
                  return function(y) {
                    return T.apply(this, arguments);
                  };
                }()), gu.port.postMessage({ method: "chooseDesktopMedia", sources: ["screen"] });
              });
            case 6:
              s = v.sent;
            case 7:
              if (!s) {
                v.next = 15;
                break;
              }
              return P.addLogInCurrentSpan("error", "Acquiring extension screenshare track"), v.next = 11, navigator.mediaDevices.getUserMedia({ audio: !1, video: { mandatory: { maxWidth: 1920, maxHeight: 1080, chromeMediaSource: "desktop", chromeMediaSourceId: s }, optional: [{ maxFrameRate: parseInt((o = Oe.getValue($e.VAL_MAX_FRAMERATE_EXT)) !== null && o !== void 0 ? o : "12", 10) }, { minFrameRate: parseInt((c = Oe.getValue($e.VAL_MIN_FRAMERATE_EXT)) !== null && c !== void 0 ? c : "8", 10) }] } });
            case 11:
              u = v.sent, P.addLogInCurrentSpan("error", "Acquired extension screenshare track"), v.next = 18;
              break;
            case 15:
              return v.next = 17, navigator.mediaDevices.getDisplayMedia(i);
            case 17:
              u = v.sent;
            case 18:
              return l = { video: u.getVideoTracks()[0], audio: u.getAudioTracks()[0] }, v.abrupt("return", l);
            case 20:
            case "end":
              return v.stop();
          }
      }, n);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "getAudioAndVideoTrack", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      var a, s, u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              return c.next = 2, e.getUserMediaWithTimeout(i);
            case 2:
              return a = c.sent, s = a.getAudioTracks()[0], u = a.getVideoTracks()[0], c.abrupt("return", { audioTrack: s, videoTrack: u });
            case 6:
            case "end":
              return c.stop();
          }
      }, n);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }]), e;
}()), tr = cM;
dn([P.trace("LocalMediaUtils.onDeviceChange")], tr.prototype, "onDeviceChange", 1);
dn([P.trace("LocalMediaUtils.repopulateAvailableDevices")], tr.prototype, "repopulateAvailableDevices", 1);
dn([P.trace("LocalMediaUtils.isDeviceListAvailable")], tr, "isDeviceListAvailable", 1);
dn([P.trace("LocalMediaUtils.enumerateDevices")], tr, "enumerateDevices", 1);
dn([P.trace("LocalMediaUtils.getUserMediaWithTimeout")], tr, "getUserMediaWithTimeout", 1);
dn([P.trace("LocalMediaUtils.getAudioTrack")], tr, "getAudioTrack", 1);
dn([P.trace("LocalMediaUtils.getVideoTrack")], tr, "getVideoTrack", 1);
dn([P.trace("LocalMediaUtils.getScreenShareTracks")], tr, "getScreenShareTracks", 1);
dn([P.trace("LocalMediaUtils.getAudioAndVideoTrack")], tr, "getAudioAndVideoTrack", 1);
var lM = Object.defineProperty, dM = Object.getOwnPropertyDescriptor, Si = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? dM(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && lM(r, n, a), a;
}, ve = /* @__PURE__ */ V("localMediaHandler"), jt = /* @__PURE__ */ V("middlewareWebWorkerInterval"), ti = /* @__PURE__ */ function() {
  function e(t) {
    w(this, e), Object.defineProperty(this, ve, { writable: !0, value: void 0 }), this.audioMiddlewares = [], this.videoMiddlewares = [], Object.defineProperty(this, jt, { writable: !0, value: void 0 }), f(this, ve)[ve] = t;
  }
  return b(e, [{ key: "terminateMiddlewareWebWorker", value: function() {
    if (f(this, jt)[jt])
      try {
        Ba.clearInterval(f(this, jt)[jt]), f(this, jt)[jt] = void 0;
      } catch (r) {
        R.debug("WorkerTimers::terminateMiddlewareWebWorker::failed");
      }
  } }, { key: "getTransformedVideoTrack", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      var a, s, u = this, o, c, l, d, v, h, m;
      return p().wrap(function(y) {
        for (; ; )
          switch (y.prev = y.next) {
            case 0:
              if ((a = this.videoMiddlewares) !== null && a !== void 0 && a.length) {
                y.next = 2;
                break;
              }
              return y.abrupt("return", i);
            case 2:
              return y.next = 4, Promise.all((s = this.videoMiddlewares) === null || s === void 0 ? void 0 : s.map(function(_) {
                return _();
              }));
            case 4:
              o = y.sent, c = new MediaStream(), c.addTrack(i), l = document.createElement("canvas"), d = l.getContext("2d"), v = document.createElement("video"), v.srcObject = c, v.autoplay = !0, this.terminateMiddlewareWebWorker(), h = /* @__PURE__ */ function() {
                var _ = k(/* @__PURE__ */ p().mark(function C() {
                  var D;
                  return p().wrap(function(O) {
                    for (; ; )
                      switch (O.prev = O.next) {
                        case 0:
                          if (!(!f(u, ve)[ve].videoEnabled || i.readyState === "ended")) {
                            O.next = 5;
                            break;
                          }
                          return u.terminateMiddlewareWebWorker(), v.remove(), l.remove(), O.abrupt("return");
                        case 5:
                          O.prev = 5, d.drawImage(v, 0, 0), D = 0;
                        case 8:
                          if (!(D < o.length)) {
                            O.next = 14;
                            break;
                          }
                          return O.next = 11, o[D](l, d);
                        case 11:
                          D += 1, O.next = 8;
                          break;
                        case 14:
                          O.next = 19;
                          break;
                        case 16:
                          O.prev = 16, O.t0 = O.catch(5), R.error("getTransformedVideoTrack::middleware_execution_failed", { error: O.t0 });
                        case 19:
                        case "end":
                          return O.stop();
                      }
                  }, C, null, [[5, 16]]);
                }));
                return function() {
                  return _.apply(this, arguments);
                };
              }();
              try {
                v.play();
              } catch (_) {
              }
              return v.addEventListener("play", function() {
                l.width = v.width || i.getSettings().width, l.height = v.width || i.getSettings().height, f(u, jt)[jt] = Ba.setInterval(h, 50);
              }, !1), m = l.captureStream(), y.abrupt("return", m.getVideoTracks()[0]);
            case 18:
            case "end":
              return y.stop();
          }
      }, n, this);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "addVideoMiddleware", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      return p().wrap(function(s) {
        for (; ; )
          switch (s.prev = s.next) {
            case 0:
              if (!(Ve.isWebKitBased() && !Oe.hasFeature($e.ALLOW_SAFARI_MEDIA_MIDDLEWARES))) {
                s.next = 2;
                break;
              }
              return s.abrupt("return", { success: !1, message: "Video middlewares are not supported in this WebKit engine based browser." });
            case 2:
              if (!this.videoMiddlewares.includes(i)) {
                s.next = 4;
                break;
              }
              return s.abrupt("return", { success: !0, message: "This video middleware has been applied, already. Skipping." });
            case 4:
              if (this.videoMiddlewares.push(i), !f(this, ve)[ve].videoEnabled) {
                s.next = 13;
                break;
              }
              return s.t0 = f(this, ve)[ve], s.next = 9, this.getTransformedVideoTrack(f(this, ve)[ve].rawVideoTrack);
            case 9:
              return s.t1 = s.sent, s.t0.setVideoTrack.call(s.t0, s.t1), f(this, ve)[ve].emit("VIDEO_TRACK_CHANGE"), s.abrupt("return", { success: !0, message: "Successfully applied the video middleware." });
            case 13:
              return s.abrupt("return", { success: !0, message: "Successfully added the video middleware. It will be applied automatically once webcam is turned on." });
            case 14:
            case "end":
              return s.stop();
          }
      }, n, this);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "removeVideoMiddleware", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      var a;
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (a = this.videoMiddlewares.indexOf(i, 0), !(a > -1)) {
                u.next = 11;
                break;
              }
              if (this.videoMiddlewares.splice(a, 1), !f(this, ve)[ve].videoEnabled) {
                u.next = 10;
                break;
              }
              return u.t0 = f(this, ve)[ve], u.next = 7, this.getTransformedVideoTrack(f(this, ve)[ve].rawVideoTrack);
            case 7:
              u.t1 = u.sent, u.t0.setVideoTrack.call(u.t0, u.t1), f(this, ve)[ve].emit("VIDEO_TRACK_CHANGE");
            case 10:
              return u.abrupt("return", { success: !0, message: "Successfully removed the video middleware." });
            case 11:
              return u.abrupt("return", { success: !0, message: "No such video middleware was found. Skipping." });
            case 12:
            case "end":
              return u.stop();
          }
      }, n, this);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "getTransformedAudioTrack", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      var a, s, u, o, c, l, d, v;
      return p().wrap(function(m) {
        for (; ; )
          switch (m.prev = m.next) {
            case 0:
              if ((a = this.audioMiddlewares) !== null && a !== void 0 && a.length) {
                m.next = 2;
                break;
              }
              return m.abrupt("return", i);
            case 2:
              return u = new AudioContext(), m.next = 5, Promise.all((s = this.audioMiddlewares) === null || s === void 0 ? void 0 : s.map(function(T) {
                return T(u);
              }));
            case 5:
              for (o = m.sent, c = u.createMediaStreamSource(new MediaStream([i])), l = u.createMediaStreamDestination(), m.prev = 8, d = c, v = 0; v < o.length; v += 1)
                d.connect(o[v]), d = o[v];
              d.connect(l), m.next = 18;
              break;
            case 14:
              return m.prev = 14, m.t0 = m.catch(8), R.error("getTransformedAudioTrack::middleware_execution_failed", { error: m.t0 }), m.abrupt("return", i);
            case 18:
              return m.abrupt("return", l.stream.getAudioTracks()[0]);
            case 19:
            case "end":
              return m.stop();
          }
      }, n, this, [[8, 14]]);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "addAudioMiddleware", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      return p().wrap(function(s) {
        for (; ; )
          switch (s.prev = s.next) {
            case 0:
              if (!(Ve.isWebKitBased() && !Oe.hasFeature($e.ALLOW_SAFARI_MEDIA_MIDDLEWARES))) {
                s.next = 2;
                break;
              }
              return s.abrupt("return", { success: !1, message: "Audio middlewares are not supported in this WebKit engine based browser." });
            case 2:
              if (!this.audioMiddlewares.includes(i)) {
                s.next = 4;
                break;
              }
              return s.abrupt("return", { success: !0, message: "This audio middleware has been applied, already. Skipping." });
            case 4:
              if (this.audioMiddlewares.push(i), !f(this, ve)[ve].audioEnabled) {
                s.next = 13;
                break;
              }
              return s.t0 = f(this, ve)[ve], s.next = 9, this.getTransformedAudioTrack(f(this, ve)[ve].rawAudioTrack);
            case 9:
              return s.t1 = s.sent, s.t0.setAudioTrack.call(s.t0, s.t1), f(this, ve)[ve].emit("AUDIO_TRACK_CHANGE"), s.abrupt("return", { success: !0, message: "Successfully applied the audio middleware." });
            case 13:
              return s.abrupt("return", { success: !0, message: "Successfully added the audio middleware. It will be applied automatically once mic is turned on." });
            case 14:
            case "end":
              return s.stop();
          }
      }, n, this);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "removeAudioMiddleware", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      var a;
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (a = this.audioMiddlewares.indexOf(i, 0), !(a > -1)) {
                u.next = 11;
                break;
              }
              if (this.audioMiddlewares.splice(a, 1), !f(this, ve)[ve].audioEnabled) {
                u.next = 10;
                break;
              }
              return u.t0 = f(this, ve)[ve], u.next = 7, this.getTransformedAudioTrack(f(this, ve)[ve].rawAudioTrack);
            case 7:
              u.t1 = u.sent, u.t0.setAudioTrack.call(u.t0, u.t1), f(this, ve)[ve].emit("AUDIO_TRACK_CHANGE");
            case 10:
              return u.abrupt("return", { success: !0, message: "Successfully removed the audio middleware." });
            case 11:
              return u.abrupt("return", { success: !0, message: "No such audio middleware was found. Skipping." });
            case 12:
            case "end":
              return u.stop();
          }
      }, n, this);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }]), e;
}();
Si([P.trace("MediaMiddlewareUtils.getTransformedVideoTrack")], ti.prototype, "getTransformedVideoTrack", 1);
Si([P.trace("MediaMiddlewareUtils.addVideoMiddleware")], ti.prototype, "addVideoMiddleware", 1);
Si([P.trace("MediaMiddlewareUtils.removeVideoMiddleware")], ti.prototype, "removeVideoMiddleware", 1);
Si([P.trace("MediaMiddlewareUtils.getTransformedAudioTrack")], ti.prototype, "getTransformedAudioTrack", 1);
Si([P.trace("MediaMiddlewareUtils.addAudioMiddleware")], ti.prototype, "addAudioMiddleware", 1);
Si([P.trace("MediaMiddlewareUtils.removeAudioMiddleware")], ti.prototype, "removeAudioMiddleware", 1);
var Lh = /* @__PURE__ */ function() {
  function e() {
    w(this, e), this.mediaPermissionEvent = void 0, this.mediaPermissionEvent = !0;
  }
  return b(e, [{ key: "shouldEmitMediaPermissionEvent", get: function() {
    return this.mediaPermissionEvent;
  } }, { key: "setEmitMediaPermissionEvent", value: function(r) {
    this.mediaPermissionEvent = r;
  } }], [{ key: "getInstance", value: function() {
    return e.instance || (e.instance = new e()), e.instance;
  } }]), e;
}();
Lh.instance = void 0;
var Sa = Lh.getInstance(), fM = {
  lowVolumeThreshold: -40,
  // dBFS
  clipThreshold: 1,
  // dB
  silentThreshold: 1 / 1987,
  // dB
  delay: 500,
  // ms
  media: "audio"
}, Ki = /* @__PURE__ */ V("requestFramesTimeout"), zt = /* @__PURE__ */ V("media"), yu = /* @__PURE__ */ V("analyseTrack"), oa = /* @__PURE__ */ V("onFrame"), kc = /* @__PURE__ */ function() {
  function e(t) {
    w(this, e), Object.defineProperty(this, oa, { value: hM }), Object.defineProperty(this, yu, { value: pM }), this.analyser = void 0, this.silentThreshold = void 0, this.lowVolumeThreshold = void 0, this.clipThreshold = void 0, this.delay = void 0, this.audioContext = void 0, this.audioSource = void 0, this.metadata = {}, this.analysing = void 0, this.track = void 0, Object.defineProperty(this, Ki, { writable: !0, value: void 0 }), Object.defineProperty(this, zt, { writable: !0, value: void 0 });
    var r = ie(ie({}, fM), t), n = r.lowVolumeThreshold, i = r.silentThreshold, a = r.clipThreshold, s = r.delay, u = r.media;
    this.lowVolumeThreshold = n, this.silentThreshold = i, this.clipThreshold = a, this.delay = s, this.analysing = !1, f(this, zt)[zt] = u;
  }
  return b(e, [{ key: "setTrack", value: function(r) {
    if (r) {
      this.track = r.clone();
      var n = window.AudioContext || window.webkitAudioContext;
      if (this.audioContext = new n(), this.analyser = this.audioContext.createAnalyser(), f(this, zt)[zt] === "screenshare") {
        J.emit(j.SCREENSHARE_AUDIO_TRACK_CREATED);
        return;
      }
      J.emit(j.AUDIO_TRACK_CREATED);
    }
  } }, { key: "getTrackMetadata", value: function() {
    if (!this.track)
      return null;
    switch (this.metadata.label = this.track.label, this.metadata.channelCountMode = this.analyser.channelCountMode, this.metadata.channelCount = this.analyser.channelCount, this.metadata.channelInterpretation = this.analyser.channelInterpretation, this.metadata.outputs = this.analyser.numberOfOutputs, this.analyser.numberOfOutputs) {
      case 1:
        this.metadata.channelType = "MONO";
        break;
      case 2:
        this.metadata.channelType = "STEREO";
        break;
      case 4:
        this.metadata.channelType = "QUAD";
        break;
    }
    return this.metadata;
  } }, { key: "startTrackAnalysis", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n() {
      return p().wrap(function(a) {
        for (; ; )
          switch (a.prev = a.next) {
            case 0:
              if (!(!this.track || this.analysing)) {
                a.next = 2;
                break;
              }
              return a.abrupt("return", !1);
            case 2:
              return a.prev = 2, a.next = 5, this.audioContext.resume();
            case 5:
              return a.next = 7, f(this, yu)[yu]();
            case 7:
              return this.analysing = !0, a.abrupt("return", !0);
            case 11:
              return a.prev = 11, a.t0 = a.catch(2), R.error(a.t0), a.abrupt("return", !1);
            case 15:
            case "end":
              return a.stop();
          }
      }, n, this, [[2, 11]]);
    }));
    function r() {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "stopTrackAnalysis", value: function() {
    this.analysing && (this.analysing = !1, clearTimeout(f(this, Ki)[Ki]));
  } }, { key: "cleanup", value: function() {
    var r, n, i, a, s;
    if (this.stopTrackAnalysis(), (r = this.analyser) === null || r === void 0 || r.disconnect(), (n = this.audioSource) === null || n === void 0 || n.disconnect(this.analyser), (i = this.audioSource) === null || i === void 0 || i.disconnect(), (a = this.audioContext) === null || a === void 0 || a.close(), this.audioContext = void 0, this.analyser = void 0, this.audioSource = void 0, (s = this.track) === null || s === void 0 || s.stop(), this.track = void 0, f(this, zt)[zt] === "screenshare") {
      J.emit(j.SCREENSHARE_AUDIO_TRACK_CLOSED);
      return;
    }
    J.emit(j.AUDIO_TRACK_CLOSED);
  } }], [{ key: "dbFS", value: function(r) {
    var n = 20 * (Math.log(r) / Math.log(10));
    return Math.round(n * 10) / 10;
  } }]), e;
}();
Id = kc;
function pM() {
  return Xu.apply(this, arguments);
}
function Xu() {
  return Xu = k(/* @__PURE__ */ p().mark(function e() {
    var t = this, r;
    return p().wrap(function(i) {
      for (; ; )
        switch (i.prev = i.next) {
          case 0:
            return i.prev = 0, r = new MediaStream(), r.addTrack(this.track), this.audioSource = this.audioContext.createMediaStreamSource(r), this.audioSource.connect(this.analyser), i.next = 7, new Promise(function(a) {
              window.requestAnimationFrame(function() {
                f(t, oa)[oa](), a(!0);
              });
            });
          case 7:
            i.next = 12;
            break;
          case 9:
            i.prev = 9, i.t0 = i.catch(0), R.error(i.t0);
          case 12:
          case "end":
            return i.stop();
        }
    }, e, this, [[0, 9]]);
  })), Xu.apply(this, arguments);
}
function hM() {
  var e = this, t = new Float32Array(this.analyser.fftSize);
  this.analyser.getFloatTimeDomainData(t);
  var r = 0, n = or(t), i;
  try {
    for (n.s(); !(i = n.n()).done; ) {
      var a = i.value;
      r += a * a;
    }
  } catch (c) {
    n.e(c);
  } finally {
    n.f();
  }
  var s = Math.sqrt(r / t.length), u = Id.dbFS(s), o = { volume: s, lowVolume: u < this.lowVolumeThreshold, silence: s < this.silentThreshold, clip: s > this.clipThreshold, timestamp: new Date().getTime() };
  f(this, zt)[zt] === "screenshare" ? J.emit(j.SCREENSHARE_AUDIO_TRACK_ANALYSIS, o) : J.emit(j.AUDIO_TRACK_ANALYSIS, o), f(this, Ki)[Ki] = setTimeout(function() {
    window.requestAnimationFrame(f(e, oa)[oa].bind(e));
  }, this.delay);
}
var Xt = new kc(), Yi = new kc({ media: "screenshare" }), Ni = {}, At = {
  /**
  * Lock a method to prevent concurrency
  * @param config - configuration for the lock
  * @param config.methodName - config.methodName Name of method to expose in logs
  *	and to the user (if necessary).
  * @param config.lockName - Unique string to differentiate the method from others.
  * @param config.timeout - Release lock in given milliseconds if method doesn't get resolved.
  *
  *	Do not use common function names such as joinRoom as the lockName,
  *	instead use filename.functionname, if a suitable name couldn't be found.
  * @returns locked instance.
  *
  * It will throw error with name `UnsupportedConcurrentMethodExecution`,
  *	if lock couldn't be acquired.
  *
  * Note:
  *	Make sure that the methodName is explanatory on its own, if exposed to end users.
  * Eg: `meeting.joinRoom` is a much better choice than `joinRoom`.
  */
  executeWithLock(e) {
    var t = e.methodName, r = e.lockName, n = e.timeout;
    return function(i, a, s) {
      var u = s.value;
      return s.value = function() {
        if (Ni[r]) {
          var c = new Error("Unsupported concurrent calls on Dyte method: ".concat(t, "."));
          throw c.name = "UnsupportedConcurrentMethodExecution", R.error("DyteLocker::UnsupportedConcurrentMethodExecution", { error: { stack: c.stack }, dyteLocker: { methodName: t, lockName: r } }), c;
        }
        Ni[r] = !0;
        for (var l = setTimeout(function() {
          return delete Ni[r];
        }, n), d = arguments.length, v = new Array(d), h = 0; h < d; h++)
          v[h] = arguments[h];
        var m = u.apply(this, v);
        return Promise.resolve(m).then(function() {
          delete Ni[r], clearTimeout(l);
        }).catch(function() {
          delete Ni[r], clearTimeout(l);
        }), m;
      }, s;
    };
  }
}, vM = Object.defineProperty, mM = Object.getOwnPropertyDescriptor, Ce = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? mM(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && vM(r, n, a), a;
}, gM = (z = /* @__PURE__ */ V("localMediaUtils"), at = /* @__PURE__ */ V("constraintsBuilder"), /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n, i) {
    var a;
    return w(this, r), a = t.call(this), Object.defineProperty(M(a), z, { writable: !0, value: void 0 }), Object.defineProperty(M(a), at, { writable: !0, value: void 0 }), a.mediaMiddlewareUtils = void 0, a.audioTrack = void 0, a.rawAudioTrack = void 0, a.videoTrack = void 0, a.rawVideoTrack = void 0, a.screenShareTracks = void 0, a.audioEnabled = void 0, a.videoEnabled = void 0, a.screenShareEnabled = void 0, a.currentDevices = void 0, a.permissions = void 0, a.audioUpdateInProgress = void 0, a.videoUpdateInProgress = void 0, a.screenShareUpdateInProgress = void 0, a.initialSetupComplete = !1, a.isDeprecated = function() {
      return !0;
    }, f(M(a), z)[z] = n, f(M(a), at)[at] = new $h(i), a.audioEnabled = !0, a.videoEnabled = !0, a.audioUpdateInProgress = !1, a.videoUpdateInProgress = !1, a.screenShareUpdateInProgress = !1, a.screenShareEnabled = !1, a.permissions = { audio: "NOT_REQUESTED", video: "NOT_REQUESTED", screenshare: "NOT_REQUESTED" }, a.screenShareTracks = { audio: void 0, video: void 0 }, a.currentDevices = { audio: void 0, video: void 0, speaker: void 0 }, f(M(a), z)[z].onDeviceChange(function(s, u) {
      a.onDeviceChange(u, !1), a.emit("DEVICE_LIST_UPDATED", u);
    }), a.conditionallyRestartAudio = a.conditionallyRestartAudio.bind(M(a)), a.conditionallyRestartVideo = a.conditionallyRestartVideo.bind(M(a)), a.onVisibilityChange = a.onVisibilityChange.bind(M(a)), document.addEventListener("visibilitychange", a.onVisibilityChange), a.on("AUDIO_TRACK_CHANGE", function() {
      a.notifyIfTrackSilent();
    }), J.on(j.PRODUCER_TRACK_ENDED, function(s) {
      var u = s.kind;
      u === "mic" && a.conditionallyRestartAudio(), u === "webcam" && a.conditionallyRestartVideo();
    }), a;
  }
  return b(r, [{ key: "handlePermissionErrors", value: function(i, a) {
    var s = Os(i, a.name, a.message);
    this.permissions[i] = s, J.emit(j.MEDIA_PERMISSION_ERROR, { message: s, constraints: a.constraints, kind: i });
  } }, {
    key: "repopulateAvailableDevices",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a() {
        return p().wrap(function(u) {
          for (; ; )
            switch (u.prev = u.next) {
              case 0:
                return u.abrupt("return", f(this, z)[z].repopulateAvailableDevices());
              case 1:
              case "end":
                return u.stop();
            }
        }, a, this);
      }));
      function i() {
        return n.apply(this, arguments);
      }
      return i;
    }()
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
  }, { key: "onVisibilityChange", value: function(i) {
    document.visibilityState === "visible" && (Ve.isMobile() && this.conditionallyRestartAudio(), this.conditionallyRestartVideo());
  } }, { key: "conditionallyRestartAudio", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u, o;
      return p().wrap(function(l) {
        for (; ; )
          switch (l.prev = l.next) {
            case 0:
              return l.next = 2, new Promise(function(d) {
                return setTimeout(d, 50);
              });
            case 2:
              return R.info("performingCheck::shouldReacquireAudioTrack", { actions: { trackRobustness: { eventType: s == null ? void 0 : s.type } } }), l.next = 5, this.shouldReacquireTrack("audio");
            case 5:
              if (u = l.sent, R.info("performedCheck::shouldReacquireAudioTrack", { actions: { trackRobustness: { reacquireTrack: u } } }), !u) {
                l.next = 17;
                break;
              }
              if (R.info("reacquiring_audio_track"), this.removeMediaStreamTrackListeners(this.rawAudioTrack), !Ve.isChromiumBased()) {
                l.next = 13;
                break;
              }
              return l.next = 13, f(this, z)[z].repopulateAvailableDevices();
            case 13:
              return l.next = 15, this.setupAudioStream((o = this.currentDevices) === null || o === void 0 || (o = o.audio) === null || o === void 0 ? void 0 : o.deviceId);
            case 15:
              this.addMediaStreamTrackListeners(this.rawAudioTrack), this.emit("AUDIO_TRACK_CHANGE");
            case 17:
            case "end":
              return l.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "conditionallyRestartVideo", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u, o;
      return p().wrap(function(l) {
        for (; ; )
          switch (l.prev = l.next) {
            case 0:
              return l.next = 2, new Promise(function(d) {
                return setTimeout(d, 50);
              });
            case 2:
              return R.info("performingCheck::shouldReacquireVideoTrack", { actions: { trackRobustness: { eventType: s == null ? void 0 : s.type } } }), l.next = 5, this.shouldReacquireTrack("video");
            case 5:
              if (u = l.sent, R.info("performedCheck::shouldReacquireVideoTrack", { actions: { trackRobustness: { reacquireTrack: u } } }), !u) {
                l.next = 16;
                break;
              }
              return R.info("reacquiring_video_track"), this.removeMediaStreamTrackListeners(this.rawVideoTrack), l.next = 12, f(this, z)[z].repopulateAvailableDevices();
            case 12:
              return l.next = 14, this.setupVideoStream((o = this.currentDevices) === null || o === void 0 || (o = o.video) === null || o === void 0 ? void 0 : o.deviceId);
            case 14:
              this.addMediaStreamTrackListeners(this.rawVideoTrack), this.emit("VIDEO_TRACK_CHANGE");
            case 16:
            case "end":
              return l.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, {
    key: "shouldReacquireTrack",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s) {
        var u, o, c, l, d, v;
        return p().wrap(function(m) {
          for (; ; )
            switch (m.prev = m.next) {
              case 0:
                if (s !== "audio") {
                  m.next = 9;
                  break;
                }
                if (!(this.audioUpdateInProgress || !this.audioEnabled)) {
                  m.next = 3;
                  break;
                }
                return m.abrupt("return", !1);
              case 3:
                if (!(!this.rawAudioTrack || !this.audioTrack)) {
                  m.next = 5;
                  break;
                }
                return m.abrupt("return", !0);
              case 5:
                return u = this.rawAudioTrack.muted || this.audioTrack.muted, o = this.rawAudioTrack.readyState === "ended" || this.audioTrack.readyState === "ended", c = o && this.audioEnabled, m.abrupt("return", c || u);
              case 9:
                if (!(this.videoUpdateInProgress || !this.videoEnabled)) {
                  m.next = 11;
                  break;
                }
                return m.abrupt("return", !1);
              case 11:
                if (!(!this.rawVideoTrack || !this.videoTrack)) {
                  m.next = 13;
                  break;
                }
                return m.abrupt("return", !0);
              case 13:
                return l = this.rawVideoTrack.muted || this.videoTrack.muted, d = this.rawVideoTrack.readyState === "ended" || this.videoTrack.readyState === "ended", v = d && this.videoEnabled, m.abrupt("return", document.visibilityState === "visible" && (v || l));
              case 17:
              case "end":
                return m.stop();
            }
        }, a, this);
      }));
      function i(a) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    // eslint-disable-next-line class-methods-use-this
  }, {
    key: "onAudioUnmute",
    value: function(i) {
      R.info("audio_track_unmuted", { actions: { trackRobustness: { eventType: i == null ? void 0 : i.type } } });
    }
    // eslint-disable-next-line class-methods-use-this
  }, { key: "onVideoUnmute", value: function(i) {
    R.info("video_track_unmuted", { actions: { trackRobustness: { eventType: i == null ? void 0 : i.type } } });
  } }, { key: "removeMediaStreamTrackListeners", value: function(i) {
    if (R.info("Removing ".concat(i.kind, " listerners")), !!i) {
      var a = i.kind === "audio" ? this.conditionallyRestartAudio : this.conditionallyRestartVideo;
      return i.removeEventListener("ended", a), i.removeEventListener("mute", a), i.removeEventListener("unmute", i.kind === "audio" ? this.onAudioUnmute : this.onVideoUnmute), i;
    }
  } }, {
    key: "addMediaStreamTrackListeners",
    value: function(i) {
      var a = this;
      if (!i)
        return null;
      R.info("adding_".concat(i.kind, "_stream_listerners"));
      var s = i.kind === "audio", u = s ? this.conditionallyRestartAudio : this.conditionallyRestartVideo;
      return i.addEventListener("ended", /* @__PURE__ */ k(/* @__PURE__ */ p().mark(function o() {
        var c, l, d;
        return p().wrap(function(h) {
          for (; ; )
            switch (h.prev = h.next) {
              case 0:
                return h.next = 2, u();
              case 2:
                c = s ? a.audioEnabled : a.videoEnabled, l = s ? a.audioTrack : a.videoTrack, d = s ? "FORCE_MUTE_AUDIO" : "FORCE_MUTE_VIDEO", c && !(l && l.readyState === "live" && l.enabled) && (R.info("LocalMediaHandler::trackEnded::Failed to restart ".concat(i.kind, " track")), a.emit(d));
              case 6:
              case "end":
                return h.stop();
            }
        }, o);
      }))), i.addEventListener("mute", u), i.addEventListener("unmute", s ? this.onAudioUnmute : this.onVideoUnmute), i;
    }
    /**
    * NOTE(callmetarush): Emits AUDIO_TRACK_SILENT
    * If audio is enabled and current track is silent
    */
  }, { key: "notifyIfTrackSilent", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s, u, o, c;
      return p().wrap(function(d) {
        for (; ; )
          switch (d.prev = d.next) {
            case 0:
              if (!(this.audioEnabled && this.audioTrack && this.audioTrack.readyState !== "ended" && this.audioTrack.enabled)) {
                d.next = 7;
                break;
              }
              return d.next = 3, Za(this.audioTrack);
            case 3:
              if (d.t0 = d.sent, d.t0 !== !0) {
                d.next = 7;
                break;
              }
              R.info("LocalMediaHandler:notifyIfTrackSilent:TrackSilent", { media: { audio: { enabled: this.audioEnabled, deviceId: (s = this.audioTrack) === null || s === void 0 || (s = s.getSettings()) === null || s === void 0 ? void 0 : s.deviceId, permission: (u = this.permissions) === null || u === void 0 ? void 0 : u.audio, deviceName: (o = this.currentDevices) === null || o === void 0 || (o = o.audio) === null || o === void 0 ? void 0 : o.label, trackId: (c = this.audioTrack) === null || c === void 0 ? void 0 : c.id } } }), this.emit("AUDIO_TRACK_SILENT");
            case 7:
            case "end":
              return d.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "setupAudioStream", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u, o, c, l, d, v, h, m = arguments;
      return p().wrap(function(y) {
        for (; ; )
          switch (y.prev = y.next) {
            case 0:
              if (u = m.length > 1 && m[1] !== void 0 ? m[1] : !0, !this.audioUpdateInProgress) {
                y.next = 3;
                break;
              }
              return y.abrupt("return");
            case 3:
              if (y.prev = 3, this.audioUpdateInProgress = !0, c = f(this, z)[z].getAudioDevices(), c.length) {
                y.next = 9;
                break;
              }
              throw this.audioEnabled = !1, new di("COULD_NOT_START", "No audio devices", {});
            case 9:
              if (l = s, !(!l || !c.find(function(_) {
                return _.deviceId === l;
              }))) {
                y.next = 15;
                break;
              }
              return y.next = 13, this.getPreferredDeviceId("AUDIO");
            case 13:
              l = y.sent, R.debug("setupAudioStream::AUDIO::getPreferredDeviceId", { preferredDevice: { preferredDeviceId: l, kind: "audio" } });
            case 15:
              return d = tr.getAudioConstraints({ audioDeviceId: l }), u && ((v = this.rawAudioTrack) === null || v === void 0 || v.stop(), (h = this.audioTrack) === null || h === void 0 || h.stop()), y.next = 19, tr.getAudioTrack(d);
            case 19:
              return this.rawAudioTrack = y.sent, l = this.rawAudioTrack.getSettings().deviceId, ((o = this.currentDevices.audio) === null || o === void 0 ? void 0 : o.deviceId) !== l && (this.currentDevices.audio = f(this, z)[z].getDeviceById(l, "audioinput"), this.emit("DEVICE_CHANGE", { device: this.currentDevices.audio })), this.rawAudioTrack.enabled = this.audioEnabled, y.t0 = this, y.next = 26, this.mediaMiddlewareUtils.getTransformedAudioTrack(this.rawAudioTrack);
            case 26:
              return y.t1 = y.sent, y.t0.setAudioTrack.call(y.t0, y.t1), this.addMediaStreamTrackListeners(this.rawAudioTrack), y.next = 31, f(this, z)[z].repopulateAvailableDevices();
            case 31:
              this.permissions.audio = "ACCEPTED", J.emit(j.MEDIA_PERMISSION_UPDATE, { message: this.permissions.audio, kind: "audio" }), l && Zt.setItem("lastUsedAudioDeviceId", l), y.next = 39;
              break;
            case 36:
              y.prev = 36, y.t2 = y.catch(3), this.handlePermissionErrors("audio", y.t2);
            case 39:
              return y.prev = 39, this.audioUpdateInProgress = !1, y.finish(39);
            case 42:
            case "end":
              return y.stop();
          }
      }, a, this, [[3, 36, 39, 42]]);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getPreferredDeviceId", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u, o, c, l, d, v, h, m, T;
      return p().wrap(function(_) {
        for (; ; )
          switch (_.prev = _.next) {
            case 0:
              if (s !== "AUDIO") {
                _.next = 14;
                break;
              }
              if (o = f(this, z)[z].getAudioDevices(), c = Zt.getItem("lastUsedAudioDeviceId"), R.debug("getPreferredDeviceId::lastUsedAudioDeviceId", { preferredDevice: { lastUsedPreferredDeviceId: c, kind: "audio" } }), c && (l = o.find(function(C) {
                return C.deviceId === c;
              })), !l) {
                _.next = 9;
                break;
              }
              u = c, _.next = 13;
              break;
            case 9:
              if (Oe.hasFeature($e.REMOVE_OPERATIONAL_MIC)) {
                _.next = 13;
                break;
              }
              return _.next = 12, this.getOperationalMicDeviceId();
            case 12:
              u = _.sent.deviceId;
            case 13:
              u || (u = (d = o[0]) === null || d === void 0 ? void 0 : d.deviceId);
            case 14:
              if (s !== "VIDEO") {
                _.next = 27;
                break;
              }
              if (v = Zt.getItem("lastUsedVideoDeviceId"), R.debug("getPreferredDeviceId::lastUsedVideoDeviceId", { preferredDevice: { kind: "video", lastUsedPreferredDeviceId: v } }), h = f(this, z)[z].getVideoDevices(), v && (m = h.find(function(C) {
                return C.deviceId === v;
              })), !m) {
                _.next = 23;
                break;
              }
              u = v, _.next = 26;
              break;
            case 23:
              return _.next = 25, this.getOperationalWebcamDeviceId();
            case 25:
              u = _.sent.deviceId;
            case 26:
              u || (u = (T = h[0]) === null || T === void 0 ? void 0 : T.deviceId);
            case 27:
              return _.abrupt("return", u);
            case 28:
            case "end":
              return _.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "setupVideoStream", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u, o, c, l, d, v, h = arguments;
      return p().wrap(function(T) {
        for (; ; )
          switch (T.prev = T.next) {
            case 0:
              if (u = h.length > 1 && h[1] !== void 0 ? h[1] : !0, !this.videoUpdateInProgress) {
                T.next = 3;
                break;
              }
              return T.abrupt("return");
            case 3:
              if (T.prev = 3, this.videoUpdateInProgress = !0, c = f(this, z)[z].getVideoDevices(), c.length) {
                T.next = 9;
                break;
              }
              throw this.videoEnabled = !1, new di("COULD_NOT_START", "No video devices", {});
            case 9:
              if (l = s, !(!l || !c.find(function(y) {
                return y.deviceId === l;
              }))) {
                T.next = 15;
                break;
              }
              return T.next = 13, this.getPreferredDeviceId("VIDEO");
            case 13:
              l = T.sent, R.debug("setupVideoStream::VIDEO::getPreferredDeviceId", { preferredDevice: { preferredDeviceId: l, kind: "video" } });
            case 15:
              if (u && ((d = this.videoTrack) === null || d === void 0 || d.stop()), !this.videoEnabled) {
                T.next = 28;
                break;
              }
              return v = f(this, at)[at].getVideoConstraints(l), T.next = 20, tr.getVideoTrack(v);
            case 20:
              return this.rawVideoTrack = T.sent, l = this.rawVideoTrack.getSettings().deviceId, T.t0 = this, T.next = 25, this.mediaMiddlewareUtils.getTransformedVideoTrack(this.rawVideoTrack);
            case 25:
              T.t1 = T.sent, T.t0.setVideoTrack.call(T.t0, T.t1), this.addMediaStreamTrackListeners(this.rawVideoTrack);
            case 28:
              return T.next = 30, f(this, z)[z].repopulateAvailableDevices();
            case 30:
              ((o = this.currentDevices.video) === null || o === void 0 ? void 0 : o.deviceId) !== l && (this.currentDevices.video = f(this, z)[z].getDeviceById(l, "videoinput"), this.emit("DEVICE_CHANGE", { device: this.currentDevices.video })), this.permissions.video = "ACCEPTED", J.emit(j.MEDIA_PERMISSION_UPDATE, { message: this.permissions.video, kind: "video" }), l && Zt.setItem("lastUsedVideoDeviceId", l), T.next = 39;
              break;
            case 36:
              T.prev = 36, T.t2 = T.catch(3), this.handlePermissionErrors("video", T.t2);
            case 39:
              return T.prev = 39, this.videoUpdateInProgress = !1, T.finish(39);
            case 42:
            case "end":
              return T.stop();
          }
      }, a, this, [[3, 36, 39, 42]]);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "setupScreenShareStreams", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s, u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              if (!this.screenShareUpdateInProgress) {
                c.next = 2;
                break;
              }
              return c.abrupt("return");
            case 2:
              return s = f(this, at)[at].getScreenShareConstraints(), Oe.hasFeature($e.SCREENSHARE_MAX_DIMENSIONS) && (s.video.width.max = window.screen.width, s.video.height.max = window.screen.height), c.prev = 4, this.screenShareUpdateInProgress = !0, c.next = 8, tr.getScreenShareTracks(s);
            case 8:
              u = c.sent, this.setScreenShareTracks(u), c.next = 16;
              break;
            case 12:
              throw c.prev = 12, c.t0 = c.catch(4), this.handlePermissionErrors("screenshare", new di(c.t0.name, c.t0.message, s)), new $(c.t0.message);
            case 16:
              return c.prev = 16, this.screenShareUpdateInProgress = !1, c.finish(16);
            case 19:
            case "end":
              return c.stop();
          }
      }, a, this, [[4, 12, 16, 19]]);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "setupSpeaker", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u, o = this, c, l;
      return p().wrap(function(v) {
        for (; ; )
          switch (v.prev = v.next) {
            case 0:
              if (c = f(this, z)[z].getSpeakerDevices(), c.length) {
                v.next = 3;
                break;
              }
              return v.abrupt("return");
            case 3:
              l = s != null ? s : c[0].deviceId, ((u = this.currentDevices.speaker) === null || u === void 0 ? void 0 : u.deviceId) !== l && (this.currentDevices.speaker = f(this, z)[z].getDeviceById(l, "audiooutput"), this.emit("DEVICE_CHANGE", { device: this.currentDevices.speaker })), document.querySelectorAll("audio").forEach(/* @__PURE__ */ function() {
                var h = k(/* @__PURE__ */ p().mark(function m(T) {
                  return p().wrap(function(_) {
                    for (; ; )
                      switch (_.prev = _.next) {
                        case 0:
                          if (!(typeof T.sinkId != "undefined" && o.currentDevices.speaker.deviceId && T.sinkId !== o.currentDevices.speaker.deviceId)) {
                            _.next = 8;
                            break;
                          }
                          return _.prev = 1, _.next = 4, T.setSinkId(o.currentDevices.speaker.deviceId);
                        case 4:
                          _.next = 8;
                          break;
                        case 6:
                          _.prev = 6, _.t0 = _.catch(1);
                        case 8:
                        case "end":
                          return _.stop();
                      }
                  }, m, null, [[1, 6]]);
                }));
                return function(m) {
                  return h.apply(this, arguments);
                };
              }());
            case 6:
            case "end":
              return v.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getOperationalWebcamDeviceId", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s = this, u, o, c, l, d, v;
      return p().wrap(function(m) {
        for (; ; )
          switch (m.prev = m.next) {
            case 0:
              if (u = f(this, z)[z].getVideoDevices(), u.length) {
                m.next = 3;
                break;
              }
              return m.abrupt("return", { isOperational: !1, deviceId: null });
            case 3:
              return Sa.setEmitMediaPermissionEvent(!1), o = [], m.next = 7, u.reduce(/* @__PURE__ */ function() {
                var T = k(/* @__PURE__ */ p().mark(function y(_, C) {
                  var D, I, O;
                  return p().wrap(function(F) {
                    for (; ; )
                      switch (F.prev = F.next) {
                        case 0:
                          return F.next = 2, _;
                        case 2:
                          if (D = F.sent, D === null) {
                            F.next = 5;
                            break;
                          }
                          return F.abrupt("return", D);
                        case 5:
                          return I = f(s, at)[at].getVideoConstraints(C.deviceId), F.prev = 6, F.next = 9, tr.getVideoTrack(I);
                        case 9:
                          return O = F.sent, O.stop(), F.abrupt("return", C.deviceId);
                        case 14:
                          F.prev = 14, F.t0 = F.catch(6), R.error("getOperationalWebcamDeviceId::could_not_acquire_video_device", { error: F.t0, constraints: I }), o.push({ exception: F.t0, constraints: I });
                        case 18:
                          return F.abrupt("return", D);
                        case 19:
                        case "end":
                          return F.stop();
                      }
                  }, y, null, [[6, 14]]);
                }));
                return function(y, _) {
                  return T.apply(this, arguments);
                };
              }(), Promise.resolve(null));
            case 7:
              if (c = m.sent, Sa.setEmitMediaPermissionEvent(!0), !(!c && o.length > 0 && o.length === u.length)) {
                m.next = 12;
                break;
              }
              throw l = o[0], d = l.exception, v = l.constraints, new di(d.name, d.message, v);
            case 12:
              return m.abrupt("return", c ? { isOperational: !0, deviceId: c } : { isOperational: !1, deviceId: u[0].deviceId });
            case 13:
            case "end":
              return m.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getOperationalMicDeviceId", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s, u, o, c, l, d;
      return p().wrap(function(h) {
        for (; ; )
          switch (h.prev = h.next) {
            case 0:
              if (s = f(this, z)[z].getAudioDevices(), s.length) {
                h.next = 3;
                break;
              }
              return h.abrupt("return", { isOperational: !1, deviceId: null });
            case 3:
              return u = [], Sa.setEmitMediaPermissionEvent(!1), h.next = 7, s.reduce(/* @__PURE__ */ function() {
                var m = k(/* @__PURE__ */ p().mark(function T(y, _) {
                  var C, D, I, O;
                  return p().wrap(function(F) {
                    for (; ; )
                      switch (F.prev = F.next) {
                        case 0:
                          return F.next = 2, y;
                        case 2:
                          if (C = F.sent, C === null) {
                            F.next = 5;
                            break;
                          }
                          return F.abrupt("return", C);
                        case 5:
                          return D = tr.getAudioConstraints({ audioDeviceId: _.deviceId }), F.prev = 6, F.next = 9, tr.getAudioTrack(D);
                        case 9:
                          return I = F.sent, F.next = 12, Za(I);
                        case 12:
                          if (O = F.sent, I == null || I.stop(), O) {
                            F.next = 16;
                            break;
                          }
                          return F.abrupt("return", _);
                        case 16:
                          F.next = 22;
                          break;
                        case 18:
                          F.prev = 18, F.t0 = F.catch(6), R.error("getOperationalMicDeviceId::could_not_acquire_audio_device", { error: F.t0, constraints: D }), u.push({ exception: F.t0, constraints: D });
                        case 22:
                          return F.abrupt("return", C);
                        case 23:
                        case "end":
                          return F.stop();
                      }
                  }, T, null, [[6, 18]]);
                }));
                return function(T, y) {
                  return m.apply(this, arguments);
                };
              }(), Promise.resolve(null));
            case 7:
              if (o = h.sent, Sa.setEmitMediaPermissionEvent(!0), !(!o && u.length > 0 && u.length === s.length)) {
                h.next = 12;
                break;
              }
              throw c = u[0], l = c.exception, d = c.constraints, new di(l.name, l.message, d);
            case 12:
              return h.abrupt("return", o ? { isOperational: !0, deviceId: o.deviceId } : { isOperational: !1, deviceId: s[0].deviceId });
            case 13:
            case "end":
              return h.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "setupStreams", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u, o, c, l, d, v, h, m, T, y, _, C, D;
      return p().wrap(function(O) {
        for (; ; )
          switch (O.prev = O.next) {
            case 0:
              if (u = s.audio, o = s.video, c = {}, this.currentDevices || (this.currentDevices = { audio: void 0, video: void 0, speaker: void 0 }), O.prev = 3, !(u && !this.audioUpdateInProgress)) {
                O.next = 13;
                break;
              }
              if (d = f(this, z)[z].getAudioDevices(), d.length === 0) {
                O.next = 13;
                break;
              }
              return O.next = 9, this.getPreferredDeviceId("AUDIO");
            case 9:
              v = O.sent, R.info("setupStreams::AUDIO::getPreferredDeviceId", { preferredDevice: { preferredDeviceId: v, kind: "audio" } }), h = tr.getAudioConstraints({ audioDeviceId: v }), c.audio = h.audio;
            case 13:
              if (!(o && !this.videoUpdateInProgress)) {
                O.next = 22;
                break;
              }
              if (m = f(this, z)[z].getVideoDevices(), m.length === 0) {
                O.next = 22;
                break;
              }
              return O.next = 18, this.getPreferredDeviceId("VIDEO");
            case 18:
              T = O.sent, R.info("setupStreams::VIDEO::getPreferredDeviceId", { preferredDevice: { preferredDeviceId: T, kind: "video" } }), y = f(this, at)[at].getVideoConstraints(T), c.video = y.video;
            case 22:
              if (((l = Object.keys(c)) === null || l === void 0 ? void 0 : l.length) !== 0) {
                O.next = 29;
                break;
              }
              return this.audioEnabled = u != null ? u : this.audioEnabled, this.videoEnabled = o != null ? o : this.videoEnabled, this.audioUpdateInProgress = !1, this.videoUpdateInProgress = !1, this.initialSetupComplete = !0, O.abrupt("return");
            case 29:
              return O.next = 31, tr.getAudioAndVideoTrack(c);
            case 31:
              return _ = O.sent, C = _.audioTrack, D = _.videoTrack, u && C && (this.audioTrack = C, this.rawAudioTrack = C, this.permissions.audio = "ACCEPTED", J.emit(j.MEDIA_PERMISSION_UPDATE, { message: this.permissions.audio, kind: "audio" }), this.currentDevices.audio = f(this, z)[z].getDeviceById(C.getSettings().deviceId, "audioinput"), Zt.setItem("lastUsedAudioDeviceId", C.getSettings().deviceId)), o && D && (this.videoTrack = D, this.rawVideoTrack = D, this.permissions.video = "ACCEPTED", J.emit(j.MEDIA_PERMISSION_UPDATE, { message: this.permissions.video, kind: "video" }), this.currentDevices.video = f(this, z)[z].getDeviceById(D.getSettings().deviceId, "videoinput"), Zt.setItem("lastUsedVideoDeviceId", D.getSettings().deviceId)), O.next = 38, f(this, z)[z].repopulateAvailableDevices();
            case 38:
              O.next = 49;
              break;
            case 40:
              if (O.prev = 40, O.t0 = O.catch(3), O.t0.name !== "NotAllowedError") {
                O.next = 49;
                break;
              }
              if (!u) {
                O.next = 46;
                break;
              }
              return O.next = 46, this.setupAudioStream();
            case 46:
              if (!o) {
                O.next = 49;
                break;
              }
              return O.next = 49, this.setupVideoStream();
            case 49:
              return this.audioEnabled = !!this.audioTrack, this.videoEnabled = !!this.videoTrack, this.screenShareEnabled = !1, this.audioUpdateInProgress = !1, this.videoUpdateInProgress = !1, this.initialSetupComplete = !0, O.next = 57, this.setupSpeaker();
            case 57:
            case "end":
              return O.stop();
          }
      }, a, this, [[3, 40]]);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "stopAudioTrack", value: function() {
    var i, a;
    this.audioUpdateInProgress || (this.audioUpdateInProgress = !0, (i = this.audioTrack) === null || i === void 0 || i.stop(), (a = this.rawAudioTrack) === null || a === void 0 || a.stop(), this.audioEnabled = !1, this.audioUpdateInProgress = !1);
  } }, { key: "stopVideoTrack", value: function() {
    var i, a;
    this.videoUpdateInProgress || (this.videoUpdateInProgress = !0, (i = this.videoTrack) === null || i === void 0 || i.stop(), (a = this.rawVideoTrack) === null || a === void 0 || a.stop(), this.videoEnabled = !1, this.videoUpdateInProgress = !1);
  } }, { key: "stopScreenShareTracks", value: function() {
    var i = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    if (!this.screenShareUpdateInProgress) {
      this.screenShareUpdateInProgress = !0;
      var a = i.audio, s = a === void 0 ? !0 : a, u = i.video, o = u === void 0 ? !0 : u;
      if (s) {
        var c;
        (c = this.screenShareTracks) === null || c === void 0 || (c = c.audio) === null || c === void 0 || c.stop();
      }
      if (o) {
        var l;
        (l = this.screenShareTracks) === null || l === void 0 || (l = l.video) === null || l === void 0 || l.stop();
      }
      this.screenShareEnabled = !1, this.screenShareUpdateInProgress = !1;
    }
  } }, { key: "removeAudioTrack", value: function() {
    this.stopAudioTrack(), this.audioTrack = void 0, this.rawAudioTrack = void 0;
    var i = Oe.hasFeature($e.TROUBLESHOOTING);
    i && Xt.cleanup();
  } }, { key: "removeVideoTrack", value: function() {
    this.stopVideoTrack(), this.videoTrack = void 0, this.rawVideoTrack = void 0;
  } }, { key: "removeScreenShareTracks", value: function(i) {
    var a;
    (a = this.screenShareTracks.video) === null || a === void 0 || a.removeEventListener("ended", this.onScreenShareEnded), this.stopScreenShareTracks(i), this.screenShareTracks = { audio: void 0, video: void 0 };
  } }, { key: "removeAllTracks", value: function() {
    this.removeAudioTrack(), this.removeVideoTrack(), this.removeScreenShareTracks({ audio: !!this.screenShareTracks.audio, video: !!this.screenShareTracks.video });
  } }, { key: "setAudioTrack", value: function(i) {
    i !== this.audioTrack && (i === void 0 && this.stopAudioTrack(), this.audioTrack = i, this.audioTrack && (this.audioTrack.enabled = this.audioEnabled));
  } }, { key: "setVideoTrack", value: function(i) {
    i !== this.videoTrack && (i === void 0 && this.stopVideoTrack(), this.videoTrack = i);
  } }, { key: "setScreenShareTracks", value: function(i) {
    var a, s = i.audio, u = i.video;
    (!s || !u) && this.stopScreenShareTracks({ audio: !!s, video: !!u }), this.screenShareTracks = i, (a = this.screenShareTracks.video) === null || a === void 0 || a.addEventListener("ended", this.onScreenShareEnded.bind(this));
  } }, { key: "onScreenShareEnded", value: function() {
    this.emit("SCREENSHARE_ENDED");
  } }, { key: "disableAudio", value: function() {
    this.audioEnabled = !1, this.audioTrack && (this.audioTrack.enabled = this.audioEnabled), this.rawAudioTrack && (this.rawAudioTrack.enabled = this.audioEnabled);
  } }, { key: "enableAudio", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (this.permissions.audio !== "DENIED") {
                o.next = 3;
                break;
              }
              return this.audioEnabled = !1, o.abrupt("return");
            case 3:
              if (o.prev = 3, !(!this.audioTrack || this.audioTrack.readyState === "ended")) {
                o.next = 7;
                break;
              }
              return o.next = 7, this.setupAudioStream((s = this.currentDevices.audio) === null || s === void 0 ? void 0 : s.deviceId);
            case 7:
              if (!(!this.audioTrack || !this.rawAudioTrack)) {
                o.next = 11;
                break;
              }
              return this.audioEnabled = !1, R.error("LocalMediaHandler::enableAudio:Setting up audio stream failed while enabling audio", { debuggingHint: "Refer to SelfController::mediaPermissionError log." }), o.abrupt("return");
            case 11:
              this.audioEnabled = !0, o.next = 20;
              break;
            case 14:
              o.prev = 14, o.t0 = o.catch(3), this.audioEnabled = !1, this.audioTrack = void 0, this.rawAudioTrack = void 0, R.error("LocalMediaHandler::enableAudio", { error: o.t0 }, !0);
            case 20:
              if (this.audioTrack && (this.audioTrack.enabled = !0), this.rawAudioTrack && (this.rawAudioTrack.enabled = !0), !(this.permissions.audio === "ACCEPTED" || !this.audioEnabled)) {
                o.next = 24;
                break;
              }
              return o.abrupt("return");
            case 24:
              this.permissions.audio = "ACCEPTED", J.emit(j.MEDIA_PERMISSION_UPDATE, { message: this.permissions.audio, kind: "audio" });
            case 26:
            case "end":
              return o.stop();
          }
      }, a, this, [[3, 14]]);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "toggleAudio", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (this.permissions.audio !== "DENIED") {
                o.next = 3;
                break;
              }
              return this.audioEnabled = !1, o.abrupt("return");
            case 3:
              if (o.prev = 3, !(!this.audioTrack || this.audioTrack.readyState === "ended")) {
                o.next = 7;
                break;
              }
              return o.next = 7, this.setupAudioStream((s = this.currentDevices.audio) === null || s === void 0 ? void 0 : s.deviceId);
            case 7:
              if (!(!this.audioTrack || !this.rawAudioTrack)) {
                o.next = 10;
                break;
              }
              return this.audioEnabled = !1, o.abrupt("return");
            case 10:
              this.audioEnabled = !this.audioEnabled, o.next = 17;
              break;
            case 13:
              o.prev = 13, o.t0 = o.catch(3), this.audioEnabled = !1, R.error("LocalMediaHandler::toggleAudio", { error: o.t0 }, !0);
            case 17:
              this.audioTrack && (this.audioTrack.enabled = this.audioEnabled), this.rawAudioTrack && (this.rawAudioTrack.enabled = this.audioEnabled);
            case 19:
            case "end":
              return o.stop();
          }
      }, a, this, [[3, 13]]);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "toggleVideo", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (this.permissions.video !== "DENIED") {
                o.next = 3;
                break;
              }
              return this.videoEnabled = !1, o.abrupt("return");
            case 3:
              if (!this.videoEnabled) {
                o.next = 6;
                break;
              }
              return this.removeVideoTrack(), o.abrupt("return");
            case 6:
              return this.videoEnabled = !0, o.prev = 7, o.next = 10, this.setupVideoStream((s = this.currentDevices.video) === null || s === void 0 ? void 0 : s.deviceId);
            case 10:
              o.next = 15;
              break;
            case 12:
              o.prev = 12, o.t0 = o.catch(7), this.videoEnabled = !1;
            case 15:
              if (this.videoTrack && (this.videoTrack.enabled = this.videoEnabled), this.rawVideoTrack && (this.rawVideoTrack.enabled = this.videoEnabled), !(this.permissions.video === "ACCEPTED" || !this.videoEnabled)) {
                o.next = 19;
                break;
              }
              return o.abrupt("return");
            case 19:
              this.permissions.video = "ACCEPTED", J.emit(j.MEDIA_PERMISSION_UPDATE, { message: this.permissions.video, kind: "video" });
            case 21:
            case "end":
              return o.stop();
          }
      }, a, this, [[7, 12]]);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "toggleScreenShare", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (!this.screenShareEnabled) {
                u.next = 3;
                break;
              }
              return this.removeScreenShareTracks({ audio: !!this.screenShareTracks.audio, video: !!this.screenShareTracks.video }), u.abrupt("return");
            case 3:
              return u.prev = 3, u.next = 6, this.setupScreenShareStreams();
            case 6:
              if (this.screenShareEnabled = !0, this.permissions.screenshare !== "ACCEPTED") {
                u.next = 9;
                break;
              }
              return u.abrupt("return");
            case 9:
              this.permissions.screenshare = "ACCEPTED", J.emit(j.MEDIA_PERMISSION_UPDATE, { message: this.permissions.screenshare, kind: "screenshare" }), u.next = 16;
              break;
            case 13:
              u.prev = 13, u.t0 = u.catch(3), this.screenShareEnabled = !1;
            case 16:
            case "end":
              return u.stop();
          }
      }, a, this, [[3, 13]]);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getAllDevices", value: function() {
    return f(this, z)[z].availableDevices;
  } }, { key: "getDeviceById", value: function(i, a) {
    return f(this, z)[z].getDeviceById(i, a);
  } }, { key: "getAudioDevices", value: function() {
    return f(this, z)[z].getAudioDevices();
  } }, { key: "getVideoDevices", value: function() {
    return f(this, z)[z].getVideoDevices();
  } }, { key: "getSpeakerDevices", value: function() {
    return f(this, z)[z].getSpeakerDevices();
  } }, { key: "onDeviceChange", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
      var o, c = this, l;
      return p().wrap(function(v) {
        for (; ; )
          switch (v.prev = v.next) {
            case 0:
              if (this.initialSetupComplete) {
                v.next = 2;
                break;
              }
              return v.abrupt("return");
            case 2:
              s == null || (o = s.added) === null || o === void 0 || o.forEach(/* @__PURE__ */ function() {
                var h = k(/* @__PURE__ */ p().mark(function m(T) {
                  return p().wrap(function(_) {
                    for (; ; )
                      switch (_.prev = _.next) {
                        case 0:
                          if (!(T && (u || !jn(T)))) {
                            _.next = 16;
                            break;
                          }
                          if (T.kind !== "audioinput") {
                            _.next = 7;
                            break;
                          }
                          return _.next = 4, c.setupAudioStream(T.deviceId);
                        case 4:
                          c.emit("AUDIO_TRACK_CHANGE"), _.next = 16;
                          break;
                        case 7:
                          if (!(T.kind === "videoinput" && c.videoEnabled)) {
                            _.next = 13;
                            break;
                          }
                          return _.next = 10, c.setupVideoStream(T.deviceId);
                        case 10:
                          c.emit("VIDEO_TRACK_CHANGE"), _.next = 16;
                          break;
                        case 13:
                          if (T.kind !== "audiooutput") {
                            _.next = 16;
                            break;
                          }
                          return _.next = 16, c.setupSpeaker(T.deviceId);
                        case 16:
                        case "end":
                          return _.stop();
                      }
                  }, m);
                }));
                return function(m) {
                  return h.apply(this, arguments);
                };
              }()), s == null || (l = s.removed) === null || l === void 0 || l.forEach(/* @__PURE__ */ function() {
                var h = k(/* @__PURE__ */ p().mark(function m(T) {
                  var y, _, C;
                  return p().wrap(function(I) {
                    for (; ; )
                      switch (I.prev = I.next) {
                        case 0:
                          if (!T) {
                            I.next = 15;
                            break;
                          }
                          if (!(T.kind === "audioinput" && !c.audioEnabled || T.kind === "videoinput" && !c.videoEnabled || Oe.hasFeature($e.DEVICE_REMOVE_EXP) || !Ve.isChromiumBased())) {
                            I.next = 12;
                            break;
                          }
                          if (!(T.kind === "audioinput" && T.deviceId === ((_ = c.currentDevices.audio) === null || _ === void 0 ? void 0 : _.deviceId))) {
                            I.next = 8;
                            break;
                          }
                          return I.next = 5, c.setupAudioStream();
                        case 5:
                          c.emit("AUDIO_TRACK_CHANGE"), I.next = 12;
                          break;
                        case 8:
                          if (!(T.kind === "videoinput" && T.deviceId === ((C = c.currentDevices.video) === null || C === void 0 ? void 0 : C.deviceId))) {
                            I.next = 12;
                            break;
                          }
                          return I.next = 11, c.setupVideoStream();
                        case 11:
                          c.emit("VIDEO_TRACK_CHANGE");
                        case 12:
                          if (!(T.kind === "audiooutput" && T.deviceId === ((y = c.currentDevices.speaker) === null || y === void 0 ? void 0 : y.deviceId))) {
                            I.next = 15;
                            break;
                          }
                          return I.next = 15, c.setupSpeaker();
                        case 15:
                        case "end":
                          return I.stop();
                      }
                  }, m);
                }));
                return function(m) {
                  return h.apply(this, arguments);
                };
              }());
            case 4:
            case "end":
              return v.stop();
          }
      }, a, this);
    }));
    function i(a, s) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "emit", value: function(i) {
    for (var a, s = arguments.length, u = new Array(s > 1 ? s - 1 : 0), o = 1; o < s; o++)
      u[o - 1] = arguments[o];
    return (a = le(ne(r.prototype), "emit", this)).call.apply(a, [this, i].concat(u));
  } }, { key: "on", value: function(i, a) {
    return le(ne(r.prototype), "on", this).call(this, i, a);
  } }, {
    key: "removeDocumentEventListeners",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a() {
        return p().wrap(function(u) {
          for (; ; )
            switch (u.prev = u.next) {
              case 0:
                document.removeEventListener("visibilitychange", this.onVisibilityChange);
              case 1:
              case "end":
                return u.stop();
            }
        }, a, this);
      }));
      function i() {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * NOTE(callmetarush): Compatibility with Local media refactor
    */
  }, { key: "addAudioMiddleware", value: function(i) {
    return this.mediaMiddlewareUtils.addAudioMiddleware(i);
  } }, { key: "removeAudioMiddleware", value: function(i) {
    return this.mediaMiddlewareUtils.removeAudioMiddleware(i);
  } }, { key: "addVideoMiddleware", value: function(i) {
    return this.mediaMiddlewareUtils.addVideoMiddleware(i);
  } }, { key: "removeVideoMiddleware", value: function(i) {
    return this.mediaMiddlewareUtils.removeVideoMiddleware(i);
  } }, { key: "enableVideo", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              return u.next = 2, this.toggleVideo();
            case 2:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "disableVideo", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              return u.next = 2, this.toggleVideo();
            case 2:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "enableScreenShare", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              return u.next = 2, this.toggleScreenShare();
            case 2:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "disableScreenShare", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              return u.next = 2, this.toggleScreenShare();
            case 2:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getCurrentDevices", value: function() {
    return this.currentDevices;
  } }, { key: "destruct", value: function() {
    this.mediaMiddlewareUtils.terminateMiddlewareWebWorker(), f(this, z)[z].destruct(), this.removeAllTracks(), this.removeAllListeners();
  } }], [{ key: "init", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u, o, c;
      return p().wrap(function(d) {
        for (; ; )
          switch (d.prev = d.next) {
            case 0:
              return d.next = 2, tr.init();
            case 2:
              return u = d.sent, o = new r(u, s), c = new ti(o), o.mediaMiddlewareUtils = c, d.abrupt("return", o);
            case 7:
            case "end":
              return d.stop();
          }
      }, a);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }]), r;
}(is)), Se = gM;
Ce([At.executeWithLock({ methodName: "oldLocalMediaHandler.conditionallyRestartAudio", lockName: "oldLocalMediaHandler.conditionallyRestartAudio", timeout: 3e3 })], Se.prototype, "conditionallyRestartAudio", 1);
Ce([At.executeWithLock({ methodName: "oldLocalMediaHandler.conditionallyRestartVideo", lockName: "oldLocalMediaHandler.conditionallyRestartVideo", timeout: 3e3 })], Se.prototype, "conditionallyRestartVideo", 1);
Ce([P.trace("OldMediaHandler.shouldReacquireTrack")], Se.prototype, "shouldReacquireTrack", 1);
Ce([P.trace("OldMediaHandler.removeMediaStreamTrackListeners")], Se.prototype, "removeMediaStreamTrackListeners", 1);
Ce([P.trace("OldMediaHandler.addMediaStreamTrackListeners")], Se.prototype, "addMediaStreamTrackListeners", 1);
Ce([P.trace("OldMediaHandler.setupAudioStream")], Se.prototype, "setupAudioStream", 1);
Ce([P.trace("OldMediaHandler.getPreferredDeviceId")], Se.prototype, "getPreferredDeviceId", 1);
Ce([P.trace("OldMediaHandler.setupVideoStream")], Se.prototype, "setupVideoStream", 1);
Ce([P.trace("OldMediaHandler.setupScreenShareStreams")], Se.prototype, "setupScreenShareStreams", 1);
Ce([P.trace("OldMediaHandler.setupSpeaker")], Se.prototype, "setupSpeaker", 1);
Ce([P.trace("OldMediaHandler.getOperationalWebcamDeviceId")], Se.prototype, "getOperationalWebcamDeviceId", 1);
Ce([P.trace("OldMediaHandler.getOperationalMicDeviceId")], Se.prototype, "getOperationalMicDeviceId", 1);
Ce([P.trace("OldMediaHandler.setupStreams")], Se.prototype, "setupStreams", 1);
Ce([P.trace("OldMediaHandler.stopAudioTrack")], Se.prototype, "stopAudioTrack", 1);
Ce([P.trace("OldMediaHandler.stopVideoTrack")], Se.prototype, "stopVideoTrack", 1);
Ce([P.trace("OldMediaHandler.stopScreenShareTracks")], Se.prototype, "stopScreenShareTracks", 1);
Ce([P.trace("OldMediaHandler.removeAudioTrack")], Se.prototype, "removeAudioTrack", 1);
Ce([P.trace("OldMediaHandler.removeVideoTrack")], Se.prototype, "removeVideoTrack", 1);
Ce([P.trace("OldMediaHandler.removeScreenShareTracks")], Se.prototype, "removeScreenShareTracks", 1);
Ce([P.trace("OldMediaHandler.removeAllTracks")], Se.prototype, "removeAllTracks", 1);
Ce([P.trace("OldMediaHandler.setAudioTrack")], Se.prototype, "setAudioTrack", 1);
Ce([P.trace("OldMediaHandler.setVideoTrack")], Se.prototype, "setVideoTrack", 1);
Ce([P.trace("OldMediaHandler.setScreenShareTracks")], Se.prototype, "setScreenShareTracks", 1);
Ce([P.trace("OldMediaHandler::disableAudio")], Se.prototype, "disableAudio", 1);
Ce([P.trace("OldMediaHandler::enableAudio")], Se.prototype, "enableAudio", 1);
Ce([P.trace("OldMediaHandler.toggleAudio")], Se.prototype, "toggleAudio", 1);
Ce([P.trace("OldMediaHandler.toggleVideo")], Se.prototype, "toggleVideo", 1);
Ce([P.trace("OldMediaHandler.toggleScreenShare")], Se.prototype, "toggleScreenShare", 1);
var Uh = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    var n;
    w(this, r);
    for (var i = arguments.length, a = new Array(i), s = 0; s < i; s++)
      a[s] = arguments[s];
    return n = t.call.apply(t, [this].concat(a)), n.localMediaHandler = void 0, n;
  }
  return b(r, [{ key: "updatePermission", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s = this, u, o, c, l, d, v, h, m;
      return p().wrap(function(y) {
        for (; ; )
          switch (y.prev = y.next) {
            case 0:
              if (c = function(C, D) {
                s.mediaPermissions[C] = D;
                var I = { message: s.mediaPermissions[C], kind: C };
                D === "DENIED" ? J.emit(j.MEDIA_PERMISSION_ERROR, I) : J.emit(j.MEDIA_PERMISSION_UPDATE, I);
              }, Ve.getName() !== "firefox") {
                y.next = 3;
                break;
              }
              return y.abrupt("return");
            case 3:
              return l = "microphone", d = "camera", y.next = 7, (u = navigator) === null || u === void 0 || (u = u.permissions) === null || u === void 0 ? void 0 : u.query({ name: l });
            case 7:
              return v = y.sent, y.next = 10, (o = navigator) === null || o === void 0 || (o = o.permissions) === null || o === void 0 ? void 0 : o.query({ name: d });
            case 10:
              h = y.sent, m = function(C, D) {
                switch (D) {
                  case "granted":
                    c(C, "ACCEPTED");
                    break;
                  case "denied":
                    c(C, "DENIED");
                    break;
                  case "prompt":
                    c(C, "NOT_REQUESTED");
                    break;
                }
                s.localMediaHandler.repopulateAvailableDevices();
              }, v && (v.onchange = function() {
                return m("audio", v.state);
              }), h && (h.onchange = function() {
                return m("video", h.state);
              });
            case 14:
            case "end":
              return y.stop();
          }
      }, a);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, {
    key: "init",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a() {
        var s = this, u, o, c, l, d, v, h, m, T, y, _ = arguments;
        return p().wrap(function(D) {
          for (; ; )
            switch (D.prev = D.next) {
              case 0:
                if (u = _.length > 0 && _[0] !== void 0 ? _[0] : {}, o = _.length > 1 && _[1] !== void 0 ? _[1] : !1, Ve.init(), !this.localMediaHandler) {
                  D.next = 5;
                  break;
                }
                return D.abrupt("return");
              case 5:
                if (D.prev = 5, c = !0, !Te.defaults.mediaHandler) {
                  D.next = 12;
                  break;
                }
                c = !1, this.localMediaHandler = Te.defaults.mediaHandler.localMediaHandler, D.next = 26;
                break;
              case 12:
                if (!navigator.RNLocalMediaHandlerImpl) {
                  D.next = 19;
                  break;
                }
                return l = navigator, d = l.RNLocalMediaHandlerImpl, D.next = 16, d.init();
              case 16:
                this.localMediaHandler = D.sent, D.next = 26;
                break;
              case 19:
                if (!(Oe.hasFeature($e.NEW_LOCAL_MEDIA_HANDLER) || window.FAST_DYTE)) {
                  D.next = 23;
                  break;
                }
                this.localMediaHandler = new Ur(u.constraints, Te == null || (v = Te.defaults) === null || v === void 0 ? void 0 : v.isNonPreferredDevice, Te == null || (h = Te.defaults) === null || h === void 0 ? void 0 : h.autoSwitchAudioDevice), D.next = 26;
                break;
              case 23:
                return D.next = 25, Se.init(u.constraints);
              case 25:
                this.localMediaHandler = D.sent;
              case 26:
                if (J.on(j.MEDIA_PERMISSION_UPDATE, /* @__PURE__ */ function() {
                  var I = k(/* @__PURE__ */ p().mark(function O(q) {
                    var F, H, fe, x, pe;
                    return p().wrap(function(Q) {
                      for (; ; )
                        switch (Q.prev = Q.next) {
                          case 0:
                            if (q.message !== "ACCEPTED") {
                              Q.next = 21;
                              break;
                            }
                            return F = s.getCurrentDevices(), Q.next = 4, s.getAudioDevices();
                          case 4:
                            return H = Q.sent, Q.next = 7, s.getVideoDevices();
                          case 7:
                            return fe = Q.sent, Q.next = 10, s.getSpeakerDevices();
                          case 10:
                            x = Q.sent, pe = Oe.hasFeature($e.NEW_LOCAL_MEDIA_HANDLER), Q.t0 = q == null ? void 0 : q.kind, Q.next = Q.t0 === "audio" ? 15 : Q.t0 === "video" ? 18 : 20;
                            break;
                          case 15:
                            return !F.audio && H.length > 0 && (pe || s.setDevice(H[0])), !F.speaker && x.length > 0 && (pe || s.setDevice(x[0])), Q.abrupt("break", 21);
                          case 18:
                            return !F.video && fe.length > 0 && (pe || s.setDevice(fe[0])), Q.abrupt("break", 21);
                          case 20:
                            return Q.abrupt("break", 21);
                          case 21:
                            if (q.message !== "NOT_REQUESTED") {
                              Q.next = 30;
                              break;
                            }
                            Q.t1 = q == null ? void 0 : q.kind, Q.next = Q.t1 === "audio" ? 25 : Q.t1 === "video" ? 27 : 29;
                            break;
                          case 25:
                            return s.rawAudioTrack && s.disableAudio(), Q.abrupt("break", 30);
                          case 27:
                            return s.rawVideoTrack && s.disableVideo(), Q.abrupt("break", 30);
                          case 29:
                            return Q.abrupt("break", 30);
                          case 30:
                            s.emit("mediaPermissionUpdate", q);
                          case 31:
                          case "end":
                            return Q.stop();
                        }
                    }, O);
                  }));
                  return function(O) {
                    return I.apply(this, arguments);
                  };
                }()), J.on(j.MEDIA_PERMISSION_ERROR, /* @__PURE__ */ function() {
                  var I = k(/* @__PURE__ */ p().mark(function O(q) {
                    var F, H;
                    return p().wrap(function(x) {
                      for (; ; )
                        switch (x.prev = x.next) {
                          case 0:
                            F = q.kind, H = q.message, F === "audio" ? s.disableAudio() : F === "video" ? s.disableVideo() : F === "screenshare" && s.disableScreenShare(), R.error("SelfController::mediaPermissionError", { error: { message: q.message }, constraints: q.constraints, mediaPermissionsErrors: { kind: F, message: H } }), s.emit("mediaPermissionError", q), s.emit("mediaPermissionUpdate", { message: H, kind: F });
                          case 5:
                          case "end":
                            return x.stop();
                        }
                    }, O);
                  }));
                  return function(O) {
                    return I.apply(this, arguments);
                  };
                }()), !c) {
                  D.next = 33;
                  break;
                }
                if (y = this.localMediaHandler.setupStreams({ video: (m = u == null ? void 0 : u.video) !== null && m !== void 0 ? m : !0, audio: (T = u == null ? void 0 : u.audio) !== null && T !== void 0 ? T : !0 }), o) {
                  D.next = 33;
                  break;
                }
                return D.next = 33, y;
              case 33:
                D.next = 38;
                break;
              case 35:
                D.prev = 35, D.t0 = D.catch(5), R.error("DyteSelf::init::Failed To Setup Streams", { error: { name: D.t0.name, message: D.t0.message } });
              case 38:
              case "end":
                return D.stop();
            }
        }, a, this, [[5, 35]]);
      }));
      function i() {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Returns the `audioTrack`.
    */
  }, {
    key: "audioTrack",
    get: function() {
      return this.localMediaHandler.audioTrack;
    }
    /**
    * Returns the `rawAudioTrack` having no middleware executed on it.
    */
  }, {
    key: "rawAudioTrack",
    get: function() {
      return this.localMediaHandler.rawAudioTrack;
    }
    /**
    * Returns the current audio and video permissions given by the user.
    * 'ACCEPTED' if the user has given permission to use the media.
    * 'CANCELED' if the user has canceled the screenshare.
    * 'DENIED' if the user has denied permission to use the media.
    * 'SYS_DENIED' if the user's system has denied permission to use the media.
    * 'UNAVAILABLE' if the media is not available (or being used by a different application).
    */
  }, {
    key: "mediaPermissions",
    get: function() {
      return this.localMediaHandler.permissions;
    }
    /**
    * Adds the audio middleware to be executed on the raw audio stream.
    * If there are more than 1 audio middlewares,
    * they will be executed in the sequence they were added in.
    * If you want the sequence to be altered, please remove all previous middlewares and re-add.
    */
  }, {
    key: "addAudioMiddleware",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s) {
        return p().wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                return o.abrupt("return", this.localMediaHandler.addAudioMiddleware(s));
              case 1:
              case "end":
                return o.stop();
            }
        }, a, this);
      }));
      function i(a) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Removes the audio middleware, if it is there.
    */
  }, {
    key: "removeAudioMiddleware",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s) {
        return p().wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                return o.abrupt("return", this.localMediaHandler.removeAudioMiddleware(s));
              case 1:
              case "end":
                return o.stop();
            }
        }, a, this);
      }));
      function i(a) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Returns the `videoTrack`.
    */
  }, {
    key: "videoTrack",
    get: function() {
      return this.localMediaHandler.videoTrack;
    }
    /**
    * Returns the `videoTrack` having no middleware executed on it.
    */
  }, {
    key: "rawVideoTrack",
    get: function() {
      return this.localMediaHandler.rawVideoTrack;
    }
    /**
    * Adds the video middleware to be executed on the raw video stream.
    * If there are more than 1 video middlewares,
    * they will be executed in the sequence they were added in.
    * If you want the sequence to be altered, please remove all previous middlewares and re-add.
    */
  }, {
    key: "addVideoMiddleware",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s) {
        return p().wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                return o.abrupt("return", this.localMediaHandler.addVideoMiddleware(s));
              case 1:
              case "end":
                return o.stop();
            }
        }, a, this);
      }));
      function i(a) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Removes the video middleware, if it is there.
    */
  }, {
    key: "removeVideoMiddleware",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s) {
        return p().wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                return o.abrupt("return", this.localMediaHandler.removeVideoMiddleware(s));
              case 1:
              case "end":
                return o.stop();
            }
        }, a, this);
      }));
      function i(a) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Returns the screen share tracks.
    */
  }, {
    key: "screenShareTracks",
    get: function() {
      return this.localMediaHandler.screenShareTracks;
    }
    /**
    * Returns true if audio is enabled.
    */
  }, {
    key: "audioEnabled",
    get: function() {
      return this.localMediaHandler.audioEnabled;
    }
    /**
    * Returns true if video is enabled.
    */
  }, {
    key: "videoEnabled",
    get: function() {
      return this.localMediaHandler.videoEnabled;
    }
    /**
    * Returns true if screen share is enabled.
    */
  }, { key: "screenShareEnabled", get: function() {
    return this.localMediaHandler.screenShareEnabled;
  } }, { key: "enableAudio", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              return u.next = 2, this.localMediaHandler.enableAudio();
            case 2:
              this.emit("audioUpdate", { audioEnabled: this.audioEnabled, audioTrack: this.audioTrack });
            case 3:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "enableVideo", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              return u.next = 2, this.localMediaHandler.enableVideo();
            case 2:
              this.emit("videoUpdate", { videoEnabled: this.videoEnabled, videoTrack: this.videoTrack });
            case 3:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "disableAudio", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              this.localMediaHandler.disableAudio(), this.emit("audioUpdate", { audioEnabled: this.audioEnabled, audioTrack: this.audioTrack });
            case 2:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, {
    key: "disableVideo",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a() {
        return p().wrap(function(u) {
          for (; ; )
            switch (u.prev = u.next) {
              case 0:
                return u.next = 2, this.localMediaHandler.disableVideo();
              case 2:
                this.emit("videoUpdate", { videoEnabled: this.videoEnabled, videoTrack: this.videoTrack });
              case 3:
              case "end":
                return u.stop();
            }
        }, a, this);
      }));
      function i() {
        return n.apply(this, arguments);
      }
      return i;
    }()
    // eslint-disable-next-line class-methods-use-this
  }, {
    key: "disableScreenShare",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a() {
        return p().wrap(function(u) {
          for (; ; )
            switch (u.prev = u.next) {
              case 0:
              case "end":
                return u.stop();
            }
        }, a);
      }));
      function i() {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Returns the media devices currently being used.
    */
  }, {
    key: "getCurrentDevices",
    value: function() {
      return this.localMediaHandler.getCurrentDevices();
    }
    /**
    * Returns the local participant's audio devices.
    */
  }, {
    key: "getAudioDevices",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a() {
        var s;
        return p().wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                return o.next = 2, this.localMediaHandler.getAudioDevices();
              case 2:
                return s = o.sent, o.abrupt("return", s);
              case 4:
              case "end":
                return o.stop();
            }
        }, a, this);
      }));
      function i() {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Returns the local participant's video devices.
    */
  }, {
    key: "getVideoDevices",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a() {
        var s;
        return p().wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                return o.next = 2, this.localMediaHandler.getVideoDevices();
              case 2:
                return s = o.sent, o.abrupt("return", s);
              case 4:
              case "end":
                return o.stop();
            }
        }, a, this);
      }));
      function i() {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Returns the local participant's speaker devices.
    */
  }, {
    key: "getSpeakerDevices",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a() {
        var s;
        return p().wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                return o.next = 2, this.localMediaHandler.getSpeakerDevices();
              case 2:
                return s = o.sent, o.abrupt("return", s);
              case 4:
              case "end":
                return o.stop();
            }
        }, a, this);
      }));
      function i() {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Returns the local participant's device, indexed by ID and kind.
    * @param deviceId The ID of the device.
    * @param kind The kind of the device: audio, video, or speaker.
    */
  }, {
    key: "getDeviceById",
    value: function(i, a) {
      var s;
      return a === "audio" ? s = "audioinput" : a === "video" ? s = "videoinput" : a === "speaker" && (s = "audiooutput"), this.localMediaHandler.getDeviceById(i, s);
    }
    /**
    * Change the current media device that is being used by the local participant.
    * @param device The device that is to be used. A device of the same `kind` will be replaced.
    * the primary stream.
    */
  }, { key: "setDevice", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              if (u = { added: [s], removed: [] }, !("isDeprecated" in this.localMediaHandler)) {
                c.next = 5;
                break;
              }
              return c.next = 4, this.localMediaHandler.onDeviceChange(u, !0);
            case 4:
              return c.abrupt("return");
            case 5:
              c.t0 = s.kind, c.next = c.t0 === "audioinput" ? 8 : c.t0 === "audiooutput" ? 19 : c.t0 === "videoinput" ? 22 : 33;
              break;
            case 8:
              return c.prev = 8, c.next = 11, this.localMediaHandler.setAudioDevice(s);
            case 11:
              c.next = 15;
              break;
            case 13:
              c.prev = 13, c.t1 = c.catch(8);
            case 15:
              return c.prev = 15, this.emit("audioUpdate", { audioEnabled: this.audioEnabled, audioTrack: this.audioTrack }), c.finish(15);
            case 18:
              return c.abrupt("break", 33);
            case 19:
              return c.next = 21, this.localMediaHandler.setSpeakerDevice(s);
            case 21:
              return c.abrupt("break", 33);
            case 22:
              return c.prev = 22, c.next = 25, this.localMediaHandler.setVideoDevice(s);
            case 25:
              c.next = 29;
              break;
            case 27:
              c.prev = 27, c.t2 = c.catch(22);
            case 29:
              return c.prev = 29, this.emit("videoUpdate", { videoEnabled: this.videoEnabled, videoTrack: this.videoTrack }), c.finish(29);
            case 32:
              return c.abrupt("break", 33);
            case 33:
              this.emit("deviceUpdate", { device: s });
            case 34:
            case "end":
              return c.stop();
          }
      }, a, this, [[8, 13, 15, 18], [22, 27, 29, 32]]);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }]), r;
}(rt), yM = { nonBlackPixelLumaThreshold: 20, identicalFrameSsimThreshold: 0.985, media: "video" }, zi = /* @__PURE__ */ V("requestFramesTimeout"), yt = /* @__PURE__ */ V("media"), Jt = /* @__PURE__ */ V("stream"), Xi = /* @__PURE__ */ V("onFrame"), Zu = /* @__PURE__ */ V("getImageData"), Qu = /* @__PURE__ */ V("isBlackFrame"), xu = /* @__PURE__ */ V("isFrozenFrame"), Hi = /* @__PURE__ */ V("statistics"), eo = /* @__PURE__ */ V("covariance"), Pi = /* @__PURE__ */ function() {
  function e(t) {
    w(this, e), Object.defineProperty(this, Qu, { value: wM }), Object.defineProperty(this, Zu, { value: kM }), Object.defineProperty(this, Xi, { value: TM }), this.metadata = {}, this.video = void 0, this.canvas = void 0, this.nonBlackPixelLumaThreshold = void 0, this.identicalFrameSsimThreshold = void 0, this.previousFrame = new Uint8ClampedArray(), Object.defineProperty(this, zi, { writable: !0, value: void 0 }), this.track = void 0, this.analysing = void 0, Object.defineProperty(this, yt, { writable: !0, value: void 0 }), Object.defineProperty(this, Jt, { writable: !0, value: void 0 }), this.preview = void 0;
    var r = ie(ie({}, yM), t), n = r.nonBlackPixelLumaThreshold, i = r.identicalFrameSsimThreshold, a = r.media;
    this.nonBlackPixelLumaThreshold = n, this.identicalFrameSsimThreshold = i, this.analysing = !1, f(this, yt)[yt] = a, this.preview = !1;
  }
  return b(e, [{ key: "setTrack", value: function(r) {
    var n, i, a;
    (n = this.track) === null || n === void 0 || n.stop(), this.track = r;
    var s = (i = (a = this.track) === null || a === void 0 ? void 0 : a.getConstraints()) !== null && i !== void 0 ? i : {}, u = s.height, o = s.width;
    if (this.metadata.resolution = [o, u], f(this, yt)[yt] === "screenshare") {
      J.emit(j.SCREENSHARE_VIDEO_TRACK_CREATED);
      return;
    }
    J.emit(j.VIDEO_TRACK_CREATED);
  } }, { key: "getTrackMetadata", value: function() {
    return this.track ? (this.metadata.label = this.track.label, this.metadata) : null;
  } }, { key: "startTrackAnalysis", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n() {
      var i, a;
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (!(!this.track || this.analysing)) {
                u.next = 2;
                break;
              }
              return u.abrupt("return", !1);
            case 2:
              return !this.video && !((i = this.video) !== null && i !== void 0 && i.src) && (f(this, Jt)[Jt] = new MediaStream(), f(this, Jt)[Jt].addTrack(this.track), this.video = document.createElement("video"), this.canvas = document.createElement("canvas"), this.video.setAttribute("autoplay", ""), this.video.setAttribute("muted", ""), a = Ne(this.metadata.resolution, 2), this.video.width = a[0], this.video.height = a[1], this.video.srcObject = f(this, Jt)[Jt]), window.requestAnimationFrame(f(this, Xi)[Xi].bind(this)), this.analysing = !0, u.abrupt("return", !0);
            case 6:
            case "end":
              return u.stop();
          }
      }, n, this);
    }));
    function r() {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "stopTrackAnalysis", value: function() {
    this.analysing && (this.analysing = !1, clearTimeout(f(this, zi)[zi]));
  } }, { key: "cleanup", value: function() {
    var r;
    if (this.stopTrackAnalysis(), (r = this.track) === null || r === void 0 || r.stop(), this.track = void 0, f(this, Jt)[Jt] = void 0, this.video && (this.video.srcObject = void 0, this.video = void 0), this.canvas = void 0, this.previousFrame = new Uint8ClampedArray(), f(this, yt)[yt] === "screenshare") {
      J.emit(j.SCREENSHARE_VIDEO_TRACK_CLOSED);
      return;
    }
    J.emit(j.VIDEO_TRACK_CLOSED);
  } }]), e;
}();
Wi = Pi;
function TM() {
  var e = this;
  try {
    var t = f(this, Zu)[Zu](), r = f(this, Qu)[Qu](t.data, t.data.length), n = f(Wi, xu)[xu](this.previousFrame, t.data);
    this.previousFrame = t.data;
    var i = { isBlackFrame: r, videoScore: n, isFrozenFrame: n > this.identicalFrameSsimThreshold, timestamp: new Date().getTime() };
    f(this, yt)[yt] === "screenshare" ? J.emit(j.SCREENSHARE_VIDEO_TRACK_ANALYSIS, i) : J.emit(j.VIDEO_TRACK_ANALYSIS, i), f(this, zi)[zi] = setTimeout(function() {
      e.track && window.requestAnimationFrame(f(e, Xi)[Xi].bind(e));
    }, 3e3);
  } catch (a) {
    f(this, yt)[yt] === "screenshare" ? J.emit(j.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR) : J.emit(j.VIDEO_TRACK_ANALYSIS_ERROR);
  }
}
function kM() {
  var e, t;
  this.canvas.width = (e = this.video) === null || e === void 0 ? void 0 : e.width, this.canvas.height = (t = this.video) === null || t === void 0 ? void 0 : t.height;
  var r = this.canvas.getContext("2d", { willReadFrequently: !0 });
  return r.drawImage(this.video, 0, 0, this.canvas.width, this.canvas.height), r.getImageData(0, 0, this.canvas.width, this.canvas.height);
}
function wM(e, t) {
  for (var r = this.nonBlackPixelLumaThreshold, n = 0, i = 4; i < t; i += 4)
    if (n += 0.21 * e[i] + 0.72 * e[i + 1] + 0.07 * e[i + 2], n > r * (i / 4))
      return !1;
  return !0;
}
function bM(e, t) {
  if (e.length !== t.length)
    return 0;
  var r = 0.01, n = 0.03, i = 255, a = r * i * (r * i), s = n * i * (n * i), u = s / 2, o = f(Wi, Hi)[Hi](e), c = o.mean, l = o.variance, d = Math.sqrt(l), v = f(Wi, Hi)[Hi](t), h = v.mean, m = v.variance, T = Math.sqrt(m), y = f(Wi, eo)[eo](e, t, c, h), _ = (2 * c * h + a) / (c * c + h * h + a), C = (y + u) / (d * T + u), D = (2 * d * T + s) / (l + m + s);
  return _ * D * C;
}
function _M(e) {
  var t = 0, r;
  for (r = 0; r < e.length; r++)
    t += e[r];
  var n = t / (e.length - 1), i = 0;
  for (r = 1; r < e.length; r++)
    i = e[r - 1] - n, t += e[r] + i * i;
  return { mean: n, variance: t / e.length };
}
function EM(e, t, r, n) {
  for (var i = 0, a = 0; a < e.length; a += 1)
    i += (e[a] - r) * (t[a] - n);
  return i / e.length;
}
Object.defineProperty(Pi, eo, { value: EM });
Object.defineProperty(Pi, Hi, { value: _M });
Object.defineProperty(Pi, xu, { value: bM });
var st = new Pi(), Zi = new Pi({ media: "screenshare" }), AM = Object.defineProperty, RM = Object.getOwnPropertyDescriptor, xe = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? RM(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && AM(r, n, a), a;
}, bn = /* @__PURE__ */ function(e) {
  return e.OFF_STAGE = "OFF_STAGE", e.REQUESTED_TO_JOIN_STAGE = "REQUESTED_TO_JOIN_STAGE", e.ACCEPTED_TO_JOIN_STAGE = "ACCEPTED_TO_JOIN_STAGE", e.ON_STAGE = "ON_STAGE", e;
}(bn || {}), We = (gn = /* @__PURE__ */ V("config"), pr = /* @__PURE__ */ V("permissions"), yn = /* @__PURE__ */ V("isPinned"), St = /* @__PURE__ */ V("stageStatus"), /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n, i, a, s, u) {
    var o, c;
    return w(this, r), c = t.call(this), c.id = void 0, c.name = void 0, c.picture = void 0, c.customParticipantId = void 0, c.waitlistStatus = void 0, Object.defineProperty(M(c), gn, { writable: !0, value: void 0 }), Object.defineProperty(M(c), pr, { writable: !0, value: void 0 }), Object.defineProperty(M(c), yn, { writable: !0, value: void 0 }), c.role = void 0, c.userId = void 0, c.organizationId = void 0, c.supportsRemoteControl = !1, c.device = void 0, Object.defineProperty(M(c), St, { writable: !0, value: void 0 }), c.presetName = void 0, c.roomState = "init", c.roomJoined = !1, c.id = n, c.userId = i.id, c.name = i.name, c.picture = i.picture, c.customParticipantId = (o = i.customParticipantId) !== null && o !== void 0 ? o : i.clientSpecificId, c.waitlistStatus = "none", f(M(c), pr)[pr] = a, f(M(c), gn)[gn] = s, f(M(c), yn)[yn] = !1, c.organizationId = i.organizationId, c.supportsRemoteControl = Ve.isElectron(), c.device = Ve.getDeviceInfo(), c.presetName = u, s.viewType !== Yr.Chat && c.updatePermission(), c;
  }
  return b(r, [{ key: "clientSpecificId", get: (
    /**
    * @deprecated
    * Use `customParticipantId` instead
    */
    function() {
      return this.customParticipantId;
    }
  ) }, { key: "stageStatus", get: function() {
    return f(this, St)[St];
  } }, {
    key: "setupEvents",
    value: function() {
      var i = this;
      J.on(j.ROOM_NODE_CONNECTED, /* @__PURE__ */ function() {
        var a = k(/* @__PURE__ */ p().mark(function s(u) {
          var o, c;
          return p().wrap(function(d) {
            for (; ; )
              switch (d.prev = d.next) {
                case 0:
                  if (o = u.wasDisconnected, c = u.wasJoinAttempted, !o) {
                    d.next = 4;
                    break;
                  }
                  return d.next = 4, i.resetSelf(c);
                case 4:
                case "end":
                  return d.stop();
              }
          }, s);
        }));
        return function(s) {
          return a.apply(this, arguments);
        };
      }()), J.onAsync(j.SET_STAGE_STATUS, /* @__PURE__ */ function() {
        var a = k(/* @__PURE__ */ p().mark(function s(u) {
          return p().wrap(function(c) {
            for (; ; )
              switch (c.prev = c.next) {
                case 0:
                  f(i, St)[St] = u, c.t0 = u, c.next = c.t0 === "ACCEPTED_TO_JOIN_STAGE" ? 4 : c.t0 === "REQUESTED_TO_JOIN_STAGE" ? 6 : c.t0 === "OFF_STAGE" ? 8 : 10;
                  break;
                case 4:
                  return i.emit("joinStageRequestAccepted"), c.abrupt("break", 10);
                case 6:
                  return i.emit("peerRequestToJoinStage"), c.abrupt("break", 10);
                case 8:
                  return i.emit("stageLeft"), c.abrupt("break", 10);
                case 10:
                case "end":
                  return c.stop();
              }
          }, s);
        }));
        return function(s) {
          return a.apply(this, arguments);
        };
      }()), J.on(j.STOPPED_PRESENTING, function() {
        i.localMediaHandler.destruct(), i.setWebinarStageStatus(
          "OFF_STAGE"
          /* OFF_STAGE */
        ), i.emit("stageLeft");
      }), this.localMediaHandler.on("AUDIO_TRACK_CHANGE", /* @__PURE__ */ k(/* @__PURE__ */ p().mark(function a() {
        return p().wrap(function(u) {
          for (; ; )
            switch (u.prev = u.next) {
              case 0:
                J.emit(j.AUDIO_TRACK_CHANGED), R.info("DyteSelf::setupEvents::AUDIO_TRACK_CHANGE", ie({}, Jn(i))), i.emit("audioUpdate", { audioEnabled: i.audioEnabled, audioTrack: i.audioTrack });
              case 3:
              case "end":
                return u.stop();
            }
        }, a);
      }))), this.localMediaHandler.on("VIDEO_TRACK_CHANGE", /* @__PURE__ */ k(/* @__PURE__ */ p().mark(function a() {
        return p().wrap(function(u) {
          for (; ; )
            switch (u.prev = u.next) {
              case 0:
                J.emit(j.VIDEO_TRACK_CHANGED), R.info("DyteSelf::setupEvents::VIDEO_TRACK_CHANGE", ie({}, Jn(i))), i.roomJoined && i.rawVideoTrack === void 0 ? (R.info("DyteSelf::VIDEO_TRACK_CHANGE::Forcing_disable_video"), i.disableVideo()) : i.videoEnabled && i.roomJoined, i.emit("videoUpdate", { videoEnabled: i.videoEnabled, videoTrack: i.videoTrack });
              case 4:
              case "end":
                return u.stop();
            }
        }, a);
      }))), this.localMediaHandler.on("DEVICE_CHANGE", /* @__PURE__ */ function() {
        var a = k(/* @__PURE__ */ p().mark(function s(u) {
          var o;
          return p().wrap(function(l) {
            for (; ; )
              switch (l.prev = l.next) {
                case 0:
                  o = u.device, i.emit("deviceUpdate", { device: o });
                case 2:
                case "end":
                  return l.stop();
              }
          }, s);
        }));
        return function(s) {
          return a.apply(this, arguments);
        };
      }()), this.localMediaHandler.on("DEVICE_LIST_UPDATED", function(a) {
        i.emit("deviceListUpdate", a);
      }), this.localMediaHandler.on("SCREENSHARE_TRACK_CHANGE", /* @__PURE__ */ k(/* @__PURE__ */ p().mark(function a() {
        return p().wrap(function(u) {
          for (; ; )
            switch (u.prev = u.next) {
              case 0:
                if (J.emit(j.SCREENSHARE_TRACK_CHANGED), i.roomJoined) {
                  u.next = 4;
                  break;
                }
                return R.error("DyteSelf.SCREENSHARE_TRACK_CHANGE.LocalMediaInitialized_WithoutRoomNode"), u.abrupt("return");
              case 4:
                R.info("DyteSelf::setupEvents::SCREENSHARE_TRACK_CHANGE", ie({}, Jn(i))), i.emit("screenShareUpdate", { screenShareEnabled: i.screenShareEnabled, screenShareTracks: i.screenShareTracks });
              case 6:
              case "end":
                return u.stop();
            }
        }, a);
      }))), this.localMediaHandler.on("SCREENSHARE_ENDED", /* @__PURE__ */ k(/* @__PURE__ */ p().mark(function a() {
        return p().wrap(function(u) {
          for (; ; )
            switch (u.prev = u.next) {
              case 0:
                return u.next = 2, i.disableScreenShare();
              case 2:
                R.info("DyteSelf::setupEvents::SCREENSHARE_ENDED", ie({}, Jn(i)));
              case 3:
              case "end":
                return u.stop();
            }
        }, a);
      }))), this.localMediaHandler.on("AUDIO_TRACK_SILENT", function() {
      }), this.localMediaHandler.on("FORCE_MUTE_AUDIO", function() {
        i.disableAudio();
      });
    }
    /**
    * Returns the current permission given to the user for the meeting.
    */
  }, {
    key: "permissions",
    get: function() {
      return f(this, pr)[pr];
    }
    /**
    * @deprecated use 'config'
    * Returns suggested theme for the meeting.
    */
  }, {
    key: "suggestedTheme",
    get: function() {
      return f(this, gn)[gn];
    }
    /**
    * Returns configuration for the meeting.
    */
  }, { key: "config", get: function() {
    return f(this, gn)[gn];
  } }, { key: "setName", value: (
    /**
    * The name of the user can be set by calling this method.
    * This will get reflected to other participants ONLY if
    * this method is called before the room is joined.
    * @param name Name of the user.
    */
    function(i) {
      if (!i)
        throw new $("Name cannot be empty.");
      this.name = i;
    }
  ) }, { key: "setupTracks", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s, u, o, c = arguments;
      return p().wrap(function(d) {
        for (; ; )
          switch (d.prev = d.next) {
            case 0:
              return o = c.length > 0 && c[0] !== void 0 ? c[0] : {}, o.forceReset && this.localMediaHandler.removeAllTracks(), d.abrupt("return", this.localMediaHandler.setupStreams({ video: (s = o.video) !== null && s !== void 0 ? s : !0, audio: (u = o.audio) !== null && u !== void 0 ? u : !0 }));
            case 3:
            case "end":
              return d.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "resetSelf", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
            case "end":
              return o.stop();
          }
      }, a);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "destructMediaHandler", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              return u.abrupt("return", this.localMediaHandler.destruct());
            case 1:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "removeDocumentEventListeners", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              return u.abrupt("return", this.localMediaHandler.removeDocumentEventListeners());
            case 1:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "enableAudio", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (this.permissions.canProduceAudio !== Wn.notAllowed) {
                u.next = 2;
                break;
              }
              return u.abrupt("return");
            case 2:
              if (!(f(this, pr)[pr].canProduceAudio === Wn.canRequest && (this.stageStatus === "OFF_STAGE" || this.stageStatus === "REQUESTED_TO_JOIN_STAGE"))) {
                u.next = 4;
                break;
              }
              return u.abrupt("return");
            case 4:
              if (!this.audioEnabled) {
                u.next = 6;
                break;
              }
              return u.abrupt("return");
            case 6:
              return u.next = 8, this.localMediaHandler.enableAudio();
            case 8:
              if (!(this.roomJoined && (this.permissions.mediaRoomType !== "HIVE" || this.stageStatus === "ON_STAGE"))) {
                u.next = 12;
                break;
              }
              if (this.audioTrack, this.audioEnabled) {
                u.next = 12;
                break;
              }
              return u.abrupt("return");
            case 12:
              this.emit("audioUpdate", { audioEnabled: this.audioEnabled, audioTrack: this.audioTrack });
              try {
                Xt.setTrack(this.rawAudioTrack);
              } catch (o) {
                R.error("Troubleshooter::micTest::Error while setting track", { error: o });
              }
            case 14:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "enableVideo", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (f(this, pr)[pr].canProduceVideo !== Wn.notAllowed) {
                o.next = 2;
                break;
              }
              return o.abrupt("return");
            case 2:
              if (!(f(this, pr)[pr].canProduceVideo === Wn.canRequest && (this.stageStatus === "OFF_STAGE" || this.stageStatus === "REQUESTED_TO_JOIN_STAGE"))) {
                o.next = 4;
                break;
              }
              return o.abrupt("return");
            case 4:
              if (!this.videoEnabled) {
                o.next = 6;
                break;
              }
              return o.abrupt("return");
            case 6:
              return o.next = 8, this.localMediaHandler.enableVideo();
            case 8:
              this.roomJoined && (this.permissions.mediaRoomType !== "HIVE" || this.stageStatus), this.emit("videoUpdate", { videoEnabled: this.videoEnabled, videoTrack: this.videoTrack }), R.info("DyteSelf.enableVideo", ie({}, Jn(this)));
              try {
                st.setTrack((s = this.videoTrack) === null || s === void 0 ? void 0 : s.clone());
              } catch (c) {
                R.error("Troubleshooter::camTest::Error while setting track", { error: c });
              }
            case 12:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "updateVideoConstraints", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (this.localMediaHandler.updateVideoConstraints) {
                o.next = 2;
                break;
              }
              throw new $("Unsupported");
            case 2:
              return o.next = 4, this.localMediaHandler.updateVideoConstraints(s);
            case 4:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "enableScreenShare", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (this.roomJoined) {
                o.next = 2;
                break;
              }
              throw new $("Can`t enable screenshare without joining room");
            case 2:
              if (f(this, pr)[pr].canProduceScreenshare !== Wn.notAllowed) {
                o.next = 4;
                break;
              }
              return o.abrupt("return");
            case 4:
              if (!(f(this, pr)[pr].canProduceScreenshare === Wn.canRequest && (this.stageStatus === "OFF_STAGE" || this.stageStatus === "REQUESTED_TO_JOIN_STAGE"))) {
                o.next = 6;
                break;
              }
              return o.abrupt("return");
            case 6:
              if (!this.screenShareEnabled) {
                o.next = 8;
                break;
              }
              return o.abrupt("return");
            case 8:
              return o.next = 10, this.localMediaHandler.enableScreenShare();
            case 10:
              if (this.screenShareTracks.audio || this.screenShareTracks.video, this.emit("screenShareUpdate", { screenShareEnabled: this.screenShareEnabled, screenShareTracks: this.screenShareTracks }), this.screenShareTracks.audio)
                try {
                  Yi.setTrack(this.screenShareTracks.audio);
                } catch (c) {
                  R.error("Troubleshooter::screenshareMicTest::Error while setting track", { error: c });
                }
              if (this.screenShareTracks.video)
                try {
                  Zi.setTrack((s = this.screenShareTracks.video) === null || s === void 0 ? void 0 : s.clone());
                } catch (c) {
                  R.error("Troubleshooter::screenshareCamTest::Error while setting track", { error: c });
                }
            case 14:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "updateScreenshareConstraints", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (this.localMediaHandler.updateScreenshareConstraints) {
                o.next = 2;
                break;
              }
              throw new $("Unsupported");
            case 2:
              return o.next = 4, this.localMediaHandler.updateScreenshareConstraints(s);
            case 4:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "disableAudio", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (this.audioEnabled) {
                u.next = 2;
                break;
              }
              return u.abrupt("return");
            case 2:
              this.localMediaHandler.disableAudio(), this.roomJoined, this.emit("audioUpdate", { audioEnabled: this.audioEnabled, audioTrack: this.audioTrack });
            case 5:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "disableVideo", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (this.videoEnabled) {
                u.next = 2;
                break;
              }
              return u.abrupt("return");
            case 2:
              return u.next = 4, this.localMediaHandler.disableVideo();
            case 4:
              if (this.roomJoined, !("isDeprecated" in this.localMediaHandler && this.mediaPermissions.video !== "ACCEPTED")) {
                u.next = 7;
                break;
              }
              return u.abrupt("return");
            case 7:
              this.emit("videoUpdate", { videoEnabled: this.videoEnabled, videoTrack: this.videoTrack }), st.preview || st.cleanup();
            case 9:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, {
    key: "disableScreenShare",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a() {
        return p().wrap(function(u) {
          for (; ; )
            switch (u.prev = u.next) {
              case 0:
                if (this.screenShareEnabled) {
                  u.next = 2;
                  break;
                }
                return u.abrupt("return");
              case 2:
                return u.next = 4, this.localMediaHandler.disableScreenShare();
              case 4:
                this.roomJoined, this.emit("screenShareUpdate", { screenShareEnabled: this.screenShareEnabled, screenShareTracks: this.screenShareTracks }), Zi.cleanup(), Yi.cleanup();
              case 8:
              case "end":
                return u.stop();
            }
        }, a, this);
      }));
      function i() {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Returns all media devices accessible by the local participant.
    */
  }, {
    key: "getAllDevices",
    value: function() {
      return this.localMediaHandler.getAllDevices();
    }
    /**
    * @access private
    * Not for external use.
    */
  }, {
    key: "setIsPinned",
    value: function(i) {
      var a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
      f(this, yn)[yn] = i;
      var s = i ? "pinned" : "unpinned";
      a && this.emit(s, this);
    }
    /**
    * Returns true if the current user is pinned.
    */
  }, {
    key: "isPinned",
    get: function() {
      return f(this, yn)[yn];
    }
    /**
    * @deprecated
    * Denotes the user's current stage status.
    * Use `self.stageStatus` instead.
    * */
  }, {
    key: "webinarStageStatus",
    get: function() {
      return f(this, St)[St];
    }
    /**
    * Returns `self.id` if user has permission
    * to pin participants.
    */
  }, {
    key: "pin",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a() {
        return p().wrap(function(u) {
          for (; ; )
            switch (u.prev = u.next) {
              case 0:
                if (this.roomJoined) {
                  u.next = 2;
                  break;
                }
                throw new $("Can`t pin participants without joining room");
              case 2:
              case "end":
                return u.stop();
            }
        }, a, this);
      }));
      function i() {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Returns `self.id` if user has permission
    * to unpin participants.
    */
  }, { key: "unpin", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (this.roomJoined) {
                u.next = 2;
                break;
              }
              throw new $("Can`t unpin participants without joining room");
            case 2:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "setDevice", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u, o, c, l, d;
      return p().wrap(function(h) {
        for (; ; )
          switch (h.prev = h.next) {
            case 0:
              if (s) {
                h.next = 2;
                break;
              }
              throw new $("No device selected");
            case 2:
              if (l = { added: [s], removed: [] }, d = this.getCurrentDevices(), s.deviceId && ((d == null || (u = d.audio) === null || u === void 0 ? void 0 : u.deviceId) === s.deviceId || (d == null || (o = d.video) === null || o === void 0 ? void 0 : o.deviceId) === s.deviceId || (d == null || (c = d.speaker) === null || c === void 0 ? void 0 : c.deviceId) === s.deviceId) && R.warn("DyteSelf.setDevice.setting_to_in_use_device", { devices: [s] }), !("isDeprecated" in this.localMediaHandler)) {
                h.next = 9;
                break;
              }
              return h.next = 8, this.localMediaHandler.onDeviceChange(l, !0);
            case 8:
              return h.abrupt("return");
            case 9:
              h.t0 = s.kind, h.next = h.t0 === "audioinput" ? 12 : h.t0 === "audiooutput" ? 22 : h.t0 === "videoinput" ? 25 : 35;
              break;
            case 12:
              return h.prev = 12, h.next = 15, this.localMediaHandler.setAudioDevice(s);
            case 15:
              h.next = 21;
              break;
            case 17:
              h.prev = 17, h.t1 = h.catch(12), this.roomJoined, this.emit("audioUpdate", { audioEnabled: this.audioEnabled, audioTrack: this.audioTrack });
            case 21:
              return h.abrupt("break", 35);
            case 22:
              return h.next = 24, this.localMediaHandler.setSpeakerDevice(s);
            case 24:
              return h.abrupt("break", 35);
            case 25:
              return h.prev = 25, h.next = 28, this.localMediaHandler.setVideoDevice(s);
            case 28:
              h.next = 34;
              break;
            case 30:
              h.prev = 30, h.t2 = h.catch(25), this.roomJoined, this.emit("videoUpdate", { videoEnabled: this.videoEnabled, videoTrack: this.videoTrack });
            case 34:
              return h.abrupt("break", 35);
            case 35:
            case "end":
              return h.stop();
          }
      }, a, this, [[12, 17], [25, 30]]);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "cleanUpTracks", value: function() {
    var i, a, s, u;
    (i = this.audioTrack) === null || i === void 0 || i.stop(), (a = this.rawAudioTrack) === null || a === void 0 || a.stop(), (s = this.videoTrack) === null || s === void 0 || s.stop(), (u = this.rawVideoTrack) === null || u === void 0 || u.stop();
  } }, { key: "requestToJoinStage", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              J.emitAsync(j.REQUEST_TO_JOIN_STAGE);
            case 1:
            case "end":
              return u.stop();
          }
      }, a);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "withdrawRequestToJoinStage", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              J.emitAsync(j.WITHDRAW_REQUEST_TO_JOIN_STAGE);
            case 1:
            case "end":
              return u.stop();
          }
      }, a);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "leaveStage", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              J.emitAsync(j.LEAVE_STAGE);
            case 1:
            case "end":
              return u.stop();
          }
      }, a);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, {
    key: "joinStage",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a() {
        return p().wrap(function(u) {
          for (; ; )
            switch (u.prev = u.next) {
              case 0:
                J.emitAsync(j.JOIN_STAGE);
              case 1:
              case "end":
                return u.stop();
            }
        }, a);
      }));
      function i() {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * @deprecated
    * Use `stage.setStatus(StageStatus)` instead.
    */
  }, { key: "setWebinarStageStatus", value: function(i) {
    switch (f(this, St)[St] = i, J.emit(j.SET_WEBINAR_STAGE_STATUS, i), i) {
      case "ACCEPTED_TO_JOIN_STAGE":
        this.emit("joinStageRequestAccepted");
        break;
      case "REQUESTED_TO_JOIN_STAGE":
        this.emit("peerRequestToJoinStage");
        break;
      case "OFF_STAGE":
        this.emit("stageLeft");
        break;
    }
  } }, { key: "disablePreview", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              return u.abrupt("return", this);
            case 1:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }], [{ key: "__init__", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s, u, o, c, l, d, v, h, m, T, y, _, C, D;
      return p().wrap(function(O) {
        for (; ; )
          switch (O.prev = O.next) {
            case 0:
              if (d = (s = (u = Te.defaults) === null || u === void 0 ? void 0 : u.audio) !== null && s !== void 0 ? s : !0, v = (o = (c = Te.defaults) === null || c === void 0 ? void 0 : c.video) !== null && o !== void 0 ? o : !0, h = Kr(), m = { id: Kr(), name: ji.person.fullName(), email: "", picture: ji.image.avatar(), loggedIn: !0, scope: ["test"], clientSpecificId: "mock_self", customParticipantId: "mock_self", organizationId: Kr() }, T = MD.default(Yr.GroupCall, !1), y = $D.default(), _ = "group_call_host", C = new We(h, m, T, y, _), y.viewType !== Yr.Chat) {
                O.next = 10;
                break;
              }
              return O.abrupt("return", C);
            case 10:
              return D = CD(y.mediaConstraints), Wp(D, (l = Te.defaults) === null || l === void 0 ? void 0 : l.mediaConfiguration), O.next = 14, C.init({ audio: d, video: v, constraints: D }, !1);
            case 14:
              return C.setupEvents(), O.abrupt("return", C);
            case 16:
            case "end":
              return O.stop();
          }
      }, a);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }]), r;
}(Uh));
xe([P.trace("DyteSelf.setupEvents")], We.prototype, "setupEvents", 1);
xe([P.trace("DyteSelf.setupTracks")], We.prototype, "setupTracks", 1);
xe([P.trace("DyteSelf.resetSelf")], We.prototype, "resetSelf", 1);
xe([P.trace("DyteSelf.destructMediaHandler")], We.prototype, "destructMediaHandler", 1);
xe([P.trace("DyteSelf.removeDocumentEventListeners")], We.prototype, "removeDocumentEventListeners", 1);
xe([At.executeWithLock({ methodName: "meeting.self.enableAudio", lockName: "DyteSelf.toggleAudio", timeout: 3e3 }), P.trace("DyteSelf.enableAudio")], We.prototype, "enableAudio", 1);
xe([At.executeWithLock({ methodName: "meeting.self.enableVideo", lockName: "DyteSelf.toggleVideo", timeout: 3e3 }), P.trace("DyteSelf.enableVideo")], We.prototype, "enableVideo", 1);
xe([P.trace("DyteSelf.updateVideoConstraints")], We.prototype, "updateVideoConstraints", 1);
xe([P.trace("DyteSelf.enableScreenShare"), At.executeWithLock({ methodName: "meeting.self.enableScreenShare", lockName: "DyteSelf.toggleScreenShare", timeout: 3e3 })], We.prototype, "enableScreenShare", 1);
xe([P.trace("DyteSelf.updateScreenshareConstraints")], We.prototype, "updateScreenshareConstraints", 1);
xe([At.executeWithLock({ methodName: "meeting.self.disableAudio", lockName: "DyteSelf.toggleAudio", timeout: 3e3 }), P.trace("DyteSelf.disableAudio")], We.prototype, "disableAudio", 1);
xe([At.executeWithLock({ methodName: "meeting.self.disableVideo", lockName: "DyteSelf.toggleVideo", timeout: 3e3 }), P.trace("DyteSelf.disableVideo")], We.prototype, "disableVideo", 1);
xe([At.executeWithLock({ methodName: "meeting.self.disableScreenShare", lockName: "DyteSelf.toggleScreenShare", timeout: 3e3 }), P.trace("DyteSelf.disableScreenShare")], We.prototype, "disableScreenShare", 1);
xe([P.trace("DyteSelf.setDevice")], We.prototype, "setDevice", 1);
xe([P.trace("DyteSelf.requestToJoinStage")], We.prototype, "requestToJoinStage", 1);
xe([P.trace("DyteSelf.withdrawRequestToJoinStage")], We.prototype, "withdrawRequestToJoinStage", 1);
xe([P.trace("DyteSelf.leaveStage")], We.prototype, "leaveStage", 1);
xe([P.trace("DyteSelf.joinStage")], We.prototype, "joinStage", 1);
xe([P.trace("DyteSelf.deprecated.disablePreview")], We.prototype, "disablePreview", 1);
We = xe([lr(function(e) {
  throw new $(e.message, "1100");
})], We);
var SM = Object.defineProperty, PM = Object.getOwnPropertyDescriptor, fn = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? PM(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && SM(r, n, a), a;
}, bt = (Tn = /* @__PURE__ */ V("isPinned"), Pt = /* @__PURE__ */ V("stageStatus"), hr = /* @__PURE__ */ V("self"), /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n, i) {
    var a;
    w(this, r), a = t.call(this), a.id = void 0, a.userId = void 0, a.name = void 0, a.picture = void 0, a.isHost = void 0, a.customParticipantId = void 0, a.flags = void 0, a.device = void 0, a.videoTrack = void 0, a.audioTrack = void 0, a.screenShareTracks = void 0, a.videoEnabled = void 0, a.audioEnabled = void 0, a.screenShareEnabled = void 0, a.producers = void 0, Object.defineProperty(M(a), Tn, { writable: !0, value: void 0 }), a.supportsRemoteControl = !1, Object.defineProperty(M(a), Pt, { writable: !0, value: void 0 }), a.presetName = void 0, Object.defineProperty(M(a), hr, { writable: !0, value: void 0 });
    var s = n.id, u = n.userId, o = n.displayName, c = n.device, l = n.picture, d = n.isHost, v = n.flags, h = n.clientSpecificId, m = n.stageStatus, T = n.customParticipantId, y = n.audioMuted, _ = n.audioTrack, C = n.videoEnabled, D = C === void 0 ? !1 : C, I = n.videoTrack, O = n.producers, q = n.metadata;
    return a.id = s, a.userId = u, a.name = o, a.device = c, a.picture = l, a.isHost = d, a.flags = v, f(M(a), Pt)[Pt] = m != null ? m : bn.ON_STAGE, a.customParticipantId = T != null ? T : h, a.audioEnabled = !y, a.audioTrack = _, a.videoEnabled = D, a.videoTrack = I, a.screenShareTracks = { audio: void 0, video: void 0 }, a.producers = O != null ? O : [], a.presetName = q == null ? void 0 : q.preset_name, f(M(a), Tn)[Tn] = !1, f(M(a), hr)[hr] = i, a.setupEvents(), a;
  }
  return b(r, [{ key: "clientSpecificId", get: (
    /**
    * @deprecated
    * Use `customParticipantId`
    */
    function() {
      return this.customParticipantId;
    }
  ) }, {
    key: "webinarStageStatus",
    get: (
      // eslint-disable-next-line class-methods-use-this
      // get #roomNodeClient() {
      // 	return getRoomNodeClient();
      // }
      /**
         * @deprecated
         * Denotes the participants's current stage status.
         * Use `participant.stageStatus` instead.
         *  */
      function() {
        return f(this, Pt)[Pt];
      }
    )
    /** Denotes the participants's current stage status. */
  }, {
    key: "stageStatus",
    get: function() {
      return f(this, Pt)[Pt];
    }
    /**
    * Returns true if the local participant has joined the meeting.
    */
  }, { key: "roomJoined", get: function() {
    return f(this, hr)[hr].roomJoined;
  } }, { key: "setVideoEnabled", value: function(i) {
    var a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
    this.videoEnabled = i, a && (R.info("DyteParticipant::setVideoEnabled::videoUpdate", ie({}, Jn(this))), this.emit("videoUpdate", { videoEnabled: this.videoEnabled, videoTrack: this.videoTrack }));
  } }, { key: "setAudioEnabled", value: function(i) {
    var a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
    this.audioEnabled = i, a && (R.info("DyteParticipant::setAudioEnabled::audioUpdate", ie({}, Jn(this))), this.emit("audioUpdate", { audioEnabled: this.audioEnabled, audioTrack: this.audioTrack }));
  } }, { key: "setScreenShareEnabled", value: function(i) {
    var a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
    this.screenShareEnabled = i, a && this.emit("screenShareUpdate", { screenShareEnabled: this.screenShareEnabled, screenShareTracks: this.screenShareTracks });
  } }, {
    key: "setupEvents",
    value: function() {
      var i = this;
      J.onAsync(j.UPDATE_PEER_STAGE_STATUS, /* @__PURE__ */ function() {
        var a = k(/* @__PURE__ */ p().mark(function s(u) {
          var o, c;
          return p().wrap(function(d) {
            for (; ; )
              switch (d.prev = d.next) {
                case 0:
                  if (o = u.id, c = u.status, o === i.id) {
                    d.next = 3;
                    break;
                  }
                  return d.abrupt("return");
                case 3:
                  if (c !== i.stageStatus) {
                    d.next = 5;
                    break;
                  }
                  return d.abrupt("return");
                case 5:
                  i.setStageStatus(c);
                case 6:
                case "end":
                  return d.stop();
              }
          }, s);
        }));
        return function(s) {
          return a.apply(this, arguments);
        };
      }());
    }
    /**
    * Returns `participant.id` if user has permission
    * to pin participants.
    */
  }, {
    key: "pin",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a() {
        return p().wrap(function(u) {
          for (; ; )
            switch (u.prev = u.next) {
              case 0:
                if (this.roomJoined) {
                  u.next = 2;
                  break;
                }
                throw new $("Can`t pin participant without joining room");
              case 2:
                if (f(this, hr)[hr].permissions.pinParticipant) {
                  u.next = 4;
                  break;
                }
                throw new $("You do not have permission to pin participants.");
              case 4:
              case "end":
                return u.stop();
            }
        }, a, this);
      }));
      function i() {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Returns `participant.id` if user has permission
    * to unpin participants.
    */
  }, {
    key: "unpin",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a() {
        return p().wrap(function(u) {
          for (; ; )
            switch (u.prev = u.next) {
              case 0:
                if (this.roomJoined) {
                  u.next = 2;
                  break;
                }
                throw new $("Can`t unpin participant without joining room");
              case 2:
                if (f(this, hr)[hr].permissions.pinParticipant) {
                  u.next = 4;
                  break;
                }
                throw new $("You do not have permission to unpin participants.");
              case 4:
              case "end":
                return u.stop();
            }
        }, a, this);
      }));
      function i() {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * @access private
    * Not for external use
    */
  }, { key: "setIsPinned", value: function(i) {
    var a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
    f(this, Tn)[Tn] = i;
    var s = i ? "pinned" : "unpinned";
    a && this.emit(s, this);
  } }, { key: "disableAudio", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (s = this.id, R.info("DyteParticipant::disable_audio", { dyteParticipant: { id: s } }), this.roomJoined) {
                o.next = 4;
                break;
              }
              throw new $("Can`t disable participant audio without joining room");
            case 4:
              if (!f(this, hr)[hr].permissions.canDisableParticipantAudio) {
                o.next = 6;
                break;
              }
              return o.abrupt("return");
            case 6:
              throw R.error("DyteParticipant::unauthorized_disable_audio", { dyteParticipant: { id: s } }), new $("Unauthorized: User does not have permission to disable participant audio.");
            case 8:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "kick", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (s = this.id, R.info("DyteParticipant::kick", { dyteParticipant: { id: s } }), this.roomJoined) {
                o.next = 4;
                break;
              }
              throw new $("Can`t kick participant without joining room");
            case 4:
              if (!f(this, hr)[hr].permissions.kickParticipant) {
                o.next = 8;
                break;
              }
              return o.next = 7, J.emitAsync(j.KICK_PEER, { peerId: s });
            case 7:
              return o.abrupt("return");
            case 8:
              throw R.error("DyteParticipant::unauthorized_kick", { dyteParticipant: { id: s } }), new $("Unauthorized: User does not have permission to kick participants.");
            case 10:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "disableVideo", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (s = this.id, R.info("DyteParticipant::disable_video", { dyteParticipant: { id: s } }), this.roomJoined) {
                o.next = 4;
                break;
              }
              throw new $("Can`t disable participant video without joining room");
            case 4:
              if (!f(this, hr)[hr].permissions.canDisableParticipantVideo) {
                o.next = 6;
                break;
              }
              return o.abrupt("return");
            case 6:
              throw R.error("DyteParticipant::unauthorized_disable_video", { dyteParticipant: { id: s } }), new $("Unauthorized: User does not have permission to disable participant video.");
            case 8:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "acceptJoinStageRequest", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              J.emitAsync(j.ACCEPT_JOIN_STAGE_REQUEST, { userId: this.userId });
            case 1:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "rejectRequestToJoinStage", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              J.emitAsync(j.REJECT_REQUEST_TO_JOIN_STAGE, { userId: this.userId });
            case 1:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getPermissions", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              return u.abrupt("return", {});
            case 1:
            case "end":
              return u.stop();
          }
      }, a);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "removeFromStage", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              J.emitAsync(j.REMOVE_FROM_STAGE, { userId: this.userId });
            case 1:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, {
    key: "setStageStatus",
    value: function(i) {
      f(this, Pt)[Pt] = i;
      var a;
      i === bn.OFF_STAGE && (a = "peerStoppedPresenting"), i === bn.ON_STAGE && (a = "peerStartedPresenting"), i === bn.ACCEPTED_TO_JOIN_STAGE && (a = "peerAcceptedToJoinStage"), i === bn.REQUESTED_TO_JOIN_STAGE && (J.emit(j.NEW_STAGE_REQUEST, { count: 1 }), a = "peerRequestToJoinStage"), a && this.emit(a, this), this.emit("stageStatusUpdate", this);
    }
    /** @deprecated */
  }, {
    key: "setWebinarStageStatus",
    value: function(i) {
      this.setStageStatus(i);
    }
    /**
    * Returns true if the participant is pinned.
    */
  }, { key: "isPinned", get: function() {
    return f(this, Tn)[Tn];
  } }]), r;
}(rt));
fn([P.trace("DyteParticipant.disableAudio")], bt.prototype, "disableAudio", 1);
fn([P.trace("DyteParticipant.kick")], bt.prototype, "kick", 1);
fn([P.trace("DyteParticipant.disableVideo")], bt.prototype, "disableVideo", 1);
fn([P.trace("DyteParticipant.acceptJoinStageRequest")], bt.prototype, "acceptJoinStageRequest", 1);
fn([P.trace("DyteParticipant.rejectRequestToJoinStage")], bt.prototype, "rejectRequestToJoinStage", 1);
fn([P.trace("DyteParticipant.getPermissions")], bt.prototype, "getPermissions", 1);
fn([P.trace("DyteParticipant.removeFromStage")], bt.prototype, "removeFromStage", 1);
fn([P.trace("DyteParticipant.setStageStatus")], bt.prototype, "setStageStatus", 1);
bt = fn([lr(function(e) {
  throw new $(e.message, "1200");
})], bt);
var me = /* @__PURE__ */ V("eventEmitter"), Kt = /* @__PURE__ */ V("listeners"), Fh = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n) {
    var i;
    w(this, r);
    var a = n.onAddEvent, s = n.onDeleteEvent, u = n.onClearEvent;
    return i = t.call(this), Object.defineProperty(M(i), me, { writable: !0, value: void 0 }), Object.defineProperty(M(i), Kt, { writable: !0, value: void 0 }), i.onAddEvent = void 0, i.onDeleteEvent = void 0, i.onClearEvent = void 0, f(M(i), me)[me] = new ln(), i.onAddEvent = a, i.onDeleteEvent = s, i.onClearEvent = u, f(M(i), Kt)[Kt] = /* @__PURE__ */ new Map(), i;
  }
  return b(r, [{ key: "emit", value: function(i) {
    for (var a, s = arguments.length, u = new Array(s > 1 ? s - 1 : 0), o = 1; o < s; o++)
      u[o - 1] = arguments[o];
    return (a = f(this, me)[me]).emit.apply(a, [i].concat(u));
  } }, { key: "on", value: function(i, a) {
    return f(this, me)[me].on(i, a);
  } }, { key: "addListener", value: function(i, a) {
    return f(this, me)[me].addListener(i, a);
  } }, { key: "off", value: function(i, a) {
    return f(this, me)[me].off(i, a);
  } }, { key: "once", value: function(i, a) {
    return f(this, me)[me].once(i, a);
  } }, { key: "prependListener", value: function(i, a) {
    return f(this, me)[me].prependListener(i, a);
  } }, { key: "prependOnceListener", value: function(i, a) {
    return f(this, me)[me].prependOnceListener(i, a);
  } }, { key: "removeListener", value: function(i, a) {
    return f(this, me)[me].removeListener(i, a);
  } }, { key: "removeAllListeners", value: function(i) {
    return f(this, me)[me].removeAllListeners(i);
  } }, { key: "listeners", value: function(i) {
    return f(this, me)[me].listeners(i);
  } }, { key: "listenerCount", value: function(i) {
    return f(this, me)[me].listenerCount(i);
  } }, { key: "getMaxListeners", value: function() {
    return f(this, me)[me].getMaxListeners();
  } }, { key: "setMaxListeners", value: function(i) {
    return f(this, me)[me].setMaxListeners(i);
  } }, { key: "eventNames", value: function() {
    return f(this, me)[me].eventNames();
  } }, { key: "add", value: function(i) {
    var a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
    return this.set(i.id, i, a);
  } }, { key: "set", value: function(i, a) {
    var s = this, u = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !0, o = le(ne(r.prototype), "set", this).call(this, i, a), c = function(d) {
      for (var v = arguments.length, h = new Array(v > 1 ? v - 1 : 0), m = 1; m < v; m++)
        h[m - 1] = arguments[m];
      s.emit.apply(s, [d, a].concat(h));
    };
    return f(this, Kt)[Kt].set(i, c), a.on("*", c), u && f(this, me)[me].emit(this.onAddEvent, a), o;
  } }, { key: "delete", value: function(i) {
    var a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0, s = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1, u = this.get(i);
    if (!u)
      return !1;
    u.removeListener("*", f(this, Kt)[Kt].get(i));
    var o = le(ne(r.prototype), "delete", this).call(this, i);
    return s && u.removeAllListeners(), a && f(this, me)[me].emit(this.onDeleteEvent, u), o;
  } }, { key: "clear", value: function() {
    var i = this, a = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !0, s = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1;
    this.forEach(function(o) {
      o.removeListener("*", f(i, Kt)[Kt].get(o.id)), s && o.removeAllListeners();
    });
    var u = le(ne(r.prototype), "clear", this).call(this);
    return a && f(this, me)[me].emit(this.onClearEvent), u;
  } }, { key: "toArray", value: function() {
    return Array.from(this.values());
  } }]), r;
}(/* @__PURE__ */ Kn(Map)), Pa = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n) {
    w(this, r);
    var i = n != null ? n : {}, a = i.onAddEvent, s = a === void 0 ? "participantJoined" : a, u = i.onDeleteEvent, o = u === void 0 ? "participantLeft" : u, c = i.onClearEvent, l = c === void 0 ? "participantsCleared" : c;
    return t.call(this, { onAddEvent: s, onDeleteEvent: o, onClearEvent: l });
  }
  return b(r, [{ key: "add", value: function(i) {
    var a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
    return this.has(i.id) && Object.is(this.get(i.id), i) === !1 && this.delete(i.id), le(ne(r.prototype), "add", this).call(this, i, a);
  } }, { key: "clear", value: function() {
    var i = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !0, a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1;
    return le(ne(r.prototype), "clear", this).call(this, i, a);
  } }, { key: "delete", value: function(i) {
    var a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0, s = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1;
    return le(ne(r.prototype), "delete", this).call(this, i, a, s);
  } }]), r;
}(Fh);
Cd = Symbol.iterator;
var CM = /* @__PURE__ */ function() {
  function e() {
    w(this, e), this._orderedArray = void 0, this._map = void 0, this._map = /* @__PURE__ */ new Map(), this._orderedArray = [];
  }
  return b(e, [{ key: "add", value: function(r, n) {
    if (!this._map.has(r)) {
      this._map.set(r, { peerId: r, priority: n }), this._orderedArray.splice(Math.max(n - 1, 0), 0, r);
      var i = this.index(r);
      return i;
    }
    var a = this.index(r);
    this.delete(r);
    var s = this.add(r, n);
    return a !== s ? (R.info("DyteSelectedPeer::add()::new_position_for_active_speaker", { selectedPeer: { oldIndex: a, newIndex: s } }), s) : -1;
  } }, { key: "delete", value: function(r) {
    if (this._map.has(r)) {
      var n = this.index(r);
      this._map.delete(r), this._orderedArray.splice(n, 1);
    }
  } }, { key: "index", value: function(r) {
    return this._map.has(r) ? this._orderedArray.indexOf(r) : -1;
  } }, { key: Cd, value: function() {
    return this._orderedArray[Symbol.iterator]();
  } }]), e;
}(), IM = /* @__PURE__ */ function() {
  function e() {
    w(this, e), this._activeSpeakerPeers = void 0, this._compulsoryPeers = void 0, this._activeSpeakerPeers = new CM(), this._compulsoryPeers = /* @__PURE__ */ new Set();
  }
  return b(e, [{ key: "add", value: function(r, n) {
    if (n < 0)
      return this._compulsoryPeers.add(r), 0;
    if (this.compulsoryPeers.includes(r) && (n > 0 || n === 246267631)) {
      if (R.info("DyteSelectedPeer::removing_compulsory_peer", { selectedPeer: { peerId: r } }), this._removeFromCompulsoryPeer(r), n === 246267631)
        return -1;
    } else if (n === 229490415)
      return this.delete(r), -1;
    return this._activeSpeakerPeers.add(r, n);
  } }, { key: "delete", value: function(r) {
    R.info("DyteSelectedPeer::deleting_peer_from_selectedPeer", { selectedPeer: { peerId: r } }), this._removeFromCompulsoryPeer(r), this._activeSpeakerPeers.delete(r);
  } }, { key: "index", value: function(r) {
    return this._activeSpeakerPeers.index(r);
  } }, { key: "peers", get: function() {
    return Array.from(new Set(this.compulsoryPeers.concat(this.activeSpeakerPeers)));
  } }, { key: "compulsoryPeers", get: function() {
    return Array.from(this._compulsoryPeers.values());
  } }, { key: "peerPriorities", get: function() {
    return Array.from(this._activeSpeakerPeers).map(function(r, n) {
      return n;
    });
  } }, { key: "activeSpeakerPeers", get: function() {
    return Array.from(this._activeSpeakerPeers);
  } }, { key: "_removeFromCompulsoryPeer", value: function(r) {
    this._compulsoryPeers.delete(r);
  } }]), e;
}(), mt = /* @__PURE__ */ V("map"), DM = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    var n;
    return w(this, r), n = t.call(this), Object.defineProperty(M(n), mt, { writable: !0, value: void 0 }), f(M(n), mt)[mt] = /* @__PURE__ */ new Map(), n;
  }
  return b(r, [{
    key: "__set",
    value: function(i, a) {
      return f(this, mt)[mt].set(i, a);
    }
    /**
    * @private
    */
  }, { key: "__clear", value: function() {
    return f(this, mt)[mt].clear();
  } }, { key: "get", value: function(i) {
    return f(this, mt)[mt].get(i);
  } }, { key: "toArray", value: function() {
    return Array.from(f(this, mt)[mt].values());
  } }]), r;
}(ln), MM = { setup_screen: { is_enabled: !1 }, alone_here: { is_enabled: !1 }, waiting_room: { is_enabled: !1, enable_preview: !0 }, control_bar: { is_enabled: !0, elements: { plugins: !0, screenshare: !0, invite: !1, participants: !0, chat: !0, reactions: !1, polls: !0, fullscreen: !0, layout: !0 } }, header: { is_enabled: !0, elements: { logo: "", timer: !0, title: !0, participant_count: !0, change_layout: !0 } }, pip_mode: !0, auto_tune: !0, grid: { multi: { max_video_count: 9, video_fit: "cover" }, single: { max_video_count: 6, video_fit: "cover" }, default_view: "MULTI" }, colors: { primary: "#2160FD", secondary: "#1A1A1A", text: "#EEEEEE", background: "#1A1A1A", text_primary: "#EEEEEE", video_background: "#1A1A1A" }, controls: { pip_toggle: !1 }, plugins: [] }, OM = ct(MM), Re = /* @__PURE__ */ V("theme"), Bn = /* @__PURE__ */ V("screenShareCount"), qn = /* @__PURE__ */ V("viewType"), Li = /* @__PURE__ */ V("mediaConstrains"), Ui = /* @__PURE__ */ V("disabledPlugins"), $M = /* @__PURE__ */ function() {
  function e(t) {
    if (w(this, e), Object.defineProperty(this, Re, { writable: !0, value: void 0 }), Object.defineProperty(this, Bn, { writable: !0, value: void 0 }), Object.defineProperty(this, qn, { writable: !0, value: void 0 }), Object.defineProperty(this, Li, { writable: !0, value: void 0 }), Object.defineProperty(this, Ui, { writable: !0, value: [] }), !t)
      throw new $("Could not load preset theme.");
    f(this, Re)[Re] = t, f(this, Bn)[Bn] = 1, f(this, qn)[qn] = Yr.GroupCall;
  }
  return b(e, [{ key: "configFromPermissions", value: function(r) {
    var n, i, a, s, u, o, c, l;
    f(this, Bn)[Bn] = r.maxScreenshareCount || 1, f(this, qn)[qn] = r.viewType, f(this, Li)[Li] = { audio: { enableHighBitrate: !1, enableStereo: !1 }, video: { quality: (n = r == null || (i = r.produce) === null || i === void 0 || (i = i.video) === null || i === void 0 ? void 0 : i.quality) !== null && n !== void 0 ? n : Dr.video.quality, frameRate: (a = r == null || (s = r.produce) === null || s === void 0 || (s = s.video) === null || s === void 0 ? void 0 : s.frameRate) !== null && a !== void 0 ? a : Dr.video.frameRate }, screenshare: { quality: (u = r == null || (o = r.produce) === null || o === void 0 || (o = o.screenshare) === null || o === void 0 ? void 0 : o.quality) !== null && u !== void 0 ? u : Dr.screenshare.quality, frameRate: (c = r == null || (l = r.produce) === null || l === void 0 || (l = l.screenshare) === null || l === void 0 ? void 0 : l.frameRate) !== null && c !== void 0 ? c : Dr.screenshare.frameRate } };
  } }, {
    key: "setDisabledPlugins",
    value: function(r) {
      var n = f(this, Re)[Re].plugins;
      n && n.length > 0 && (f(this, Ui)[Ui] = r.filter(function(i) {
        return !n.includes(i);
      }));
    }
    /**
    * @deprecated
    * The `setupScreen` represents the setup screen for the meeting.
    */
  }, {
    key: "setupScreen",
    get: function() {
      return f(this, Re)[Re].setupScreen;
    }
    /**
    * The `aloneHere` contains the properties to show a layout when
    * the participant is alone in the meeting.
    */
  }, {
    key: "aloneHere",
    get: function() {
      return f(this, Re)[Re].aloneHere;
    }
    /**
    * The `waitingRoom` contains the properties to show a layout when
    * the participant is in waiting to join the meeting.
    */
  }, {
    key: "waitingRoom",
    get: function() {
      return f(this, Re)[Re].waitingRoom;
    }
    /**
    * @deprecated
    * The `controlBar` contains the properties to show the meeting control bar with
    * various action buttons for the meeting.
    * The `elements` key contains the various action buttons.
    */
  }, {
    key: "controlBar",
    get: function() {
      return f(this, Re)[Re].controlBar;
    }
    /**
    * The `header` contains the properties to show the meeting header with various elements.
    * The `elements` key contains the following properties
    * `logo` - string value representing the public URL for the logo
    * `timer` - boolean value suggesting if the timer should be shown
    * `title` - boolean value suggesting if the meeting title should be shown
    * `participantCount` - boolean value suggesting if the participant count shuld be shown
    * `changeLayout` - boolean value suggesting if the participant can change layout
    */
  }, {
    key: "header",
    get: function() {
      return f(this, Re)[Re].header;
    }
    /**
    * The `pipMode` property returns a boolean value
    * If true, picture-in-picture mode is enabled for the participant.
    */
  }, {
    key: "pipMode",
    get: function() {
      var r;
      return ((r = f(this, Re)[Re].controls) === null || r === void 0 ? void 0 : r.pipToggle) || f(this, Re)[Re].pipMode;
    }
    /**
    * The `viewType` tells the type of the meeting
    * possible values are: GROUP_CALL| LIVESTREAM | CHAT | AUDIO_ROOM
    */
  }, {
    key: "viewType",
    get: function() {
      return f(this, qn)[qn];
    }
    /**
    * @deprecated
    * The `autoTune` property returns a boolean value
    * If true, force the participant's video to be in compatibility mode.
    */
  }, {
    key: "autoTune",
    get: function() {
      return f(this, Re)[Re].autoTune;
    }
    /**
    * The `grid` contains the properties to show participant grid for the meeting.
    * `defaultView` key points to the view type, possible values are `MULTI`, `SINGLE`
    * `multi` and `single` keys contain the following preferences to show grid layout.
    * `maxVideoCount` - number of participants to show in the grid.
    * `videoFit` - string value suggesting how to align the video content.
    */
  }, {
    key: "grid",
    get: function() {
      return f(this, Re)[Re].grid;
    }
    /**
    * The `maxVideoStreams` contains the maximum video
    * streams for mobile and desktop
    */
  }, {
    key: "maxVideoStreams",
    get: function() {
      return { mobile: this.grid.multi.maxVideoCount > 6 ? 6 : this.grid.multi.maxVideoCount, desktop: this.grid.multi.maxVideoCount };
    }
    /**
    * The `maxScreenShareCount` contains the maximum
    * possible concurrent screen shares
    */
  }, { key: "maxScreenShareCount", get: function() {
    return f(this, Bn)[Bn];
  } }, { key: "colors", get: function() {
    return f(this, Re)[Re].colors;
  } }, { key: "controls", get: function() {
    return f(this, Re)[Re].controls;
  } }, {
    key: "plugins",
    get: function() {
      return f(this, Re)[Re].plugins;
    }
    /**
    * The `disabledPlugins` property returns id of all disabled plugins
    */
  }, { key: "disabledPlugins", get: function() {
    return f(this, Ui)[Ui];
  } }, {
    key: "mediaConstraints",
    get: function() {
      return f(this, Li)[Li];
    }
    // eslint-disable-next-line class-methods-use-this
  }, { key: "isV2", get: function() {
    return !1;
  } }], [{ key: "fromResponse", value: function(r) {
    return new e(r);
  } }, { key: "default", value: function() {
    return new e(OM);
  } }]), e;
}();
function NM(e) {
  var t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 2, r = e.replace(/[^\u00BF-\u1FFF\u2C00-\uD7FF\w\s]/g, ""), n = r.trim().split(/\s+/).slice(0, t);
  return n.map(function(i) {
    return i.charAt(0);
  }).join("").toUpperCase();
}
var hd = 1080, vd = 1920, LM = function(t, r, n, i, a, s) {
  var u = 0.5, o = 0.5, c = a, l = s, d = Math.min(n / c, i / l), v = c * d, h = l * d, m, T, y, _, C = 1;
  return v < n && (C = n / v), Math.abs(C - 1) < 1e-14 && h < i && (C = i / h), v *= C, h *= C, y = c / (v / n), _ = l / (h / i), m = (c - y) * u, T = (l - _) * o, m < 0 && (m = 0), T < 0 && (T = 0), y > c && (y = c), _ > l && (_ = l), [m, T, y, _, t, r, n, i];
}, sr = /* @__PURE__ */ V("canvas"), De = /* @__PURE__ */ V("videoContainer"), Gr = /* @__PURE__ */ V("video"), ue = /* @__PURE__ */ V("dimensions"), kr = /* @__PURE__ */ V("colors"), Hr = /* @__PURE__ */ V("rafRequest"), rr = /* @__PURE__ */ V("sources"), oe = /* @__PURE__ */ V("self"), UM = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n) {
    var i;
    if (w(this, r), i = t.call(this), Object.defineProperty(M(i), sr, { writable: !0, value: void 0 }), Object.defineProperty(M(i), De, { writable: !0, value: void 0 }), Object.defineProperty(M(i), Gr, { writable: !0, value: void 0 }), Object.defineProperty(M(i), ue, { writable: !0, value: { height: hd, width: vd } }), Object.defineProperty(M(i), kr, { writable: !0, value: { brand: "#2160FD", background: "#141414", videoBackground: "#191919", textOnBrand: "#EEEEEE" } }), Object.defineProperty(M(i), Hr, { writable: !0, value: void 0 }), Object.defineProperty(M(i), rr, { writable: !0, value: {} }), Object.defineProperty(M(i), oe, { writable: !0, value: void 0 }), i.cleanupEventListeners = function() {
      f(M(i), oe)[oe].removeListener("stageJoined", i.enablePipMediaControls), f(M(i), oe)[oe].removeListener("stageLeft", i.unmountEvents), f(M(i), oe)[oe].removeListener("videoUpdate", i.onSelfVideoUpdateListener), f(M(i), oe)[oe].removeListener("audioUpdate", i.onSelfAudioUpdateListener), f(M(i), oe)[oe].removeListener("roomLeft", i.disable);
    }, i.enablePipMediaControls = function() {
      i.mountAudioEvents(), i.mountVideoEvents();
    }, i.onSelfVideoUpdateListener = function(m) {
      var T = m.videoEnabled;
      i.updateMediaSession("CAMERA", T);
    }, i.onSelfAudioUpdateListener = function(m) {
      var T = m.audioEnabled;
      i.updateMediaSession("MIC", T);
    }, i.eventCallback = function(m) {
      m === "CAMERA" && (f(M(i), oe)[oe].videoEnabled ? f(M(i), oe)[oe].disableVideo() : f(M(i), oe)[oe].enableVideo(), i.emit("cameraToggled")), m === "MIC" && (f(M(i), oe)[oe].audioEnabled ? f(M(i), oe)[oe].disableAudio() : f(M(i), oe)[oe].enableAudio(), i.emit("micToggled")), m === "END" && (J.emit(j.PIP_HANGUP), i.cleanupEventListeners(), i.emit("hangup"), i.cleanup());
    }, i.unmountEvents = function() {
      navigator.mediaSession === void 0 || navigator.mediaSession.setCameraActive === void 0 || (navigator.mediaSession.setActionHandler("togglemicrophone", void 0), navigator.mediaSession.setActionHandler("togglecamera", void 0));
    }, i.animate = function() {
      f(M(i), rr)[rr] !== void 0 && i.paintCanvas(), f(M(i), Hr)[Hr] !== void 0 && (f(M(i), Hr)[Hr] = requestAnimationFrame(function() {
        return i.animate();
      }));
    }, i.disable = function() {
      i.cleanupEventListeners(), cancelAnimationFrame(f(M(i), Hr)[Hr]), document.body.removeChild(f(M(i), De)[De]), f(M(i), Hr)[Hr] = void 0, document.exitPictureInPicture();
    }, f(M(i), oe)[oe] = n, n.config.isV2 === !0)
      f(M(i), kr)[kr] = { brand: n.config.designTokens.colors.brand[500], background: n.config.designTokens.colors.background[1e3], videoBackground: n.config.designTokens.colors.videoBg, textOnBrand: n.config.designTokens.colors.textOnBrand };
    else if (n.config.isV2 === !1) {
      var a, s, u, o, c, l, d, v, h = $M.default();
      f(M(i), kr)[kr] = { brand: (a = (s = n.config.colors) === null || s === void 0 ? void 0 : s.primary) !== null && a !== void 0 ? a : h.colors.primary, background: (u = (o = n.config.colors) === null || o === void 0 ? void 0 : o.background) !== null && u !== void 0 ? u : h.colors.background, videoBackground: (c = (l = n.config.colors) === null || l === void 0 ? void 0 : l.videoBackground) !== null && c !== void 0 ? c : h.colors.videoBackground, textOnBrand: (d = (v = n.config.colors) === null || v === void 0 ? void 0 : v.textPrimary) !== null && d !== void 0 ? d : h.colors.textPrimary };
    }
    return i;
  }
  return b(r, [{ key: "createVideoContainer", value: function() {
    f(this, De)[De] = document.createElement("div"), f(this, De)[De].style.width = "0.1px", f(this, De)[De].style.height = "0.1px", f(this, De)[De].style.overflow = "hidden", f(this, De)[De].style.position = "absolute", f(this, De)[De].style.bottom = "0", f(this, De)[De].style.right = "0", f(this, De)[De].style.opacity = "0", f(this, De)[De].appendChild(f(this, Gr)[Gr]);
  } }, { key: "setupEventListeners", value: function() {
    f(this, oe)[oe].addListener("stageJoined", this.enablePipMediaControls), f(this, oe)[oe].addListener("stageLeft", this.unmountEvents), f(this, oe)[oe].addListener("videoUpdate", this.onSelfVideoUpdateListener), f(this, oe)[oe].addListener("audioUpdate", this.onSelfAudioUpdateListener), f(this, oe)[oe].addListener("roomLeft", this.disable);
  } }, { key: "createCanvas", value: (
    // private handlePipMediaControls = (status: StageStatus) => {
    // 	if (status === 'ON_STAGE') this.enablePipMediaControls();
    // 	else this.unmountEvents();
    // };
    function() {
      var i = document.createElement("canvas");
      i.height = f(this, ue)[ue].height, i.width = f(this, ue)[ue].width, f(this, sr)[sr] = i;
    }
  ) }, { key: "setupMediaSessionEvents", value: function() {
    var i = this;
    navigator.mediaSession === void 0 || navigator.mediaSession.setCameraActive === void 0 || (navigator.mediaSession.setActionHandler("hangup", function() {
      i.eventCallback("END");
    }), this.mountAudioEvents(), this.mountVideoEvents());
  } }, { key: "mountAudioEvents", value: function() {
    var i = this;
    navigator.mediaSession === void 0 || navigator.mediaSession.setMicrophoneActive === void 0 || f(this, oe)[oe].permissions.canProduceAudio && navigator.mediaSession.setActionHandler("togglemicrophone", function() {
      i.eventCallback("MIC");
    });
  } }, { key: "mountVideoEvents", value: function() {
    var i = this;
    navigator.mediaSession === void 0 || navigator.mediaSession.setCameraActive === void 0 || f(this, oe)[oe].permissions.canProduceVideo && navigator.mediaSession.setActionHandler("togglecamera", function() {
      i.eventCallback("CAMERA");
    });
  } }, { key: "getSources", value: function() {
    var i = Object.values(f(this, rr)[rr]), a = i.filter(function(s) {
      return s.pinned;
    });
    return a.length === 1 ? a : i;
  } }, { key: "drawEmptyTile", value: function(i, a, s, u, o) {
    if (f(this, sr)[sr] !== void 0) {
      var c = f(this, sr)[sr].getContext("2d"), l = f(this, sr)[sr].width, d = 4, v = 4, h = a - d * 2, m = s - d * 2, T = Math.floor(l / h), y = Math.floor(i / T), _ = i % T, C = _ * (h + d) + d, D = y * (m + d) + d;
      c.fillStyle = f(this, kr)[kr].videoBackground, c.strokeStyle = f(this, kr)[kr].brand, c.beginPath(), c.moveTo(C + v, D), c.arcTo(C + h, D, C + h, D + v, v), c.arcTo(C + h, D + m, C + h - v, D + m, v), c.arcTo(C, D + m, C, D + m - v, v), c.arcTo(C, D, C + v, D, v), c.closePath(), c.fill(), c.stroke();
      var I = h / 6, O = h / 2 + C, q = m / 2 + D;
      if (c.save(), (u || o) && (c.beginPath(), c.arc(O, q, I, 0, Math.PI * 2), c.fillStyle = f(this, kr)[kr].brand, c.fill()), u && (c.fillStyle = f(this, kr)[kr].textOnBrand, c.font = "".concat(I / 2, "px sans-serif"), c.textAlign = "center", c.textBaseline = "middle", c.fillText(u, O, q)), o) {
        var F = new Image();
        F.src = o, F.onload = function() {
          c.drawImage(F, O - I, q - I, I * 2, I * 2), c.restore();
        };
      }
    }
  } }, { key: "drawGrid", value: function(i, a, s) {
    if (f(this, sr)[sr] !== void 0) {
      var u = f(this, sr)[sr].getContext("2d");
      u.fillStyle = f(this, kr)[kr].background, u.fillRect(0, 0, f(this, ue)[ue].width, f(this, ue)[ue].height);
      for (var o = this.getSources(), c = 0, l = 0; c < f(this, ue)[ue].height - 5; ) {
        for (var d = 0; d < f(this, ue)[ue].width - 5 && l < s; ) {
          var v = o[l].element;
          if (o[l].enabled) {
            var h = LM(d, c, i, a, v.videoWidth, v.videoHeight), m = Ne(h, 8), T = m[0], y = m[1], _ = m[2], C = m[3], D = m[4], I = m[5], O = m[6], q = m[7];
            u.drawImage(v, T, y, _, C, D, I, O, q);
          } else
            this.drawEmptyTile(l, i, a, o[l].displayText);
          l += 1, d += i;
        }
        c += a;
      }
    }
  } }, { key: "calcGridElemSize", value: function(i) {
    switch (i) {
      case 0:
      case 1:
        return [f(this, ue)[ue].width, f(this, ue)[ue].height];
      case 2:
        return [Math.floor(f(this, ue)[ue].width / 2), f(this, ue)[ue].height];
      case 3:
      case 4:
        return [Math.floor(f(this, ue)[ue].width / 2), Math.floor(f(this, ue)[ue].height / 2)];
      case 5:
      case 6:
        return [Math.floor(f(this, ue)[ue].width / 3), Math.floor(f(this, ue)[ue].height / 2)];
      case 7:
      case 8:
      case 9:
        return [Math.floor(f(this, ue)[ue].width / 3), Math.floor(f(this, ue)[ue].height / 3)];
      default:
        return [Math.floor(f(this, ue)[ue].width / 3), Math.floor(f(this, ue)[ue].height / 2)];
    }
  } }, { key: "paintCanvas", value: function() {
    var i = this.getSources().length, a = this.calcGridElemSize(i), s = Ne(a, 2), u = s[0], o = s[1];
    this.drawGrid(u, o, i);
  } }, { key: "isSupported", value: function() {
    return !!window.chrome && document.pictureInPictureEnabled;
  } }, { key: "isActive", get: function() {
    return document.pictureInPictureElement !== null;
  } }, {
    key: "cleanup",
    value: function() {
      if (this.isSupported() && document.exitPictureInPicture !== void 0 && document.pictureInPictureElement !== null && document.exitPictureInPicture(), f(this, De)[De])
        try {
          document.body.removeChild(f(this, De)[De]);
        } catch (i) {
        }
      this.removeAllSources(), f(this, sr)[sr] = void 0, f(this, Gr)[Gr] = void 0, f(this, Hr)[Hr] = void 0;
    }
    /**
    * Initialize PiP and prepare sources
    */
  }, { key: "init", value: function() {
    var i = this, a = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, s = a.height, u = a.width;
    this.createCanvas(), this.setupMediaSessionEvents();
    var o = document.createElement("video");
    f(this, ue)[ue] = { height: s != null ? s : hd, width: u != null ? u : vd }, o.height = f(this, ue)[ue].height, o.width = f(this, ue)[ue].width, o.autoplay = !0, o.muted = !0, o.srcObject = f(this, sr)[sr].captureStream(24), f(this, Gr)[Gr] = o, f(this, Gr)[Gr].onloadedmetadata = function() {
      try {
        i.emit("pipStarted"), f(i, Gr)[Gr].onleavepictureinpicture = function() {
          i.emit("pipEnded");
        };
      } catch (c) {
        i.emit("pipEnded");
      }
    }, this.createVideoContainer(), this.paintCanvas();
  } }, { key: "updateMediaSession", value: function(i, a) {
    navigator.mediaSession !== void 0 && (i === "CAMERA" && navigator.mediaSession.setCameraActive !== void 0 && navigator.mediaSession.setCameraActive(a), i === "MIC" && navigator.mediaSession.setMicrophoneActive !== void 0 && navigator.mediaSession.setMicrophoneActive(a));
  } }, { key: "enableSource", value: function(i) {
    f(this, rr)[rr][i] !== void 0 && (f(this, rr)[rr][i].enabled = !0);
  } }, {
    key: "disableSource",
    value: function(i) {
      f(this, rr)[rr][i] !== void 0 && (f(this, rr)[rr][i].enabled = !1);
    }
    /**
    * Add a video source from the participant grid
    * @param {string} id id for the source (ex. participant id)
    * @param {HTMLVideoElement} element HTMLVideoElement for the video source
    * @param {boolean} enabled if source is enabled
    * @param {?string} [displayText] two character display text
    */
  }, {
    key: "addSource",
    value: function(i, a, s) {
      var u = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !1, o = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : void 0;
      u && this.removePinnedSource(), f(this, rr)[rr][i] = { id: i, element: a, enabled: s, pinned: u, displayText: o ? NM(o) : void 0 };
    }
    /**
    * Remove the video source for the participant
    * @param id id for the source (ex. participant id)
    */
  }, {
    key: "removeSource",
    value: function(i) {
      delete f(this, rr)[rr][i];
    }
    /**
    * Remove the pinned source
    * @param id id for the source (ex. participant id)
    */
  }, {
    key: "removePinnedSource",
    value: function() {
      var i = this.getSources(), a = Ne(i, 1), s = a[0];
      s && this.removeSource(s.id);
    }
    /**
    * Remove all sources
    */
  }, {
    key: "removeAllSources",
    value: function() {
      f(this, rr)[rr] = {};
    }
    /**
    * Enable PiP
    */
  }, { key: "enable", value: function() {
    var i = this;
    this.setupEventListeners(), this.updateMediaSession("CAMERA", f(this, oe)[oe].videoEnabled), this.updateMediaSession("MIC", f(this, oe)[oe].audioEnabled), document.body.appendChild(f(this, De)[De]), f(this, Hr)[Hr] = requestAnimationFrame(function() {
      return i.animate();
    }), f(this, Gr)[Gr].requestPictureInPicture();
  } }]), r;
}(rt), FM = Object.defineProperty, VM = Object.getOwnPropertyDescriptor, Fr = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? VM(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && FM(r, n, a), a;
}, gr = (Ir = /* @__PURE__ */ V("self"), /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n, i) {
    var a, s;
    return w(this, r), s = t.call(this), s.waitlisted = void 0, s.joined = void 0, s.active = void 0, s.pinned = void 0, s.all = void 0, s.pip = void 0, Object.defineProperty(M(s), Ir, { writable: !0, value: void 0 }), s.viewMode = void 0, s.currentPage = void 0, s.lastActiveSpeaker = void 0, s.selectedPeers = void 0, f(M(s), Ir)[Ir] = n, s.waitlisted = new Pa(), s.joined = new Pa(), s.active = new Pa(), s.pinned = new Pa(), s.all = new DM(), s.selectedPeers = new IM(), s.viewMode = "ACTIVE_GRID", s.currentPage = 0, (!((a = i == null ? void 0 : i.pip) !== null && a !== void 0) || a) && (s.pip = new UM(n)), s;
  }
  return b(r, [{ key: "roomJoined", get: (
    /**
    * Returns true if the local participant has joined the meeting.
    */
    function() {
      return f(this, Ir)[Ir].roomJoined;
    }
  ) }, {
    key: "count",
    get: function() {
      return this.joined.size;
    }
    /**
    * Returns the maximum number of participants that can be present in
    * the active map.
    */
  }, {
    key: "maxActiveParticipantsCount",
    get: function() {
      return 6;
    }
    /**
    * Returns the number of pages that are available in the meeting in PAGINATED mode.
    * If the meeting is in ACTIVE_GRID mode, this value will be 0.
    */
  }, {
    key: "pageCount",
    get: function() {
      if (this.viewMode === "PAGINATED") {
        var i = this.joined.toArray().filter(function(a) {
          return a.stageStatus === "ON_STAGE";
        });
        return Math.ceil(i.length / this.maxActiveParticipantsCount);
      }
      return 0;
    }
    /**
    * Accepts requests from waitlisted participants if user
    * has appropriate permissions.
    * @param id peerId or userId of the waitlisted participant.
    */
  }, {
    key: "acceptWaitingRoomRequest",
    value: function(i) {
      var a, s;
      a = (s = this.waitlisted.get(i)) === null || s === void 0 ? void 0 : s.userId;
    }
    /**
    * We need a new event for socket service events
    * since if we send them all together, sequence of events
    * can be unreliable
    */
  }, {
    key: "acceptAllWaitingRoomRequest",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s) {
        var u = this;
        return p().wrap(function(c) {
          for (; ; )
            switch (c.prev = c.next) {
              case 0:
                s.map(function(l) {
                  var d, v;
                  return (d = (v = u.waitlisted.get(l)) === null || v === void 0 ? void 0 : v.userId) !== null && d !== void 0 ? d : l;
                });
              case 1:
              case "end":
                return c.stop();
            }
        }, a);
      }));
      function i(a) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Rejects requests from waitlisted participants if user
    * has appropriate permissions.
    * @param id participantId of the waitlisted participant.
    */
  }, { key: "rejectWaitingRoomRequest", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
            case "end":
              return o.stop();
          }
      }, a);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, {
    key: "setViewMode",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s) {
        var u;
        return p().wrap(function(c) {
          for (; ; )
            switch (c.prev = c.next) {
              case 0:
                if (R.info("DyteParticipants::set_view_mode", { pageNavigation: { viewMode: s, currentPage: this.currentPage, pageCount: this.pageCount, maxActiveParticipantsCount: this.maxActiveParticipantsCount } }), ["ACTIVE_GRID", "PAGINATED"].includes(s)) {
                  c.next = 4;
                  break;
                }
                throw R.error("DyteParticipants::setViewMode::invalid_view_mode", { pageNavigation: { viewMode: s, currentPage: this.currentPage, pageCount: this.pageCount, maxActiveParticipantsCount: this.maxActiveParticipantsCount } }), new $("Invalid view mode: ".concat(s, ". Try ACTIVE_GRID or PAGINATED."));
              case 4:
                if (this.viewMode !== s) {
                  c.next = 7;
                  break;
                }
                return R.info("DyteParticipants::setViewMode::view_mode_same_as_previous", { pageNavigation: { viewMode: s, currentPage: this.currentPage, pageCount: this.pageCount, maxActiveParticipantsCount: this.maxActiveParticipantsCount } }), c.abrupt("return");
              case 7:
                this.viewMode = s, s === "PAGINATED" ? (this.currentPage = 1, u = [], J.emit(j.GET_PAGE, { peerIds: u })) : s === "ACTIVE_GRID" && (this.currentPage = 0), this.emit("viewModeChanged", { viewMode: s, currentPage: this.currentPage, pageCount: this.pageCount });
              case 10:
              case "end":
                return c.stop();
            }
        }, a, this);
      }));
      function i(a) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    // NOTE(itzmanish): hive systems specific code
  }, { key: "getPeerIdsForCurrentPage", value: function() {
    var i = this;
    R.info("DyteParticipants::getPeerIdsForCurrentPage()", { pageNavigation: { viewMode: this.viewMode, currentPage: this.currentPage, pageCount: this.pageCount, maxActiveParticipantsCount: this.maxActiveParticipantsCount } });
    var a = this.selectedPeers.compulsoryPeers, s = a.filter(function(d) {
      return i.joined.has(d);
    }), u = Array.from(this.pinned.keys()).filter(function(d) {
      return !s.includes(d);
    }), o = Array.from(this.joined.toArray().filter(function(d) {
      return d.stageStatus === "ON_STAGE";
    }).map(function(d) {
      return d.id;
    })), c = Math.max((this.currentPage - 1) * (this.maxActiveParticipantsCount - s.length - u.length)), l = this.currentPage * (this.maxActiveParticipantsCount - s.length - u.length);
    return s.concat(u, o.slice(c, l));
  } }, { key: "setPage", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              if (R.info("DyteParticipants::set_page", { pageNavigation: { settingPage: s, viewMode: this.viewMode, currentPage: this.currentPage, pageCount: this.pageCount, maxActiveParticipantsCount: this.maxActiveParticipantsCount } }), this.viewMode === "PAGINATED") {
                c.next = 3;
                break;
              }
              return c.abrupt("return");
            case 3:
              if (Number.isInteger(s)) {
                c.next = 6;
                break;
              }
              throw R.error("DyteParticipants::invalid_page_number", { pageNavigation: { settingPage: s, viewMode: this.viewMode, currentPage: this.currentPage, pageCount: this.pageCount, maxActiveParticipantsCount: this.maxActiveParticipantsCount } }), new $("Invalid page: ".concat(s, ". Page must be an integer."));
            case 6:
              if (!(s < 1 || s > this.pageCount)) {
                c.next = 9;
                break;
              }
              throw R.error("DyteParticipants::invalid_page_number", { pageNavigation: { settingPage: s, viewMode: this.viewMode, currentPage: this.currentPage, pageCount: this.pageCount, maxActiveParticipantsCount: this.maxActiveParticipantsCount } }), new $("Invalid page: ".concat(s, ". Page must be greater than 0 and less than or equal to ").concat(this.pageCount, "."));
            case 9:
              this.currentPage = s, u = [], J.emit(j.GET_PAGE, { peerIds: u }), this.emit("pageChanged", { viewMode: this.viewMode, currentPage: this.currentPage, pageCount: this.pageCount });
            case 13:
            case "end":
              return c.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "disableAllAudio", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (R.info("DyteParticipants::disable_all_audio", { actions: { disableAllAudio: { allowUnmute: s } } }), this.roomJoined) {
                o.next = 3;
                break;
              }
              throw new $("Can`t disable all audio without joining room");
            case 3:
              if (!f(this, Ir)[Ir].permissions.canAllowParticipantAudio) {
                o.next = 5;
                break;
              }
              return o.abrupt("return");
            case 5:
              throw R.error("DyteParticipants::unauthorized_disable_all_audio", { actions: { disableAllAudio: { allowUnmute: s } } }), new $("Unauthorized: User does not have permission to disable peer audio.");
            case 7:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "disableAllVideo", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (R.info("DyteParticipants::disable_all_video"), this.roomJoined) {
                u.next = 3;
                break;
              }
              throw new $("Can`t disable all video without joining room");
            case 3:
              if (!f(this, Ir)[Ir].permissions.canAllowParticipantVideo) {
                u.next = 5;
                break;
              }
              return u.abrupt("return");
            case 5:
              throw R.error("DyteParticipants::unauthorized_disable_all_video"), new $("Unauthorized: User does not have permission to disable peer video.");
            case 7:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "disableAudio", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              this.joined.get(s).disableAudio();
            case 1:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "disableVideo", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              this.joined.get(s).disableVideo();
            case 1:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "kick", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              return o.next = 2, J.emitAsync(j.KICK_PEER, { peerId: s });
            case 2:
            case "end":
              return o.stop();
          }
      }, a);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "kickAll", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (R.info("DyteParticipants::kick_all"), this.roomJoined) {
                u.next = 3;
                break;
              }
              throw new $("Can`t kick all without joining room");
            case 3:
              if (f(this, Ir)[Ir].permissions.kickParticipant) {
                u.next = 6;
                break;
              }
              throw R.error("DyteParticipants::unauthorized_kick_all"), new $("Unauthorized: User does not have permission to kick peers.");
            case 6:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "broadcastMessage", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u, o) {
      return p().wrap(function(l) {
        for (; ; )
          switch (l.prev = l.next) {
            case 0:
              if (R.info("DyteParticipants::broadcastMessage"), this.roomJoined) {
                l.next = 3;
                break;
              }
              throw new $("Can`t broadcast message without joining room");
            case 3:
              if (s != null && s.trim()) {
                l.next = 5;
                break;
              }
              throw new $("`type` must be a non-empty string.");
            case 5:
            case "end":
              return l.stop();
          }
      }, a, this);
    }));
    function i(a, s, u) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "acceptAllRequestToJoinStageRequests", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              J.emitAsync(j.ACCEPT_ALL_REQUESTS_TO_JOIN_STAGE, { data: s });
            case 1:
            case "end":
              return o.stop();
          }
      }, a);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getAllJoinedPeers", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u, o) {
      return p().wrap(function(l) {
        for (; ; )
          switch (l.prev = l.next) {
            case 0:
              return l.abrupt("return", []);
            case 1:
            case "end":
              return l.stop();
          }
      }, a);
    }));
    function i(a, s, u) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "updatePermissions", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
      var o;
      return p().wrap(function(l) {
        for (; ; )
          switch (l.prev = l.next) {
            case 0:
              o = this.joined.toArray().filter(function(d) {
                return s.includes(d.id);
              }).map(function(d) {
                return d.userId;
              }), Mt(new Set(o));
            case 2:
            case "end":
              return l.stop();
          }
      }, a, this);
    }));
    function i(a, s) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getAllPeersInRoom", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              return u.abrupt("return", []);
            case 1:
            case "end":
              return u.stop();
          }
      }, a);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "setMockParticipantCount", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
      var o = this, c, l, d, v;
      return p().wrap(function(m) {
        for (; ; )
          switch (m.prev = m.next) {
            case 0:
              if (c = s - this.joined.size, c > 0)
                for (l = 0; l < c; l++)
                  d = new bt({ id: Kr(), displayName: ji.person.fullName(), picture: ji.image.avatar(), clientSpecificId: ji.string.alphanumeric(6), audioMuted: !0, isHost: !1, userId: Kr(), audioTrack: void 0, videoTrack: void 0, videoEnabled: !1, flags: {} }, f(this, Ir)[Ir]), this.joined.add(d);
              else
                this.joined.toArray().reverse().forEach(function(T, y) {
                  y < c && o.joined.delete(T.id);
                });
              v = u - this.active.size, v > 0 ? this.joined.toArray().forEach(function(T, y) {
                y < c && o.active.add(T);
              }) : this.active.toArray().reverse().forEach(function(T, y) {
                y < c && o.active.delete(T.id);
              });
            case 4:
            case "end":
              return m.stop();
          }
      }, a, this);
    }));
    function i(a, s) {
      return n.apply(this, arguments);
    }
    return i;
  }() }]), r;
}(rt));
Fr([P.trace("DyteParticipants.setViewMode")], gr.prototype, "setViewMode", 1);
Fr([P.trace("DyteParticipants.setPage")], gr.prototype, "setPage", 1);
Fr([P.trace("DyteParticipants.disableAllAudio")], gr.prototype, "disableAllAudio", 1);
Fr([P.trace("DyteParticipants.disableAllVideo")], gr.prototype, "disableAllVideo", 1);
Fr([P.trace("DyteParticipants.disablePeerAudio")], gr.prototype, "disableAudio", 1);
Fr([P.trace("DyteParticipants.disablePeerVideo")], gr.prototype, "disableVideo", 1);
Fr([P.trace("DyteParticipants.kickPeer")], gr.prototype, "kick", 1);
Fr([P.trace("DyteParticipants.kickAll")], gr.prototype, "kickAll", 1);
Fr([P.trace("DyteParticipants.broadcastMessage")], gr.prototype, "broadcastMessage", 1);
Fr([P.trace("DyteParticipants.acceptAllRequestToJoinStageRequests")], gr.prototype, "acceptAllRequestToJoinStageRequests", 1);
Fr([P.trace("DyteParticipants.getAllJoinedPeers")], gr.prototype, "getAllJoinedPeers", 1);
Fr([P.trace("DyteParticipant.updatePermissions")], gr.prototype, "updatePermissions", 1);
Fr([P.trace("DyteParticipants.getAllPeersInRoom")], gr.prototype, "getAllPeersInRoom", 1);
gr = Fr([lr(function(e) {
  throw new $(e.message, "1200");
})], gr);
var md = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, { onAddEvent: "pluginAdded", onDeleteEvent: "pluginDeleted" });
  }
  return b(r, [{ key: "add", value: function(i) {
    var a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
    return le(ne(r.prototype), "add", this).call(this, i, a);
  } }, { key: "delete", value: function(i) {
    var a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0, s = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1;
    return le(ne(r.prototype), "delete", this).call(this, i, a, s);
  } }]), r;
}(Fh), BM = Object.defineProperty, qM = Object.getOwnPropertyDescriptor, GM = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? qM(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && BM(r, n, a), a;
}, ro = /* @__PURE__ */ b(function e() {
  w(this, e), this.all = void 0, this.active = void 0, this.all = new md(), this.active = new md();
});
ro = GM([lr(function(e) {
  throw new $(e.message, "0600");
})], ro);
var Mr = { isV2AuthToken: !1, meetingId: null, overrides: {}, roomNodeOptions: void 0 }, Fi = { baseURL: "http://localhost:5000", createdAt: "2021-08-05T10:49:56.602Z", description: "Develop plugins locally", id: "09259e3b-7be8-46f6-9801-106bf1866e1c", name: "Localhost Dev", organizationId: "4ad15a19-80e2-4105-bf43-48039fd2963e", picture: "https://dyte-uploads.s3.ap-south-1.amazonaws.com/dyte.png", private: !1, published: !0, staggered: !1, tags: ["#localhost", "#dev"], type: "self_hosted", updatedAt: "2021-08-05T10:50:07.681Z" };
function HM(e, t) {
  if (t) {
    Mr.isV2AuthToken = !1;
    return;
  }
  try {
    var r = JSON.parse(atob(e.split(".")[1])), n = r.meetingId;
    if (!n)
      throw Error("Received V1 auth token ".concat(e));
    Mr.isV2AuthToken = !0, Mr.meetingId = n;
  } catch (i) {
    throw R.error("constants::setIsV2AuthToken", { error: i, debuggingHint: "Unable to decode auth token: ".concat(e) }, !0), new $("Invalid auth token");
  }
}
function WM(e) {
  Mr.overrides = e;
}
var jM = 3, JM = 30, KM = 8e3, YM = /* @__PURE__ */ function() {
  function e(t) {
    var r = this;
    w(this, e), this.ipInfo = void 0, this.axios = void 0, this.requests = void 0, this.roomName = void 0, this.roomUUID = void 0, this.peerId = void 0, this.authToken = void 0, this.organizationId = void 0, this.iceServers = void 0, this.pluginInformation = void 0, this.userDetails = void 0, this.roomDetails = void 0;
    var n = t || {}, i = n.timeout, a = i === void 0 ? KM : i, s = n.retry, u = s === void 0 ? jM : s, o = n.retryDelay, c = o === void 0 ? JM : o, l = n.baseURL, d = l === void 0 ? "https://api.cluster.dyte.in" : l, v = n.authToken, h = n.cachedUserDetails;
    this.iceServers = h == null ? void 0 : h.iceServers, this.pluginInformation = h == null ? void 0 : h.pluginInformation, this.userDetails = h == null ? void 0 : h.userDetails, this.roomDetails = h == null ? void 0 : h.roomDetails, this.requests = Iu.create({ baseURL: d, responseType: "json", timeout: a, retry: u, retryDelay: c }), this.axios = Iu, this.setAuthToken(v, { bearer: !0 }), this.requests.interceptors.request.use(function(m) {
      return P.injectContext(r.requests.defaults.headers.common), m;
    }, /* @__PURE__ */ function() {
      var m = k(/* @__PURE__ */ p().mark(function T(y) {
        return p().wrap(function(C) {
          for (; ; )
            switch (C.prev = C.next) {
              case 0:
                R.error("xhr::axios", { debuggingHint: "otelRequestInterceptor failed.", error: y });
              case 1:
              case "end":
                return C.stop();
            }
        }, T);
      }));
      return function(T) {
        return m.apply(this, arguments);
      };
    }()), this.requests.interceptors.response.use(function(m) {
      try {
        m.config.url !== P.logsEndpoint && R.debug("xhr::axios", {
          // Note(ravindra-dyte): Do not Log entire data, log what is needed
          networkCall: { status: m.status, statusText: m.statusText, baseURL: m.config.baseURL, url: m.config.url, method: m.config.method }
        });
      } catch (T) {
        console.error("xhr::dyte", { error: "responseInterceptorFailed", err: T, response: m });
      }
      return m;
    }, /* @__PURE__ */ function() {
      var m = k(/* @__PURE__ */ p().mark(function T(y) {
        var _, C, D;
        return p().wrap(function(O) {
          for (; ; )
            switch (O.prev = O.next) {
              case 0:
                if (O.prev = 0, y) {
                  O.next = 3;
                  break;
                }
                return O.abrupt("return", Promise.reject(new Error("Unknown error occurred")));
              case 3:
                if (y && y.config && ((_ = y.config) === null || _ === void 0 ? void 0 : _.url) !== P.logsEndpoint && R.error("xhr::axios", { error: y, networkCall: { status: y.status, statusText: y.statusText, baseURL: y.config.baseURL, url: y.config.url, retries: y.config.retry, method: y.config.method, isOnline: navigator.onLine ? "online" : "offline" } }), C = y.config, D = y.message, !(C && D && C.retry !== void 0 && C.retry > 0 && (D.includes("timeout") || D.includes("Network Error")))) {
                  O.next = 8;
                  break;
                }
                return C.retry -= 1, O.abrupt("return", r.requests(C));
              case 8:
                return O.abrupt("return", Promise.reject(y));
              case 11:
                return O.prev = 11, O.t0 = O.catch(0), console.error("xhr::dyte", { error: "responseInterceptorFailed", err: O.t0, responseError: y }), O.abrupt("return", Promise.reject(O.t0));
              case 15:
              case "end":
                return O.stop();
            }
        }, T, null, [[0, 11]]);
      }));
      return function(T) {
        return m.apply(this, arguments);
      };
    }());
  }
  return b(e, [{ key: "setAuthToken", value: function(r, n) {
    var i = n || {}, a = i.bearer;
    this.authToken = r, this.requests.defaults.headers.common.Authorization = a ? "Bearer ".concat(r) : r;
  } }, { key: "setHeader", value: function(r, n) {
    this.requests.defaults.headers.common[r] = n;
  } }, { key: "setRoomName", value: function(r) {
    this.roomName = r;
  } }, { key: "setRoomUUID", value: function(r) {
    this.roomUUID = r;
  } }, { key: "setPeerId", value: function(r) {
    this.peerId = r;
  } }, { key: "setOrganizationId", value: function(r) {
    this.organizationId = r;
  } }]), e;
}(), zM = Object.defineProperty, XM = Object.getOwnPropertyDescriptor, Vh = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? XM(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && zM(r, n, a), a;
}, Ns = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n) {
    var i;
    return w(this, r), i = t.call(this, n), i.setHeader("x-dyte-web-core-version", _h), i;
  }
  return b(r, [{ key: "getIPDetails", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              return u = s.peerId, c.abrupt("return", void 0);
            case 2:
            case "end":
              return c.stop();
          }
      }, a);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getICEServers", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s, u, o;
      return p().wrap(function(l) {
        for (; ; )
          switch (l.prev = l.next) {
            case 0:
              if (!this.iceServers) {
                l.next = 2;
                break;
              }
              return l.abrupt("return", this.iceServers);
            case 2:
              return l.next = 4, this.requests.get("/iceservers");
            case 4:
              if (s = l.sent.data, u = s.success, o = s.iceServers, !u) {
                l.next = 9;
                break;
              }
              return l.abrupt("return", o);
            case 9:
              return l.abrupt("return", void 0);
            case 10:
            case "end":
              return l.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getPlugins", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u, o, c = this, l, d, v, h;
      return p().wrap(function(T) {
        for (; ; )
          switch (T.prev = T.next) {
            case 0:
              if (!this.pluginInformation) {
                T.next = 2;
                break;
              }
              return T.abrupt("return", this.pluginInformation);
            case 2:
              return T.next = 4, this.requests.get("/v2/plugins/user");
            case 4:
              return l = T.sent.data.data.plugins, d = ((u = Oe.getValue($e.V1_PLUGINS)) === null || u === void 0 || (u = u.toString()) === null || u === void 0 ? void 0 : u.split(",")) || [], v = l.reduce(function(y, _) {
                return y[d.includes(_.id) ? "v1" : "v2"].push(_), y;
              }, { v1: [], v2: [] }), s ? l = v.v2 : l = v.v1, (o = Te.modules) !== null && o !== void 0 && (o = o.devTools) !== null && o !== void 0 && (o = o.plugins) !== null && o !== void 0 && o.length && ((h = Te.modules) === null || h === void 0 || (h = h.devTools) === null || h === void 0 || h.plugins.forEach(function(y) {
                var _, C, D, I = ie(ie({}, Fi), {}, { tags: Mt(Fi.tags) });
                I.baseURL = "http://localhost:".concat(y.port), I.name = y.name, I.picture = (_ = y.picture) !== null && _ !== void 0 ? _ : Fi.picture, I.description = (C = y.description) !== null && C !== void 0 ? C : Fi.description, I.staggered = (D = y.staggered) !== null && D !== void 0 ? D : Fi.staggered, I.createdAt = new Date().toISOString(), I.updatedAt = new Date().toISOString(), I.id = y.id, I.organizationId = c.organizationId, l.push(I);
              })), T.abrupt("return", l);
            case 10:
            case "end":
              return T.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getPluginDetails", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              return c.next = 2, this.requests.get("/v2/plugins/view/".concat(s));
            case 2:
              return u = c.sent.data.data.plugin, c.abrupt("return", u);
            case 4:
            case "end":
              return c.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getPluginConfig", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              return c.next = 2, this.axios.get("".concat(s, "/dyte-config.json"));
            case 2:
              return u = c.sent.data, c.abrupt("return", u);
            case 4:
            case "end":
              return c.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "authorizePlugin", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u, o;
      return p().wrap(function(l) {
        for (; ; )
          switch (l.prev = l.next) {
            case 0:
              return u = { peerId: this.peerId }, Mr.isV2AuthToken || (u.roomName = this.roomName), l.next = 4, this.requests.post("/v2/plugins/authorize/".concat(s), u);
            case 4:
              return o = l.sent.data.data.token, l.abrupt("return", o);
            case 6:
            case "end":
              return l.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getPresignedUrls", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
      var o, c, l, d;
      return p().wrap(function(h) {
        for (; ; )
          switch (h.prev = h.next) {
            case 0:
              return o = { roomUUID: this.roomUUID, filename: s }, Oe.hasFeature($e.FEAT_CHAT_SDK) && (o.viewType = u), h.next = 4, this.requests.post("/v1/meetings/genPreSignedUploadUrl", o);
            case 4:
              return c = h.sent.data.data, l = c.getLocation, d = c.putLocation, h.abrupt("return", { getLocation: l, putLocation: d });
            case 8:
            case "end":
              return h.stop();
          }
      }, a, this);
    }));
    function i(a, s) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "uploadFile", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              if (!(navigator.isReactNative && "uri" in s)) {
                c.next = 11;
                break;
              }
              return c.prev = 1, c.next = 4, fetch(u, { method: "PUT", headers: { "Content-Type": "application/octet-stream" }, body: { uri: s.uri, name: s.name } });
            case 4:
              c.next = 9;
              break;
            case 6:
              c.prev = 6, c.t0 = c.catch(1), R.error("sendFileMessage::".concat(c.t0));
            case 9:
              c.next = 13;
              break;
            case 11:
              return c.next = 13, this.axios.put(u, s, { headers: { "Content-Type": s.type } });
            case 13:
            case "end":
              return c.stop();
          }
      }, a, this, [[1, 6]]);
    }));
    function i(a, s) {
      return n.apply(this, arguments);
    }
    return i;
  }() }]), r;
}(YM);
Vh([P.trace("APIClient.getIPDetails")], Ns.prototype, "getIPDetails", 1);
Vh([P.trace("APIClient.getICEServers")], Ns.prototype, "getICEServers", 1);
var ZM = Object.defineProperty, QM = Object.getOwnPropertyDescriptor, Bt = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? QM(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && ZM(r, n, a), a;
}, qt = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.apply(this, arguments);
  }
  return b(r, [{
    key: "startLivestreaming",
    value: (
      // eslint-disable-next-line class-methods-use-this
      function() {
        var n = k(/* @__PURE__ */ p().mark(function a() {
          var s, u;
          return p().wrap(function(c) {
            for (; ; )
              switch (c.prev = c.next) {
                case 0:
                  return c.next = 2, this.requests.post("/v2/meetings/".concat(Mr.meetingId, "/livestreams"));
                case 2:
                  return u = c.sent, c.abrupt("return", (s = u.data) === null || s === void 0 || (s = s.data) === null || s === void 0 ? void 0 : s.playback_url);
                case 4:
                case "end":
                  return c.stop();
              }
          }, a, this);
        }));
        function i() {
          return n.apply(this, arguments);
        }
        return i;
      }()
    )
    // eslint-disable-next-line class-methods-use-this
  }, { key: "stopLivestreaming", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              return u.abrupt("return", this.requests.post("/v2/meetings/".concat(Mr.meetingId, "/active-livestream/stop")));
            case 1:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getActiveLivestream", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s, u, o;
      return p().wrap(function(l) {
        for (; ; )
          switch (l.prev = l.next) {
            case 0:
              return l.t0 = ct, l.next = 3, this.requests.get("/v2/meetings/".concat(Mr.meetingId, "/active-livestream"));
            case 3:
              return l.t1 = l.sent.data.data, s = (0, l.t0)(l.t1), u = s.playbackUrl, o = s.status, l.abrupt("return", { status: o, playbackUrl: u });
            case 8:
            case "end":
              return l.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getUserDetails", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (!this.userDetails) {
                o.next = 2;
                break;
              }
              return o.abrupt("return", this.userDetails);
            case 2:
              return o.next = 4, this.requests.get("v2/internals/participant-details");
            case 4:
              return s = o.sent.data.data, o.abrupt("return", ct(s));
            case 6:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getUserPreset", value: function() {
    throw new Error("getUserPreset does not exist for v2");
  } }, { key: "startRecording", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
      var o;
      return p().wrap(function(l) {
        for (; ; )
          switch (l.prev = l.next) {
            case 0:
              return l.next = 2, this.requests.post("/v2/recordings", ie(ie({}, Oh(s)), {}, { meeting_id: Mr.meetingId, allow_multiple_recordings: !!u }));
            case 2:
              return o = l.sent, l.abrupt("return", o.data.data.id);
            case 4:
            case "end":
              return l.stop();
          }
      }, a, this);
    }));
    function i(a, s) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "updateRecording", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              return c.abrupt("return", this.requests.put("v2/recordings/".concat(s), { action: u }));
            case 1:
            case "end":
              return c.stop();
          }
      }, a, this);
    }));
    function i(a, s) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getActiveRecording", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s, u, o;
      return p().wrap(function(l) {
        for (; ; )
          switch (l.prev = l.next) {
            case 0:
              return l.next = 2, this.requests.get("v2/recordings/active-recording/".concat(Mr.meetingId));
            case 2:
              return s = l.sent.data.data, u = s.status, o = s.id, l.abrupt("return", { status: u, id: o });
            case 6:
            case "end":
              return l.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getActiveTranscript", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s, u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              return c.next = 2, this.requests.get("v2/meetings/".concat(Mr.meetingId, "/active-transcript"));
            case 2:
              return s = c.sent.data.data.transcript_download_url, c.prev = 3, c.next = 6, this.axios.get(s);
            case 6:
              return u = c.sent, c.abrupt("return", { transcript: u.data });
            case 10:
              throw c.prev = 10, c.t0 = c.catch(3), new $("Cant fetch transcript s3 url");
            case 13:
            case "end":
              return c.stop();
          }
      }, a, this, [[3, 10]]);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getRoomNodeData", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u, o, c, l, d, v;
      return p().wrap(function(m) {
        for (; ; )
          switch (m.prev = m.next) {
            case 0:
              if (u = s.peerId, !this.roomDetails) {
                m.next = 3;
                break;
              }
              return m.abrupt("return", this.roomDetails);
            case 3:
              return m.next = 5, this.getIPDetails({ peerId: u });
            case 5:
              return o = m.sent, this.ipInfo = o, m.t0 = ct, m.next = 10, this.requests.post("v2/internals/rooms", { ip_information: o });
            case 10:
              return m.t1 = m.sent.data.data, c = (0, m.t0)(m.t1), l = c.roomNodeLink, d = c.title, v = c.useHiveMedia, m.abrupt("return", { roomNodeUrl: l, meetingTitle: d, useHiveMedia: v != null ? v : !1 });
            case 16:
            case "end":
              return m.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }]), r;
}(Ns);
Bt([P.trace("APIClient.startLivestreaming")], qt.prototype, "startLivestreaming", 1);
Bt([P.trace("APIClient.stopLivestreaming")], qt.prototype, "stopLivestreaming", 1);
Bt([P.trace("APIClient.getActiveLivestream")], qt.prototype, "getActiveLivestream", 1);
Bt([P.trace("APIClient.getUserDetails")], qt.prototype, "getUserDetails", 1);
Bt([P.trace("APIClient.getUserPreset")], qt.prototype, "getUserPreset", 1);
Bt([P.trace("APIClient.startRecording")], qt.prototype, "startRecording", 1);
Bt([P.trace("APIClient.stopRecording")], qt.prototype, "updateRecording", 1);
Bt([P.trace("APIClient.getActiveRecording")], qt.prototype, "getActiveRecording", 1);
Bt([P.trace("APIClient.getActiveTranscript")], qt.prototype, "getActiveTranscript", 1);
Bt([P.trace("APIClient.getRoomNodeData")], qt.prototype, "getRoomNodeData", 1);
var xM = Object.defineProperty, eO = Object.getOwnPropertyDescriptor, ni = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? eO(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && xM(r, n, a), a;
}, ii = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.apply(this, arguments);
  }
  return b(r, [{ key: "startLivestreaming", value: function() {
    throw new Error("Method not implemented.");
  } }, { key: "stopLivestreaming", value: function() {
    throw new Error("Method not implemented.");
  } }, { key: "getActiveLivestream", value: function() {
    throw new Error("Method not implemented.");
  } }, { key: "getUserDetails", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              return o.next = 2, this.requests.get("/auth/basicUserDetails");
            case 2:
              return s = o.sent.data.user, o.abrupt("return", s);
            case 4:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getUserPreset", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              return c.next = 2, this.requests.post("/v1/userpreset", {
                roomName: s,
                authToken: this.authToken,
                // TODO: remove the hardcoded version and clientType params
                clientType: "CLIENT_APP",
                version: "0.5.0"
              });
            case 2:
              return u = c.sent.data.data.preset, c.abrupt("return", ct(u));
            case 4:
            case "end":
              return c.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "startRecording", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              return c.next = 2, this.requests.post("/v1/organizations/".concat(this.organizationId, "/rooms/").concat(this.roomName, "/recording"), s);
            case 2:
              if (u = c.sent, u.status === 201) {
                c.next = 5;
                break;
              }
              throw new Error("Recording failed to start");
            case 5:
              return c.abrupt("return", u.data.data.recording.id);
            case 6:
            case "end":
              return c.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "updateRecording", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
      var o;
      return p().wrap(function(l) {
        for (; ; )
          switch (l.prev = l.next) {
            case 0:
              if (u === "stop") {
                l.next = 2;
                break;
              }
              return l.abrupt("return");
            case 2:
              return l.next = 4, this.requests.put("/v1/organizations/".concat(this.organizationId, "/rooms/").concat(this.roomName, "/recordings/").concat(s), { recordingAction: "stop" });
            case 4:
              if (o = l.sent, o.status === 201) {
                l.next = 7;
                break;
              }
              throw new Error("Recording failed to stop");
            case 7:
            case "end":
              return l.stop();
          }
      }, a, this);
    }));
    function i(a, s) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getActiveRecording", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (this.organizationId) {
                o.next = 2;
                break;
              }
              return o.abrupt("return", {});
            case 2:
              return o.next = 4, this.requests.get("/v1/organizations/".concat(this.organizationId, "/rooms/").concat(this.roomName, "/active-recording?limit=50"));
            case 4:
              return s = o.sent, o.abrupt("return", s.data.data.recording);
            case 6:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getActiveTranscript", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              return R.error("getActiveTranscript does not work in v1 meeting"), u.abrupt("return", { transcript: "" });
            case 2:
            case "end":
              return u.stop();
          }
      }, a);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getRoomNodeData", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u, o, c, l, d, v, h, m;
      return p().wrap(function(y) {
        for (; ; )
          switch (y.prev = y.next) {
            case 0:
              return u = s.roomName, o = s.peerId, c = `
				query Session($roomName: String!, $password: String, $ipInformation: String) {
						session(roomName: $roomName, password: $password) {
							title,
							roomNodeLink(ipInformation: $ipInformation),
							useHiveMedia,
							roomName,
							password
						}
					}
				`, y.next = 4, this.getIPDetails({ peerId: o });
            case 4:
              return l = y.sent, this.ipInfo = l, y.next = 8, this.requests.post("/graphql", { query: c, variables: { roomName: u, ipInformation: JSON.stringify(l) } });
            case 8:
              return d = y.sent.data.data.session, v = d.roomNodeLink, h = d.title, m = d.useHiveMedia, y.abrupt("return", { roomNodeUrl: v, meetingTitle: h, useHiveMedia: m != null ? m : !1 });
            case 13:
            case "end":
              return y.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }]), r;
}(Ns);
ni([P.trace("APIClientV1.getUserDetails")], ii.prototype, "getUserDetails", 1);
ni([P.trace("APIClientV1.getUserPreset")], ii.prototype, "getUserPreset", 1);
ni([P.trace("APIClientV1.startRecording")], ii.prototype, "startRecording", 1);
ni([P.trace("APIClientV1.updateRecording")], ii.prototype, "updateRecording", 1);
ni([P.trace("APIClientV1.getActiveRecording")], ii.prototype, "getActiveRecording", 1);
ni([P.trace("APIClient.getActiveTranscript")], ii.prototype, "getActiveTranscript", 1);
ni([P.trace("APIClientV1.getRoomNodeData")], ii.prototype, "getRoomNodeData", 1);
var rO;
function gi() {
  return rO;
}
function tO(e, t) {
  var r = t.replace(/<blockquote>[.\s\S]*<\/blockquote>\n\n/m, "");
  return "<blockquote>".concat(r, `</blockquote>

`).concat(e);
}
var nO = Object.defineProperty, iO = Object.getOwnPropertyDescriptor, yr = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? iO(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && nO(r, n, a), a;
}, gd = function(t) {
  return new Promise(function(r, n) {
    var i = new FileReader();
    i.readAsDataURL(t), i.onload = function() {
      return r(i.result);
    }, i.onerror = n;
  });
}, aO = ["text", "image", "file", "custom", "poll"], ir = (B = /* @__PURE__ */ V("self"), ba = /* @__PURE__ */ V("participants"), /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n, i) {
    var a;
    return w(this, r), a = t.call(this), a.messages = void 0, a.channels = [], Object.defineProperty(M(a), B, { writable: !0, value: void 0 }), Object.defineProperty(M(a), ba, { writable: !0, value: void 0 }), f(M(a), B)[B] = n, f(M(a), ba)[ba] = i, a.messages = [], a;
  }
  return b(r, [{ key: "roomJoined", get: (
    /**
    * Returns true if the local participant has joined the meeting.
    */
    function() {
      return f(this, B)[B].roomJoined;
    }
  ) }, { key: "sendMessageInternal", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u, o) {
      var c, l, d = arguments;
      return p().wrap(function(h) {
        for (; ; )
          switch (h.prev = h.next) {
            case 0:
              c = d.length > 3 && d[3] !== void 0 ? d[3] : {}, h.t0 = s.type, h.next = h.t0 === "text" ? 4 : h.t0 === "image" ? 8 : h.t0 === "file" ? 11 : 14;
              break;
            case 4:
              return l = c.replyTo && c.replyTo.type === "text" ? tO(s.message, c.replyTo.message) : s.message, h.next = 7, this.sendTextMessageInternal(l, u, o);
            case 7:
              return h.abrupt("break", 16);
            case 8:
              return h.next = 10, this.sendImageMessageInternal(s.image, u, o);
            case 10:
              return h.abrupt("break", 16);
            case 11:
              return h.next = 13, this.sendFileMessageInternal(s.file, u, o);
            case 13:
              return h.abrupt("break", 16);
            case 14:
              return R.error("sendMessage::message_type_not_supported", { dyteChat: { messageType: s.type } }), h.abrupt("break", 16);
            case 16:
            case "end":
              return h.stop();
          }
      }, a, this);
    }));
    function i(a, s, u) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "sendTextMessageInternal", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u, o) {
      var c, l, d, v, h;
      return p().wrap(function(T) {
        for (; ; )
          switch (T.prev = T.next) {
            case 0:
              if (!(u && u.length > 0)) {
                T.next = 6;
                break;
              }
              if (!(!((d = f(this, B)[B].permissions) !== null && d !== void 0 && d.chatPrivate.canSend) || !((v = f(this, B)[B].permissions) !== null && v !== void 0 && v.chatPrivate.text))) {
                T.next = 4;
                break;
              }
              throw R.error("sendTextMessage::private_chat_permission_denied"), new $("Could not send message to private chat.", "0501");
            case 4:
              T.next = 9;
              break;
            case 6:
              if (!(!((c = f(this, B)[B].permissions) !== null && c !== void 0 && (c = c.chatPublic) !== null && c !== void 0 && c.canSend) || !((l = f(this, B)[B].permissions) !== null && l !== void 0 && (l = l.chatPublic) !== null && l !== void 0 && l.text))) {
                T.next = 9;
                break;
              }
              throw R.error("sendTextMessage::public_chat_permission_denied"), new $("Could not send message to public chat.", "0501");
            case 9:
              if (s) {
                T.next = 12;
                break;
              }
              throw R.error("sendTextMessage::message_can_not_be_empty"), new $("Message can not be empty.", "0502");
            case 12:
              if (!o) {
                T.next = 14;
                break;
              }
              return T.abrupt("return");
            case 14:
              if (!(u !== void 0 && u.length > 0)) {
                T.next = 17;
                break;
              }
              return R.error("sendTextMessage::private_chat_unsupported"), T.abrupt("return");
            case 17:
              h = { id: Kr(), userId: f(this, B)[B].userId, displayName: f(this, B)[B].name, message: s, type: "text", time: new Date() }, this.messages.push(h), this.emit("chatUpdate", { action: "add", message: h, messages: this.messages });
            case 20:
            case "end":
              return T.stop();
          }
      }, a, this);
    }));
    function i(a, s, u) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "sendImageMessageInternal", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u, o) {
      var c, l, d, v, h, m, T;
      return p().wrap(function(_) {
        for (; ; )
          switch (_.prev = _.next) {
            case 0:
              if (!(u && u.length > 0)) {
                _.next = 6;
                break;
              }
              if (!(!((d = f(this, B)[B].permissions) !== null && d !== void 0 && d.chatPrivate.canSend) || !((v = f(this, B)[B].permissions) !== null && v !== void 0 && v.chatPrivate.files))) {
                _.next = 4;
                break;
              }
              return R.error("sendImageMessage::private_chat_permission_denied"), _.abrupt("return");
            case 4:
              _.next = 9;
              break;
            case 6:
              if (!(!((c = f(this, B)[B].permissions) !== null && c !== void 0 && (c = c.chatPublic) !== null && c !== void 0 && c.canSend) || !((l = f(this, B)[B].permissions) !== null && l !== void 0 && (l = l.chatPublic) !== null && l !== void 0 && l.files))) {
                _.next = 9;
                break;
              }
              return R.error("sendImageMessage::permission_denied"), _.abrupt("return");
            case 9:
              if (s) {
                _.next = 12;
                break;
              }
              return R.error("sendImageMessage::required_argument_image_can_not_be_empty"), _.abrupt("return");
            case 12:
              if (h = ["image/gif", "image/jpeg", "image/png"], h.includes(s.type)) {
                _.next = 16;
                break;
              }
              return R.error("sendImageMessage::image_type_not_supported", { dyteChat: { imageType: s.type } }), _.abrupt("return");
            case 16:
              if (_.prev = 16, !o) {
                _.next = 19;
                break;
              }
              return _.abrupt("return");
            case 19:
              if (!(u !== void 0 && u.length > 0)) {
                _.next = 22;
                break;
              }
              return R.error("sendImageMessage::private_chat_unsupported"), _.abrupt("return");
            case 22:
              return _.next = 24, gd(s);
            case 24:
              if (m = _.sent, T = { userId: f(this, B)[B].userId, displayName: f(this, B)[B].name, type: "image", link: m, time: new Date(), id: Kr() }, this.messages.push(T), this.emit("chatUpdate", { action: "add", message: T, messages: this.messages }), this.roomJoined) {
                _.next = 31;
                break;
              }
              throw R.error("DyteChat.sendImageMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"), new $("Can`t sendImageMessage without joining room");
            case 31:
              _.next = 36;
              break;
            case 33:
              throw _.prev = 33, _.t0 = _.catch(16), new $("Error sending image message.");
            case 36:
            case "end":
              return _.stop();
          }
      }, a, this, [[16, 33]]);
    }));
    function i(a, s, u) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "sendFileMessageInternal", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u, o) {
      var c, l, d, v, h, m;
      return p().wrap(function(y) {
        for (; ; )
          switch (y.prev = y.next) {
            case 0:
              if (!(u && u.length > 0)) {
                y.next = 6;
                break;
              }
              if (!(!((d = f(this, B)[B].permissions) !== null && d !== void 0 && d.chatPrivate.canSend) || !((v = f(this, B)[B].permissions) !== null && v !== void 0 && v.chatPrivate.files))) {
                y.next = 4;
                break;
              }
              return R.error("sendFileMessage::private_chat_permission_denied"), y.abrupt("return");
            case 4:
              y.next = 9;
              break;
            case 6:
              if (!(!((c = f(this, B)[B].permissions) !== null && c !== void 0 && (c = c.chatPublic) !== null && c !== void 0 && c.canSend) || !((l = f(this, B)[B].permissions) !== null && l !== void 0 && (l = l.chatPublic) !== null && l !== void 0 && l.files))) {
                y.next = 9;
                break;
              }
              return R.error("sendFileMessage::permission_denied"), y.abrupt("return");
            case 9:
              if (s) {
                y.next = 12;
                break;
              }
              return R.error("sendFileMessage::required_argument_file_can_not_be_empty"), y.abrupt("return");
            case 12:
              if (y.prev = 12, !o) {
                y.next = 15;
                break;
              }
              return y.abrupt("return");
            case 15:
              if (!(u !== void 0 && u.length > 0)) {
                y.next = 18;
                break;
              }
              return R.error("sendFileMessage::private_chat_unsupported"), y.abrupt("return");
            case 18:
              return y.next = 20, gd(s);
            case 20:
              h = y.sent, m = { id: Kr(), userId: f(this, B)[B].userId, displayName: f(this, B)[B].name, type: "file", link: h, name: s.name, size: "size" in s ? s.size : 0, time: new Date() }, this.messages.push(m), this.emit("chatUpdate", { action: "add", message: m, messages: this.messages }), y.next = 29;
              break;
            case 26:
              throw y.prev = 26, y.t0 = y.catch(12), new $("Error sending file message.");
            case 29:
            case "end":
              return y.stop();
          }
      }, a, this, [[12, 26]]);
    }));
    function i(a, s, u) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "sendTextMessage", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              return c.abrupt("return", this.sendTextMessageInternal(s, u));
            case 1:
            case "end":
              return c.stop();
          }
      }, a, this);
    }));
    function i(a, s) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "sendCustomMessage", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
      var o, c, l, d = this, v, h, m, T, y, _, C, D, I, O, q;
      return p().wrap(function(H) {
        for (; ; )
          switch (H.prev = H.next) {
            case 0:
              if (!(u && u.length > 0)) {
                H.next = 6;
                break;
              }
              if (!(!((C = f(this, B)[B].permissions) !== null && C !== void 0 && C.chatPrivate.canSend) || !((D = f(this, B)[B].permissions) !== null && D !== void 0 && D.chatPrivate.files) || !((I = f(this, B)[B].permissions) !== null && I !== void 0 && I.chatPrivate.text))) {
                H.next = 4;
                break;
              }
              return R.error("sendCustomMessage::private_chat_permission_denied"), H.abrupt("return");
            case 4:
              H.next = 9;
              break;
            case 6:
              if (!(!((o = f(this, B)[B].permissions) !== null && o !== void 0 && (o = o.chatPublic) !== null && o !== void 0 && o.canSend) || !((c = f(this, B)[B].permissions) !== null && c !== void 0 && (c = c.chatPublic) !== null && c !== void 0 && c.files) || !((l = f(this, B)[B].permissions) !== null && l !== void 0 && (l = l.chatPublic) !== null && l !== void 0 && l.text))) {
                H.next = 9;
                break;
              }
              return R.error("sendCustomMessage::permission_denied"), H.abrupt("return");
            case 9:
              return O = /* @__PURE__ */ function() {
                var fe = k(/* @__PURE__ */ p().mark(function x(pe) {
                  var Be, Q, dr, nt;
                  return p().wrap(function(U) {
                    for (; ; )
                      switch (U.prev = U.next) {
                        case 0:
                          if (U.prev = 0, typeof pe != "string") {
                            U.next = 3;
                            break;
                          }
                          return U.abrupt("return", pe);
                        case 3:
                          return Be = gi(), U.next = 6, Be.getPresignedUrls(pe.name, f(d, B)[B].config.viewType);
                        case 6:
                          return Q = U.sent, dr = Q.getLocation, nt = Q.putLocation, U.next = 11, Be.uploadFile(pe, nt);
                        case 11:
                          return U.abrupt("return", dr);
                        case 14:
                          throw U.prev = 14, U.t0 = U.catch(0), new $("Error sending image message.");
                        case 17:
                        case "end":
                          return U.stop();
                      }
                  }, x, null, [[0, 14]]);
                }));
                return function(pe) {
                  return fe.apply(this, arguments);
                };
              }(), H.t0 = ie, H.t1 = ie({}, s), H.t2 = {}, H.next = 15, Promise.all((v = (h = s.files) !== null && h !== void 0 ? h : []) === null || v === void 0 ? void 0 : v.map(function(fe) {
                return O(fe);
              }));
            case 15:
              return H.t3 = H.sent, H.next = 18, Promise.all((m = (T = s.images) !== null && T !== void 0 ? T : []) === null || m === void 0 ? void 0 : m.map(/* @__PURE__ */ function() {
                var fe = k(/* @__PURE__ */ p().mark(function x(pe) {
                  return p().wrap(function(Q) {
                    for (; ; )
                      switch (Q.prev = Q.next) {
                        case 0:
                          return Q.abrupt("return", O(pe));
                        case 1:
                        case "end":
                          return Q.stop();
                      }
                  }, x);
                }));
                return function(x) {
                  return fe.apply(this, arguments);
                };
              }()));
            case 18:
              return H.t4 = H.sent, H.next = 21, Promise.all((y = (_ = s.videos) !== null && _ !== void 0 ? _ : []) === null || y === void 0 ? void 0 : y.map(/* @__PURE__ */ function() {
                var fe = k(/* @__PURE__ */ p().mark(function x(pe) {
                  return p().wrap(function(Q) {
                    for (; ; )
                      switch (Q.prev = Q.next) {
                        case 0:
                          return Q.abrupt("return", O(pe));
                        case 1:
                        case "end":
                          return Q.stop();
                      }
                  }, x);
                }));
                return function(x) {
                  return fe.apply(this, arguments);
                };
              }()));
            case 21:
              if (H.t5 = H.sent, H.t6 = { files: H.t3, images: H.t4, videos: H.t5 }, q = (0, H.t0)(H.t1, H.t2, H.t6), !(u !== void 0 && u.length > 0)) {
                H.next = 27;
                break;
              }
              return R.error("sendCustomMessage::private_chat_unsupported"), H.abrupt("return");
            case 27:
              if (this.roomJoined) {
                H.next = 30;
                break;
              }
              throw R.error("DyteChat.sendCustomMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"), new $("Can`t sendCustomMessage without joining room");
            case 30:
              ie(ie({ userId: f(this, B)[B].userId, displayName: f(this, B)[B].name }, q), {}, { type: aO.indexOf(
                "custom"
                /* custom */
              ), time: +new Date() });
            case 31:
            case "end":
              return H.stop();
          }
      }, a, this);
    }));
    function i(a, s) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "sendImageMessage", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              return c.abrupt("return", this.sendImageMessageInternal(s, u));
            case 1:
            case "end":
              return c.stop();
          }
      }, a, this);
    }));
    function i(a, s) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "sendFileMessage", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              return c.abrupt("return", this.sendFileMessageInternal(s, u));
            case 1:
            case "end":
              return c.stop();
          }
      }, a, this);
    }));
    function i(a, s) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "sendMessage", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              return c.abrupt("return", this.sendMessageInternal(s, u));
            case 1:
            case "end":
              return c.stop();
          }
      }, a, this);
    }));
    function i(a, s) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "editTextMessage", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u, o) {
      var c, l, d;
      return p().wrap(function(h) {
        for (; ; )
          switch (h.prev = h.next) {
            case 0:
              if (((c = f(this, B)[B].permissions) === null || c === void 0 || (c = c.chatMessage) === null || c === void 0 ? void 0 : c.canEdit) !== "NONE") {
                h.next = 2;
                break;
              }
              throw new $("Not permitted to edit messages", "0501");
            case 2:
              if (!(!((l = f(this, B)[B].permissions) !== null && l !== void 0 && (l = l.chatPublic) !== null && l !== void 0 && l.canSend) || !((d = f(this, B)[B].permissions) !== null && d !== void 0 && (d = d.chatPublic) !== null && d !== void 0 && d.text))) {
                h.next = 5;
                break;
              }
              return R.error("editTextMessage::permission_denied"), h.abrupt("return");
            case 5:
              u || R.error("editTextMessage::message_can_not_be_empty");
            case 6:
            case "end":
              return h.stop();
          }
      }, a, this);
    }));
    function i(a, s, u) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "editImageMessage", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u, o) {
      var c, l, d;
      return p().wrap(function(h) {
        for (; ; )
          switch (h.prev = h.next) {
            case 0:
              if (!(!((c = f(this, B)[B].permissions) !== null && c !== void 0 && (c = c.chatPublic) !== null && c !== void 0 && c.canSend) || !((l = f(this, B)[B].permissions) !== null && l !== void 0 && (l = l.chatPublic) !== null && l !== void 0 && l.files))) {
                h.next = 3;
                break;
              }
              return R.error("editImageMessage::permission_denied"), h.abrupt("return");
            case 3:
              if (u) {
                h.next = 6;
                break;
              }
              return R.error("editImageMessage::required_argument_image_can_not_be_empty"), h.abrupt("return");
            case 6:
              if (d = ["image/gif", "image/jpeg", "image/png"], d.includes(u.type)) {
                h.next = 10;
                break;
              }
              return R.error("sendImageMessage::image_type_not_supported", { dyteChat: { imageType: u.type } }), h.abrupt("return");
            case 10:
            case "end":
              return h.stop();
          }
      }, a, this);
    }));
    function i(a, s, u) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "editFileMessage", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u, o) {
      var c, l;
      return p().wrap(function(v) {
        for (; ; )
          switch (v.prev = v.next) {
            case 0:
              if (!(!((c = f(this, B)[B].permissions) !== null && c !== void 0 && (c = c.chatPublic) !== null && c !== void 0 && c.canSend) || !((l = f(this, B)[B].permissions) !== null && l !== void 0 && (l = l.chatPublic) !== null && l !== void 0 && l.files))) {
                v.next = 3;
                break;
              }
              return R.error("sendFileMessage::permission_denied"), v.abrupt("return");
            case 3:
              if (u) {
                v.next = 6;
                break;
              }
              return R.error("sendFileMessage::required_argument_file_can_not_be_empty"), v.abrupt("return");
            case 6:
            case "end":
              return v.stop();
          }
      }, a, this);
    }));
    function i(a, s, u) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "editMessage", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u, o) {
      return p().wrap(function(l) {
        for (; ; )
          switch (l.prev = l.next) {
            case 0:
              l.t0 = u.type, l.next = l.t0 === "text" ? 3 : l.t0 === "image" ? 5 : l.t0 === "file" ? 7 : 9;
              break;
            case 3:
              return this.editTextMessage(s, u.message, o), l.abrupt("break", 11);
            case 5:
              return this.editImageMessage(s, u.image, o), l.abrupt("break", 11);
            case 7:
              return this.editFileMessage(s, u.file, o), l.abrupt("break", 11);
            case 9:
              return R.error("editMessage::message_type_not_supported", { dyteChat: { messageType: u.type } }), l.abrupt("break", 11);
            case 11:
            case "end":
              return l.stop();
          }
      }, a, this);
    }));
    function i(a, s, u) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, {
    key: "deleteMessage",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
        var o;
        return p().wrap(function(l) {
          for (; ; )
            switch (l.prev = l.next) {
              case 0:
                if (((o = f(this, B)[B].permissions) === null || o === void 0 || (o = o.chatMessage) === null || o === void 0 ? void 0 : o.canDelete) !== "NONE") {
                  l.next = 2;
                  break;
                }
                throw new $("Not permitted to delete messages", "0501");
              case 2:
              case "end":
                return l.stop();
            }
        }, a, this);
      }));
      function i(a, s) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Returns an array of messages sent by a specific userId.
    * @param userId The user id of the user that sent the message.
    */
  }, {
    key: "getMessagesByUser",
    value: function(i) {
      return this.messages.filter(function(a) {
        return a.userId === i;
      });
    }
    /**
    * Returns an array of 'text', 'image' or 'file' messages.
    * @param type 'text', 'image', or 'file'.
    */
  }, {
    key: "getMessagesByType",
    value: function(i) {
      return this.messages.filter(function(a) {
        return a.type === i;
      });
    }
    /**
    * Pins a chat message
    * @param id ID of the message to be pinned
    */
  }, {
    key: "pin",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s) {
        return p().wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                if (this.roomJoined) {
                  o.next = 2;
                  break;
                }
                throw new $("Can`t pin message without joining room");
              case 2:
                if (f(this, B)[B].permissions.pinParticipant) {
                  o.next = 4;
                  break;
                }
                throw new $("You do not have permission to pin messages.");
              case 4:
              case "end":
                return o.stop();
            }
        }, a, this);
      }));
      function i(a) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Unpins a chat message
    * @param id ID of the message to be unpinned
    */
  }, {
    key: "unpin",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s) {
        return p().wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                if (this.roomJoined) {
                  o.next = 2;
                  break;
                }
                throw new $("Can`t unpin message without joining room");
              case 2:
                if (f(this, B)[B].permissions.pinParticipant) {
                  o.next = 4;
                  break;
                }
                throw new $("You do not have permission to unpin messages.");
              case 4:
              case "end":
                return o.stop();
            }
        }, a, this);
      }));
      function i(a) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Gets chat messages in a paginated manner
    */
  }, { key: "getMessages", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u, o) {
      var c, l, d = arguments;
      return p().wrap(function(h) {
        for (; ; )
          switch (h.prev = h.next) {
            case 0:
              return c = d.length > 3 && d[3] !== void 0 ? d[3] : 0, l = d.length > 4 && d[4] !== void 0 ? d[4] : void 0, h.abrupt("return", { messages: [], next: "" });
            case 3:
            case "end":
              return h.stop();
          }
      }, a);
    }));
    function i(a, s, u) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "createChannel", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
      var o, c, l, d = arguments;
      return p().wrap(function(h) {
        for (; ; )
          switch (h.prev = h.next) {
            case 0:
              if (c = d.length > 2 && d[2] !== void 0 ? d[2] : {}, l = (o = f(this, B)[B].permissions) === null || o === void 0 ? void 0 : o.chatChannel, !l) {
                h.next = 9;
                break;
              }
              if (l.canCreate !== "NONE") {
                h.next = 5;
                break;
              }
              throw new $("Not permitted to create channels", "0501");
            case 5:
              if (!(c.visibility === "public" && !(l.canCreate === "PUBLIC" || l.canCreate === "ALL"))) {
                h.next = 7;
                break;
              }
              throw new $("Not permitted to create public channels", "0501");
            case 7:
              if (!(c.visibility === "private" && !(l.canCreate === "PRIVATE" || l.canCreate === "ALL"))) {
                h.next = 9;
                break;
              }
              throw new $("Not permitted to create private channels", "0501");
            case 9:
              if (!(!s || s.trim().length === 0)) {
                h.next = 11;
                break;
              }
              throw new $("channel name cannot be empty.", "0510");
            case 11:
              return Mt(/* @__PURE__ */ new Set([].concat(Mt(u), [f(this, B)[B].userId]))), h.abrupt("return", {});
            case 13:
            case "end":
              return h.stop();
          }
      }, a, this);
    }));
    function i(a, s) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "updateChannel", value: function(i, a) {
    var s, u, o, c, l, d = this.channels.find(function(h) {
      return h.id === i;
    }), v = (s = f(this, B)[B].permissions) === null || s === void 0 ? void 0 : s.chatChannel;
    if (v) {
      if (v.canUpdate === "NONE")
        throw new $("Not permitted to update channels", "0501");
      if (d.visibility === "public" && !(v.canUpdate === "PUBLIC" || v.canUpdate === "ALL"))
        throw new $("Not permitted to update public channels", "0501");
      if (d.visibility === "private" && !(v.canUpdate === "PRIVATE" || v.canUpdate === "ALL"))
        throw new $("Not permitted to update private channels", "0501");
    }
    return (u = a.memberIds) !== null && u !== void 0 || d.memberIds, (o = a.displayName) !== null && o !== void 0 || d.displayName, (c = a.displayPictureUrl) !== null && c !== void 0 || d.displayPictureUrl, (l = a.visibility) !== null && l !== void 0 || d.visibility, {};
  } }, { key: "sendMessageToChannel", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
      var o, c = arguments;
      return p().wrap(function(d) {
        for (; ; )
          switch (d.prev = d.next) {
            case 0:
              return o = c.length > 2 && c[2] !== void 0 ? c[2] : {}, d.abrupt("return", this.sendMessageInternal(s, null, u, o));
            case 2:
            case "end":
              return d.stop();
          }
      }, a, this);
    }));
    function i(a, s) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "getChannelMembers", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              return o.abrupt("return", []);
            case 1:
            case "end":
              return o.stop();
          }
      }, a);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "searchMessages", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u, o = arguments;
      return p().wrap(function(l) {
        for (; ; )
          switch (l.prev = l.next) {
            case 0:
              if (u = o.length > 1 && o[1] !== void 0 ? o[1] : {}, Oe.hasFeature($e.FEAT_CHAT_SDK_SEARCH)) {
                l.next = 3;
                break;
              }
              throw new $("searchMessages is temporarily disabled!");
            case 3:
              return l.abrupt("return", []);
            case 4:
            case "end":
              return l.stop();
          }
      }, a);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, {
    key: "markLastReadMessage",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
        return p().wrap(function(c) {
          for (; ; )
            switch (c.prev = c.next) {
              case 0:
              case "end":
                return c.stop();
            }
        }, a);
      }));
      function i(a, s) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Returns an array of pinned messages.
    */
  }, { key: "pinned", get: function() {
    return this.messages.filter(function(i) {
      return i.pinned;
    });
  } }]), r;
}(rt));
yr([P.trace("DyteChat.sendTextMessage")], ir.prototype, "sendTextMessage", 1);
yr([P.trace("DyteChat.sendImageMessage")], ir.prototype, "sendImageMessage", 1);
yr([P.trace("DyteChat.sendFileMessage")], ir.prototype, "sendFileMessage", 1);
yr([P.trace("DyteChat.sendMessage")], ir.prototype, "sendMessage", 1);
yr([P.trace("DyteChat.editTextMessage")], ir.prototype, "editTextMessage", 1);
yr([P.trace("DyteChat.editImageMessage")], ir.prototype, "editImageMessage", 1);
yr([P.trace("DyteChat.editFileMessage")], ir.prototype, "editFileMessage", 1);
yr([P.trace("DyteChat.editMessage")], ir.prototype, "editMessage", 1);
yr([P.trace("DyteChat.deleteMessage")], ir.prototype, "deleteMessage", 1);
yr([P.trace("DyteChat.createChannel")], ir.prototype, "createChannel", 1);
yr([P.trace("DyteChat.updateChannel")], ir.prototype, "updateChannel", 1);
yr([P.trace("DyteChat.sendMessageToChannel")], ir.prototype, "sendMessageToChannel", 1);
yr([P.trace("DyteChat.getChannelMembers")], ir.prototype, "getChannelMembers", 1);
yr([P.trace("DyteChat.searchMessages")], ir.prototype, "searchMessages", 1);
yr([P.trace("DyteChat.markLastReadMessage")], ir.prototype, "markLastReadMessage", 1);
ir = yr([lr(function(e) {
  throw new $(e.message, "0500");
})], ir);
var sO = Object.defineProperty, uO = Object.getOwnPropertyDescriptor, oO = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? uO(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && sO(r, n, a), a;
}, to = (vr = /* @__PURE__ */ V("self"), /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n) {
    var i;
    return w(this, r), i = t.call(this), i.items = void 0, Object.defineProperty(M(i), vr, { writable: !0, value: void 0 }), f(M(i), vr)[vr] = n, i.items = [], i;
  }
  return b(r, [{ key: "roomJoined", get: (
    // eslint-disable-next-line class-methods-use-this
    // get #roomNodeClient() {
    // 	return getRoomNodeClient();
    // }
    /**
       * Returns true if the local participant has joined the meeting.
       */
    function() {
      return f(this, vr)[vr].roomJoined === !0;
    }
  ) }, {
    key: "create",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
        var o, c, l, d = arguments;
        return p().wrap(function(h) {
          for (; ; )
            switch (h.prev = h.next) {
              case 0:
                if (o = d.length > 2 && d[2] !== void 0 ? d[2] : !1, c = d.length > 3 && d[3] !== void 0 ? d[3] : !1, !(f(this, vr)[vr].config.viewType !== "LIVESTREAM" && !this.roomJoined)) {
                  h.next = 4;
                  break;
                }
                throw new $("Can't create polls without joining room");
              case 4:
                if (f(this, vr)[vr].permissions.polls.canCreate) {
                  h.next = 7;
                  break;
                }
                return R.error("DytePolls::create::permission_denied"), h.abrupt("return");
              case 7:
                if (!(!s || !u)) {
                  h.next = 10;
                  break;
                }
                return R.error("DytePolls::question_and_options_can_not_be_empty", { dytePolls: { hasQuestion: !!s, optionsLength: u == null ? void 0 : u.length } }), h.abrupt("return");
              case 10:
                if (!(u.length < 2)) {
                  h.next = 13;
                  break;
                }
                return R.error("DytePolls::there_must_be_at_least_two_options", { dytePolls: { hasQuestion: !!s, optionsLength: u.length } }), h.abrupt("return");
              case 13:
                l = { question: s, options: u.map(function(m) {
                  return { text: m, votes: [], count: 0 };
                }), id: Kr(), voted: [], anonymous: o, hideVotes: c, createdBy: f(this, vr)[vr].name, createdByUserId: f(this, vr)[vr].userId }, this.items.push(l);
              case 15:
              case "end":
                return h.stop();
            }
        }, a, this);
      }));
      function i(a, s) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Casts a vote on an existing poll.
    * @param pollId The ID of the poll that is to be voted on.
    * @param index The index of the option.
    */
  }, { key: "vote", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u) {
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              if (f(this, vr)[vr].permissions.polls.canVote) {
                c.next = 3;
                break;
              }
              return R.error("DytePolls::vote::permission_denied"), c.abrupt("return");
            case 3:
              console.log();
            case 4:
            case "end":
              return c.stop();
          }
      }, a, this);
    }));
    function i(a, s) {
      return n.apply(this, arguments);
    }
    return i;
  }() }]), r;
}(rt));
to = oO([lr(function(e) {
  throw new $(e.message, "0700");
})], to);
var cO = Object.defineProperty, lO = Object.getOwnPropertyDescriptor, ka = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? lO(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && cO(r, n, a), a;
}, Zn = (wn = /* @__PURE__ */ V("self"), kn = /* @__PURE__ */ V("update"), /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n) {
    var i;
    return w(this, r), i = t.call(this), Object.defineProperty(M(i), kn, { value: dO }), Object.defineProperty(M(i), wn, { writable: !0, value: void 0 }), i.recordingPeerIds = [], i.recordings = [], f(M(i), wn)[wn] = n, i;
  }
  return b(r, [{ key: "recordingState", get: function() {
    return this.recordings.some(function(i) {
      return i.state === "RECORDING";
    }) ? "RECORDING" : this.recordings.some(function(i) {
      return i.state === "PAUSED";
    }) ? "PAUSED" : this.recordings.some(function(i) {
      return i.state === "STARTING";
    }) ? "STARTING" : this.recordings.some(function(i) {
      return i.state === "STOPPING";
    }) ? "STOPPING" : "IDLE";
  } }, { key: "updateRecordings", value: function(i) {
    this.recordings = i, this.emit("recordingUpdate", this.recordingState);
  } }, { key: "start", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      var u, o, c, l;
      return p().wrap(function(v) {
        for (; ; )
          switch (v.prev = v.next) {
            case 0:
              if (f(this, wn)[wn].permissions.canRecord) {
                v.next = 3;
                break;
              }
              throw R.error("DyteRecording::start::permission_denied"), new $("User does not have permission to start recording");
            case 3:
              if (!((s == null ? void 0 : s.allowMultiple) !== !0 && (this.recordingState === "STARTING" || this.recordingState === "RECORDING" || this.recordingState === "STOPPING"))) {
                v.next = 6;
                break;
              }
              throw R.error("DyteRecording::start::recording_in_progress", { recording: { state: this.recordingState } }), new $("Cant start recording, recordingState irregular: ".concat(this.recordingState));
            case 6:
              return v.prev = 6, u = gi(), o = Te.defaults.recording, c = o === void 0 ? {} : o, v.next = 11, u.startRecording(c, s == null ? void 0 : s.allowMultiple);
            case 11:
              l = v.sent, this.updateRecordings([].concat(Mt(this.recordings), [{ id: l, state: "STARTING" }])), v.next = 19;
              break;
            case 15:
              throw v.prev = 15, v.t0 = v.catch(6), R.error("DyteRecording::stop::recording_failed_to_start", { error: v.t0 }), new $("Error while starting recording");
            case 19:
            case "end":
              return v.stop();
          }
      }, a, this, [[6, 15]]);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "stop", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              return o.next = 2, f(this, kn)[kn]("stop", ["RECORDING", "PAUSED"], s);
            case 2:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "pause", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              return o.next = 2, f(this, kn)[kn]("pause", ["RECORDING"], s);
            case 2:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "resume", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              return o.next = 2, f(this, kn)[kn]("resume", ["PAUSED"], s);
            case 2:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }]), r;
}(rt));
function dO(e, t, r) {
  return no.apply(this, arguments);
}
function no() {
  return no = k(/* @__PURE__ */ p().mark(function e(t, r, n) {
    var i = this, a, s;
    return p().wrap(function(o) {
      for (; ; )
        switch (o.prev = o.next) {
          case 0:
            if (f(this, wn)[wn].permissions.canRecord) {
              o.next = 3;
              break;
            }
            throw R.error("DyteRecording::stop::permission_denied"), new $("User does not have permission to stop recording");
          case 3:
            if (a = [], n === void 0) {
              o.next = 14;
              break;
            }
            if (s = this.recordings.find(function(c) {
              return c.id === n;
            }), s !== void 0) {
              o.next = 8;
              break;
            }
            throw new $("Could not find the specified recording");
          case 8:
            if (!r.includes(s.state)) {
              o.next = 11;
              break;
            }
            return R.error("DyteRecording::stop::recording_not_in_expected_state", { recording: { state: s.state } }), o.abrupt("return");
          case 11:
            a.push(s), o.next = 15;
            break;
          case 14:
            a = this.recordings.filter(function(c) {
              return r.includes(c.state);
            });
          case 15:
            a.forEach(/* @__PURE__ */ function() {
              var c = k(/* @__PURE__ */ p().mark(function l(d) {
                var v, h;
                return p().wrap(function(T) {
                  for (; ; )
                    switch (T.prev = T.next) {
                      case 0:
                        return v = d.state, t === "stop" && (d.state = "STOPPING", i.emit("recordingUpdate", "STOPPING")), T.prev = 2, h = gi(), T.next = 6, h.updateRecording(d.id, t);
                      case 6:
                        T.next = 13;
                        break;
                      case 8:
                        throw T.prev = 8, T.t0 = T.catch(2), R.error("DyteRecording::stop::recording_failed_to_stop", { error: T.t0 }), d.state !== v && (d.state = v, i.emit("recordingUpdate", v)), new $("Error while stopping recording");
                      case 13:
                      case "end":
                        return T.stop();
                    }
                }, l, null, [[2, 8]]);
              }));
              return function(l) {
                return c.apply(this, arguments);
              };
            }());
          case 16:
          case "end":
            return o.stop();
        }
    }, e, this);
  })), no.apply(this, arguments);
}
ka([P.trace("DyteRecording.start")], Zn.prototype, "start", 1);
ka([P.trace("DyteRecording.stop")], Zn.prototype, "stop", 1);
ka([P.trace("DyteRecording.stop")], Zn.prototype, "pause", 1);
ka([P.trace("DyteRecording.stop")], Zn.prototype, "resume", 1);
Zn = ka([lr(function(e) {
  throw new $(e.message, "1000");
})], Zn);
var Bh = /* @__PURE__ */ function() {
  function e() {
    w(this, e);
  }
  return b(e, null, [{ key: "hasFeature", value: function(r) {
    return !1;
  } }, { key: "getFeatureValue", value: function(r) {
    return "";
  } }, { key: "getAllFeatures", value: function() {
    return {};
  } }]), e;
}(), fO = /* @__PURE__ */ function() {
  function e(t, r) {
    w(this, e), this.logger = void 0, this.features = void 0, this.browserSpecs = void 0, this.logger = t, this.features = r, this.browserSpecs = Ve;
  }
  return b(e, null, [{ key: "init", value: function() {
    return new e(R, Bh);
  } }]), e;
}(), pO = Object.defineProperty, hO = Object.getOwnPropertyDescriptor, qh = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? hO(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && pO(r, n, a), a;
}, Gn = /* @__PURE__ */ V("self"), wc = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n) {
    var i;
    return w(this, r), i = t.call(this), Object.defineProperty(M(i), Gn, { writable: !0, value: void 0 }), i.state = "IDLE", i.playbackUrl = void 0, i.viewerCount = void 0, f(M(i), Gn)[Gn] = n, i.viewerCount = 0, i;
  }
  return b(r, [{ key: "setLivestreamState", value: function(i) {
    var a = this.state;
    this.state = i, a !== i && this.emitCurrentLivestreamState();
  } }, { key: "emitCurrentLivestreamState", value: function() {
    this.emit("livestreamUpdate", this.state);
  } }, { key: "start", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s, u;
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              if (f(this, Gn)[Gn].permissions.canLivestream) {
                c.next = 3;
                break;
              }
              throw R.error("DyteLivestream::start::permission_denied"), new $("User does not have permission to start livestreaming");
            case 3:
              return this.setLivestreamState("STARTING"), c.prev = 4, s = gi(), c.next = 8, s.startLivestreaming();
            case 8:
              u = c.sent, this.playbackUrl = u, c.next = 17;
              break;
            case 12:
              throw c.prev = 12, c.t0 = c.catch(4), R.error("DyteRecording::stop::livestream_failed_to_start", { error: c.t0 }), this.setLivestreamState("IDLE"), new $("Error while starting livestream");
            case 17:
            case "end":
              return c.stop();
          }
      }, a, this, [[4, 12]]);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "stop", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (f(this, Gn)[Gn].permissions.canLivestream) {
                o.next = 3;
                break;
              }
              throw R.error("DyteLivestream::stop::permission_denied"), new $("User does not have permission to stop livestreaming");
            case 3:
              if (this.state === "LIVESTREAMING") {
                o.next = 6;
                break;
              }
              throw R.error("DyteLivestream::stop::inconsistent_state"), new $("Livestream not started yet");
            case 6:
              return o.prev = 6, this.setLivestreamState("STOPPING"), s = gi(), o.next = 11, s.stopLivestreaming();
            case 11:
              o.next = 18;
              break;
            case 13:
              throw o.prev = 13, o.t0 = o.catch(6), R.error("DyteLivestream::stop::livestream_failed_to_stop", { error: o.t0 }), this.setLivestreamState("STOPPING"), new $("Error while stopping livestream");
            case 18:
            case "end":
              return o.stop();
          }
      }, a, this, [[6, 13]]);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }]), r;
}(rt);
qh([P.trace("livestream.start")], wc.prototype, "start", 1);
qh([P.trace("livestream.stop")], wc.prototype, "stop", 1);
var vO = Object.defineProperty, mO = Object.getOwnPropertyDescriptor, ai = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? mO(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && vO(r, n, a), a;
}, Y = /* @__PURE__ */ V("self"), Vi = /* @__PURE__ */ V("participants"), Tu = /* @__PURE__ */ V("viewType"), wr = /* @__PURE__ */ V("stageRequests"), ur = /* @__PURE__ */ V("setStatus"), Bi = /* @__PURE__ */ V("useSocketService"), On = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n, i, a) {
    var s;
    return w(this, r), s = t.call(this), Object.defineProperty(M(s), Bi, { value: yO }), Object.defineProperty(M(s), ur, { value: gO }), Object.defineProperty(M(s), Y, { writable: !0, value: void 0 }), Object.defineProperty(M(s), Vi, { writable: !0, value: void 0 }), Object.defineProperty(M(s), Tu, { writable: !0, value: void 0 }), Object.defineProperty(M(s), wr, { writable: !0, value: void 0 }), s.status = "ON_STAGE", s.getSocketStageRequests = /* @__PURE__ */ k(/* @__PURE__ */ p().mark(function u() {
      return p().wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
            case "end":
              return c.stop();
          }
      }, u);
    })), f(M(s), Y)[Y] = n, f(M(s), Vi)[Vi] = i, f(M(s), Tu)[Tu] = a, f(M(s), wr)[wr] = [], s.setupEvents(), s;
  }
  return b(r, [{ key: "setupEvents", value: function() {
    var i = this;
    f(this, Y)[Y].permissions.acceptStageRequests && f(this, Y)[Y].permissions.stageEnabled && this.getSocketStageRequests(), J.onAsync(j.GET_STAGE_REQUESTS, /* @__PURE__ */ function() {
      var a = k(/* @__PURE__ */ p().mark(function s(u) {
        return p().wrap(function(c) {
          for (; ; )
            switch (c.prev = c.next) {
              case 0:
                f(i, wr)[wr] = u;
              case 1:
              case "end":
                return c.stop();
            }
        }, s);
      }));
      return function(s) {
        return a.apply(this, arguments);
      };
    }()), J.onAsync(j.UPDATE_STAGE_REQUESTS, /* @__PURE__ */ function() {
      var a = k(/* @__PURE__ */ p().mark(function s(u) {
        var o, c;
        return p().wrap(function(d) {
          for (; ; )
            switch (d.prev = d.next) {
              case 0:
                o = u.request, c = u.add, c ? f(i, wr)[wr] = [].concat(Mt(f(i, wr)[wr]), [o]) : f(i, wr)[wr] = f(i, wr)[wr].filter(function(v) {
                  return v.peerId !== o.peerId;
                });
              case 2:
              case "end":
                return d.stop();
            }
        }, s);
      }));
      return function(s) {
        return a.apply(this, arguments);
      };
    }());
  } }, { key: "getAccessRequests", value: function() {
    if (!f(this, Y)[Y].permissions.stageEnabled)
      throw R.error("DyteStage::stage_disabled"), new $("Stage is disabled");
    if (!f(this, Y)[Y].permissions.acceptStageRequests)
      throw R.error("DyteStage::get_access_request::permission_denied"), new $("You do not have permission to perform this action/");
    if (f(this, Bi)[Bi]())
      return { stageRequests: f(this, wr)[wr] };
    var i = f(this, Vi)[Vi].joined.toArray().filter(function(a) {
      return a.stageStatus === bn.REQUESTED_TO_JOIN_STAGE;
    }).map(function(a) {
      return { displayName: a.name, userId: a.userId, peerId: a.id };
    });
    return { stageRequests: i };
  } }, { key: "requestAccess", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (f(this, Y)[Y].permissions.stageEnabled) {
                u.next = 3;
                break;
              }
              throw R.error("DyteStage::stage_disabled"), new $("Stage is disabled");
            case 3:
              if (this.status === "OFF_STAGE") {
                u.next = 5;
                break;
              }
              throw new $("Unable to request access you are currently ".concat(this.status));
            case 5:
              if (!f(this, Bi)[Bi]()) {
                u.next = 12;
                break;
              }
              if (f(this, Y)[Y].permissions.stageAccess !== ee.Allowed) {
                u.next = 9;
                break;
              }
              return f(this, ur)[ur]("ACCEPTED_TO_JOIN_STAGE"), u.abrupt("return");
            case 9:
              f(this, ur)[ur]("REQUESTED_TO_JOIN_STAGE"), u.next = 23;
              break;
            case 12:
              if (f(this, Y)[Y].roomJoined) {
                u.next = 14;
                break;
              }
              throw new $("Can`t request to join stage without joining room");
            case 14:
              if (f(this, Y)[Y].permissions.stageAccess !== ee.Allowed) {
                u.next = 17;
                break;
              }
              return f(this, ur)[ur]("ACCEPTED_TO_JOIN_STAGE"), u.abrupt("return");
            case 17:
              if (f(this, Y)[Y].permissions.stageAccess !== ee.NotAllowed) {
                u.next = 20;
                break;
              }
              throw R.error("DyteStage::requestGoToStage::permission_denied"), new $("User does not have permission to go on stage");
            case 20:
              if (this.status === "OFF_STAGE") {
                u.next = 22;
                break;
              }
              return u.abrupt("return");
            case 22:
              try {
                f(this, ur)[ur]("REQUESTED_TO_JOIN_STAGE");
              } catch (o) {
                f(this, ur)[ur]("OFF_STAGE");
              }
            case 23:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "cancelRequestAccess", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (f(this, Y)[Y].permissions.stageEnabled) {
                u.next = 3;
                break;
              }
              throw R.error("DyteStage::stage_disabled"), new $("Stage is disabled");
            case 3:
              if (f(this, Y)[Y].roomJoined) {
                u.next = 5;
                break;
              }
              throw new $("Can`t request to join stage without joining room");
            case 5:
              if (f(this, Y)[Y].stageStatus === bn.REQUESTED_TO_JOIN_STAGE) {
                u.next = 7;
                break;
              }
              return u.abrupt("return");
            case 7:
              f(this, ur)[ur]("OFF_STAGE");
            case 8:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "grantAccess", value: function(i) {
    if (!f(this, Y)[Y].permissions.stageEnabled)
      throw R.error("DyteStage::stage_disabled"), new $("Stage is disabled");
    if (!f(this, Y)[Y].permissions.acceptStageRequests)
      throw R.error("DyteStage::grant_access::permission_denied"), new $("You do not have permission to perform this action/");
    if (!f(this, Y)[Y].roomJoined)
      throw new $("Can`t rejectRequestToJoinStage for participant without joining room");
  } }, { key: "denyAccess", value: function(i) {
    if (!f(this, Y)[Y].permissions.stageEnabled)
      throw R.error("DyteStage::stage_disabled"), new $("Stage is disabled");
    if (!f(this, Y)[Y].permissions.acceptStageRequests)
      throw R.error("DyteStage::deny_access::permission_denied"), new $("You do not have permission to perform this action/");
    if (!f(this, Y)[Y].roomJoined)
      throw new $("Can`t rejectRequestToJoinStage for participant without joining room");
  } }, { key: "join", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (this.status !== "ON_STAGE") {
                u.next = 2;
                break;
              }
              throw new $("You are already on stage.");
            case 2:
              if (!(f(this, Y)[Y].permissions.stageAccess !== ee.Allowed && this.status !== "ACCEPTED_TO_JOIN_STAGE")) {
                u.next = 4;
                break;
              }
              throw new $("Unable to join stage you are currently ".concat(this.status));
            case 4:
              if (f(this, Y)[Y].roomJoined) {
                u.next = 6;
                break;
              }
              throw new $("Can`t join stage without joining room");
            case 6:
              f(this, Y)[Y].emit("stageJoined"), f(this, ur)[ur]("ON_STAGE");
            case 8:
            case "end":
              return u.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, {
    key: "leave",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a() {
        return p().wrap(function(u) {
          for (; ; )
            switch (u.prev = u.next) {
              case 0:
                if (f(this, Y)[Y].permissions.stageEnabled) {
                  u.next = 3;
                  break;
                }
                throw R.error("DyteStage::stage_disabled"), new $("Stage is disabled");
              case 3:
                if (f(this, Y)[Y].roomJoined) {
                  u.next = 5;
                  break;
                }
                throw new $("Can`t leave stage without joining room");
              case 5:
                return u.next = 7, f(this, Y)[Y].disableScreenShare();
              case 7:
                return u.next = 9, f(this, Y)[Y].disableAudio();
              case 9:
                return u.next = 11, f(this, Y)[Y].disableVideo();
              case 11:
                f(this, ur)[ur]("OFF_STAGE");
              case 12:
              case "end":
                return u.stop();
            }
        }, a, this);
      }));
      function i() {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Method to kick a user off the stage
    *
    * `permissions.acceptStageRequests` privilege required
    */
  }, { key: "kick", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (f(this, Y)[Y].permissions.stageEnabled) {
                o.next = 3;
                break;
              }
              throw R.error("DyteStage::stage_disabled"), new $("Stage is disabled");
            case 3:
              if (f(this, Y)[Y].permissions.acceptStageRequests) {
                o.next = 6;
                break;
              }
              throw R.error("DyteStage::kick::permission_denied"), new $("You do not have permissions for kick");
            case 6:
              if (f(this, Y)[Y].roomJoined) {
                o.next = 8;
                break;
              }
              throw new $("Can`t kick participant without joining room");
            case 8:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }]), r;
}(rt);
function gO(e) {
  return io.apply(this, arguments);
}
function io() {
  return io = k(/* @__PURE__ */ p().mark(function e(t) {
    return p().wrap(function(n) {
      for (; ; )
        switch (n.prev = n.next) {
          case 0:
            if (this.status !== t) {
              n.next = 2;
              break;
            }
            return n.abrupt("return");
          case 2:
            return this.status = t, n.next = 5, J.emitAsync(j.SET_STAGE_STATUS, t);
          case 5:
            this.emit("stageStatusUpdate", t);
          case 6:
          case "end":
            return n.stop();
        }
    }, e, this);
  })), io.apply(this, arguments);
}
function yO() {
  return !1;
}
ai([P.trace("DyteStage.getStageRequests")], On.prototype, "getAccessRequests", 1);
ai([P.trace("DyteStage.requestAccess")], On.prototype, "requestAccess", 1);
ai([P.trace("DyteStage.cancelRequestAccess")], On.prototype, "cancelRequestAccess", 1);
ai([P.trace("DyteStage.grantAccess")], On.prototype, "grantAccess", 1);
ai([P.trace("DyteStage.denyAccess")], On.prototype, "denyAccess", 1);
ai([P.trace("DyteStage.joinStage")], On.prototype, "join", 1);
ai([P.trace("DyteStage.leaveStage")], On.prototype, "leave", 1);
var Jr = /* @__PURE__ */ V("self"), Qi = /* @__PURE__ */ V("media"), Wr = /* @__PURE__ */ V("analysing"), qi = /* @__PURE__ */ V("getUserMedia"), TO = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n, i) {
    var a;
    return w(this, r), a = t.call(this), Object.defineProperty(M(a), qi, { value: kO }), Object.defineProperty(M(a), Jr, { writable: !0, value: void 0 }), Object.defineProperty(M(a), Qi, { writable: !0, value: void 0 }), Object.defineProperty(M(a), Wr, { writable: !0, value: void 0 }), f(M(a), Jr)[Jr] = n, f(M(a), Wr)[Wr] = !1, f(M(a), Qi)[Qi] = i, a;
  }
  return b(r, [{ key: "mediaPermission", get: function() {
    return f(this, Jr)[Jr].mediaPermissions.audio;
  } }, { key: "getTrackMetadata", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s, u, o = arguments;
      return p().wrap(function(l) {
        for (; ; )
          switch (l.prev = l.next) {
            case 0:
              if (s = o.length > 0 && o[0] !== void 0 ? o[0] : !1, Xt.track) {
                l.next = 8;
                break;
              }
              if (s) {
                l.next = 4;
                break;
              }
              return l.abrupt("return", null);
            case 4:
              return l.next = 6, f(this, qi)[qi]();
            case 6:
              u = l.sent, Xt.setTrack(u);
            case 8:
              return l.abrupt("return", Xt.getTrackMetadata());
            case 9:
            case "end":
              return l.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "startTrackAnalysis", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s, u, o, c = arguments;
      return p().wrap(function(d) {
        for (; ; )
          switch (d.prev = d.next) {
            case 0:
              if (s = c.length > 0 && c[0] !== void 0 ? c[0] : !1, !f(this, Wr)[Wr]) {
                d.next = 3;
                break;
              }
              return d.abrupt("return", !0);
            case 3:
              return f(this, Wr)[Wr] = !0, d.next = 6, Xt.startTrackAnalysis();
            case 6:
              if (u = d.sent, !(!u && s)) {
                d.next = 15;
                break;
              }
              return d.next = 10, f(this, qi)[qi]();
            case 10:
              return o = d.sent, Xt.setTrack(o), d.next = 14, Xt.startTrackAnalysis();
            case 14:
              u = d.sent;
            case 15:
              return u || (f(this, Wr)[Wr] = !1), d.abrupt("return", u);
            case 17:
            case "end":
              return d.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "stopTrackAnalysis", value: function() {
    return f(this, Wr)[Wr] && (f(this, Wr)[Wr] = !1, Xt.stopTrackAnalysis()), !0;
  } }]), r;
}(ln);
function kO() {
  return ao.apply(this, arguments);
}
function ao() {
  return ao = k(/* @__PURE__ */ p().mark(function e() {
    var t, r, n, i, a;
    return p().wrap(function(u) {
      for (; ; )
        switch (u.prev = u.next) {
          case 0:
            return u.prev = 0, r = f(this, Jr)[Jr].getCurrentDevices(), n = r == null || (t = r.audio) === null || t === void 0 ? void 0 : t.deviceId, u.next = 5, f(this, Qi)[Qi].getAudioTrack(!1, n);
          case 5:
            return i = u.sent, f(this, Jr)[Jr].mediaPermissions.audio = "ACCEPTED", J.emit(j.MEDIA_PERMISSION_UPDATE, { message: f(this, Jr)[Jr].mediaPermissions.audio, kind: "audio" }), u.abrupt("return", i);
          case 11:
            throw u.prev = 11, u.t0 = u.catch(0), a = Os("audio", u.t0.name, u.t0.message), f(this, Jr)[Jr].mediaPermissions.audio = a, J.emit(j.MEDIA_PERMISSION_ERROR, { message: a, constraints: u.t0.constraints, kind: "audio" }), new $("Failed to fetch audio track", "1700");
          case 17:
          case "end":
            return u.stop();
        }
    }, e, this, [[0, 11]]);
  })), ao.apply(this, arguments);
}
var ku = /* @__PURE__ */ V("analyseSendTransport"), wu = /* @__PURE__ */ V("analyseRecvTransport"), ca = /* @__PURE__ */ V("analyseTransportData"), bc = /* @__PURE__ */ function() {
  function e() {
    var t = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 1e3;
    w(this, e), Object.defineProperty(this, wu, { value: bO }), Object.defineProperty(this, ku, { value: wO }), this.sendTransport = void 0, this.recvTransport = void 0, this.collectStpStats = void 0, this.collectRtpStats = void 0, this.pingInterval = void 0, this.pingInterval = t;
  }
  return b(e, [{ key: "initSendTransport", value: function(r) {
    this.sendTransport = r, J.emit(j.SEND_TRANSPORT_CREATED);
  } }, { key: "initRecvTransport", value: function(r) {
    this.recvTransport = r, J.emit(j.RECV_TRANSPORT_CREATED);
  } }, { key: "collectSendTransportStats", value: function() {
    return !this.sendTransport || this.collectStpStats ? !1 : (this.collectStpStats = setInterval(f(this, ku)[ku].bind(this), this.pingInterval), !0);
  } }, { key: "collectRecvTransportStats", value: function() {
    return !this.recvTransport || this.collectRtpStats ? !1 : (this.collectRtpStats = setInterval(f(this, wu)[wu].bind(this), this.pingInterval), !0);
  } }, { key: "stopStatsCollection", value: function(r) {
    return r === "send" ? (clearInterval(this.collectStpStats), this.collectStpStats = void 0, !0) : r === "receive" ? (clearInterval(this.collectRtpStats), this.collectRtpStats = void 0, !0) : !1;
  } }, { key: "cleanup", value: function(r) {
    this.stopStatsCollection(r), r === "send" ? (this.sendTransport = void 0, this.collectStpStats = void 0, J.emit(j.SEND_TRANSPORT_CLOSED)) : (this.recvTransport = void 0, this.collectRtpStats = void 0, J.emit(j.RECV_TRANSPORT_CLOSED));
  } }]), e;
}();
po = bc;
function wO() {
  this.sendTransport || this.stopStatsCollection("send"), this.sendTransport.getStats().then(function(e) {
    return f(po, ca)[ca](e, "send");
  });
}
function bO() {
  this.recvTransport || this.stopStatsCollection("receive"), this.recvTransport.getStats().then(function(e) {
    return f(po, ca)[ca](e, "receive");
  });
}
function _O(e, t) {
  e.forEach(function(r) {
    r.type === "candidate-pair" && J.emit(j.CANDIDATE_PEER_UPDATE, ie(ie({}, r), {}, { transport: t })), r.type === "inbound-rtp" && J.emit(j.INBOUND_RTP_UPDATE, ie(ie({}, r), {}, { transport: t })), r.type === "outbound-rtp" && J.emit(j.OUTBOUND_RTP_UPDATE, ie(ie({}, r), {}, { transport: t }));
  });
}
Object.defineProperty(bc, ca, { value: _O });
var Ca = new bc(), gt = /* @__PURE__ */ V("analysing"), EO = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    var n;
    return w(this, r), n = t.call(this), Object.defineProperty(M(n), gt, { writable: !0, value: void 0 }), f(M(n), gt)[gt] = !1, n;
  }
  return b(r, [{ key: "getNetworkMetadata", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      return p().wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              return u.abrupt("return", {});
            case 1:
            case "end":
              return u.stop();
          }
      }, a);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "startNetworkAnalysis", value: function() {
    return f(this, gt)[gt] = Ca.collectSendTransportStats() && Ca.collectRecvTransportStats(), f(this, gt)[gt];
  } }, { key: "stopNetworkAnalysis", value: function() {
    return f(this, gt)[gt] = !(Ca.stopStatsCollection("send") && Ca.stopStatsCollection("receive")), f(this, gt)[gt];
  } }]), r;
}(ln), Yt = /* @__PURE__ */ V("self"), He = /* @__PURE__ */ V("analysing"), AO = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n) {
    var i;
    return w(this, r), i = t.call(this), Object.defineProperty(M(i), Yt, { writable: !0, value: void 0 }), Object.defineProperty(M(i), He, { writable: !0, value: void 0 }), f(M(i), Yt)[Yt] = n, f(M(i), He)[He] = { audio: !1, video: !1 }, i;
  }
  return b(r, [{ key: "mediaPermission", get: function() {
    return f(this, Yt)[Yt].mediaPermissions.screenshare;
  } }, { key: "getAudioTrackMetaData", value: function() {
    var i;
    return (i = f(this, Yt)[Yt].screenShareTracks) !== null && i !== void 0 && i.audio ? Yi.getTrackMetadata() : null;
  } }, { key: "getVideoTrackMetaData", value: function() {
    var i;
    return (i = f(this, Yt)[Yt].screenShareTracks) !== null && i !== void 0 && i.video ? Zi.getTrackMetadata() : null;
  } }, { key: "startAudioTrackAnalysis", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (!f(this, He)[He].audio) {
                o.next = 2;
                break;
              }
              return o.abrupt("return", !0);
            case 2:
              return o.next = 4, Yi.startTrackAnalysis();
            case 4:
              return s = o.sent, f(this, He)[He].audio = s, o.abrupt("return", f(this, He)[He].audio);
            case 7:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "startVideoTrackAnalysis", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (!f(this, He)[He].video) {
                o.next = 2;
                break;
              }
              return o.abrupt("return", !0);
            case 2:
              return o.next = 4, Zi.startTrackAnalysis();
            case 4:
              return s = o.sent, f(this, He)[He].video = s, o.abrupt("return", f(this, He)[He].video);
            case 7:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "stopAudioTrackAnalysis", value: function() {
    return f(this, He)[He] && (f(this, He)[He].audio = !1, Yi.stopTrackAnalysis()), !0;
  } }, { key: "stopVideoTrackAnalysis", value: function() {
    return f(this, He)[He] && (f(this, He)[He].video = !1, Zi.stopTrackAnalysis()), !0;
  } }]), r;
}(ln), _r = /* @__PURE__ */ V("self"), xi = /* @__PURE__ */ V("media"), br = /* @__PURE__ */ V("analysing"), jr = /* @__PURE__ */ V("analysingPreview"), bu = /* @__PURE__ */ V("getUserMedia"), RO = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n, i) {
    var a;
    return w(this, r), a = t.call(this), Object.defineProperty(M(a), bu, { value: SO }), Object.defineProperty(M(a), _r, { writable: !0, value: void 0 }), Object.defineProperty(M(a), xi, { writable: !0, value: void 0 }), Object.defineProperty(M(a), br, { writable: !0, value: void 0 }), Object.defineProperty(M(a), jr, { writable: !0, value: void 0 }), a.preview = void 0, f(M(a), _r)[_r] = n, f(M(a), xi)[xi] = i, f(M(a), br)[br] = !1, f(M(a), jr)[jr] = !1, a;
  }
  return b(r, [{ key: "mediaPermission", get: function() {
    return f(this, _r)[_r].mediaPermissions.video;
  } }, { key: "getTrackMetadata", value: function() {
    return f(this, _r)[_r].videoTrack ? null : st.getTrackMetadata();
  } }, { key: "startTrackAnalysis", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s, u, o, c = arguments;
      return p().wrap(function(d) {
        for (; ; )
          switch (d.prev = d.next) {
            case 0:
              if (s = c.length > 0 && c[0] !== void 0 ? c[0] : { preview: !1 }, u = s.preview, !f(this, br)[br]) {
                d.next = 3;
                break;
              }
              return d.abrupt("return", !0);
            case 3:
              return d.next = 5, st.startTrackAnalysis();
            case 5:
              if (o = d.sent, o) {
                d.next = 8;
                break;
              }
              return d.abrupt("return", !1);
            case 8:
              return (u || this.preview) && (f(this, jr)[jr] = !0), f(this, br)[br] = !0, d.abrupt("return", !0);
            case 11:
            case "end":
              return d.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "stopTrackAnalysis", value: function() {
    f(this, br)[br] && (st.stopTrackAnalysis(), f(this, br)[br] = !1, f(this, jr)[jr] && (f(this, jr)[jr] = !1));
  } }, { key: "startPreview", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              if (s = st.track, s) {
                o.next = 5;
                break;
              }
              return o.next = 4, f(this, bu)[bu]();
            case 4:
              s = o.sent;
            case 5:
              if (!this.preview) {
                o.next = 7;
                break;
              }
              return o.abrupt("return", s);
            case 7:
              return st.setTrack(s), this.preview = !0, st.preview = !0, o.abrupt("return", s);
            case 11:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "stopPreview", value: function() {
    f(this, br)[br] && f(this, jr)[jr] && this.stopTrackAnalysis(), this.preview = !1, st.preview = !1, st.cleanup();
  } }, { key: "cleanup", value: function() {
    f(this, br)[br] && f(this, jr)[jr] && this.stopTrackAnalysis(), this.preview = !1, st.preview = !1;
  } }]), r;
}(ln);
function SO() {
  return so.apply(this, arguments);
}
function so() {
  return so = k(/* @__PURE__ */ p().mark(function e() {
    var t, r, n, i, a;
    return p().wrap(function(u) {
      for (; ; )
        switch (u.prev = u.next) {
          case 0:
            return u.prev = 0, r = f(this, _r)[_r].getCurrentDevices(), n = r == null || (t = r.video) === null || t === void 0 ? void 0 : t.deviceId, u.next = 5, f(this, xi)[xi].getVideoTrack(n);
          case 5:
            return i = u.sent, f(this, _r)[_r].mediaPermissions.video = "ACCEPTED", J.emit(j.MEDIA_PERMISSION_UPDATE, { message: f(this, _r)[_r].mediaPermissions.video, kind: "video" }), u.abrupt("return", i);
          case 11:
            throw u.prev = 11, u.t0 = u.catch(0), a = Os("video", u.t0.name, u.t0.message), f(this, _r)[_r].mediaPermissions.video = a, J.emit(j.MEDIA_PERMISSION_ERROR, { message: a, constraints: u.t0.constraints, kind: "video" }), new $("Failed to fetch video track", "1700");
          case 17:
          case "end":
            return u.stop();
        }
    }, e, this, [[0, 11]]);
  })), so.apply(this, arguments);
}
var PO = /* @__PURE__ */ b(function e(t) {
  w(this, e), this.audio = void 0, this.video = void 0, this.screenshare = void 0, this.network = void 0;
  var r = new yc();
  this.audio = new TO(t, r), this.video = new RO(t, r), this.screenshare = new AO(t), this.network = new EO();
});
function CO(e) {
  var t = "", r = [""], n = [r], i = 0, a = 0, s = !0, u, o = or(e), c;
  try {
    for (o.s(); !(c = o.n()).done; )
      u = c.value, u === '"' ? (s && u === t && (r[i] += u), s = !s) : u === "," && s ? u = r[++i] = "" : u === `
` && s ? (t === "\r" && (r[i] = r[i].slice(0, -1)), r = n[++a] = [u = ""], i = 0) : r[i] += u, t = u;
  } catch (l) {
    o.e(l);
  } finally {
    o.f();
  }
  return n;
}
var IO = Object.defineProperty, DO = Object.getOwnPropertyDescriptor, _c = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? DO(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && IO(r, n, a), a;
}, _n = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    var n;
    return w(this, r), n = t.call(this), n.transcripts = void 0, n.transcripts = [], n;
  }
  return b(r, [{ key: "getActiveTranscript", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a() {
      var s, u, o;
      return p().wrap(function(l) {
        for (; ; )
          switch (l.prev = l.next) {
            case 0:
              return l.prev = 0, s = gi(), l.next = 4, s.getActiveTranscript();
            case 4:
              u = l.sent, o = u.transcript, this.transcripts = _n.parseTranscripts(o), l.next = 11;
              break;
            case 9:
              l.prev = 9, l.t0 = l.catch(0);
            case 11:
            case "end":
              return l.stop();
          }
      }, a, this, [[0, 9]]);
    }));
    function i() {
      return n.apply(this, arguments);
    }
    return i;
  }() }, { key: "onTranscript", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s) {
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              this.transcripts.push(s), this.emit("transcript", s);
            case 2:
            case "end":
              return o.stop();
          }
      }, a, this);
    }));
    function i(a) {
      return n.apply(this, arguments);
    }
    return i;
  }() }], [{
    key: "init",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s) {
        var u;
        return p().wrap(function(c) {
          for (; ; )
            switch (c.prev = c.next) {
              case 0:
                if (u = new _n(), c.prev = 1, !s) {
                  c.next = 5;
                  break;
                }
                return c.next = 5, u.getActiveTranscript();
              case 5:
                c.next = 10;
                break;
              case 7:
                c.prev = 7, c.t0 = c.catch(1), R.error("Error fetching active transcriptions ", c.t0);
              case 10:
                return c.abrupt("return", u);
              case 11:
              case "end":
                return c.stop();
            }
        }, a, null, [[1, 7]]);
      }));
      function i(a) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Parse a single line transcript
    */
  }, {
    key: "parseTranscript",
    value: function(i) {
      try {
        if (!i)
          return;
        var a = CO(i), s = Ne(a, 1), u = Ne(s[0], 6), o = u[0], c = u[1], l = u[2], d = u[3], v = u[4], h = u[5], m = { id: Kr(), name: v, peerId: c, userId: l, customParticipantId: d, transcript: h, isPartialTranscript: !1, date: new Date(parseInt(o, 10) * 1e3) };
        return m;
      } catch (T) {
        R.error("Failed to parse transcript: ".concat(i), T);
        return;
      }
    }
    /**
    * Parse a multi-line transcript
    */
  }, { key: "parseTranscripts", value: function(i) {
    return i ? i.split(`
`).map(_n.parseTranscript).filter(Boolean) : [];
  } }]), r;
}(rt);
_c([P.trace("DyteAi.getActiveTranscript")], _n.prototype, "getActiveTranscript", 1);
_c([P.trace("DyteAi.onTranscript")], _n.prototype, "onTranscript", 1);
_n = _c([lr(function(e) {
  throw new $(e.message, "0000");
})], _n);
function Ec(e) {
  var t = typeof e;
  if (t == "object") {
    if (Array.isArray(e))
      return "array";
    if (e === null)
      return "null";
  }
  return t;
}
function MO(e) {
  return e !== null && typeof e == "object" && !Array.isArray(e);
}
var Qt = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""), Ls = [];
for (var Ia = 0; Ia < Qt.length; Ia++)
  Ls[Qt[Ia].charCodeAt(0)] = Ia;
Ls["-".charCodeAt(0)] = Qt.indexOf("+");
Ls["_".charCodeAt(0)] = Qt.indexOf("/");
function OO(e) {
  var t = e.length * 3 / 4;
  e[e.length - 2] == "=" ? t -= 2 : e[e.length - 1] == "=" && (t -= 1);
  for (var r = new Uint8Array(t), n = 0, i = 0, a, s = 0, u = 0; u < e.length; u++) {
    if (a = Ls[e.charCodeAt(u)], a === void 0)
      switch (e[u]) {
        case "=":
          i = 0;
        case `
`:
        case "\r":
        case "	":
        case " ":
          continue;
        default:
          throw Error("invalid base64 string.");
      }
    switch (i) {
      case 0:
        s = a, i = 1;
        break;
      case 1:
        r[n++] = s << 2 | (a & 48) >> 4, s = a, i = 2;
        break;
      case 2:
        r[n++] = (s & 15) << 4 | (a & 60) >> 2, s = a, i = 3;
        break;
      case 3:
        r[n++] = (s & 3) << 6 | a, i = 0;
        break;
    }
  }
  if (i == 1)
    throw Error("invalid base64 string.");
  return r.subarray(0, n);
}
function $O(e) {
  for (var t = "", r = 0, n, i = 0, a = 0; a < e.length; a++)
    switch (n = e[a], r) {
      case 0:
        t += Qt[n >> 2], i = (n & 3) << 4, r = 1;
        break;
      case 1:
        t += Qt[i | n >> 4], i = (n & 15) << 2, r = 2;
        break;
      case 2:
        t += Qt[i | n >> 6], t += Qt[n & 63], r = 0;
        break;
    }
  return r && (t += Qt[i], t += "=", r == 1 && (t += "=")), t;
}
var Qa;
(function(e) {
  e.symbol = Symbol.for("protobuf-ts/unknown"), e.onRead = function(r, n, i, a, s) {
    var u = t(n) ? n[e.symbol] : n[e.symbol] = [];
    u.push({ no: i, wireType: a, data: s });
  }, e.onWrite = function(r, n, i) {
    var a = or(e.list(n)), s;
    try {
      for (a.s(); !(s = a.n()).done; ) {
        var u = s.value, o = u.no, c = u.wireType, l = u.data;
        i.tag(o, c).raw(l);
      }
    } catch (d) {
      a.e(d);
    } finally {
      a.f();
    }
  }, e.list = function(r, n) {
    if (t(r)) {
      var i = r[e.symbol];
      return n ? i.filter(function(a) {
        return a.no == n;
      }) : i;
    }
    return [];
  }, e.last = function(r, n) {
    return e.list(r, n).slice(-1)[0];
  };
  var t = function(n) {
    return n && Array.isArray(n[e.symbol]);
  };
})(Qa || (Qa = {}));
var Xe;
(function(e) {
  e[e.Varint = 0] = "Varint", e[e.Bit64 = 1] = "Bit64", e[e.LengthDelimited = 2] = "LengthDelimited", e[e.StartGroup = 3] = "StartGroup", e[e.EndGroup = 4] = "EndGroup", e[e.Bit32 = 5] = "Bit32";
})(Xe || (Xe = {}));
function NO() {
  for (var e = 0, t = 0, r = 0; r < 28; r += 7) {
    var n = this.buf[this.pos++];
    if (e |= (n & 127) << r, !(n & 128))
      return this.assertBounds(), [e, t];
  }
  var i = this.buf[this.pos++];
  if (e |= (i & 15) << 28, t = (i & 112) >> 4, !(i & 128))
    return this.assertBounds(), [e, t];
  for (var a = 3; a <= 31; a += 7) {
    var s = this.buf[this.pos++];
    if (t |= (s & 127) << a, !(s & 128))
      return this.assertBounds(), [e, t];
  }
  throw new Error("invalid varint");
}
function _u(e, t, r) {
  for (var n = 0; n < 28; n = n + 7) {
    var i = e >>> n, a = !(!(i >>> 7) && t == 0), s = (a ? i | 128 : i) & 255;
    if (r.push(s), !a)
      return;
  }
  var u = e >>> 28 & 15 | (t & 7) << 4, o = !!(t >> 3);
  if (r.push((o ? u | 128 : u) & 255), !!o) {
    for (var c = 3; c < 31; c = c + 7) {
      var l = t >>> c, d = !!(l >>> 7), v = (d ? l | 128 : l) & 255;
      if (r.push(v), !d)
        return;
    }
    r.push(t >>> 31 & 1);
  }
}
var Va = (1 << 16) * (1 << 16);
function Gh(e) {
  var t = e[0] == "-";
  t && (e = e.slice(1));
  var r = 1e6, n = 0, i = 0;
  function a(s, u) {
    var o = Number(e.slice(s, u));
    i *= r, n = n * r + o, n >= Va && (i = i + (n / Va | 0), n = n % Va);
  }
  return a(-24, -18), a(-18, -12), a(-12, -6), a(-6), [t, n, i];
}
function uo(e, t) {
  if (t >>> 0 <= 2097151)
    return "" + (Va * t + (e >>> 0));
  var r = e & 16777215, n = (e >>> 24 | t << 8) >>> 0 & 16777215, i = t >> 16 & 65535, a = r + n * 6777216 + i * 6710656, s = n + i * 8147497, u = i * 2, o = 1e7;
  a >= o && (s += Math.floor(a / o), a %= o), s >= o && (u += Math.floor(s / o), s %= o);
  function c(l, d) {
    var v = l ? String(l) : "";
    return d ? "0000000".slice(v.length) + v : v;
  }
  return c(
    u,
    /*needLeadingZeros=*/
    0
  ) + c(
    s,
    /*needLeadingZeros=*/
    u
  ) + // If the final 1e7 digit didn't need leading zeros, we would have
  // returned via the trivial code path at the top.
  c(
    a,
    /*needLeadingZeros=*/
    1
  );
}
function yd(e, t) {
  if (e >= 0) {
    for (; e > 127; )
      t.push(e & 127 | 128), e = e >>> 7;
    t.push(e);
  } else {
    for (var r = 0; r < 9; r++)
      t.push(e & 127 | 128), e = e >> 7;
    t.push(1);
  }
}
function LO() {
  var e = this.buf[this.pos++], t = e & 127;
  if (!(e & 128))
    return this.assertBounds(), t;
  if (e = this.buf[this.pos++], t |= (e & 127) << 7, !(e & 128))
    return this.assertBounds(), t;
  if (e = this.buf[this.pos++], t |= (e & 127) << 14, !(e & 128))
    return this.assertBounds(), t;
  if (e = this.buf[this.pos++], t |= (e & 127) << 21, !(e & 128))
    return this.assertBounds(), t;
  e = this.buf[this.pos++], t |= (e & 15) << 28;
  for (var r = 5; e & 128 && r < 10; r++)
    e = this.buf[this.pos++];
  if (e & 128)
    throw new Error("invalid varint");
  return this.assertBounds(), t >>> 0;
}
var Me;
function UO() {
  var e = new DataView(new ArrayBuffer(8)), t = globalThis.BigInt !== void 0 && typeof e.getBigInt64 == "function" && typeof e.getBigUint64 == "function" && typeof e.setBigInt64 == "function" && typeof e.setBigUint64 == "function";
  Me = t ? { MIN: BigInt("-9223372036854775808"), MAX: BigInt("9223372036854775807"), UMIN: BigInt("0"), UMAX: BigInt("18446744073709551615"), C: BigInt, V: e } : void 0;
}
UO();
function Hh(e) {
  if (!e)
    throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support");
}
var Wh = /^-?[0-9]+$/, xa = 4294967296, Da = 2147483648, jh = /* @__PURE__ */ function() {
  function e(t, r) {
    w(this, e), this.lo = t | 0, this.hi = r | 0;
  }
  return b(e, [{
    key: "isZero",
    value: function() {
      return this.lo == 0 && this.hi == 0;
    }
    /**
    * Convert to a native number.
    */
  }, { key: "toNumber", value: function() {
    var r = this.hi * xa + (this.lo >>> 0);
    if (!Number.isSafeInteger(r))
      throw new Error("cannot convert to safe number");
    return r;
  } }]), e;
}(), pt = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.apply(this, arguments);
  }
  return b(r, [{
    key: "toString",
    value: (
      /**
      * Convert to decimal string.
      */
      function() {
        return Me ? this.toBigInt().toString() : uo(this.lo, this.hi);
      }
    )
    /**
    * Convert to native bigint.
    */
  }, { key: "toBigInt", value: function() {
    return Hh(Me), Me.V.setInt32(0, this.lo, !0), Me.V.setInt32(4, this.hi, !0), Me.V.getBigUint64(0, !0);
  } }], [{ key: "from", value: (
    /**
    * Create instance from a `string`, `number` or `bigint`.
    */
    function(i) {
      if (Me)
        switch (typeof i) {
          case "string":
            if (i == "0")
              return this.ZERO;
            if (i == "")
              throw new Error("string is no integer");
            i = Me.C(i);
          case "number":
            if (i === 0)
              return this.ZERO;
            i = Me.C(i);
          case "bigint":
            if (!i)
              return this.ZERO;
            if (i < Me.UMIN)
              throw new Error("signed value for ulong");
            if (i > Me.UMAX)
              throw new Error("ulong too large");
            return Me.V.setBigUint64(0, i, !0), new r(Me.V.getInt32(0, !0), Me.V.getInt32(4, !0));
        }
      else
        switch (typeof i) {
          case "string":
            if (i == "0")
              return this.ZERO;
            if (i = i.trim(), !Wh.test(i))
              throw new Error("string is no integer");
            var a = Gh(i), s = Ne(a, 3), u = s[0], o = s[1], c = s[2];
            if (u)
              throw new Error("signed value for ulong");
            return new r(o, c);
          case "number":
            if (i == 0)
              return this.ZERO;
            if (!Number.isSafeInteger(i))
              throw new Error("number is no integer");
            if (i < 0)
              throw new Error("signed value for ulong");
            return new r(i, i / xa);
        }
      throw new Error("unknown value " + typeof i);
    }
  ) }]), r;
}(jh);
pt.ZERO = new pt(0, 0);
var Qe = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.apply(this, arguments);
  }
  return b(r, [{
    key: "isNegative",
    value: (
      /**
      * Do we have a minus sign?
      */
      function() {
        return (this.hi & Da) !== 0;
      }
    )
    /**
    * Negate two's complement.
    * Invert all the bits and add one to the result.
    */
  }, {
    key: "negate",
    value: function() {
      var i = ~this.hi, a = this.lo;
      return a ? a = ~a + 1 : i += 1, new r(a, i);
    }
    /**
    * Convert to decimal string.
    */
  }, {
    key: "toString",
    value: function() {
      if (Me)
        return this.toBigInt().toString();
      if (this.isNegative()) {
        var i = this.negate();
        return "-" + uo(i.lo, i.hi);
      }
      return uo(this.lo, this.hi);
    }
    /**
    * Convert to native bigint.
    */
  }, { key: "toBigInt", value: function() {
    return Hh(Me), Me.V.setInt32(0, this.lo, !0), Me.V.setInt32(4, this.hi, !0), Me.V.getBigInt64(0, !0);
  } }], [{ key: "from", value: (
    /**
    * Create instance from a `string`, `number` or `bigint`.
    */
    function(i) {
      if (Me)
        switch (typeof i) {
          case "string":
            if (i == "0")
              return this.ZERO;
            if (i == "")
              throw new Error("string is no integer");
            i = Me.C(i);
          case "number":
            if (i === 0)
              return this.ZERO;
            i = Me.C(i);
          case "bigint":
            if (!i)
              return this.ZERO;
            if (i < Me.MIN)
              throw new Error("signed long too small");
            if (i > Me.MAX)
              throw new Error("signed long too large");
            return Me.V.setBigInt64(0, i, !0), new r(Me.V.getInt32(0, !0), Me.V.getInt32(4, !0));
        }
      else
        switch (typeof i) {
          case "string":
            if (i == "0")
              return this.ZERO;
            if (i = i.trim(), !Wh.test(i))
              throw new Error("string is no integer");
            var a = Gh(i), s = Ne(a, 3), u = s[0], o = s[1], c = s[2];
            if (u) {
              if (c > Da || c == Da && o != 0)
                throw new Error("signed long too small");
            } else if (c >= Da)
              throw new Error("signed long too large");
            var l = new r(o, c);
            return u ? l.negate() : l;
          case "number":
            if (i == 0)
              return this.ZERO;
            if (!Number.isSafeInteger(i))
              throw new Error("number is no integer");
            return i > 0 ? new r(i, i / xa) : new r(-i, -i / xa).negate();
        }
      throw new Error("unknown value " + typeof i);
    }
  ) }]), r;
}(jh);
Qe.ZERO = new Qe(0, 0);
var Td = { readUnknownField: !0, readerFactory: function(t) {
  return new VO(t);
} };
function FO(e) {
  return e ? Object.assign(Object.assign({}, Td), e) : Td;
}
var VO = /* @__PURE__ */ function() {
  function e(t, r) {
    w(this, e), this.varint64 = NO, this.uint32 = LO, this.buf = t, this.len = t.length, this.pos = 0, this.view = new DataView(t.buffer, t.byteOffset, t.byteLength), this.textDecoder = r != null ? r : new TextDecoder("utf-8", { fatal: !0, ignoreBOM: !0 });
  }
  return b(e, [{
    key: "tag",
    value: function() {
      var r = this.uint32(), n = r >>> 3, i = r & 7;
      if (n <= 0 || i < 0 || i > 5)
        throw new Error("illegal tag: field no " + n + " wire type " + i);
      return [n, i];
    }
    /**
    * Skip one element on the wire and return the skipped data.
    * Supports WireType.StartGroup since v2.0.0-alpha.23.
    */
  }, {
    key: "skip",
    value: function(r) {
      var n = this.pos;
      switch (r) {
        case Xe.Varint:
          for (; this.buf[this.pos++] & 128; )
            ;
          break;
        case Xe.Bit64:
          this.pos += 4;
        case Xe.Bit32:
          this.pos += 4;
          break;
        case Xe.LengthDelimited:
          var i = this.uint32();
          this.pos += i;
          break;
        case Xe.StartGroup:
          for (var a; (a = this.tag()[1]) !== Xe.EndGroup; )
            this.skip(a);
          break;
        default:
          throw new Error("cant skip wire type " + r);
      }
      return this.assertBounds(), this.buf.subarray(n, this.pos);
    }
    /**
    * Throws error if position in byte array is out of range.
    */
  }, {
    key: "assertBounds",
    value: function() {
      if (this.pos > this.len)
        throw new RangeError("premature EOF");
    }
    /**
    * Read a `int32` field, a signed 32 bit varint.
    */
  }, {
    key: "int32",
    value: function() {
      return this.uint32() | 0;
    }
    /**
    * Read a `sint32` field, a signed, zigzag-encoded 32-bit varint.
    */
  }, {
    key: "sint32",
    value: function() {
      var r = this.uint32();
      return r >>> 1 ^ -(r & 1);
    }
    /**
    * Read a `int64` field, a signed 64-bit varint.
    */
  }, {
    key: "int64",
    value: function() {
      return pi(Qe, Mt(this.varint64()));
    }
    /**
    * Read a `uint64` field, an unsigned 64-bit varint.
    */
  }, {
    key: "uint64",
    value: function() {
      return pi(pt, Mt(this.varint64()));
    }
    /**
    * Read a `sint64` field, a signed, zig-zag-encoded 64-bit varint.
    */
  }, {
    key: "sint64",
    value: function() {
      var r = this.varint64(), n = Ne(r, 2), i = n[0], a = n[1], s = -(i & 1);
      return i = (i >>> 1 | (a & 1) << 31) ^ s, a = a >>> 1 ^ s, new Qe(i, a);
    }
    /**
    * Read a `bool` field, a variant.
    */
  }, {
    key: "bool",
    value: function() {
      var r = this.varint64(), n = Ne(r, 2), i = n[0], a = n[1];
      return i !== 0 || a !== 0;
    }
    /**
    * Read a `fixed32` field, an unsigned, fixed-length 32-bit integer.
    */
  }, {
    key: "fixed32",
    value: function() {
      return this.view.getUint32((this.pos += 4) - 4, !0);
    }
    /**
    * Read a `sfixed32` field, a signed, fixed-length 32-bit integer.
    */
  }, {
    key: "sfixed32",
    value: function() {
      return this.view.getInt32((this.pos += 4) - 4, !0);
    }
    /**
    * Read a `fixed64` field, an unsigned, fixed-length 64 bit integer.
    */
  }, {
    key: "fixed64",
    value: function() {
      return new pt(this.sfixed32(), this.sfixed32());
    }
    /**
    * Read a `fixed64` field, a signed, fixed-length 64-bit integer.
    */
  }, {
    key: "sfixed64",
    value: function() {
      return new Qe(this.sfixed32(), this.sfixed32());
    }
    /**
    * Read a `float` field, 32-bit floating point number.
    */
  }, {
    key: "float",
    value: function() {
      return this.view.getFloat32((this.pos += 4) - 4, !0);
    }
    /**
    * Read a `double` field, a 64-bit floating point number.
    */
  }, {
    key: "double",
    value: function() {
      return this.view.getFloat64((this.pos += 8) - 8, !0);
    }
    /**
    * Read a `bytes` field, length-delimited arbitrary data.
    */
  }, {
    key: "bytes",
    value: function() {
      var r = this.uint32(), n = this.pos;
      return this.pos += r, this.assertBounds(), this.buf.subarray(n, n + r);
    }
    /**
    * Read a `string` field, length-delimited data converted to UTF-8 text.
    */
  }, { key: "string", value: function() {
    return this.textDecoder.decode(this.bytes());
  } }]), e;
}();
function we(e, t) {
  if (!e)
    throw new Error(t);
}
var BO = 34028234663852886e22, qO = -34028234663852886e22, GO = 4294967295, HO = 2147483647, WO = -2147483648;
function ea(e) {
  if (typeof e != "number")
    throw new Error("invalid int 32: " + typeof e);
  if (!Number.isInteger(e) || e > HO || e < WO)
    throw new Error("invalid int 32: " + e);
}
function es(e) {
  if (typeof e != "number")
    throw new Error("invalid uint 32: " + typeof e);
  if (!Number.isInteger(e) || e > GO || e < 0)
    throw new Error("invalid uint 32: " + e);
}
function Ac(e) {
  if (typeof e != "number")
    throw new Error("invalid float 32: " + typeof e);
  if (Number.isFinite(e) && (e > BO || e < qO))
    throw new Error("invalid float 32: " + e);
}
var kd = { writeUnknownFields: !0, writerFactory: function() {
  return new JO();
} };
function jO(e) {
  return e ? Object.assign(Object.assign({}, kd), e) : kd;
}
var JO = /* @__PURE__ */ function() {
  function e(t) {
    w(this, e), this.stack = [], this.textEncoder = t != null ? t : new TextEncoder(), this.chunks = [], this.buf = [];
  }
  return b(e, [{
    key: "finish",
    value: function() {
      this.chunks.push(new Uint8Array(this.buf));
      for (var r = 0, n = 0; n < this.chunks.length; n++)
        r += this.chunks[n].length;
      for (var i = new Uint8Array(r), a = 0, s = 0; s < this.chunks.length; s++)
        i.set(this.chunks[s], a), a += this.chunks[s].length;
      return this.chunks = [], i;
    }
    /**
    * Start a new fork for length-delimited data like a message
    * or a packed repeated field.
    *
    * Must be joined later with `join()`.
    */
  }, {
    key: "fork",
    value: function() {
      return this.stack.push({ chunks: this.chunks, buf: this.buf }), this.chunks = [], this.buf = [], this;
    }
    /**
    * Join the last fork. Write its length and bytes, then
    * return to the previous state.
    */
  }, {
    key: "join",
    value: function() {
      var r = this.finish(), n = this.stack.pop();
      if (!n)
        throw new Error("invalid state, fork stack empty");
      return this.chunks = n.chunks, this.buf = n.buf, this.uint32(r.byteLength), this.raw(r);
    }
    /**
    * Writes a tag (field number and wire type).
    *
    * Equivalent to `uint32( (fieldNo << 3 | type) >>> 0 )`.
    *
    * Generated code should compute the tag ahead of time and call `uint32()`.
    */
  }, {
    key: "tag",
    value: function(r, n) {
      return this.uint32((r << 3 | n) >>> 0);
    }
    /**
    * Write a chunk of raw bytes.
    */
  }, {
    key: "raw",
    value: function(r) {
      return this.buf.length && (this.chunks.push(new Uint8Array(this.buf)), this.buf = []), this.chunks.push(r), this;
    }
    /**
    * Write a `uint32` value, an unsigned 32 bit varint.
    */
  }, {
    key: "uint32",
    value: function(r) {
      for (es(r); r > 127; )
        this.buf.push(r & 127 | 128), r = r >>> 7;
      return this.buf.push(r), this;
    }
    /**
    * Write a `int32` value, a signed 32 bit varint.
    */
  }, {
    key: "int32",
    value: function(r) {
      return ea(r), yd(r, this.buf), this;
    }
    /**
    * Write a `bool` value, a variant.
    */
  }, {
    key: "bool",
    value: function(r) {
      return this.buf.push(r ? 1 : 0), this;
    }
    /**
    * Write a `bytes` value, length-delimited arbitrary data.
    */
  }, {
    key: "bytes",
    value: function(r) {
      return this.uint32(r.byteLength), this.raw(r);
    }
    /**
    * Write a `string` value, length-delimited data converted to UTF-8 text.
    */
  }, {
    key: "string",
    value: function(r) {
      var n = this.textEncoder.encode(r);
      return this.uint32(n.byteLength), this.raw(n);
    }
    /**
    * Write a `float` value, 32-bit floating point number.
    */
  }, {
    key: "float",
    value: function(r) {
      Ac(r);
      var n = new Uint8Array(4);
      return new DataView(n.buffer).setFloat32(0, r, !0), this.raw(n);
    }
    /**
    * Write a `double` value, a 64-bit floating point number.
    */
  }, {
    key: "double",
    value: function(r) {
      var n = new Uint8Array(8);
      return new DataView(n.buffer).setFloat64(0, r, !0), this.raw(n);
    }
    /**
    * Write a `fixed32` value, an unsigned, fixed-length 32-bit integer.
    */
  }, {
    key: "fixed32",
    value: function(r) {
      es(r);
      var n = new Uint8Array(4);
      return new DataView(n.buffer).setUint32(0, r, !0), this.raw(n);
    }
    /**
    * Write a `sfixed32` value, a signed, fixed-length 32-bit integer.
    */
  }, {
    key: "sfixed32",
    value: function(r) {
      ea(r);
      var n = new Uint8Array(4);
      return new DataView(n.buffer).setInt32(0, r, !0), this.raw(n);
    }
    /**
    * Write a `sint32` value, a signed, zigzag-encoded 32-bit varint.
    */
  }, {
    key: "sint32",
    value: function(r) {
      return ea(r), r = (r << 1 ^ r >> 31) >>> 0, yd(r, this.buf), this;
    }
    /**
    * Write a `fixed64` value, a signed, fixed-length 64-bit integer.
    */
  }, {
    key: "sfixed64",
    value: function(r) {
      var n = new Uint8Array(8), i = new DataView(n.buffer), a = Qe.from(r);
      return i.setInt32(0, a.lo, !0), i.setInt32(4, a.hi, !0), this.raw(n);
    }
    /**
    * Write a `fixed64` value, an unsigned, fixed-length 64 bit integer.
    */
  }, {
    key: "fixed64",
    value: function(r) {
      var n = new Uint8Array(8), i = new DataView(n.buffer), a = pt.from(r);
      return i.setInt32(0, a.lo, !0), i.setInt32(4, a.hi, !0), this.raw(n);
    }
    /**
    * Write a `int64` value, a signed 64-bit varint.
    */
  }, {
    key: "int64",
    value: function(r) {
      var n = Qe.from(r);
      return _u(n.lo, n.hi, this.buf), this;
    }
    /**
    * Write a `sint64` value, a signed, zig-zag-encoded 64-bit varint.
    */
  }, {
    key: "sint64",
    value: function(r) {
      var n = Qe.from(r), i = n.hi >> 31, a = n.lo << 1 ^ i, s = (n.hi << 1 | n.lo >>> 31) ^ i;
      return _u(a, s, this.buf), this;
    }
    /**
    * Write a `uint64` value, an unsigned 64-bit varint.
    */
  }, { key: "uint64", value: function(r) {
    var n = pt.from(r);
    return _u(n.lo, n.hi, this.buf), this;
  } }]), e;
}(), wd = { emitDefaultValues: !1, enumAsInteger: !1, useProtoFieldName: !1, prettySpaces: 0 }, bd = { ignoreUnknownFields: !1 };
function KO(e) {
  return e ? Object.assign(Object.assign({}, bd), e) : bd;
}
function YO(e) {
  return e ? Object.assign(Object.assign({}, wd), e) : wd;
}
var Jh = Symbol.for("protobuf-ts/message-type");
function _d(e) {
  for (var t = !1, r = [], n = 0; n < e.length; n++) {
    var i = e.charAt(n);
    i == "_" ? t = !0 : /\d/.test(i) ? (r.push(i), t = !0) : t ? (r.push(i.toUpperCase()), t = !1) : n == 0 ? r.push(i.toLowerCase()) : r.push(i);
  }
  return r.join("");
}
var N;
(function(e) {
  e[e.DOUBLE = 1] = "DOUBLE", e[e.FLOAT = 2] = "FLOAT", e[e.INT64 = 3] = "INT64", e[e.UINT64 = 4] = "UINT64", e[e.INT32 = 5] = "INT32", e[e.FIXED64 = 6] = "FIXED64", e[e.FIXED32 = 7] = "FIXED32", e[e.BOOL = 8] = "BOOL", e[e.STRING = 9] = "STRING", e[e.BYTES = 12] = "BYTES", e[e.UINT32 = 13] = "UINT32", e[e.SFIXED32 = 15] = "SFIXED32", e[e.SFIXED64 = 16] = "SFIXED64", e[e.SINT32 = 17] = "SINT32", e[e.SINT64 = 18] = "SINT64";
})(N || (N = {}));
var Dt;
(function(e) {
  e[e.BIGINT = 0] = "BIGINT", e[e.STRING = 1] = "STRING", e[e.NUMBER = 2] = "NUMBER";
})(Dt || (Dt = {}));
var rs;
(function(e) {
  e[e.NO = 0] = "NO", e[e.PACKED = 1] = "PACKED", e[e.UNPACKED = 2] = "UNPACKED";
})(rs || (rs = {}));
function zO(e) {
  var t, r, n, i;
  return e.localName = (t = e.localName) !== null && t !== void 0 ? t : _d(e.name), e.jsonName = (r = e.jsonName) !== null && r !== void 0 ? r : _d(e.name), e.repeat = (n = e.repeat) !== null && n !== void 0 ? n : rs.NO, e.opt = (i = e.opt) !== null && i !== void 0 ? i : e.repeat || e.oneof ? !1 : e.kind == "message", e;
}
function XO(e) {
  if (typeof e != "object" || e === null || !e.hasOwnProperty("oneofKind"))
    return !1;
  switch (typeof e.oneofKind) {
    case "string":
      return e[e.oneofKind] === void 0 ? !1 : Object.keys(e).length == 2;
    case "undefined":
      return Object.keys(e).length == 1;
    default:
      return !1;
  }
}
var ZO = /* @__PURE__ */ function() {
  function e(t) {
    w(this, e);
    var r;
    this.fields = (r = t.fields) !== null && r !== void 0 ? r : [];
  }
  return b(e, [{
    key: "prepare",
    value: function() {
      if (!this.data) {
        var r = [], n = [], i = [], a = or(this.fields), s;
        try {
          for (a.s(); !(s = a.n()).done; ) {
            var u = s.value;
            if (u.oneof)
              i.includes(u.oneof) || (i.push(u.oneof), r.push(u.oneof), n.push(u.oneof));
            else
              switch (n.push(u.localName), u.kind) {
                case "scalar":
                case "enum":
                  (!u.opt || u.repeat) && r.push(u.localName);
                  break;
                case "message":
                  u.repeat && r.push(u.localName);
                  break;
                case "map":
                  r.push(u.localName);
                  break;
              }
          }
        } catch (o) {
          a.e(o);
        } finally {
          a.f();
        }
        this.data = { req: r, known: n, oneofs: Object.values(i) };
      }
    }
    /**
    * Is the argument a valid message as specified by the
    * reflection information?
    *
    * Checks all field types recursively. The `depth`
    * specifies how deep into the structure the check will be.
    *
    * With a depth of 0, only the presence of fields
    * is checked.
    *
    * With a depth of 1 or more, the field types are checked.
    *
    * With a depth of 2 or more, the members of map, repeated
    * and message fields are checked.
    *
    * Message fields will be checked recursively with depth - 1.
    *
    * The number of map entries / repeated values being checked
    * is < depth.
    */
  }, { key: "is", value: function(r, n) {
    var i = this, a = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1;
    if (n < 0)
      return !0;
    if (r == null || typeof r != "object")
      return !1;
    this.prepare();
    var s = Object.keys(r), u = this.data;
    if (s.length < u.req.length || u.req.some(function(T) {
      return !s.includes(T);
    }) || !a && s.some(function(T) {
      return !u.known.includes(T);
    }))
      return !1;
    if (n < 1)
      return !0;
    var o = or(u.oneofs), c;
    try {
      var l = function() {
        var y = c.value, _ = r[y];
        if (!XO(_))
          return { v: !1 };
        if (_.oneofKind === void 0)
          return 0;
        var C = i.fields.find(function(D) {
          return D.localName === _.oneofKind;
        });
        if (!C)
          return { v: !1 };
        if (!i.field(_[_.oneofKind], C, a, n))
          return { v: !1 };
      }, d;
      for (o.s(); !(c = o.n()).done; )
        if (d = l(), d !== 0 && d)
          return d.v;
    } catch (T) {
      o.e(T);
    } finally {
      o.f();
    }
    var v = or(this.fields), h;
    try {
      for (v.s(); !(h = v.n()).done; ) {
        var m = h.value;
        if (m.oneof === void 0 && !this.field(r[m.localName], m, a, n))
          return !1;
      }
    } catch (T) {
      v.e(T);
    } finally {
      v.f();
    }
    return !0;
  } }, { key: "field", value: function(r, n, i, a) {
    var s = n.repeat;
    switch (n.kind) {
      case "scalar":
        return r === void 0 ? n.opt : s ? this.scalars(r, n.T, a, n.L) : this.scalar(r, n.T, n.L);
      case "enum":
        return r === void 0 ? n.opt : s ? this.scalars(r, N.INT32, a) : this.scalar(r, N.INT32);
      case "message":
        return r === void 0 ? !0 : s ? this.messages(r, n.T(), i, a) : this.message(r, n.T(), i, a);
      case "map":
        if (typeof r != "object" || r === null)
          return !1;
        if (a < 2)
          return !0;
        if (!this.mapKeys(r, n.K, a))
          return !1;
        switch (n.V.kind) {
          case "scalar":
            return this.scalars(Object.values(r), n.V.T, a, n.V.L);
          case "enum":
            return this.scalars(Object.values(r), N.INT32, a);
          case "message":
            return this.messages(Object.values(r), n.V.T(), i, a);
        }
        break;
    }
    return !0;
  } }, { key: "message", value: function(r, n, i, a) {
    return i ? n.isAssignable(r, a) : n.is(r, a);
  } }, { key: "messages", value: function(r, n, i, a) {
    if (!Array.isArray(r))
      return !1;
    if (a < 2)
      return !0;
    if (i) {
      for (var s = 0; s < r.length && s < a; s++)
        if (!n.isAssignable(r[s], a - 1))
          return !1;
    } else
      for (var u = 0; u < r.length && u < a; u++)
        if (!n.is(r[u], a - 1))
          return !1;
    return !0;
  } }, { key: "scalar", value: function(r, n, i) {
    var a = typeof r;
    switch (n) {
      case N.UINT64:
      case N.FIXED64:
      case N.INT64:
      case N.SFIXED64:
      case N.SINT64:
        switch (i) {
          case Dt.BIGINT:
            return a == "bigint";
          case Dt.NUMBER:
            return a == "number" && !isNaN(r);
          default:
            return a == "string";
        }
      case N.BOOL:
        return a == "boolean";
      case N.STRING:
        return a == "string";
      case N.BYTES:
        return r instanceof Uint8Array;
      case N.DOUBLE:
      case N.FLOAT:
        return a == "number" && !isNaN(r);
      default:
        return a == "number" && Number.isInteger(r);
    }
  } }, { key: "scalars", value: function(r, n, i, a) {
    if (!Array.isArray(r))
      return !1;
    if (i < 2)
      return !0;
    if (Array.isArray(r)) {
      for (var s = 0; s < r.length && s < i; s++)
        if (!this.scalar(r[s], n, a))
          return !1;
    }
    return !0;
  } }, { key: "mapKeys", value: function(r, n, i) {
    var a = Object.keys(r);
    switch (n) {
      case N.INT32:
      case N.FIXED32:
      case N.SFIXED32:
      case N.SINT32:
      case N.UINT32:
        return this.scalars(a.slice(0, i).map(function(s) {
          return parseInt(s);
        }), n, i);
      case N.BOOL:
        return this.scalars(a.slice(0, i).map(function(s) {
          return s == "true" ? !0 : s == "false" ? !1 : s;
        }), n, i);
      default:
        return this.scalars(a, n, i, Dt.STRING);
    }
  } }]), e;
}();
function Tt(e, t) {
  switch (t) {
    case Dt.BIGINT:
      return e.toBigInt();
    case Dt.NUMBER:
      return e.toNumber();
    default:
      return e.toString();
  }
}
var QO = /* @__PURE__ */ function() {
  function e(t) {
    w(this, e), this.info = t;
  }
  return b(e, [{
    key: "prepare",
    value: function() {
      var r;
      if (this.fMap === void 0) {
        this.fMap = {};
        var n = (r = this.info.fields) !== null && r !== void 0 ? r : [], i = or(n), a;
        try {
          for (i.s(); !(a = i.n()).done; ) {
            var s = a.value;
            this.fMap[s.name] = s, this.fMap[s.jsonName] = s, this.fMap[s.localName] = s;
          }
        } catch (u) {
          i.e(u);
        } finally {
          i.f();
        }
      }
    }
    // Cannot parse JSON <type of jsonValue> for <type name>#<fieldName>.
  }, {
    key: "assert",
    value: function(r, n, i) {
      if (!r) {
        var a = Ec(i);
        throw (a == "number" || a == "boolean") && (a = i.toString()), new Error("Cannot parse JSON ".concat(a, " for ").concat(this.info.typeName, "#").concat(n));
      }
    }
    /**
    * Reads a message from canonical JSON format into the target message.
    *
    * Repeated fields are appended. Map entries are added, overwriting
    * existing keys.
    *
    * If a message field is already present, it will be merged with the
    * new data.
    */
  }, {
    key: "read",
    value: function(r, n, i) {
      this.prepare();
      for (var a = [], s = 0, u = Object.entries(r); s < u.length; s++) {
        var o = Ne(u[s], 2), c = o[0], l = o[1], d = this.fMap[c];
        if (!d) {
          if (!i.ignoreUnknownFields)
            throw new Error("Found unknown field while reading ".concat(this.info.typeName, " from JSON format. JSON key: ").concat(c));
          continue;
        }
        var v = d.localName, h = void 0;
        if (d.oneof) {
          if (l === null && (d.kind !== "enum" || d.T()[0] !== "google.protobuf.NullValue"))
            continue;
          if (a.includes(d.oneof))
            throw new Error('Multiple members of the oneof group "'.concat(d.oneof, '" of ').concat(this.info.typeName, " are present in JSON."));
          a.push(d.oneof), h = n[d.oneof] = { oneofKind: v };
        } else
          h = n;
        if (d.kind == "map") {
          if (l === null)
            continue;
          this.assert(MO(l), d.name, l);
          for (var m = h[v], T = 0, y = Object.entries(l); T < y.length; T++) {
            var _ = Ne(y[T], 2), C = _[0], D = _[1];
            this.assert(D !== null, d.name + " map value", null);
            var I = void 0;
            switch (d.V.kind) {
              case "message":
                I = d.V.T().internalJsonRead(D, i);
                break;
              case "enum":
                if (I = this.enum(d.V.T(), D, d.name, i.ignoreUnknownFields), I === !1)
                  continue;
                break;
              case "scalar":
                I = this.scalar(D, d.V.T, d.V.L, d.name);
                break;
            }
            this.assert(I !== void 0, d.name + " map value", D);
            var O = C;
            d.K == N.BOOL && (O = O == "true" ? !0 : O == "false" ? !1 : O), O = this.scalar(O, d.K, Dt.STRING, d.name).toString(), m[O] = I;
          }
        } else if (d.repeat) {
          if (l === null)
            continue;
          this.assert(Array.isArray(l), d.name, l);
          var q = h[v], F = or(l), H;
          try {
            for (F.s(); !(H = F.n()).done; ) {
              var fe = H.value;
              this.assert(fe !== null, d.name, null);
              var x = void 0;
              switch (d.kind) {
                case "message":
                  x = d.T().internalJsonRead(fe, i);
                  break;
                case "enum":
                  if (x = this.enum(d.T(), fe, d.name, i.ignoreUnknownFields), x === !1)
                    continue;
                  break;
                case "scalar":
                  x = this.scalar(fe, d.T, d.L, d.name);
                  break;
              }
              this.assert(x !== void 0, d.name, l), q.push(x);
            }
          } catch (Be) {
            F.e(Be);
          } finally {
            F.f();
          }
        } else
          switch (d.kind) {
            case "message":
              if (l === null && d.T().typeName != "google.protobuf.Value") {
                this.assert(d.oneof === void 0, d.name + " (oneof member)", null);
                continue;
              }
              h[v] = d.T().internalJsonRead(l, i, h[v]);
              break;
            case "enum":
              var pe = this.enum(d.T(), l, d.name, i.ignoreUnknownFields);
              if (pe === !1)
                continue;
              h[v] = pe;
              break;
            case "scalar":
              h[v] = this.scalar(l, d.T, d.L, d.name);
              break;
          }
      }
    }
    /**
    * Returns `false` for unrecognized string representations.
    *
    * google.protobuf.NullValue accepts only JSON `null` (or the old `"NULL_VALUE"`).
    */
  }, { key: "enum", value: function(r, n, i, a) {
    if (r[0] == "google.protobuf.NullValue" && we(n === null || n === "NULL_VALUE", "Unable to parse field ".concat(this.info.typeName, "#").concat(i, ", enum ").concat(r[0], " only accepts null.")), n === null)
      return 0;
    switch (typeof n) {
      case "number":
        return we(Number.isInteger(n), "Unable to parse field ".concat(this.info.typeName, "#").concat(i, ", enum can only be integral number, got ").concat(n, ".")), n;
      case "string":
        var s = n;
        r[2] && n.substring(0, r[2].length) === r[2] && (s = n.substring(r[2].length));
        var u = r[1][s];
        return typeof u == "undefined" && a ? !1 : (we(typeof u == "number", "Unable to parse field ".concat(this.info.typeName, "#").concat(i, ", enum ").concat(r[0], ' has no value for "').concat(n, '".')), u);
    }
    we(!1, "Unable to parse field ".concat(this.info.typeName, "#").concat(i, ", cannot parse enum value from ").concat(typeof n, '".'));
  } }, { key: "scalar", value: function(r, n, i, a) {
    var s;
    try {
      switch (n) {
        case N.DOUBLE:
        case N.FLOAT:
          if (r === null)
            return 0;
          if (r === "NaN")
            return Number.NaN;
          if (r === "Infinity")
            return Number.POSITIVE_INFINITY;
          if (r === "-Infinity")
            return Number.NEGATIVE_INFINITY;
          if (r === "") {
            s = "empty string";
            break;
          }
          if (typeof r == "string" && r.trim().length !== r.length) {
            s = "extra whitespace";
            break;
          }
          if (typeof r != "string" && typeof r != "number")
            break;
          var u = Number(r);
          if (Number.isNaN(u)) {
            s = "not a number";
            break;
          }
          if (!Number.isFinite(u)) {
            s = "too large or small";
            break;
          }
          return n == N.FLOAT && Ac(u), u;
        case N.INT32:
        case N.FIXED32:
        case N.SFIXED32:
        case N.SINT32:
        case N.UINT32:
          if (r === null)
            return 0;
          var o;
          if (typeof r == "number" ? o = r : r === "" ? s = "empty string" : typeof r == "string" && (r.trim().length !== r.length ? s = "extra whitespace" : o = Number(r)), o === void 0)
            break;
          return n == N.UINT32 ? es(o) : ea(o), o;
        case N.INT64:
        case N.SFIXED64:
        case N.SINT64:
          if (r === null)
            return Tt(Qe.ZERO, i);
          if (typeof r != "number" && typeof r != "string")
            break;
          return Tt(Qe.from(r), i);
        case N.FIXED64:
        case N.UINT64:
          if (r === null)
            return Tt(pt.ZERO, i);
          if (typeof r != "number" && typeof r != "string")
            break;
          return Tt(pt.from(r), i);
        case N.BOOL:
          if (r === null)
            return !1;
          if (typeof r != "boolean")
            break;
          return r;
        case N.STRING:
          if (r === null)
            return "";
          if (typeof r != "string") {
            s = "extra whitespace";
            break;
          }
          try {
            encodeURIComponent(r);
          } catch (c) {
            c = "invalid UTF8";
            break;
          }
          return r;
        case N.BYTES:
          if (r === null || r === "")
            return new Uint8Array(0);
          if (typeof r != "string")
            break;
          return OO(r);
      }
    } catch (c) {
      s = c.message;
    }
    this.assert(!1, a + (s ? " - " + s : ""), r);
  } }]), e;
}(), xO = /* @__PURE__ */ function() {
  function e(t) {
    w(this, e);
    var r;
    this.fields = (r = t.fields) !== null && r !== void 0 ? r : [];
  }
  return b(e, [{ key: "write", value: function(r, n) {
    var i = {}, a = r, s = or(this.fields), u;
    try {
      for (s.s(); !(u = s.n()).done; ) {
        var o = u.value;
        if (!o.oneof) {
          var c = this.field(o, a[o.localName], n);
          c !== void 0 && (i[n.useProtoFieldName ? o.name : o.jsonName] = c);
          continue;
        }
        var l = a[o.oneof];
        if (l.oneofKind === o.localName) {
          var d = o.kind == "scalar" || o.kind == "enum" ? Object.assign(Object.assign({}, n), { emitDefaultValues: !0 }) : n, v = this.field(o, l[o.localName], d);
          we(v !== void 0), i[n.useProtoFieldName ? o.name : o.jsonName] = v;
        }
      }
    } catch (h) {
      s.e(h);
    } finally {
      s.f();
    }
    return i;
  } }, {
    key: "field",
    value: function(r, n, i) {
      var a = void 0;
      if (r.kind == "map") {
        we(typeof n == "object" && n !== null);
        var s = {};
        switch (r.V.kind) {
          case "scalar":
            for (var u = 0, o = Object.entries(n); u < o.length; u++) {
              var c = Ne(o[u], 2), l = c[0], d = c[1], v = this.scalar(r.V.T, d, r.name, !1, !0);
              we(v !== void 0), s[l.toString()] = v;
            }
            break;
          case "message":
            for (var h = r.V.T(), m = 0, T = Object.entries(n); m < T.length; m++) {
              var y = Ne(T[m], 2), _ = y[0], C = y[1], D = this.message(h, C, r.name, i);
              we(D !== void 0), s[_.toString()] = D;
            }
            break;
          case "enum":
            for (var I = r.V.T(), O = 0, q = Object.entries(n); O < q.length; O++) {
              var F = Ne(q[O], 2), H = F[0], fe = F[1];
              we(fe === void 0 || typeof fe == "number");
              var x = this.enum(I, fe, r.name, !1, !0, i.enumAsInteger);
              we(x !== void 0), s[H.toString()] = x;
            }
            break;
        }
        (i.emitDefaultValues || Object.keys(s).length > 0) && (a = s);
      } else if (r.repeat) {
        we(Array.isArray(n));
        var pe = [];
        switch (r.kind) {
          case "scalar":
            for (var Be = 0; Be < n.length; Be++) {
              var Q = this.scalar(r.T, n[Be], r.name, r.opt, !0);
              we(Q !== void 0), pe.push(Q);
            }
            break;
          case "enum":
            for (var dr = r.T(), nt = 0; nt < n.length; nt++) {
              we(n[nt] === void 0 || typeof n[nt] == "number");
              var W = this.enum(dr, n[nt], r.name, r.opt, !0, i.enumAsInteger);
              we(W !== void 0), pe.push(W);
            }
            break;
          case "message":
            for (var U = r.T(), G = 0; G < n.length; G++) {
              var Z = this.message(U, n[G], r.name, i);
              we(Z !== void 0), pe.push(Z);
            }
            break;
        }
        (i.emitDefaultValues || pe.length > 0 || i.emitDefaultValues) && (a = pe);
      } else
        switch (r.kind) {
          case "scalar":
            a = this.scalar(r.T, n, r.name, r.opt, i.emitDefaultValues);
            break;
          case "enum":
            a = this.enum(r.T(), n, r.name, r.opt, i.emitDefaultValues, i.enumAsInteger);
            break;
          case "message":
            a = this.message(r.T(), n, r.name, i);
            break;
        }
      return a;
    }
    /**
    * Returns `null` as the default for google.protobuf.NullValue.
    */
  }, { key: "enum", value: function(r, n, i, a, s, u) {
    if (r[0] == "google.protobuf.NullValue")
      return !s && !a ? void 0 : null;
    if (n === void 0) {
      we(a);
      return;
    }
    if (!(n === 0 && !s && !a))
      return we(typeof n == "number"), we(Number.isInteger(n)), u || !r[1].hasOwnProperty(n) ? n : r[2] ? r[2] + r[1][n] : r[1][n];
  } }, { key: "message", value: function(r, n, i, a) {
    return n === void 0 ? a.emitDefaultValues ? null : void 0 : r.internalJsonWrite(n, a);
  } }, { key: "scalar", value: function(r, n, i, a, s) {
    if (n === void 0) {
      we(a);
      return;
    }
    var u = s || a;
    switch (r) {
      case N.INT32:
      case N.SFIXED32:
      case N.SINT32:
        return n === 0 ? u ? 0 : void 0 : (ea(n), n);
      case N.FIXED32:
      case N.UINT32:
        return n === 0 ? u ? 0 : void 0 : (es(n), n);
      case N.FLOAT:
        Ac(n);
      case N.DOUBLE:
        return n === 0 ? u ? 0 : void 0 : (we(typeof n == "number"), Number.isNaN(n) ? "NaN" : n === Number.POSITIVE_INFINITY ? "Infinity" : n === Number.NEGATIVE_INFINITY ? "-Infinity" : n);
      case N.STRING:
        return n === "" ? u ? "" : void 0 : (we(typeof n == "string"), n);
      case N.BOOL:
        return n === !1 ? u ? !1 : void 0 : (we(typeof n == "boolean"), n);
      case N.UINT64:
      case N.FIXED64:
        we(typeof n == "number" || typeof n == "string" || typeof n == "bigint");
        var o = pt.from(n);
        return o.isZero() && !u ? void 0 : o.toString();
      case N.INT64:
      case N.SFIXED64:
      case N.SINT64:
        we(typeof n == "number" || typeof n == "string" || typeof n == "bigint");
        var c = Qe.from(n);
        return c.isZero() && !u ? void 0 : c.toString();
      case N.BYTES:
        return we(n instanceof Uint8Array), n.byteLength ? $O(n) : u ? "" : void 0;
    }
  } }]), e;
}();
function oo(e) {
  var t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Dt.STRING;
  switch (e) {
    case N.BOOL:
      return !1;
    case N.UINT64:
    case N.FIXED64:
      return Tt(pt.ZERO, t);
    case N.INT64:
    case N.SFIXED64:
    case N.SINT64:
      return Tt(Qe.ZERO, t);
    case N.DOUBLE:
    case N.FLOAT:
      return 0;
    case N.BYTES:
      return new Uint8Array(0);
    case N.STRING:
      return "";
    default:
      return 0;
  }
}
var e$ = /* @__PURE__ */ function() {
  function e(t) {
    w(this, e), this.info = t;
  }
  return b(e, [{
    key: "prepare",
    value: function() {
      var r;
      if (!this.fieldNoToField) {
        var n = (r = this.info.fields) !== null && r !== void 0 ? r : [];
        this.fieldNoToField = new Map(n.map(function(i) {
          return [i.no, i];
        }));
      }
    }
    /**
    * Reads a message from binary format into the target message.
    *
    * Repeated fields are appended. Map entries are added, overwriting
    * existing keys.
    *
    * If a message field is already present, it will be merged with the
    * new data.
    */
  }, {
    key: "read",
    value: function(r, n, i, a) {
      this.prepare();
      for (var s = a === void 0 ? r.len : r.pos + a; r.pos < s; ) {
        var u = r.tag(), o = Ne(u, 2), c = o[0], l = o[1], d = this.fieldNoToField.get(c);
        if (!d) {
          var v = i.readUnknownField;
          if (v == "throw")
            throw new Error("Unknown field ".concat(c, " (wire type ").concat(l, ") for ").concat(this.info.typeName));
          var h = r.skip(l);
          v !== !1 && (v === !0 ? Qa.onRead : v)(this.info.typeName, n, c, l, h);
          continue;
        }
        var m = n, T = d.repeat, y = d.localName;
        switch (d.oneof && (m = m[d.oneof], m.oneofKind !== y && (m = n[d.oneof] = { oneofKind: y })), d.kind) {
          case "scalar":
          case "enum":
            var _ = d.kind == "enum" ? N.INT32 : d.T, C = d.kind == "scalar" ? d.L : void 0;
            if (T) {
              var D = m[y];
              if (l == Xe.LengthDelimited && _ != N.STRING && _ != N.BYTES)
                for (var I = r.uint32() + r.pos; r.pos < I; )
                  D.push(this.scalar(r, _, C));
              else
                D.push(this.scalar(r, _, C));
            } else
              m[y] = this.scalar(r, _, C);
            break;
          case "message":
            if (T) {
              var O = m[y], q = d.T().internalBinaryRead(r, r.uint32(), i);
              O.push(q);
            } else
              m[y] = d.T().internalBinaryRead(r, r.uint32(), i, m[y]);
            break;
          case "map":
            var F = this.mapEntry(d, r, i), H = Ne(F, 2), fe = H[0], x = H[1];
            m[y][fe] = x;
            break;
        }
      }
    }
    /**
    * Read a map field, expecting key field = 1, value field = 2
    */
  }, { key: "mapEntry", value: function(r, n, i) {
    for (var a = n.uint32(), s = n.pos + a, u = void 0, o = void 0; n.pos < s; ) {
      var c = n.tag(), l = Ne(c, 2), d = l[0], v = l[1];
      switch (d) {
        case 1:
          r.K == N.BOOL ? u = n.bool().toString() : u = this.scalar(n, r.K, Dt.STRING);
          break;
        case 2:
          switch (r.V.kind) {
            case "scalar":
              o = this.scalar(n, r.V.T, r.V.L);
              break;
            case "enum":
              o = n.int32();
              break;
            case "message":
              o = r.V.T().internalBinaryRead(n, n.uint32(), i);
              break;
          }
          break;
        default:
          throw new Error("Unknown field ".concat(d, " (wire type ").concat(v, ") in map entry for ").concat(this.info.typeName, "#").concat(r.name));
      }
    }
    if (u === void 0) {
      var h = oo(r.K);
      u = r.K == N.BOOL ? h.toString() : h;
    }
    if (o === void 0)
      switch (r.V.kind) {
        case "scalar":
          o = oo(r.V.T, r.V.L);
          break;
        case "enum":
          o = 0;
          break;
        case "message":
          o = r.V.T().create();
          break;
      }
    return [u, o];
  } }, { key: "scalar", value: function(r, n, i) {
    switch (n) {
      case N.INT32:
        return r.int32();
      case N.STRING:
        return r.string();
      case N.BOOL:
        return r.bool();
      case N.DOUBLE:
        return r.double();
      case N.FLOAT:
        return r.float();
      case N.INT64:
        return Tt(r.int64(), i);
      case N.UINT64:
        return Tt(r.uint64(), i);
      case N.FIXED64:
        return Tt(r.fixed64(), i);
      case N.FIXED32:
        return r.fixed32();
      case N.BYTES:
        return r.bytes();
      case N.UINT32:
        return r.uint32();
      case N.SFIXED32:
        return r.sfixed32();
      case N.SFIXED64:
        return Tt(r.sfixed64(), i);
      case N.SINT32:
        return r.sint32();
      case N.SINT64:
        return Tt(r.sint64(), i);
    }
  } }]), e;
}(), r$ = /* @__PURE__ */ function() {
  function e(t) {
    w(this, e), this.info = t;
  }
  return b(e, [{
    key: "prepare",
    value: function() {
      if (!this.fields) {
        var r = this.info.fields ? this.info.fields.concat() : [];
        this.fields = r.sort(function(n, i) {
          return n.no - i.no;
        });
      }
    }
    /**
    * Writes the message to binary format.
    */
  }, { key: "write", value: function(r, n, i) {
    this.prepare();
    var a = or(this.fields), s;
    try {
      for (a.s(); !(s = a.n()).done; ) {
        var u = s.value, o = void 0, c = void 0, l = u.repeat, d = u.localName;
        if (u.oneof) {
          var v = r[u.oneof];
          if (v.oneofKind !== d)
            continue;
          o = v[d], c = !0;
        } else
          o = r[d], c = !1;
        switch (u.kind) {
          case "scalar":
          case "enum":
            var h = u.kind == "enum" ? N.INT32 : u.T;
            if (l)
              if (we(Array.isArray(o)), l == rs.PACKED)
                this.packed(n, h, u.no, o);
              else {
                var m = or(o), T;
                try {
                  for (m.s(); !(T = m.n()).done; ) {
                    var y = T.value;
                    this.scalar(n, h, u.no, y, !0);
                  }
                } catch (x) {
                  m.e(x);
                } finally {
                  m.f();
                }
              }
            else
              o === void 0 ? we(u.opt) : this.scalar(n, h, u.no, o, c || u.opt);
            break;
          case "message":
            if (l) {
              we(Array.isArray(o));
              var _ = or(o), C;
              try {
                for (_.s(); !(C = _.n()).done; ) {
                  var D = C.value;
                  this.message(n, i, u.T(), u.no, D);
                }
              } catch (x) {
                _.e(x);
              } finally {
                _.f();
              }
            } else
              this.message(n, i, u.T(), u.no, o);
            break;
          case "map":
            we(typeof o == "object" && o !== null);
            for (var I = 0, O = Object.entries(o); I < O.length; I++) {
              var q = Ne(O[I], 2), F = q[0], H = q[1];
              this.mapEntry(n, i, u, F, H);
            }
            break;
        }
      }
    } catch (x) {
      a.e(x);
    } finally {
      a.f();
    }
    var fe = i.writeUnknownFields;
    fe !== !1 && (fe === !0 ? Qa.onWrite : fe)(this.info.typeName, r, n);
  } }, { key: "mapEntry", value: function(r, n, i, a, s) {
    r.tag(i.no, Xe.LengthDelimited), r.fork();
    var u = a;
    switch (i.K) {
      case N.INT32:
      case N.FIXED32:
      case N.UINT32:
      case N.SFIXED32:
      case N.SINT32:
        u = Number.parseInt(a);
        break;
      case N.BOOL:
        we(a == "true" || a == "false"), u = a == "true";
        break;
    }
    switch (this.scalar(r, i.K, 1, u, !0), i.V.kind) {
      case "scalar":
        this.scalar(r, i.V.T, 2, s, !0);
        break;
      case "enum":
        this.scalar(r, N.INT32, 2, s, !0);
        break;
      case "message":
        this.message(r, n, i.V.T(), 2, s);
        break;
    }
    r.join();
  } }, {
    key: "message",
    value: function(r, n, i, a, s) {
      s !== void 0 && (i.internalBinaryWrite(s, r.tag(a, Xe.LengthDelimited).fork(), n), r.join());
    }
    /**
    * Write a single scalar value.
    */
  }, {
    key: "scalar",
    value: function(r, n, i, a, s) {
      var u = this.scalarInfo(n, a), o = Ne(u, 3), c = o[0], l = o[1], d = o[2];
      (!d || s) && (r.tag(i, c), r[l](a));
    }
    /**
    * Write an array of scalar values in packed format.
    */
  }, {
    key: "packed",
    value: function(r, n, i, a) {
      if (a.length) {
        we(n !== N.BYTES && n !== N.STRING), r.tag(i, Xe.LengthDelimited), r.fork();
        for (var s = this.scalarInfo(n), u = Ne(s, 2), o = u[1], c = 0; c < a.length; c++)
          r[o](a[c]);
        r.join();
      }
    }
    /**
    * Get information for writing a scalar value.
    *
    * Returns tuple:
    * [0]: appropriate WireType
    * [1]: name of the appropriate method of IBinaryWriter
    * [2]: whether the given value is a default value
    *
    * If argument `value` is omitted, [2] is always false.
    */
  }, { key: "scalarInfo", value: function(r, n) {
    var i = Xe.Varint, a, s = n === void 0, u = n === 0;
    switch (r) {
      case N.INT32:
        a = "int32";
        break;
      case N.STRING:
        u = s || !n.length, i = Xe.LengthDelimited, a = "string";
        break;
      case N.BOOL:
        u = n === !1, a = "bool";
        break;
      case N.UINT32:
        a = "uint32";
        break;
      case N.DOUBLE:
        i = Xe.Bit64, a = "double";
        break;
      case N.FLOAT:
        i = Xe.Bit32, a = "float";
        break;
      case N.INT64:
        u = s || Qe.from(n).isZero(), a = "int64";
        break;
      case N.UINT64:
        u = s || pt.from(n).isZero(), a = "uint64";
        break;
      case N.FIXED64:
        u = s || pt.from(n).isZero(), i = Xe.Bit64, a = "fixed64";
        break;
      case N.BYTES:
        u = s || !n.byteLength, i = Xe.LengthDelimited, a = "bytes";
        break;
      case N.FIXED32:
        i = Xe.Bit32, a = "fixed32";
        break;
      case N.SFIXED32:
        i = Xe.Bit32, a = "sfixed32";
        break;
      case N.SFIXED64:
        u = s || Qe.from(n).isZero(), i = Xe.Bit64, a = "sfixed64";
        break;
      case N.SINT32:
        a = "sint32";
        break;
      case N.SINT64:
        u = s || Qe.from(n).isZero(), a = "sint64";
        break;
    }
    return [i, a, s || u];
  } }]), e;
}();
function t$(e) {
  var t = e.messagePrototype ? Object.create(e.messagePrototype) : Object.defineProperty({}, Jh, { value: e }), r = or(e.fields), n;
  try {
    for (r.s(); !(n = r.n()).done; ) {
      var i = n.value, a = i.localName;
      if (!i.opt)
        if (i.oneof)
          t[i.oneof] = { oneofKind: void 0 };
        else if (i.repeat)
          t[a] = [];
        else
          switch (i.kind) {
            case "scalar":
              t[a] = oo(i.T, i.L);
              break;
            case "enum":
              t[a] = 0;
              break;
            case "map":
              t[a] = {};
              break;
          }
    }
  } catch (s) {
    r.e(s);
  } finally {
    r.f();
  }
  return t;
}
function Eu(e, t, r) {
  var n, i = r, a, s = or(e.fields), u;
  try {
    for (s.s(); !(u = s.n()).done; ) {
      var o = u.value, c = o.localName;
      if (o.oneof) {
        var l = i[o.oneof];
        if ((l == null ? void 0 : l.oneofKind) == null)
          continue;
        if (n = l[c], a = t[o.oneof], a.oneofKind = l.oneofKind, n == null) {
          delete a[c];
          continue;
        }
      } else if (n = i[c], a = t, n == null)
        continue;
      switch (o.repeat && (a[c].length = n.length), o.kind) {
        case "scalar":
        case "enum":
          if (o.repeat)
            for (var d = 0; d < n.length; d++)
              a[c][d] = n[d];
          else
            a[c] = n;
          break;
        case "message":
          var v = o.T();
          if (o.repeat)
            for (var h = 0; h < n.length; h++)
              a[c][h] = v.create(n[h]);
          else
            a[c] === void 0 ? a[c] = v.create(n) : v.mergePartial(a[c], n);
          break;
        case "map":
          switch (o.V.kind) {
            case "scalar":
            case "enum":
              Object.assign(a[c], n);
              break;
            case "message":
              for (var m = o.V.T(), T = 0, y = Object.keys(n); T < y.length; T++) {
                var _ = y[T];
                a[c][_] = m.create(n[_]);
              }
              break;
          }
          break;
      }
    }
  } catch (C) {
    s.e(C);
  } finally {
    s.f();
  }
}
function n$(e, t, r) {
  if (t === r)
    return !0;
  if (!t || !r)
    return !1;
  var n = or(e.fields), i;
  try {
    for (n.s(); !(i = n.n()).done; ) {
      var a = i.value, s = a.localName, u = a.oneof ? t[a.oneof][s] : t[s], o = a.oneof ? r[a.oneof][s] : r[s];
      switch (a.kind) {
        case "enum":
        case "scalar":
          var c = a.kind == "enum" ? N.INT32 : a.T;
          if (!(a.repeat ? Ed(c, u, o) : Kh(c, u, o)))
            return !1;
          break;
        case "map":
          if (!(a.V.kind == "message" ? Ad(a.V.T(), Ma(u), Ma(o)) : Ed(a.V.kind == "enum" ? N.INT32 : a.V.T, Ma(u), Ma(o))))
            return !1;
          break;
        case "message":
          var l = a.T();
          if (!(a.repeat ? Ad(l, u, o) : l.equals(u, o)))
            return !1;
          break;
      }
    }
  } catch (d) {
    n.e(d);
  } finally {
    n.f();
  }
  return !0;
}
var Ma = Object.values;
function Kh(e, t, r) {
  if (t === r)
    return !0;
  if (e !== N.BYTES)
    return !1;
  var n = t, i = r;
  if (n.length !== i.length)
    return !1;
  for (var a = 0; a < n.length; a++)
    if (n[a] != i[a])
      return !1;
  return !0;
}
function Ed(e, t, r) {
  if (t.length !== r.length)
    return !1;
  for (var n = 0; n < t.length; n++)
    if (!Kh(e, t[n], r[n]))
      return !1;
  return !0;
}
function Ad(e, t, r) {
  if (t.length !== r.length)
    return !1;
  for (var n = 0; n < t.length; n++)
    if (!e.equals(t[n], r[n]))
      return !1;
  return !0;
}
var i$ = Object.getOwnPropertyDescriptors(Object.getPrototypeOf({})), S = /* @__PURE__ */ function() {
  function e(t, r, n) {
    w(this, e), this.defaultCheckDepth = 16, this.typeName = t, this.fields = r.map(zO), this.options = n != null ? n : {}, this.messagePrototype = Object.create(null, Object.assign(Object.assign({}, i$), { [Jh]: { value: this } })), this.refTypeCheck = new ZO(this), this.refJsonReader = new QO(this), this.refJsonWriter = new xO(this), this.refBinReader = new e$(this), this.refBinWriter = new r$(this);
  }
  return b(e, [{
    key: "create",
    value: function(r) {
      var n = t$(this);
      return r !== void 0 && Eu(this, n, r), n;
    }
    /**
    * Clone the message.
    *
    * Unknown fields are discarded.
    */
  }, {
    key: "clone",
    value: function(r) {
      var n = this.create();
      return Eu(this, n, r), n;
    }
    /**
    * Determines whether two message of the same type have the same field values.
    * Checks for deep equality, traversing repeated fields, oneof groups, maps
    * and messages recursively.
    * Will also return true if both messages are `undefined`.
    */
  }, {
    key: "equals",
    value: function(r, n) {
      return n$(this, r, n);
    }
    /**
    * Is the given value assignable to our message type
    * and contains no [excess properties](https://www.typescriptlang.org/docs/handbook/interfaces.html#excess-property-checks)?
    */
  }, {
    key: "is",
    value: function(r) {
      var n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : this.defaultCheckDepth;
      return this.refTypeCheck.is(r, n, !1);
    }
    /**
    * Is the given value assignable to our message type,
    * regardless of [excess properties](https://www.typescriptlang.org/docs/handbook/interfaces.html#excess-property-checks)?
    */
  }, {
    key: "isAssignable",
    value: function(r) {
      var n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : this.defaultCheckDepth;
      return this.refTypeCheck.is(r, n, !0);
    }
    /**
    * Copy partial data into the target message.
    */
  }, {
    key: "mergePartial",
    value: function(r, n) {
      Eu(this, r, n);
    }
    /**
    * Create a new message from binary format.
    */
  }, {
    key: "fromBinary",
    value: function(r, n) {
      var i = FO(n);
      return this.internalBinaryRead(i.readerFactory(r), r.byteLength, i);
    }
    /**
    * Read a new message from a JSON value.
    */
  }, {
    key: "fromJson",
    value: function(r, n) {
      return this.internalJsonRead(r, KO(n));
    }
    /**
    * Read a new message from a JSON string.
    * This is equivalent to `T.fromJson(JSON.parse(json))`.
    */
  }, {
    key: "fromJsonString",
    value: function(r, n) {
      var i = JSON.parse(r);
      return this.fromJson(i, n);
    }
    /**
    * Write the message to canonical JSON value.
    */
  }, {
    key: "toJson",
    value: function(r, n) {
      return this.internalJsonWrite(r, YO(n));
    }
    /**
    * Convert the message to canonical JSON string.
    * This is equivalent to `JSON.stringify(T.toJson(t))`
    */
  }, {
    key: "toJsonString",
    value: function(r, n) {
      var i, a = this.toJson(r, n);
      return JSON.stringify(a, null, (i = n == null ? void 0 : n.prettySpaces) !== null && i !== void 0 ? i : 0);
    }
    /**
    * Write the message to binary format.
    */
  }, {
    key: "toBinary",
    value: function(r, n) {
      var i = jO(n);
      return this.internalBinaryWrite(r, i.writerFactory(), i).finish();
    }
    /**
    * This is an internal method. If you just want to read a message from
    * JSON, use `fromJson()` or `fromJsonString()`.
    *
    * Reads JSON value and merges the fields into the target
    * according to protobuf rules. If the target is omitted,
    * a new instance is created first.
    */
  }, {
    key: "internalJsonRead",
    value: function(r, n, i) {
      if (r !== null && typeof r == "object" && !Array.isArray(r)) {
        var a = i != null ? i : this.create();
        return this.refJsonReader.read(r, a, n), a;
      }
      throw new Error("Unable to parse message ".concat(this.typeName, " from JSON ").concat(Ec(r), "."));
    }
    /**
    * This is an internal method. If you just want to write a message
    * to JSON, use `toJson()` or `toJsonString().
    *
    * Writes JSON value and returns it.
    */
  }, {
    key: "internalJsonWrite",
    value: function(r, n) {
      return this.refJsonWriter.write(r, n);
    }
    /**
    * This is an internal method. If you just want to write a message
    * in binary format, use `toBinary()`.
    *
    * Serializes the message in binary format and appends it to the given
    * writer. Returns passed writer.
    */
  }, {
    key: "internalBinaryWrite",
    value: function(r, n, i) {
      return this.refBinWriter.write(r, n, i), n;
    }
    /**
    * This is an internal method. If you just want to read a message from
    * binary data, use `fromBinary()`.
    *
    * Reads data from binary format and merges the fields into
    * the target according to protobuf rules. If the target is
    * omitted, a new instance is created first.
    */
  }, { key: "internalBinaryRead", value: function(r, n, i, a) {
    var s = a != null ? a : this.create();
    return this.refBinReader.read(r, s, i, n), s;
  } }]), e;
}(), co;
(function(e) {
  e[e.PUBLISHER = 0] = "PUBLISHER", e[e.SUBSCRIBER = 1] = "SUBSCRIBER";
})(co || (co = {}));
var lo;
(function(e) {
  e[e.AUDIO = 0] = "AUDIO", e[e.VIDEO = 1] = "VIDEO";
})(lo || (lo = {}));
var a$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.Codec", []);
  }
  return b(r);
}(S);
new a$();
var s$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.Fingerprint", [{
      no: 1,
      name: "algorithm",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "value",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new s$();
var u$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.SessionDescription", [{ no: 1, name: "target", kind: "enum", T: function() {
      return ["media.Target", co];
    } }, {
      no: 2,
      name: "type",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "sdp",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), pn = new u$(), o$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.CreateTransportRequest", [{
      no: 1,
      name: "consuming",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 2,
      name: "force_tcp",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }, { no: 3, name: "description", kind: "message", T: function() {
      return pn;
    } }]);
  }
  return b(r);
}(S);
new o$();
var c$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.CreateTransportResponse", [{
      no: 1,
      name: "transport_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 2, name: "description", kind: "message", T: function() {
      return pn;
    } }, {
      no: 3,
      name: "transcription_enabled",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S), l$ = new c$(), d$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.RenegotiateRequest", [{
      no: 1,
      name: "transport_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 2, name: "description", kind: "message", T: function() {
      return pn;
    } }]);
  }
  return b(r);
}(S);
new d$();
var f$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.RenegotiateResponse", [{
      no: 1,
      name: "transport_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 2, name: "description", kind: "message", T: function() {
      return pn;
    } }]);
  }
  return b(r);
}(S);
new f$();
var p$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.NestedScore", [{
      no: 1,
      name: "encoding_idx",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }, {
      no: 2,
      name: "rid",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "score",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }, {
      no: 4,
      name: "ssrc",
      kind: "scalar",
      T: 3,
      L: 0
      /*LongType.BIGINT*/
    }]);
  }
  return b(r);
}(S), h$ = new p$(), v$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.ProducerTrack", [{
      no: 1,
      name: "track_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "producer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "stream_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), m$ = new v$(), g$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.ProducerEntry", [{
      no: 1,
      name: "producing_transport_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "producer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new g$();
var y$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.ConsumerEntry", [{
      no: 1,
      name: "consuming_transport_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "consumer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new y$();
var T$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.ProducerState", [{
      no: 1,
      name: "producer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 2, name: "kind", kind: "enum", T: function() {
      return ["media.ProducerKind", lo];
    } }, {
      no: 3,
      name: "pause",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 4,
      name: "screen_share",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 5,
      name: "app_data",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), wa = new T$(), k$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.ConsumerState", [{
      no: 1,
      name: "consumer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 2, name: "producer_state", kind: "message", T: function() {
      return wa;
    } }, { no: 3, name: "producer_track", kind: "message", T: function() {
      return m$;
    } }]);
  }
  return b(r);
}(S), w$ = new k$(), b$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.ProducerIdToConsumerMap", [{ no: 1, name: "map", kind: "map", K: 9, V: { kind: "message", T: function() {
      return w$;
    } } }]);
  }
  return b(r);
}(S), Yh = new b$(), _$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.GeoLocation", [{
      no: 1,
      name: "latitude",
      kind: "scalar",
      T: 2
      /*ScalarType.FLOAT*/
    }, {
      no: 2,
      name: "longitude",
      kind: "scalar",
      T: 2
      /*ScalarType.FLOAT*/
    }, {
      no: 3,
      name: "region",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), E$ = new _$(), A$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.PeerJoinRequest", [{
      no: 1,
      name: "display_name",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "prejoined",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 3,
      name: "room_uuid",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 4,
      name: "meeting_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 5,
      name: "preset",
      kind: "scalar",
      opt: !0,
      T: 12
      /*ScalarType.BYTES*/
    }, {
      no: 6,
      name: "user_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 7,
      name: "organization_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, { no: 8, name: "location", kind: "message", T: function() {
      return E$;
    } }]);
  }
  return b(r);
}(S);
new A$();
var R$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.PeerJoinCompleteRequest", []);
  }
  return b(r);
}(S);
new R$();
var S$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.PeerLeaveRequest", [{
      no: 1,
      name: "close_room",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S);
new S$();
var P$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.ConsumeMultipleProducerRequest", [{
      no: 1,
      name: "producer_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "paused",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S);
new P$();
var C$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.ConsumePeerRequest", [{
      no: 1,
      name: "producing_peer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "paused",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 3,
      name: "producer_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new C$();
var I$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.ProducerCreateRequest", [{
      no: 1,
      name: "kind",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "paused",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 3,
      name: "screen_share",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, { no: 4, name: "description", kind: "message", T: function() {
      return pn;
    } }, {
      no: 5,
      name: "msid",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 6,
      name: "app_data",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new I$();
var D$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.SelectedPeersRequest", []);
  }
  return b(r);
}(S);
new D$();
var M$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.GlobalPeerPinningRequest", [{
      no: 1,
      name: "participant_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new M$();
var O$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.ProducerToggleRequest", [{
      no: 1,
      name: "producer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "pause",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S);
new O$();
var $$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.ConsumerToggleRequest", [{
      no: 1,
      name: "consumer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "pause",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S);
new $$();
var N$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.ProducerCloseRequest", [{
      no: 1,
      name: "producer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 2, name: "description", kind: "message", T: function() {
      return pn;
    } }]);
  }
  return b(r);
}(S);
new N$();
var L$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.ConsumerCloseRequest", [{
      no: 1,
      name: "consumer_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }, { no: 2, name: "description", kind: "message", T: function() {
      return pn;
    } }]);
  }
  return b(r);
}(S);
new L$();
var U$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.KickPeerRequest", [{
      no: 1,
      name: "participant_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new U$();
var F$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.KickAllPeersRequest", []);
  }
  return b(r);
}(S);
new F$();
var V$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.PeerDisplayNameEditRequest", [{
      no: 1,
      name: "participant_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "display_name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new V$();
var B$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.HostMediaControlForPeerRequest", [{
      no: 1,
      name: "participant_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "audio",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 3,
      name: "video",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 4,
      name: "scree_share",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S);
new B$();
var q$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.HostMediaControlForAllPeerRequest", [{
      no: 1,
      name: "audio",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 2,
      name: "video",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 3,
      name: "screen_share",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S);
new q$();
var G$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.GetRoomStateResponse", [{
      no: 1,
      name: "display_title",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "locked_mode",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 3,
      name: "room_uuid",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 4,
      name: "room_name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 5,
      name: "current_peer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 6,
      name: "is_recording",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 7,
      name: "recorder_participant_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 8,
      name: "pinned_peer_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), H$ = new G$(), W$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.ErrorResponse", [{
      no: 1,
      name: "error_message",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "event_id",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }]);
  }
  return b(r);
}(S);
new W$();
var j$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.EmptyResponse", []);
  }
  return b(r);
}(S);
new j$();
var J$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.RoomParticipants", [{
      no: 1,
      name: "peer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 2, name: "producer_states", kind: "message", repeat: 1, T: function() {
      return wa;
    } }, {
      no: 3,
      name: "display_name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 4,
      name: "user_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), zh = new J$(), K$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.SelectedPeersResponse", [{
      no: 1,
      name: "audio_peers",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "compulsory_peers",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), Y$ = new K$(), z$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.SelectedPeersDiffEntry", [{
      no: 1,
      name: "peer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "priority",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }]);
  }
  return b(r);
}(S), X$ = new z$(), Z$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.SelectedPeersDiffResponse", [{ no: 1, name: "entries", kind: "message", repeat: 1, T: function() {
      return X$;
    } }]);
  }
  return b(r);
}(S);
new Z$();
var Q$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.PeerJoinResponse", []);
  }
  return b(r);
}(S);
new Q$();
var x$ = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.PeerJoinCompleteResponse", [{ no: 1, name: "room_state", kind: "message", T: function() {
      return H$;
    } }, { no: 2, name: "participants", kind: "message", repeat: 1, T: function() {
      return zh;
    } }, { no: 3, name: "selected_peers", kind: "message", T: function() {
      return Y$;
    } }, {
      no: 4,
      name: "max_preferred_streams",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }]);
  }
  return b(r);
}(S);
new x$();
var eN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.PeerLeaveResponse", [{
      no: 1,
      name: "closed",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S);
new eN();
var rN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.ConsumeMultipleProducerResponse", [{
      no: 1,
      name: "status",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, { no: 2, name: "consumer_ids_map", kind: "message", T: function() {
      return Yh;
    } }]);
  }
  return b(r);
}(S);
new rN();
var tN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.ConsumePeerResponse", [{
      no: 1,
      name: "status",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, { no: 2, name: "consumer_ids_map", kind: "message", T: function() {
      return Yh;
    } }]);
  }
  return b(r);
}(S);
new tN();
var nN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.ProducerCreateResponse", [{
      no: 1,
      name: "status",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 2,
      name: "producer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 4, name: "description", kind: "message", T: function() {
      return pn;
    } }]);
  }
  return b(r);
}(S);
new nN();
var iN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.ProducerScoreResponse", [{
      no: 1,
      name: "responseid",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 2, name: "score", kind: "message", T: function() {
      return h$;
    } }]);
  }
  return b(r);
}(S);
new iN();
var aN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.ActiveSpeakerResponse", [{
      no: 1,
      name: "responsepeer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "volume",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }]);
  }
  return b(r);
}(S);
new aN();
var sN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.NoActiveSpeakerResponse", []);
  }
  return b(r);
}(S);
new sN();
var uN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.ProducerToggleResponse", []);
  }
  return b(r);
}(S);
new uN();
var oN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.ConsumerToggleResponse", []);
  }
  return b(r);
}(S);
new oN();
var cN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.ProducerClosingResponse", [{ no: 1, name: "description", kind: "message", T: function() {
      return pn;
    } }]);
  }
  return b(r);
}(S);
new cN();
var lN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.ConsumerClosingResponse", []);
  }
  return b(r);
}(S);
new lN();
var dN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.GlobalPeerPinningResponse", []);
  }
  return b(r);
}(S);
new dN();
var fN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.KickPeerResponse", [{
      no: 1,
      name: "status",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new fN();
var pN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.KickAllPeersResponse", [{
      no: 1,
      name: "status",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new pN();
var hN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.HostMediaControlForPeerResponse", [{
      no: 1,
      name: "status",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new hN();
var vN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.HostMediaControlForAllPeerResponse", [{
      no: 1,
      name: "status",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new vN();
var mN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.PeerDisplayNameEditResponse", [{
      no: 1,
      name: "status",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new mN();
var gN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.PeerJoinBroadcastResponse", [{ no: 1, name: "participant", kind: "message", T: function() {
      return zh;
    } }]);
  }
  return b(r);
}(S);
new gN();
var yN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.PeerProducingTransportCreateBroadcastResponse", [{
      no: 1,
      name: "participant_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 2, name: "transport_details", kind: "message", T: function() {
      return l$;
    } }]);
  }
  return b(r);
}(S);
new yN();
var TN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.PeerProducerCreateBroadcastResponse", [{
      no: 1,
      name: "participant_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 2, name: "producer_state", kind: "message", T: function() {
      return wa;
    } }]);
  }
  return b(r);
}(S);
new TN();
var kN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.PeerProducerToggleBroadcastResponse", [{
      no: 1,
      name: "participant_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 2, name: "producer_state", kind: "message", T: function() {
      return wa;
    } }]);
  }
  return b(r);
}(S);
new kN();
var wN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.PeerProducerCloseBroadcastResponse", [{
      no: 1,
      name: "participant_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 2, name: "producer_state", kind: "message", T: function() {
      return wa;
    } }]);
  }
  return b(r);
}(S);
new wN();
var bN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.PeerLeaveBroadcastResponse", [{
      no: 1,
      name: "participant_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new bN();
var _N = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.GlobalPeerPinningBroadcastResponse", [{
      no: 1,
      name: "participant_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new _N();
var EN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.GlobalPeerUnPinningBroadcastResponse", [{
      no: 1,
      name: "participant_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new EN();
var AN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.RecordingStartedBroadcastResponse", [{
      no: 1,
      name: "participant_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new AN();
var RN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.RecordingStoppedBroadcastResponse", [{
      no: 1,
      name: "participant_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new RN();
var SN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.PeerDisplayNameEditBroadcastResponse", [{
      no: 1,
      name: "participant_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "display_name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new SN();
var PN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.PeerPingRequestBroadcastResponse", [{
      no: 1,
      name: "password",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new PN();
var CN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "media.edge.MediaRoomTerminationBroadcastResponse", [{
      no: 1,
      name: "reason",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new CN();
var IN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.ai.MeetingTranscript", [{
      no: 1,
      name: "meeting_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "transcript",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new IN();
var DN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.api.BaseSocketHubMessage", [{
      no: 1,
      name: "event",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }, {
      no: 2,
      name: "id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "peer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 4,
      name: "room_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 5,
      name: "user_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 6,
      name: "payload",
      kind: "scalar",
      T: 12
      /*ScalarType.BYTES*/
    }, {
      no: 7,
      name: "error",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 8,
      name: "sid",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new DN();
var MN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.api.ErrorMessage", [{
      no: 1,
      name: "code",
      kind: "scalar",
      opt: !0,
      T: 5
      /*ScalarType.INT32*/
    }, {
      no: 2,
      name: "message",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new MN();
var ON = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.preset.PollsPermissionUpdate", [{
      no: 1,
      name: "can_create",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 2,
      name: "can_vote",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 3,
      name: "can_view",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S), $N = new ON(), NN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.preset.PluginsPermissionsUpdate", [{
      no: 1,
      name: "can_close",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 2,
      name: "can_start",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S), LN = new NN(), UN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.preset.PublicChatPermission", [{
      no: 1,
      name: "can_send",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 2,
      name: "text",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 3,
      name: "files",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S), FN = new UN(), VN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.preset.PrivateChatPermission", [{
      no: 1,
      name: "can_send",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 2,
      name: "can_receive",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 3,
      name: "text",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 4,
      name: "files",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S), BN = new VN(), qN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.preset.ChatPermissionUpdate", [{ no: 1, name: "public", kind: "message", T: function() {
      return FN;
    } }, { no: 2, name: "private", kind: "message", T: function() {
      return BN;
    } }]);
  }
  return b(r);
}(S), GN = new qN(), HN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.preset.PresetUpdates", [{ no: 1, name: "polls", kind: "message", T: function() {
      return $N;
    } }, { no: 2, name: "plugins", kind: "message", T: function() {
      return LN;
    } }, { no: 3, name: "chat", kind: "message", T: function() {
      return GN;
    } }]);
  }
  return b(r);
}(S), WN = new HN(), jN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.preset.ReadPeersPresetRequest", [{
      no: 1,
      name: "user_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new jN();
var JN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.preset.PeerPreset", [{
      no: 1,
      name: "user_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "peer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "preset",
      kind: "scalar",
      T: 12
      /*ScalarType.BYTES*/
    }]);
  }
  return b(r);
}(S), KN = new JN(), YN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.preset.ReadPeersPresetResponse", [{ no: 1, name: "peer_presets", kind: "message", repeat: 1, T: function() {
      return KN;
    } }]);
  }
  return b(r);
}(S);
new YN();
var zN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.preset.UpdatePeerPreset", [{
      no: 1,
      name: "user_ids",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 2, name: "patch", kind: "message", T: function() {
      return WN;
    } }]);
  }
  return b(r);
}(S), Xh = new zN(), XN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.preset.UpdatePeersPresetRequest", [{ no: 1, name: "update_peers_presets", kind: "message", repeat: 1, T: function() {
      return Xh;
    } }]);
  }
  return b(r);
}(S);
new XN();
var ZN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.preset.UpdatePeersPresetResponse", [{ no: 1, name: "update_peers_presets", kind: "message", repeat: 1, T: function() {
      return Xh;
    } }]);
  }
  return b(r);
}(S);
new ZN();
var QN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.ChatMessage", [{
      no: 1,
      name: "chat_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "peer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "user_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 4,
      name: "display_name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 5,
      name: "pinned",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 6,
      name: "is_edited",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 7,
      name: "payload_type",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }, {
      no: 8,
      name: "payload",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 10,
      name: "target_user_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 11,
      name: "created_at",
      kind: "scalar",
      T: 4,
      L: 2
      /*LongType.NUMBER*/
    }, {
      no: 12,
      name: "created_at_ms",
      kind: "scalar",
      opt: !0,
      T: 4,
      L: 2
      /*LongType.NUMBER*/
    }, {
      no: 13,
      name: "channel_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 14,
      name: "channel_index",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), si = new QN(), xN = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.GetPaginatedChatMessageRoomRequest", [{
      no: 1,
      name: "time_stamp",
      kind: "scalar",
      T: 4,
      L: 2
      /*LongType.NUMBER*/
    }, {
      no: 2,
      name: "size",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }, {
      no: 3,
      name: "from",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }, {
      no: 4,
      name: "reversed",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 5,
      name: "channel_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new xN();
var eL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.GetPaginatedChatMessageRoomResponse", [{ no: 1, name: "messages", kind: "message", repeat: 1, T: function() {
      return si;
    } }, {
      no: 2,
      name: "next",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S);
new eL();
var rL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.GetChatMessagesResponse", [{ no: 1, name: "messages", kind: "message", repeat: 1, T: function() {
      return si;
    } }]);
  }
  return b(r);
}(S);
new rL();
var tL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.SendChatMessageToRoomRequest", [{
      no: 1,
      name: "payload_type",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }, {
      no: 2,
      name: "payload",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new tL();
var nL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.SendChatMessageToRoomResponse", [{ no: 1, name: "message", kind: "message", T: function() {
      return si;
    } }]);
  }
  return b(r);
}(S);
new nL();
var iL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.SendChatMessageToPeersRequest", [{
      no: 1,
      name: "peer_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "payload_type",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }, {
      no: 3,
      name: "payload",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new iL();
var aL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.SendChatMessageToPeersResponse", [{ no: 1, name: "message", kind: "message", T: function() {
      return si;
    } }]);
  }
  return b(r);
}(S);
new aL();
var sL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.SendChatMessageToChannelRequest", [{
      no: 1,
      name: "channel_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "payload_type",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }, {
      no: 3,
      name: "payload",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new sL();
var uL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.SendChatMessageToChannelResponse", [{ no: 1, name: "message", kind: "message", T: function() {
      return si;
    } }]);
  }
  return b(r);
}(S);
new uL();
var oL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.EditChatMessageRequest", [{
      no: 1,
      name: "chat_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "payload_type",
      kind: "scalar",
      opt: !0,
      T: 5
      /*ScalarType.INT32*/
    }, {
      no: 3,
      name: "payload",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 4,
      name: "pinned",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 5,
      name: "channel_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new oL();
var cL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.PinChatMessageRequest", [{
      no: 1,
      name: "chat_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "pinned",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 3,
      name: "channel_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new cL();
var lL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.PinChatMessageResponse", [{
      no: 1,
      name: "chat_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "pinned",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 3,
      name: "channel_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new lL();
var dL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.EditChatMessageResponse", [{ no: 1, name: "message", kind: "message", T: function() {
      return si;
    } }]);
  }
  return b(r);
}(S);
new dL();
var fL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.DeleteChatMessageRequest", [{
      no: 1,
      name: "chat_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "channel_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new fL();
var pL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.DeleteChatMessageResponse", [{
      no: 1,
      name: "chat_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "channel_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new pL();
var hL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.SearchChatMessagesRequest", [{
      no: 1,
      name: "time_stamp",
      kind: "scalar",
      T: 4,
      L: 2
      /*LongType.NUMBER*/
    }, {
      no: 2,
      name: "size",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }, {
      no: 3,
      name: "from",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }, {
      no: 4,
      name: "reversed",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 5,
      name: "channel_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 6,
      name: "search_term",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new hL();
var vL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.MarkChannelIndexAsReadRequest", [{
      no: 1,
      name: "channel_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "user_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "channel_index",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new vL();
var mL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.MarkChannelIndexAsReadResponse", [{
      no: 1,
      name: "channel_index",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new mL();
var gL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.CreateChatChannelRequest", [{
      no: 1,
      name: "display_name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "target_user_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "display_picture_url",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 4,
      name: "visibility",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 5,
      name: "is_direct_message",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S);
new gL();
var yL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.UpdateChatChannelRequest", [{
      no: 1,
      name: "chat_channel_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "display_name",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "target_user_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 4,
      name: "display_picture_url",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 5,
      name: "visibility",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 6,
      name: "is_direct_message",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S);
new yL();
var TL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.CreateChatChannelResponse", [{
      no: 1,
      name: "chat_channel_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new TL();
var kL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.GetChatChannelRequest", [{
      no: 1,
      name: "chat_channel_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new kL();
var wL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.LatestMessageAndUnreadCount", [{ no: 1, name: "message", kind: "message", T: function() {
      return si;
    } }, {
      no: 2,
      name: "unread_count",
      kind: "scalar",
      T: 4,
      L: 2
      /*LongType.NUMBER*/
    }]);
  }
  return b(r);
}(S), bL = new wL(), _L = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.ChatChannel", [{
      no: 1,
      name: "chat_channel_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "display_name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "display_picture_url",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 4,
      name: "visibility",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 5,
      name: "is_direct_message",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, { no: 6, name: "latest_message_and_unread_count", kind: "message", T: function() {
      return bL;
    } }, {
      no: 7,
      name: "target_user_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), EL = new _L(), AL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.GetChatChannelResponse", [{ no: 1, name: "chat_channels", kind: "message", repeat: 1, T: function() {
      return EL;
    } }]);
  }
  return b(r);
}(S);
new AL();
var RL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.ChannelMember", [{
      no: 1,
      name: "id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "name",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "picture",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 4,
      name: "custom_participant_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), SL = new RL(), PL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.chat.GetChatChannelMembersResponse", [{ no: 1, name: "channel_members", kind: "message", repeat: 1, T: function() {
      return SL;
    } }]);
  }
  return b(r);
}(S);
new PL();
var ts;
(function(e) {
  e[e.BROWSER = 0] = "BROWSER", e[e.TRACK = 1] = "TRACK", e[e.COMPOSITE = 2] = "COMPOSITE";
})(ts || (ts = {}));
var ns;
(function(e) {
  e[e.UNSPECIFIED = 0] = "UNSPECIFIED", e[e.ON_STAGE = 1] = "ON_STAGE", e[e.APPROVED_STAGE = 2] = "APPROVED_STAGE", e[e.REQUESTED_STAGE = 3] = "REQUESTED_STAGE", e[e.OFF_STAGE = 4] = "OFF_STAGE";
})(ns || (ns = {}));
var Rd;
(function(e) {
  e[e.NONE = 0] = "NONE", e[e.RECORDER = 1] = "RECORDER", e[e.LIVESTREAMER = 2] = "LIVESTREAMER";
})(Rd || (Rd = {}));
var fo;
(function(e) {
  e[e.HIVE = 0] = "HIVE", e[e.CHAT = 1] = "CHAT", e[e.PING = 2] = "PING";
})(fo || (fo = {}));
var CL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.PeerFlags", [{
      no: 1,
      name: "preset_name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "recorder_type",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "hidden_participant",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S), IL = new CL(), DL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.Peer", [{
      no: 1,
      name: "peer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "user_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "display_name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 4, name: "stage_type", kind: "enum", opt: !0, T: function() {
      return ["socket.room.StageType", ns, "STAGE_TYPE_"];
    } }, {
      no: 5,
      name: "custom_participant_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 6,
      name: "preset_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 7,
      name: "display_picture_url",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 8,
      name: "waitlisted",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, { no: 9, name: "flags", kind: "message", T: function() {
      return IL;
    } }]);
  }
  return b(r);
}(S), Us = new DL(), ML = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.PeerInfoResponse", [{ no: 1, name: "peer", kind: "message", T: function() {
      return Us;
    } }]);
  }
  return b(r);
}(S);
new ML();
var OL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.PeerStatusUpdate", [{
      no: 1,
      name: "peer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "user_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 3, name: "stage_type", kind: "enum", opt: !0, T: function() {
      return ["socket.room.StageType", ns, "STAGE_TYPE_"];
    } }]);
  }
  return b(r);
}(S);
new OL();
var $L = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.RoomPeersInfoRequest", [{
      no: 1,
      name: "seach_query",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "limit",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }, {
      no: 3,
      name: "offset",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }]);
  }
  return b(r);
}(S);
new $L();
var NL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.RoomPeersInfoResponse", [{ no: 1, name: "peers", kind: "message", repeat: 1, T: function() {
      return Us;
    } }]);
  }
  return b(r);
}(S);
new NL();
var LL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.RoomPeerCountResponse", [{
      no: 1,
      name: "count",
      kind: "scalar",
      T: 4,
      L: 2
      /*LongType.NUMBER*/
    }]);
  }
  return b(r);
}(S);
new LL();
var UL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.Room", [{
      no: 1,
      name: "room_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "title",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 4,
      name: "created_at",
      kind: "scalar",
      T: 4,
      L: 2
      /*LongType.NUMBER*/
    }, { no: 5, name: "active_recordings", kind: "message", repeat: 1, T: function() {
      return VL;
    } }, {
      no: 6,
      name: "room_uuid",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), Zh = new UL(), FL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.ActiveRecording", [{
      no: 1,
      name: "recording_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 2, name: "recording_type", kind: "enum", T: function() {
      return ["common.RecordingType", ts];
    } }, {
      no: 3,
      name: "recording_status",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), VL = new FL(), BL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.RoomInfoResponse", [{ no: 1, name: "room", kind: "message", T: function() {
      return Zh;
    } }]);
  }
  return b(r);
}(S);
new BL();
var qL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.GetPeerInfoRequest", [{
      no: 1,
      name: "peer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new qL();
var GL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.UpdatePeerInfoRequest", [{
      no: 1,
      name: "peer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "display_name",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new GL();
var HL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.JoinRoomRequest", [{ no: 1, name: "peer", kind: "message", T: function() {
      return Us;
    } }, {
      no: 3,
      name: "room_uuid",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 4,
      name: "organization_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 5,
      name: "use_hive",
      kind: "scalar",
      opt: !0,
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 6,
      name: "preset",
      kind: "scalar",
      opt: !0,
      T: 12
      /*ScalarType.BYTES*/
    }, { no: 7, name: "capabilities", kind: "enum", repeat: 1, T: function() {
      return ["socket.room.Capabilities", fo, "CAPABILITIES_"];
    } }, {
      no: 8,
      name: "timestamp",
      kind: "scalar",
      opt: !0,
      T: 4,
      L: 2
      /*LongType.NUMBER*/
    }]);
  }
  return b(r);
}(S);
new HL();
var WL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.LeaveRoomRequest", [{ no: 1, name: "peer", kind: "message", T: function() {
      return Us;
    } }, {
      no: 2,
      name: "timestamp",
      kind: "scalar",
      opt: !0,
      T: 4,
      L: 2
      /*LongType.NUMBER*/
    }]);
  }
  return b(r);
}(S);
new WL();
var jL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.UpdateRoomInfoRequest", [{ no: 1, name: "room", kind: "message", T: function() {
      return Zh;
    } }]);
  }
  return b(r);
}(S);
new jL();
var JL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.GetConnectedRoomsDumpRequest", []);
  }
  return b(r);
}(S);
new JL();
var KL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.ServiceError", [{
      no: 1,
      name: "message",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "code",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), Rc = new KL(), YL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.ConnectedMeetingPeer", [{
      no: 1,
      name: "id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "display_name",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "custom_participant_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 4,
      name: "preset_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 5,
      name: "display_picture_url",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), zL = new YL(), XL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.ConnectedMeetingDump", [{
      no: 1,
      name: "id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "title",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, { no: 3, name: "participants", kind: "message", repeat: 1, T: function() {
      return zL;
    } }]);
  }
  return b(r);
}(S), Sd = new XL(), ZL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.GetConnectedRoomsDumpResponse", [{ no: 1, name: "parent_meeting", kind: "message", T: function() {
      return Sd;
    } }, { no: 2, name: "meetings", kind: "message", repeat: 1, T: function() {
      return Sd;
    } }]);
  }
  return b(r);
}(S), QL = new ZL(), xL = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.CreateRoomRequestPayload", [{
      no: 1,
      name: "title",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), eU = new xL(), rU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.CreateConnectedRoomsRequest", [{ no: 1, name: "payloads", kind: "message", repeat: 1, T: function() {
      return eU;
    } }]);
  }
  return b(r);
}(S), tU = new rU(), nU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.CreateRoomResponsePayload", [{
      no: 1,
      name: "id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "title",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, { no: 3, name: "error", kind: "message", T: function() {
      return Rc;
    } }]);
  }
  return b(r);
}(S), iU = new nU(), aU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.CreateConnectedRoomsResponse", [{ no: 1, name: "payloads", kind: "message", repeat: 1, T: function() {
      return iU;
    } }]);
  }
  return b(r);
}(S), Pd = new aU(), sU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.UpdateRoomRequestPayload", [{
      no: 1,
      name: "meeting_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "title",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), uU = new sU(), oU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.UpdateConnectedRoomsRequest", [{ no: 1, name: "payloads", kind: "message", repeat: 1, T: function() {
      return uU;
    } }]);
  }
  return b(r);
}(S);
new oU();
var cU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.DisableRoomPayload", [{
      no: 1,
      name: "id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), lU = new cU(), dU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.DisableConnectedRoomsRequest", [{ no: 1, name: "payloads", kind: "message", repeat: 1, T: function() {
      return lU;
    } }]);
  }
  return b(r);
}(S), fU = new dU(), pU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.DisableConnectedRoomsResponse", [{ no: 1, name: "payloads", kind: "message", repeat: 1, T: function() {
      return mU;
    } }]);
  }
  return b(r);
}(S), hU = new pU(), vU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.DisableConnectedRoomPayload", [{
      no: 1,
      name: "id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "status",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "title",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, { no: 4, name: "error", kind: "message", T: function() {
      return Rc;
    } }]);
  }
  return b(r);
}(S), mU = new vU(), gU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.MovePeerPayload", [{
      no: 1,
      name: "id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "preset_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), yU = new gU(), TU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.MovePeersBetweenRoomsRequest", [{
      no: 1,
      name: "source_meeting_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "destination_meeting_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, { no: 3, name: "participants", kind: "message", repeat: 1, T: function() {
      return yU;
    } }]);
  }
  return b(r);
}(S), kU = new TU(), wU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.MovedPeer", [{
      no: 1,
      name: "meeting_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "custom_participant_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, { no: 3, name: "error", kind: "message", T: function() {
      return Rc;
    } }]);
  }
  return b(r);
}(S), Qh = new wU(), bU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.MovePeersBetweenRoomsResponse", [{ no: 1, name: "payloads", kind: "message", repeat: 1, T: function() {
      return Qh;
    } }]);
  }
  return b(r);
}(S);
new bU();
var _U = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.TransferPeer", [{
      no: 1,
      name: "meeting_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "auth_token",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), EU = new _U(), AU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.GetAllAddedParticipantsResponse", [{ no: 1, name: "participants", kind: "message", repeat: 1, T: function() {
      return SU;
    } }]);
  }
  return b(r);
}(S);
new AU();
var RU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.AddedParticipant", [{
      no: 1,
      name: "id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "name",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "picture",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 4,
      name: "custom_participant_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), SU = new RU(), PU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.RemoveParticipantsRequest", [{
      no: 1,
      name: "peer_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new PU();
var CU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.BroadcastMessage", [{
      no: 1,
      name: "type",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "payload",
      kind: "scalar",
      T: 12
      /*ScalarType.BYTES*/
    }, {
      no: 3,
      name: "timestamp",
      kind: "scalar",
      T: 4,
      L: 2
      /*LongType.NUMBER*/
    }, {
      no: 4,
      name: "peer_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new CU();
var IU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.AcceptWaitingRoomRequests", [{
      no: 1,
      name: "user_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new IU();
var DU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.DenyWaitingRoomRequests", [{
      no: 1,
      name: "user_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new DU();
var MU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.WaitingRoomRequest", [{
      no: 1,
      name: "peer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "user_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "display_name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), OU = new MU(), $U = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.GetWaitingRoomRequests", [{ no: 1, name: "requests", kind: "message", repeat: 1, T: function() {
      return OU;
    } }]);
  }
  return b(r);
}(S);
new $U();
var NU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.room.GetRoomStageStateResponse", [{
      no: 1,
      name: "on_stage_peers",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "approved_stage_peers",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "requested_stage_peers",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new NU();
var LU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.AddPluginRequest", [{
      no: 1,
      name: "plugin_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "staggered",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S);
new LU();
var UU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.RemovePluginRequest", [{
      no: 1,
      name: "plugin_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "staggered",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }]);
  }
  return b(r);
}(S);
new UU();
var FU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.EnablePluginForRoomRequest", [{
      no: 1,
      name: "plugin_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new FU();
var VU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.DisablePluginForRoomRequest", [{
      no: 1,
      name: "plugin_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new VU();
var BU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.EnablePluginForPeersRequest", [{
      no: 1,
      name: "plugin_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "peer_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new BU();
var qU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.DisablePluginForPeersRequest", [{
      no: 1,
      name: "plugin_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "peer_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new qU();
var GU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.PluginEventToRoomRequest", [{
      no: 1,
      name: "plugin_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "plugin_data",
      kind: "scalar",
      T: 12
      /*ScalarType.BYTES*/
    }]);
  }
  return b(r);
}(S);
new GU();
var HU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.PluginEventToPeersRequest", [{
      no: 1,
      name: "plugin_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "peer_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "plugin_data",
      kind: "scalar",
      T: 12
      /*ScalarType.BYTES*/
    }]);
  }
  return b(r);
}(S);
new HU();
var WU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.StoreKeys", [{
      no: 1,
      name: "store_key",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "payload",
      kind: "scalar",
      opt: !0,
      T: 12
      /*ScalarType.BYTES*/
    }]);
  }
  return b(r);
}(S), Sc = new WU(), jU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.PluginStoreInsertKeysRequest", [{
      no: 1,
      name: "plugin_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "store_name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 3, name: "insert_keys", kind: "message", repeat: 1, T: function() {
      return Sc;
    } }]);
  }
  return b(r);
}(S);
new jU();
var JU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.PluginStoreGetKeysRequest", [{
      no: 1,
      name: "plugin_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "store_name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 3, name: "get_keys", kind: "message", repeat: 1, T: function() {
      return Sc;
    } }]);
  }
  return b(r);
}(S);
new JU();
var KU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.PluginStoreDeleteKeysRequest", [{
      no: 1,
      name: "plugin_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "store_name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 3, name: "delete_keys", kind: "message", repeat: 1, T: function() {
      return Sc;
    } }]);
  }
  return b(r);
}(S);
new KU();
var YU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.PluginStoreDeleteRequest", [{
      no: 1,
      name: "plugin_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "store_name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new YU();
var zU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.EnablePluginResponse", [{
      no: 1,
      name: "plugin_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "enabled_by",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), XU = new zU(), ZU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.EnablePluginsResponse", [{ no: 1, name: "plugins", kind: "message", repeat: 1, T: function() {
      return XU;
    } }]);
  }
  return b(r);
}(S);
new ZU();
var QU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.DisablePluginResponse", [{
      no: 1,
      name: "plugin_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "disabled_by",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new QU();
var xU = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.PluginStoreItem", [{
      no: 1,
      name: "timestamp",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "peer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "store_key",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 4,
      name: "payload",
      kind: "scalar",
      T: 12
      /*ScalarType.BYTES*/
    }]);
  }
  return b(r);
}(S), e2 = new xU(), r2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.PluginStoreResponse", [{
      no: 1,
      name: "plugin_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "store_name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 3, name: "store_items", kind: "message", repeat: 1, T: function() {
      return e2;
    } }]);
  }
  return b(r);
}(S);
new r2();
var t2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.plugin.PluginEventResponse", [{
      no: 1,
      name: "plugin_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "plugin_data",
      kind: "scalar",
      T: 12
      /*ScalarType.BYTES*/
    }]);
  }
  return b(r);
}(S);
new t2();
var n2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.livestreaming.LiveStreamingEvent", [{
      no: 1,
      name: "livestream_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "err_message",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 4,
      name: "meeting_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 5,
      name: "playback_url",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 6,
      name: "org_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 7,
      name: "room_name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 8,
      name: "room_uuid",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 9,
      name: "status",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new n2();
var i2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.livestreaming.GetStagePeersResponse", [{
      no: 1,
      name: "stage_peers",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new i2();
var a2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.livestreaming.StageRequest", [{
      no: 1,
      name: "display_name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "user_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "peer_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), s2 = new a2(), u2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.livestreaming.GetStageRequestsResponse", [{ no: 1, name: "stage_requests", kind: "message", repeat: 1, T: function() {
      return s2;
    } }]);
  }
  return b(r);
}(S);
new u2();
var o2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.livestreaming.GrantStageAccessRequest", [{
      no: 1,
      name: "user_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new o2();
var c2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.livestreaming.DenyStageAccessRequest", [{
      no: 1,
      name: "user_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new c2();
var l2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.livestreaming.LeaveStageRequest", [{
      no: 1,
      name: "user_ids",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new l2();
var d2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.polls.Poll", [{
      no: 1,
      name: "poll_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "created_by",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "created_by_user_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 4,
      name: "question",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 5, name: "options", kind: "message", repeat: 1, T: function() {
      return p2;
    } }, {
      no: 6,
      name: "hide_votes",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 7,
      name: "anonymous",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 8,
      name: "votes",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), xh = new d2(), f2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.polls.PollOption", [{
      no: 1,
      name: "text",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "count",
      kind: "scalar",
      opt: !0,
      T: 4,
      L: 2
      /*LongType.NUMBER*/
    }, { no: 3, name: "votes", kind: "message", repeat: 1, T: function() {
      return v2;
    } }]);
  }
  return b(r);
}(S), p2 = new f2(), h2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.polls.PollVote", [{
      no: 1,
      name: "user_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "name",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S), v2 = new h2(), m2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.polls.NewPollRequest", [{
      no: 1,
      name: "question",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "options",
      kind: "scalar",
      repeat: 2,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 3,
      name: "anonymous",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 4,
      name: "hide_votes",
      kind: "scalar",
      T: 8
      /*ScalarType.BOOL*/
    }, {
      no: 5,
      name: "created_by",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 6,
      name: "created_by_user_id",
      kind: "scalar",
      opt: !0,
      T: 9
      /*ScalarType.STRING*/
    }]);
  }
  return b(r);
}(S);
new m2();
var g2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.polls.VotePollRequest", [{
      no: 1,
      name: "poll_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "index",
      kind: "scalar",
      T: 4,
      L: 2
      /*LongType.NUMBER*/
    }]);
  }
  return b(r);
}(S);
new g2();
var y2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.polls.UpdatePollResponse", [{ no: 1, name: "poll", kind: "message", T: function() {
      return xh;
    } }]);
  }
  return b(r);
}(S);
new y2();
var T2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.polls.GetPollsResponse", [{ no: 1, name: "polls", kind: "message", repeat: 1, T: function() {
      return xh;
    } }]);
  }
  return b(r);
}(S);
new T2();
var k2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "socket.recording.RecordingEvent", [{
      no: 1,
      name: "recording_id",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, {
      no: 2,
      name: "err_message",
      kind: "scalar",
      T: 9
      /*ScalarType.STRING*/
    }, { no: 3, name: "recording_type", kind: "enum", T: function() {
      return ["common.RecordingType", ts];
    } }]);
  }
  return b(r);
}(S);
new k2();
var w2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r() {
    return w(this, r), t.call(this, "google.protobuf.Timestamp", [{
      no: 1,
      name: "seconds",
      kind: "scalar",
      T: 3,
      L: 0
      /*LongType.BIGINT*/
    }, {
      no: 2,
      name: "nanos",
      kind: "scalar",
      T: 5
      /*ScalarType.INT32*/
    }]);
  }
  return b(r, [{
    key: "now",
    value: function() {
      var i = this.create(), a = Date.now();
      return i.seconds = Qe.from(Math.floor(a / 1e3)).toBigInt(), i.nanos = a % 1e3 * 1e6, i;
    }
    /**
    * Converts a `Timestamp` to a JavaScript Date.
    */
  }, {
    key: "toDate",
    value: function(i) {
      return new Date(Qe.from(i.seconds).toNumber() * 1e3 + Math.ceil(i.nanos / 1e6));
    }
    /**
    * Converts a JavaScript Date to a `Timestamp`.
    */
  }, {
    key: "fromDate",
    value: function(i) {
      var a = this.create(), s = i.getTime();
      return a.seconds = Qe.from(Math.floor(s / 1e3)).toBigInt(), a.nanos = s % 1e3 * 1e6, a;
    }
    /**
    * In JSON format, the `Timestamp` type is encoded as a string
    * in the RFC 3339 format.
    */
  }, {
    key: "internalJsonWrite",
    value: function(i, a) {
      var s = Qe.from(i.seconds).toNumber() * 1e3;
      if (s < Date.parse("0001-01-01T00:00:00Z") || s > Date.parse("9999-12-31T23:59:59Z"))
        throw new Error("Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");
      if (i.nanos < 0)
        throw new Error("Unable to encode invalid Timestamp to JSON. Nanos must not be negative.");
      var u = "Z";
      if (i.nanos > 0) {
        var o = (i.nanos + 1e9).toString().substring(1);
        o.substring(3) === "000000" ? u = "." + o.substring(0, 3) + "Z" : o.substring(6) === "000" ? u = "." + o.substring(0, 6) + "Z" : u = "." + o + "Z";
      }
      return new Date(s).toISOString().replace(".000Z", u);
    }
    /**
    * In JSON format, the `Timestamp` type is encoded as a string
    * in the RFC 3339 format.
    */
  }, { key: "internalJsonRead", value: function(i, a, s) {
    if (typeof i != "string")
      throw new Error("Unable to parse Timestamp from JSON " + Ec(i) + ".");
    var u = i.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);
    if (!u)
      throw new Error("Unable to parse Timestamp from JSON. Invalid format.");
    var o = Date.parse(u[1] + "-" + u[2] + "-" + u[3] + "T" + u[4] + ":" + u[5] + ":" + u[6] + (u[8] ? u[8] : "Z"));
    if (Number.isNaN(o))
      throw new Error("Unable to parse Timestamp from JSON. Invalid value.");
    if (o < Date.parse("0001-01-01T00:00:00Z") || o > Date.parse("9999-12-31T23:59:59Z"))
      throw new globalThis.Error("Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");
    return s || (s = this.create()), s.seconds = Qe.from(o / 1e3).toBigInt(), s.nanos = 0, u[7] && (s.nanos = parseInt("1" + u[7] + "0".repeat(9 - u[7].length)) - 1e9), s;
  } }]), r;
}(S);
new w2();
var b2 = 0, _2 = 1, E2 = 2, A2 = 3, R2 = 4, S2 = 5, P2 = {
  getPeerInfo: 0,
  updatePeerInfo: 1,
  getRoomPeersInfo: 2,
  joinRoom: 3,
  leaveRoom: 4,
  getRoomInfo: 5,
  updateRoomInfo: 6,
  closeRoom: 7,
  startedLivestream: 8,
  stoppedLivestream: 9,
  erroredLivestream: 10,
  getStagePeers: 11,
  getStageRequests: 12,
  requestStageAccess: 13,
  cancelStageRequest: 14,
  grantStageAccess: 15,
  denyStageAccess: 16,
  roomPeerCount: 17,
  joinStage: 18,
  leaveStage: 19,
  // getConnectedRoomsDump returns entire dump for a breakout rooms meeting
  // This details which peer is in which meeting currently, and which is the parent meeting
  getConnectedRoomsDump: 20,
  // createConnectedRooms to create breakout rooms
  createConnectedRooms: 21,
  // deleteConnectedRooms to delete breakout rooms
  deleteConnectedRooms: 22,
  // move peers between breakout rooms
  movePeers: 23,
  // transfer peer to new room
  transferPeer: 24,
  // message sent by socket service to inform client of a participant joining a breakout room
  movedPeer: 25,
  // message sent by socket service to inform client of updates in connected rooms
  connectedRoomsUpdated: 26,
  // message sent by socket service to inform client of deletion in connected rooms
  connectedRoomsDeleted: 27,
  // get all participants that have been added to the meeting irrespective of their live status
  getAllAddedParticipants: 28,
  // broadcast api
  broadcastMessage: 29,
  kick: 30,
  kickAll: 31,
  transcript: 32,
  // waitlist events
  getWaitingRoomRequests: 33,
  acceptWaitingRoomRequests: 34,
  waitingRoomRequestAccepted: 35,
  denyWaitingRoomRequests: 36,
  waitingRoomRequestDenied: 37,
  peerStageStatusUpdate: 38,
  broadcastToPeers: 39,
  recordingStarted: 40,
  recordingStopped: 41,
  recordingPaused: 42,
  getRoomStageState: 43
}, C2 = { getMessages: 0, sendMessageToRoom: 1, sendMessageToPeers: 2, editMessage: 3, deleteMessage: 4, getPaginatedMessages: 5, sendMessageToChannel: 6, searchChannelMessages: 7, getAllChatChannels: 8, markChannelIndexAsRead: 9, pinMessage: 10 }, I2 = { getPlugins: 0, addPlugin: 1, enablePluginForRoom: 2, disablePluginForPeers: 3, enablePluginForPeers: 4, disablePluginForRoom: 5, removePlugin: 6, customPluginEventToRoom: 7, customPluginEventToPeers: 8, storeInsertKeys: 9, storeGetKeys: 10, storeDeleteKeys: 11, storeDelete: 12 }, D2 = { createPoll: 0, getPolls: 1, votePoll: 2, updatePoll: 3 }, M2 = {
  unknown: 0,
  createWebRTCTransport: 1,
  produce: 2,
  consume: 3,
  toggleProducer: 4,
  toggleConsumer: 5,
  closeProducer: 6,
  closeConsumer: 7,
  // adding some buffers for new media events.
  joinRoom: 16,
  leaveRoom: 17,
  selectedPeer: 18,
  globalPinPeer: 19,
  selfJoinComplete: 20,
  // some additional buffer for broadcast events.
  peerJoinedBroadcast: 25,
  peerLeaveBroadcast: 26,
  peerProducerCreateBroadcast: 27,
  peerProducerToggleBroadcast: 28,
  peerProducerCloseBroadcast: 29,
  globalPeerPinBroadcast: 30,
  recordingStartedBroadcast: 31,
  recordingStoppedBroadcast: 32,
  peerDisplayNameEditBroadcast: 33,
  mediaRoomTerminationBroadcastResponse: 36,
  selectedPeerDiff: 40,
  renegotiateSessionDescription: 50,
  errorResponse: 60,
  kickPeer: 90,
  kickAll: 91,
  changeDisplayName: 92,
  hostControlPeer: 93,
  hostControlAllPeers: 94
}, O2 = { createChatChannel: 0, getChatChannel: 1, deprecatedGetAllChatChannels: 2, getChannelMembers: 3, updateChatChannel: 4 }, $2 = { getUserPresets: 0, updateUserPreset: 1 };
function Ci(e, t) {
  return Object.keys(t).reduce(function(r, n) {
    return r[n] = (e << 16) + t[n], r;
  }, {});
}
function N2(e) {
  return Object.keys(e).reduce(function(t, r) {
    return t[r] = 16777216 | e[r], t;
  }, {});
}
var xt = Ci(b2, P2);
Ci(_2, C2);
Ci(E2, I2);
Ci(A2, D2);
Ci(R2, O2);
N2(M2);
Ci(S2, $2);
var ze = /* @__PURE__ */ function() {
  function e() {
    w(this, e);
  }
  return b(e, null, [{ key: "handleConnectedRoomsDumpRaw", value: function(r) {
    var n, i = r.payload, a = QL.fromBinary(i), s = a.meetings.map(function(o) {
      var c;
      return { id: o.id, title: o.title, participants: (c = o.participants) !== null && c !== void 0 ? c : [] };
    }), u = { id: a.parentMeeting.id, title: a.parentMeeting.title, participants: (n = a.parentMeeting.participants) !== null && n !== void 0 ? n : [] };
    return { parentMeeting: u, meetings: s };
  } }, { key: "handleTransferPeerRaw", value: function(r) {
    var n = r.payload, i = EU.fromBinary(n);
    return { authToken: i.authToken, meetingId: i.meetingId };
  } }, { key: "handleMovedPeerRaw", value: function(r) {
    var n = r.payload, i = Qh.fromBinary(n);
    return { meetingId: i.meetingId, customParticipantId: i.customParticipantId };
  } }, { key: "handleConnectedRoomsUpdatedRaw", value: function(r) {
    var n = r.payload, i = Pd.fromBinary(n);
    return i.payloads.map(function(a) {
      return { id: a.id, title: a.title };
    });
  } }, { key: "handleConnectedRoomsDeletedRaw", value: function(r) {
    var n = r.payload, i = hU.fromBinary(n);
    return i.payloads;
  } }, { key: "getConnectedRoomsDump", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n() {
      var i;
      return p().wrap(function(s) {
        for (; ; )
          switch (s.prev = s.next) {
            case 0:
              return s.next = 2, e.socketService.sendMessagePromise(xt.getConnectedRoomsDump);
            case 2:
              return i = s.sent, s.abrupt("return", e.handleConnectedRoomsDumpRaw(i));
            case 4:
            case "end":
              return s.stop();
          }
      }, n);
    }));
    function r() {
      return t.apply(this, arguments);
    }
    return r;
  }() }, {
    key: "createConnectedRooms",
    value: function() {
      var t = k(/* @__PURE__ */ p().mark(function n(i) {
        var a, s, u;
        return p().wrap(function(c) {
          for (; ; )
            switch (c.prev = c.next) {
              case 0:
                return c.next = 2, e.socketService.sendMessagePromise(xt.createConnectedRooms, tU.toBinary({ payloads: i }));
              case 2:
                return a = c.sent, s = a.payload, u = Pd.fromBinary(s).payloads, c.abrupt("return", u.map(function(l) {
                  return { id: l.id, title: l.title };
                }));
              case 6:
              case "end":
                return c.stop();
            }
        }, n);
      }));
      function r(n) {
        return t.apply(this, arguments);
      }
      return r;
    }()
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
  }, { key: "updateConnectedRooms", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      return p().wrap(function(s) {
        for (; ; )
          switch (s.prev = s.next) {
            case 0:
            case "end":
              return s.stop();
          }
      }, n);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "disableConnectedRooms", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      var a, s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              return a = i.map(function(c) {
                return { id: c };
              }), o.next = 3, e.socketService.sendMessagePromise(xt.deleteConnectedRooms, fU.toBinary({ payloads: a }));
            case 3:
              return s = o.sent, o.abrupt("return", e.handleConnectedRoomsDeletedRaw(s));
            case 5:
            case "end":
              return o.stop();
          }
      }, n);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "movePeersBetweenRooms", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      var a, s;
      return p().wrap(function(o) {
        for (; ; )
          switch (o.prev = o.next) {
            case 0:
              return o.prev = 0, o.next = 3, e.socketService.sendMessagePromise(xt.movePeers, kU.toBinary({ sourceMeetingId: i.sourceMeetingId, destinationMeetingId: i.destinationMeetingId, participants: i.participants }));
            case 3:
              if (a = o.sent, s = new TextDecoder().decode(a.payload), !s.includes("error")) {
                o.next = 7;
                break;
              }
              return o.abrupt("return", { success: !1, error: "failed to move participants" });
            case 7:
              return o.abrupt("return", { success: !0 });
            case 10:
              return o.prev = 10, o.t0 = o.catch(0), o.abrupt("return", { success: !1, error: o.t0 });
            case 13:
            case "end":
              return o.stop();
          }
      }, n, null, [[0, 10]]);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }]), e;
}();
ze.socketService = void 0;
ze.currentMeetingId = void 0;
var Gi = /* @__PURE__ */ V("self"), L2 = /* @__PURE__ */ function(e) {
  E(r, e);
  var t = A(r);
  function r(n) {
    var i;
    return w(this, r), i = t.call(this), Object.defineProperty(M(i), Gi, { writable: !0, value: void 0 }), i.meetings = [], i.parentMeeting = null, f(M(i), Gi)[Gi] = n.self, i;
  }
  return b(r, [{ key: "supportsConnectedMeetings", get: function() {
    return f(this, Gi)[Gi].id !== "" && Mr.isV2AuthToken && Oe.hasFeature($e.CONNECTED_MEETINGS);
  } }, {
    key: "isActive",
    get: function() {
      return this.meetings.length !== 0;
    }
    // eslint-disable-next-line class-methods-use-this
  }, { key: "currentMeetingId", get: function() {
    return ze.currentMeetingId;
  } }, {
    key: "validateConnectedMeetingsAction",
    value: function() {
      if (!this.supportsConnectedMeetings)
        throw new Error(`You are not allowed to perform this action.
						Please connect with Dyte team to move you to V2 APIs & to enable connected meetings.`);
    }
    /**
    * get connected meeting state
    */
  }, {
    key: "getConnectedMeetings",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a() {
        var s;
        return p().wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                return this.validateConnectedMeetingsAction(), o.next = 3, ze.getConnectedRoomsDump();
              case 3:
                return s = o.sent, o.abrupt("return", s);
              case 5:
              case "end":
                return o.stop();
            }
        }, a, this);
      }));
      function i() {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * create connected meetings
    */
  }, {
    key: "createMeetings",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s) {
        var u;
        return p().wrap(function(c) {
          for (; ; )
            switch (c.prev = c.next) {
              case 0:
                return this.validateConnectedMeetingsAction(), c.next = 3, ze.createConnectedRooms(s);
              case 3:
                return u = c.sent, c.abrupt("return", u.map(function(l) {
                  return { id: l.id, title: l.title };
                }));
              case 5:
              case "end":
                return c.stop();
            }
        }, a, this);
      }));
      function i(a) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * update meeting title
    */
  }, {
    key: "updateMeetings",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s) {
        return p().wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                return this.validateConnectedMeetingsAction(), o.next = 3, ze.updateConnectedRooms(s.map(function(c) {
                  return { meetingId: c.id, title: c.title };
                }));
              case 3:
              case "end":
                return o.stop();
            }
        }, a, this);
      }));
      function i(a) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * delete connected meetings
    */
  }, {
    key: "deleteMeetings",
    value: function() {
      var n = k(/* @__PURE__ */ p().mark(function a(s) {
        var u = this, o, c;
        return p().wrap(function(d) {
          for (; ; )
            switch (d.prev = d.next) {
              case 0:
                return this.validateConnectedMeetingsAction(), o = this.meetings.map(function(v) {
                  return s.includes(v.id) && v.participants.length !== 0 ? u.moveParticipants(v.id, u.parentMeeting.id, v.participants.map(function(h) {
                    return h.id;
                  })) : Promise.resolve();
                }), d.next = 4, Promise.all(o);
              case 4:
                return d.next = 6, ze.disableConnectedRooms(s);
              case 6:
                return c = d.sent, d.abrupt("return", c);
              case 8:
              case "end":
                return d.stop();
            }
        }, a, this);
      }));
      function i(a) {
        return n.apply(this, arguments);
      }
      return i;
    }()
    /**
    * Trigger event to move participants
    *
    * @param {string} sourceMeetingId - id of source meeting
    * @param {string} destinationMeetingId - id of destination meeting
    * @param {string[]} participantIds - list of id of the participants
    */
  }, { key: "moveParticipants", value: function() {
    var n = k(/* @__PURE__ */ p().mark(function a(s, u, o) {
      var c, l;
      return p().wrap(function(v) {
        for (; ; )
          switch (v.prev = v.next) {
            case 0:
              return this.validateConnectedMeetingsAction(), c = /* @__PURE__ */ new Map(), [].concat(Mt(this.parentMeeting.participants), Mt(this.meetings.flatMap(function(h) {
                return h.participants;
              }))).forEach(function(h) {
                return c.set(h.id, h);
              }), v.next = 5, ze.movePeersBetweenRooms({ sourceMeetingId: s, destinationMeetingId: u, participants: o.map(function(h) {
                return { id: h };
              }) });
            case 5:
              return l = v.sent, l.success && (u === this.parentMeeting.id && (this.parentMeeting.participants = this.parentMeeting.participants.concat(o.map(function(h) {
                return c.get(h);
              }))), s === this.parentMeeting.id && (this.parentMeeting.participants = this.parentMeeting.participants.filter(function(h) {
                return !o.includes(h.id);
              })), this.meetings = this.meetings.map(function(h) {
                if (u === h.id) {
                  var m = h.participants.concat(o.map(function(y) {
                    return c.get(y);
                  }));
                  return ie(ie({}, h), {}, { participants: m });
                }
                if (s === h.id) {
                  var T = h.participants.filter(function(y) {
                    return !o.includes(y.id);
                  });
                  return ie(ie({}, h), {}, { participants: T });
                }
                return h;
              })), v.abrupt("return", l);
            case 8:
            case "end":
              return v.stop();
          }
      }, a, this);
    }));
    function i(a, s, u) {
      return n.apply(this, arguments);
    }
    return i;
  }() }]), r;
}(rt), U2 = Object.defineProperty, F2 = Object.getOwnPropertyDescriptor, Pc = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? F2(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && U2(r, n, a), a;
}, V2 = (Ct = /* @__PURE__ */ V("parentMeetingOptions"), It = /* @__PURE__ */ V("currentMeeting"), Vs = /* @__PURE__ */ function() {
  function e(t, r) {
    w(this, e), this.connectedMeetings = void 0, Object.defineProperty(this, Ct, { writable: !0, value: void 0 }), Object.defineProperty(this, It, { writable: !0, value: void 0 }), f(this, Ct)[Ct] = r, this.connectedMeetings = new L2(t), this.setCurrentMeeting(t);
  }
  return b(e, [{ key: "setCurrentMeeting", value: function(r) {
    f(this, It)[It] = r, ze.currentMeetingId = r.meta.roomName;
  } }, { key: "getConnectedMeetings", value: function() {
    this.connectedMeetings.getConnectedMeetings();
  } }, {
    key: "setupEvents",
    value: function() {
      ze.socketService && (ze.socketService.on(xt.getConnectedRoomsDump, this.handleConnectedRoomsDump.bind(this)), ze.socketService.on(xt.transferPeer, this.handleTransferPeer.bind(this)), ze.socketService.on(xt.movedPeer, this.handleMovedPeer.bind(this)), ze.socketService.on(xt.connectedRoomsUpdated, this.handleConnectedRoomsUpdated.bind(this)), ze.socketService.on(xt.connectedRoomsDeleted, this.handleConnectedRoomsDeleted.bind(this)));
    }
    // event handlers
  }, { key: "handleTransferPeer", value: function(r) {
    var n = ze.handleTransferPeerRaw(r);
    return this.switchMeeting(n);
  } }, { key: "switchMeeting", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      var a, s, u, o;
      return p().wrap(function(l) {
        for (; ; )
          switch (l.prev = l.next) {
            case 0:
              if (a = i.authToken, s = i.meetingId, this.connectedMeetings.supportsConnectedMeetings) {
                l.next = 3;
                break;
              }
              throw new Error(`You are not allowed to perform this action.
								Please connect with Dyte team to move you to V2 APIs & to enable connected meetings.`);
            case 3:
              return this.connectedMeetings.emit("changingMeeting", s), u = f(this, It)[It].self.videoEnabled, l.next = 7, f(this, It)[It].leave("connected-meeting");
            case 7:
              return ze.socketService = void 0, l.next = 10, H2.init({ authToken: a, baseURI: f(this, Ct)[Ct].baseURI, defaults: ie(ie({}, f(this, Ct)[Ct].defaults), {}, { video: u, audio: !1 }), modules: f(this, Ct)[Ct].modules });
            case 10:
              return o = l.sent, o.self.setName(f(this, It)[It].self.name), l.prev = 12, l.next = 15, o.join();
            case 15:
              l.next = 20;
              break;
            case 17:
              l.prev = 17, l.t0 = l.catch(12), P.addLogInCurrentSpan("error", "ConnectedMeetingsController.joinRoom", { error: l.t0 });
            case 20:
              return this.connectedMeetings.emit("meetingChanged", o), this.setCurrentMeeting(o), l.abrupt("return", o);
            case 23:
            case "end":
              return l.stop();
          }
      }, n, this, [[12, 17]]);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }, {
    key: "handleConnectedRoomsDump",
    value: function(r) {
      var n = ze.handleConnectedRoomsDumpRaw(r);
      this.connectedMeetings.meetings = n.meetings.map(function(i) {
        return { id: i.id, title: i.title, participants: i.participants || [] };
      }), this.connectedMeetings.parentMeeting = { id: n.parentMeeting.id, title: n.parentMeeting.title, participants: n.parentMeeting.participants }, this.emitStateUpdate();
    }
    // eslint-disable-next-line class-methods-use-this
  }, { key: "handleMovedPeer", value: function(r) {
    var n = ze.handleMovedPeerRaw(r);
    return n;
  } }, { key: "handleConnectedRoomsUpdated", value: function(r) {
    var n = ze.handleConnectedRoomsUpdatedRaw(r), i = /* @__PURE__ */ new Map();
    this.connectedMeetings.meetings.forEach(function(a) {
      i.set(a.id, a);
    }), n.forEach(function(a) {
      i.has(a.id) ? i.get(a.id).title = a.title : i.set(a.id, ie(ie({}, a), {}, { participants: [] }));
    }), this.connectedMeetings.meetings = Array.from(i.values()), this.emitStateUpdate();
  } }, { key: "handleConnectedRoomsDeleted", value: function(r) {
    var n = ze.handleConnectedRoomsDeletedRaw(r), i = n.map(function(a) {
      return a.id;
    });
    this.connectedMeetings.meetings = this.connectedMeetings.meetings.filter(function(a) {
      return !i.includes(a.id);
    });
  } }, { key: "emitStateUpdate", value: function() {
    this.connectedMeetings.emit("stateUpdate", { meetings: this.connectedMeetings.meetings, parentMeeting: this.connectedMeetings.parentMeeting });
  } }], [{ key: "init", value: function(r, n) {
    return e.instance || (e.instance = new e(r, n)), e.instance.connectedMeetings.supportsConnectedMeetings && (e.instance.setupEvents(), r.self.once("roomJoined", function() {
      return e.instance.getConnectedMeetings();
    })), e.instance;
  } }]), e;
}(), Vs.instance = void 0, Vs), Fs = V2;
Pc([P.trace("ConnectedMeetingsController.getConnectedMeetings")], Fs.prototype, "getConnectedMeetings", 1);
Pc([P.trace("ConnectedMeetingsController.setupEvents")], Fs.prototype, "setupEvents", 1);
Pc([P.trace("ConnectedMeetingsController.switchMeeting")], Fs.prototype, "switchMeeting", 1);
var B2 = Object.defineProperty, q2 = Object.getOwnPropertyDescriptor, Ii = function(t, r, n, i) {
  for (var a = i > 1 ? void 0 : i ? q2(r, n) : r, s = t.length - 1, u; s >= 0; s--)
    (u = t[s]) && (a = (i ? u(r, n, a) : u(a)) || a);
  return i && a && B2(r, n, a), a;
}, rn = (fi = /* @__PURE__ */ V("connectedMeetingsController"), _a = /* @__PURE__ */ V("attachConnectedMeetingsController"), Bs = /* @__PURE__ */ function() {
  function e(t) {
    w(this, e), Object.defineProperty(this, _a, { value: G2 }), Object.defineProperty(this, fi, { writable: !0, value: void 0 }), this.self = void 0, this.participants = void 0, this.meta = void 0, this.ai = void 0, this.plugins = void 0, this.chat = void 0, this.polls = void 0, this.remote = void 0, this.recording = void 0, this.livestream = void 0, this.stage = void 0, this.troubleshoot = void 0, this.__internals__ = void 0, this.self = t, this.participants = new gr(t), this.meta = new ju(t, Yr.GroupCall, "Meeting"), this.ai = new _n(), this.plugins = new ro(), this.chat = new ir(t, this.participants), this.polls = new to(t), this.recording = new Zn(t), this.livestream = new wc(t), this.stage = new On(t, this.participants, Yr.GroupCall), this.troubleshoot = new PO(t), this.__internals__ = new fO(R, Bh);
  }
  return b(e, [{ key: "joinRoom", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n() {
      return p().wrap(function(a) {
        for (; ; )
          switch (a.prev = a.next) {
            case 0:
              return this.self.roomJoined = !0, this.self.roomState = "joined", a.abrupt("return", this.self.emit("roomJoined"));
            case 3:
            case "end":
              return a.stop();
          }
      }, n, this);
    }));
    function r() {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "leaveRoom", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      return p().wrap(function(s) {
        for (; ; )
          switch (s.prev = s.next) {
            case 0:
              return this.self.roomJoined = !1, this.self.roomState = i != null ? i : "ended", s.abrupt("return", this.self.emit("roomLeft", { state: i }));
            case 3:
            case "end":
              return s.stop();
          }
      }, n, this);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "join", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n() {
      return p().wrap(function(a) {
        for (; ; )
          switch (a.prev = a.next) {
            case 0:
              return this.self.roomJoined = !0, this.self.roomState = "joined", a.abrupt("return", this.self.emit("roomJoined"));
            case 3:
            case "end":
              return a.stop();
          }
      }, n, this);
    }));
    function r() {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "leave", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      return p().wrap(function(s) {
        for (; ; )
          switch (s.prev = s.next) {
            case 0:
              return this.self.roomJoined = !1, this.self.roomState = i != null ? i : "ended", s.abrupt("return", this.self.emit("roomLeft", { state: i }));
            case 3:
            case "end":
              return s.stop();
          }
      }, n, this);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }, { key: "connectedMeetings", get: (
    /**
    * The connectedMeetings object stores the connected meetings states.
    * It exposes methods to create/read/update/delete methods for connected meetings.
    */
    function() {
      var r;
      return (r = f(this, fi)[fi]) === null || r === void 0 ? void 0 : r.connectedMeetings;
    }
  ) }], [{ key: "init", value: function() {
    var t = k(/* @__PURE__ */ p().mark(function n(i) {
      var a, s, u, o, c, l, d, v, h;
      return p().wrap(function(T) {
        for (; ; )
          switch (T.prev = T.next) {
            case 0:
              return WM((a = i.overrides) !== null && a !== void 0 ? a : {}), Ve.init(), l = Kr(), window.__zone_symbol__DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION = !0, P.init(l, (s = (u = i.modules) === null || u === void 0 ? void 0 : u.tracing) !== null && s !== void 0 ? s : !0), R.info("DyteClient::init::options", { dyteClientInitOptions: ie(ie({}, i), {}, {
                // Storing only first and last 10 chars of authToken
                authToken: "".concat((o = i.authToken) === null || o === void 0 ? void 0 : o.slice(0, 10), "...").concat((c = i.authToken) === null || c === void 0 ? void 0 : c.slice(-10))
              }) }), !navigator.isReactNative && typeof window != "undefined" && (window.addEventListener("error", function(y) {
                var _;
                !((_ = y.filename) !== null && _ !== void 0 && _.includes("localhost")) && y.lineno !== 0 && R.error("window::error", { error: y.error }, !0);
              }), window.addEventListener("unhandledrejection", function(y) {
                var _, C, D, I, O;
                R.error("window::unhandledrejection", {
                  error: y == null ? void 0 : y.reason,
                  /**
                  * NOTE(ravindra-dyte):
                  * Network calls fail a lot for clients,
                  *	tracking more info to see where
                  *	*/
                  networkCall: { url: y == null || (_ = y.reason) === null || _ === void 0 || (_ = _.config) === null || _ === void 0 ? void 0 : _.url, baseURL: y == null || (C = y.reason) === null || C === void 0 || (C = C.config) === null || C === void 0 ? void 0 : C.baseURL, method: y == null || (D = y.reason) === null || D === void 0 || (D = D.config) === null || D === void 0 ? void 0 : D.method, status: y == null || (I = y.reason) === null || I === void 0 ? void 0 : I.status, statusText: y == null || (O = y.reason) === null || O === void 0 ? void 0 : O.statusText }
                }, !0);
              }), window.addEventListener("offline", function() {
                R.info("window::offline");
              }), window.addEventListener("online", function() {
                R.info("window::online");
              }), d = ie({ chat: !0, participant: !0, plugin: !0, poll: !0, self: !0, meta: !0, permissions: !0, theme: !0, tracing: !0, devTools: { logs: !1 }, internals: !0, stage: !0, pip: !0 }, i == null ? void 0 : i.modules), cD(ie(ie({}, i), {}, { modules: d, apiBase: "https://api.dyte.io" }))), HM(i.authToken, i.roomName), P.meetingMetadata.roomName = Mr.isV2AuthToken ? Mr.meetingId : i.roomName, T.next = 11, We.__init__();
            case 11:
              return v = T.sent, h = new rn(v), f(h, _a)[_a](i), T.abrupt("return", h);
            case 15:
            case "end":
              return T.stop();
          }
      }, n);
    }));
    function r(n) {
      return t.apply(this, arguments);
    }
    return r;
  }() }]), e;
}(), Bs.DyteSelfMedia = Uh, Bs);
function G2(e) {
  f(this, fi)[fi] = Fs.init(this, e);
}
Ii([lr(function(e) {
  throw new $(e.message, "0002");
}), At.executeWithLock({ methodName: "meeting.join", lockName: "DyteClient.join", timeout: 3e3 })], rn.prototype, "joinRoom", 1);
Ii([lr(function(e) {
  throw new $(e.message, "0003");
})], rn.prototype, "leaveRoom", 1);
Ii([lr(function(e) {
  throw new $(e.message, "0002");
}), At.executeWithLock({ methodName: "meeting.join", lockName: "DyteClient.join", timeout: 3e3 })], rn.prototype, "join", 1);
Ii([lr(function(e) {
  throw new $(e.message, "0003");
})], rn.prototype, "leave", 1);
Ii([lr(function(e) {
  throw new $(e.message, "0001");
}), At.executeWithLock({ methodName: "DyteClient.init", lockName: "DyteClient.init", timeout: 3e3 })], rn, "init", 1);
rn = Ii([lr(function(e) {
  throw new $(e.message, "0000");
})], rn);
var H2 = rn;
export {
  H2 as default
};
