import{r as t,h as i,H as s,a as e}from"./p-f3ae5269.js";import{d as o}from"./p-c8c07ee9.js";import{d as a}from"./p-cadf534b.js";import{u as h}from"./p-02da5bca.js";import{R as n}from"./p-0dd43c7b.js";import{u as r}from"./p-f682efe7.js";import{i as p}from"./p-f47d4fe8.js";import{g as l}from"./p-4de316e3.js";const d=class{constructor(i){t(this,i),this.setHostDimensions=()=>{const{clientWidth:t,clientHeight:i}=this.host;this.dimensions={width:t,height:i}},this.onParticipantTileLoad=t=>{var i,s,e;if(!this.meeting)return;const{participant:o,videoElement:a}=t.detail;o&&a&&(null===(i=this.meeting.participants.pip)||void 0===i||i.addSource(o.id,a,o.videoEnabled,!1,null!==(s=o.name)&&void 0!==s?s:l(o.name)),o.videoEnabled&&(null===(e=this.meeting.participants.pip)||void 0===e||e.enableSource(o.id)))},this.onParticipantTileUnload=t=>{var i;this.meeting&&(null===(i=this.meeting.participants.pip)||void 0===i||i.removeSource(t.detail.id))},this.participants=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=o,this.iconPack=a,this.t=h(),this.dimensions={width:0,height:0}}connectedCallback(){this.resizeObserver=new p(this.setHostDimensions),this.resizeObserver.observe(this.host)}disconnectedCallback(){var t;null===(t=this.resizeObserver)||void 0===t||t.disconnect()}render(){const t={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t},{width:e,height:o,getPosition:a}=r({dimensions:this.dimensions,count:this.participants.length,aspectRatio:this.aspectRatio,gap:this.gap});return i(s,null,this.participants.map(((s,h)=>{const{top:r,left:p}=a(h);return i(n,{element:"dyte-participant-tile",defaults:t,props:{participant:s,style:{position:"absolute",top:`${r}px`,left:`${p}px`,width:`${e}px`,height:`${o}px`},key:s.id,"data-participant":s.id,onTileLoad:this.onParticipantTileLoad,onTileUnload:this.onParticipantTileUnload},childProps:{participant:s},deepProps:!0})})),i("slot",null))}get host(){return e(this)}};d.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block;height:100%;width:100%}";export{d as dyte_simple_grid}