"use strict";(self.webpackChunkproductdb_docs=self.webpackChunkproductdb_docs||[]).push([[21830],{394:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>d,toc:()=>s});var n=t(74848),r=t(28453);const a={title:"Building Your Own UI",sidebar_position:2},o=void 0,d={id:"render-participant-videos/custom-ui",title:"Building Your Own UI",description:"In this guide, we will walk you through building a custom UI to render participant videos using",source:"@site/docs/android/render-participant-videos/custom-ui.mdx",sourceDirName:"render-participant-videos",slug:"/render-participant-videos/custom-ui",permalink:"/android/render-participant-videos/custom-ui",draft:!1,unlisted:!1,editUrl:"https://github.com/productdb/docs/tree/main/docs/android/render-participant-videos/custom-ui.mdx",tags:[],version:"current",lastUpdatedAt:1723760454,formattedLastUpdatedAt:"Aug 15, 2024",sidebarPosition:2,frontMatter:{title:"Building Your Own UI",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Using ProductDBGridView",permalink:"/android/render-participant-videos/using-productdbgrid"},next:{title:"Prebuilt Chat Screen",permalink:"/android/chat/prebuilt-screen"}},l={},s=[{value:"Video Calling Example",id:"video-calling-example",level:2},{value:"Using ProductDBParticipantTileView",id:"using-productdbparticipanttileview",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"Building the UI",id:"building-the-ui",level:2},{value:"Wrap-Up",id:"wrap-up",level:2},{value:"Complete Code",id:"complete-code",level:3}];function c(e){const i={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.p,{children:"In this guide, we will walk you through building a custom UI to render participant videos using\nProductDB's Android UI Kit. We will use an example of a video calling app like FaceTime to demonstrate\nhow to display participant videos in your own UI."}),"\n",(0,n.jsx)(i.h2,{id:"video-calling-example",children:"Video Calling Example"}),"\n",(0,n.jsx)(i.p,{children:"Let's consider a video calling app where two participants are in a call. The UI of our example app\nwill feature:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Remote Participant Tile"}),": This tile will render the video of the other participant, occupying\nthe main area of the screen"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Local User Tile"}),": Positioned at the right-bottom corner, this tile will display your video\ni.e. of the local user"]}),"\n"]}),"\n",(0,n.jsx)("img",{src:"/static/android-ui-kit/render-participant-videos/render-videos-example-ui-wireframe.png",width:"252",height:"560",alt:"Video Calling Example Wireframe",className:"mb-10"}),"\n",(0,n.jsx)(i.h2,{id:"using-productdbparticipanttileview",children:"Using ProductDBParticipantTileView"}),"\n",(0,n.jsxs)(i.p,{children:["To achieve this UI, we will utilize the ",(0,n.jsx)(i.code,{children:"ProductDBParticipantTileView"})," provided by ProductDB's Android UI Kit.\nThis custom Android view renders the video of a single participant and automatically handles displaying\nthe video or a placeholder when the participant turns their camera on or off."]}),"\n",(0,n.jsx)(i.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,n.jsx)(i.p,{children:"Before we begin, let's understand the key components we'll be working with:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"ProductDBParticipantTileView"}),": Renders the video of a single participant"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"ProductDBJoinedMeetingParticipant"}),": Represents a participant who has joined the meeting. The joined list\nin ",(0,n.jsx)(i.code,{children:"ProductDBParticipants"})," holds objects of this type"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"ProductDBSelfParticipant"}),": Represents the local user"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"ProductDBMobileClient"}),": Provides access to meeting and participant information. Use the ",(0,n.jsx)(i.code,{children:"meeting.participants.joined"})," list\nto retrieve the list of participants who have joined the meeting"]}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"building-the-ui",children:"Building the UI"}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"XML Layout"}),": Define the layout of your video calling screen. Use two ",(0,n.jsx)(i.code,{children:"ProductDBParticipantTileViews"}),"\nto represent the remote participant and the local user."]}),"\n"]}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-xml",children:'<?xml version="1.0" encoding="utf-8"?>\n<androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android="http://schemas.android.com/apk/res/android"\n    xmlns:app="http://schemas.android.com/apk/res-auto"\n    xmlns:tools="http://schemas.android.com/tools"\n    android:layout_width="match_parent"\n    android:layout_height="match_parent"\n    tools:context=".VideoCallActivity">\n\n    <dyte.io.uikit.view.participanttile.ProductDBParticipantTileView\n        android:id="@+id/dyteparticipanttileview_remote_participant"\n        android:layout_width="0dp"\n        android:layout_height="0dp"\n        android:layout_margin="16dp"\n        app:layout_constraintBottom_toBottomOf="parent"\n        app:layout_constraintEnd_toEndOf="parent"\n        app:layout_constraintStart_toStartOf="parent"\n        app:layout_constraintTop_toTopOf="parent" />\n\n    <dyte.io.uikit.view.participanttile.ProductDBParticipantTileView\n        android:id="@+id/dyteparticipanttileview_self_participant"\n        android:layout_width="144dp"\n        android:layout_height="200dp"\n        android:layout_margin="24dp"\n        app:layout_constraintBottom_toBottomOf="parent"\n        app:layout_constraintEnd_toEndOf="parent" />\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n'})}),"\n",(0,n.jsxs)(i.ol,{start:"2",children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"UI Logic"}),": Bind the ProductDBParticipantTileViews to the respective participants and activate\nthem to render the videos."]}),"\n"]}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-kotlin",children:"import dyte.io.uikit.view.participanttile.ProductDBParticipantTileView\nimport io.productdb.core.ProductDBMobileClient\n\nclass VideoCallActivity : AppCompatActivity() {\n    private lateinit var selfParticipantTileView: ProductDBParticipantTileView\n    private lateinit var remoteParticipantTileView: ProductDBParticipantTileView\n    private val meeting: ProductDBMobileClient by lazy { ProductDBUIKitBuilder.meeting }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_video_call)\n\n        selfParticipantTileView = findViewById(R.id.dyteparticipanttileview_self_participant)\n        remoteParticipantTileView = findViewById(R.id.dyteparticipanttileview_remote_participant)\n\n        activateUI(meeting)\n    }\n\n    private fun activateUI(meeting: ProductDBMobileClient) {\n        val localUser = meeting.localUser\n        val remoteParticipant = meeting.participants.joined.firstOrNull { it.id != localUser.id } ?: return\n\n        selfParticipantTileView.activate(localUser)\n        remoteParticipantTileView.activate(remoteParticipant)\n    }\n}\n"})}),"\n",(0,n.jsxs)(i.ol,{start:"3",children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Adding Controls"})," (Bonus): You can easily add controls like mic toggle, camera toggle,\nand leave call button using the ",(0,n.jsx)(i.a,{href:"/android/components/productdb-mic-toggle",children:"ProductDBMicToggleButton"}),",\n",(0,n.jsx)(i.a,{href:"/android/components/productdb-camera-toggle",children:"ProductDBCameraToggleButton"}),", and ",(0,n.jsx)(i.a,{href:"/android/components/productdb-leave-button",children:"ProductDBLeaveButton"}),"\nprovided by ProductDB's Android UI Kit."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Here's the screenshot of the UI implemented:"}),"\n",(0,n.jsx)("img",{src:"/static/android-ui-kit/render-participant-videos/render-videos-custom-ui-impl.png",width:"252",height:"560",alt:"Video Calling Example UI",className:"mb-10"}),"\n",(0,n.jsx)(i.h2,{id:"wrap-up",children:"Wrap-Up"}),"\n",(0,n.jsxs)(i.p,{children:["Congratulations! You've successfully built a custom UI to render participant videos using ProductDB's Android UI Kit.",(0,n.jsx)(i.br,{}),"\n","With components like ",(0,n.jsx)(i.strong,{children:"ProductDBGridView"})," and ",(0,n.jsx)(i.strong,{children:"ProductDBParticipantTileView"}),", ProductDB's UI Kit simplifies video rendering\nin meetings and offers the flexibility to create dynamic video calling experiences."]}),"\n",(0,n.jsx)(i.h3,{id:"complete-code",children:"Complete Code"}),"\n",(0,n.jsxs)(i.p,{children:["You can find the complete code for this example in ProductDB's ",(0,n.jsx)(i.a,{href:"https://github.com/productdb-io/android-samples/tree/main/samples/facetime",children:"Facetime sample repository"}),".\nFeel free to explore and try it out!"]})]})}function p(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,i,t)=>{t.d(i,{R:()=>o,x:()=>d});var n=t(96540);const r={},a=n.createContext(r);function o(e){const i=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(a.Provider,{value:i},e.children)}}}]);