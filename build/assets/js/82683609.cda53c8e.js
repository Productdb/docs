"use strict";(self.webpackChunkproductdb_docs=self.webpackChunkproductdb_docs||[]).push([[59449],{8649:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>s,contentTitle:()=>d,default:()=>u,frontMatter:()=>t,metadata:()=>o,toc:()=>l});var r=a(74848),i=a(28453);const t={sidebar_label:"Virtual BG and Noise Cancellation"},d="",o={id:"pre-call/virtual-bg",title:"## Virtual Background",description:"Virtual Background",source:"@site/docs/react-web-core/pre-call/3-virtual-bg.mdx",sourceDirName:"pre-call",slug:"/pre-call/virtual-bg",permalink:"/react-web-core/pre-call/virtual-bg",draft:!1,unlisted:!1,editUrl:"https://github.com/productdb/docs/tree/main/docs/react-web-core/pre-call/3-virtual-bg.mdx",tags:[],version:"current",lastUpdatedAt:1723755734,formattedLastUpdatedAt:"Aug 15, 2024",sidebarPosition:3,frontMatter:{sidebar_label:"Virtual BG and Noise Cancellation"},sidebar:"tutorialSidebar",previous:{title:"Handling Browser Permissions",permalink:"/react-web-core/pre-call/handling-permissions"},next:{title:"Meeting Metadata",permalink:"/react-web-core/pre-call/meeting-meta"}},s={},l=[{value:"Virtual Background",id:"virtual-background",level:2},{value:"Installation",id:"installation",level:3},{value:"Initialize",id:"initialize",level:3},{value:"Add an image as a background",id:"add-an-image-as-a-background",level:3},{value:"Blur the background",id:"blur-the-background",level:3},{value:"Remove blur/virtual background",id:"remove-blurvirtual-background",level:3},{value:"Noise Cancellation (Krisp.ai)",id:"noise-cancellation-krispai",level:2},{value:"Installation",id:"installation-1",level:3},{value:"Usage",id:"usage",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components},{TabItem:a,Tabs:t}=n;return a||h("TabItem",!0),t||h("Tabs",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:""}),"\n",(0,r.jsx)(n.h2,{id:"virtual-background",children:"Virtual Background"}),"\n",(0,r.jsx)(n.h3,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.p,{children:'To enable the virtual background feature in your application, first you need to install the "Background Transformer" package.'}),"\n",(0,r.jsxs)(t,{groupId:"framework",children:[(0,r.jsx)(a,{value:"npm",label:"NPM",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm i @dytesdk/video-background-transformer\n"})})}),(0,r.jsxs)(a,{value:"cdn",label:"CDN",children:[(0,r.jsx)(n.p,{children:"If you are using the web-core CDN script bundle, you can add the package by including a script tag in the head section of your HTML file:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'<script src="https://cdn.jsdelivr.net/npm/@dytesdk/video-background-transformer/dist/index.iife.js"><\/script>\n'})})]})]}),"\n",(0,r.jsx)(n.h3,{id:"initialize",children:"Initialize"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import ProductDBVideoBackgroundTransformer from '@dytesdk/video-background-transformer';\n"})}),"\n",(0,r.jsxs)(n.p,{children:["If you installed the package using a script tag, the ",(0,r.jsx)(n.code,{children:"ProductDBVideoBackgroundTransformer"})," will be automatically available for use once the installation process is complete."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const videoBackgroundTransformer = await ProductDBVideoBackgroundTransformer.init();\n"})}),"\n",(0,r.jsx)(n.h3,{id:"add-an-image-as-a-background",children:"Add an image as a background"}),"\n",(0,r.jsxs)(n.p,{children:["To incorporate an image as a background, create a static background video middleware using the ",(0,r.jsx)(n.code,{children:"createStaticBackgroundVideoMiddleware"})," method provided by the ",(0,r.jsx)(n.code,{children:"videoBackgroundTransformer"})," object."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const videoMiddleware =\n  await videoBackgroundTransformer.createStaticBackgroundVideoMiddleware(\n    `https://assets.productdb.io/backgrounds/bg-productdb-office.jpg`\n  );\nmeeting.self.addVideoMiddleware(videoMiddleware);\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"note",type:"info",children:(0,r.jsx)(n.p,{children:"Ensure that the URL of the image allows Cross-Origin Resource Sharing (CORS) to avoid canvas tainting issues. If the CORS policy is not allowed for the image, it may result in the video feed getting stuck on a frame or appearing blank."})}),"\n",(0,r.jsx)(n.h3,{id:"blur-the-background",children:"Blur the background"}),"\n",(0,r.jsxs)(n.p,{children:["Create a background blur video middleware using the ",(0,r.jsx)(n.code,{children:"createBackgroundBlurVideoMiddleware"})," method provided by the ",(0,r.jsx)(n.code,{children:"videoBackgroundTransformer"})," object."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const videoMiddleware =\n  await videoBackgroundTransformer.createBackgroundBlurVideoMiddleware(10);\nmeeting.self.addVideoMiddleware(videoMiddleware);\n"})}),"\n",(0,r.jsx)(n.p,{children:"Pass intensity as a parameter between 1-100"}),"\n",(0,r.jsx)(n.h3,{id:"remove-blurvirtual-background",children:"Remove blur/virtual background"}),"\n",(0,r.jsxs)(n.p,{children:["Use the ",(0,r.jsx)(n.code,{children:"removeVideoMiddleware"})," method"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"meeting.self.removeVideoMiddleware(videoMiddleware);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"noise-cancellation-krispai",children:"Noise Cancellation (Krisp.ai)"}),"\n",(0,r.jsx)(n.admonition,{title:"note",type:"info",children:(0,r.jsxs)(n.p,{children:["This is a paid addon, contact ",(0,r.jsx)(n.a,{href:"mailto:support@productdb.io",children:"support@productdb.io"})," for access."]})}),"\n",(0,r.jsx)(n.h3,{id:"installation-1",children:"Installation"}),"\n",(0,r.jsx)(n.p,{children:"Create/Append to the .npmrc file in the project root with the below contents"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"//registry.npmjs.org/:_authToken=<token-from-productdb>\n@dytesdk:registry=https://registry.npmjs.org/\n#always-auth=true\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"npm i @dytesdk/krisp-noise-cancellation\n"})}),"\n",(0,r.jsx)(n.h3,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Initialise the middleware"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const krisp = new Krisp();\nawait krisp.init(meeting);\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Enable / disable the noise cancellation"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"krisp.activate()\n// krisp.deactivate()\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}function h(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},28453:(e,n,a)=>{a.d(n,{R:()=>d,x:()=>o});var r=a(96540);const i={},t=r.createContext(i);function d(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);